"use strict";(self.webpackChunkBIADemo=self.webpackChunkBIADemo||[]).push([[835],{6249:(A,l,o)=>{o.d(l,{n:()=>x});var g=o(1564),m=o(2340),v=o(2994),u=o(5e3);let x=(()=>{class s{constructor(c){this.authService=c}canActivate(c,T){return this.authService.hasPermissionObs(c.data.permission).pipe((0,v.b)(d=>{!0!==d&&(window.location.href=m.N.urlErrorPage+"?num=403")}))}}return s.\u0275fac=function(c){return new(c||s)(u.LFG(g.e))},s.\u0275prov=u.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},2762:(A,l,o)=>{o.d(l,{b:()=>m});const m=(0,o(5094).PH)("[Bia] Success the refresh of the list will be done by signalR.")},5835:(A,l,o)=>{o.r(l),o.d(l,{HangfireModule:()=>V});var g=o(4490),m=o(6135),v=o(6249),u=o(9206),x=o(8928),s=o(136),r=o(5094);const c=(0,r.PH)("[Notifications] Failure",(0,r.Ky)()),T=(0,r.PH)("[Notifications] Call worker with notification",(0,r.Ky)());var n=o(5e3),d=o(277),y=o(9808),H=o(845);function P(t,a){if(1&t){const e=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(){n.CHM(e);const f=n.oxw().$implicit;return n.oxw().randomReviewPlane(f.id)}),n.qZA()}if(2&t){const e=n.oxw().$implicit;n.s9C("label",e.title)}}function _(t,a){if(1&t&&(n.ynx(0),n.YNc(1,P,1,1,"button",5),n.BQk()),2&t){const e=a.$implicit,i=n.oxw();n.xp6(1),n.Q6J("ngIf",e.teamTypeId===i.TeamTypeId.Site)}}function L(t,a){if(1&t){const e=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(){n.CHM(e);const f=n.oxw().$implicit;return n.oxw().randomReviewPlane(f.id)}),n.qZA()}if(2&t){const e=n.oxw().$implicit;n.s9C("label",e.title)}}function M(t,a){if(1&t&&(n.ynx(0),n.YNc(1,L,1,1,"button",5),n.BQk()),2&t){const e=a.$implicit,i=n.oxw();n.xp6(1),n.Q6J("ngIf",e.teamTypeId===i.TeamTypeId.AircraftMaintenanceCompany)}}function E(t,a){if(1&t){const e=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(){n.CHM(e);const f=n.oxw().$implicit;return n.oxw().randomReviewPlane(f.id)}),n.qZA()}if(2&t){const e=n.oxw().$implicit;n.hYB("label","",e.parentTeamTitle," > ",e.title,"")}}function R(t,a){if(1&t&&(n.ynx(0),n.YNc(1,E,1,2,"button",5),n.BQk()),2&t){const e=a.$implicit,i=n.oxw();n.xp6(1),n.Q6J("ngIf",e.teamTypeId===i.TeamTypeId.MaintenanceTeam)}}let B=(()=>{class t{constructor(e){this.store=e,this.flex=!0,this.TeamTypeId=s.k0,this.allTeams$=this.store.select(x.qX)}randomReviewPlane(e){this.store.dispatch(T({teamId:e}))}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(r.yh))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-hangfire-index"]],hostVars:2,hostBindings:function(e,i){2&e&&n.ekj("bia-flex",i.flex)},decls:36,vars:9,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],["fxLayout","row wrap"],["fxLayout","row wrap","fxLayoutAlign","space-around"],[4,"ngFor","ngForOf"],["pButton","","type","button",3,"label","click",4,"ngIf"],["pButton","","type","button",3,"label","click"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"div",1),n.TgZ(2,"div",1)(3,"h1"),n._uU(4,"Launch random review plane in hanfire job."),n.qZA()(),n._UZ(5,"div",1),n.qZA(),n._UZ(6,"BR")(7,"BR"),n.TgZ(8,"div",2),n._uU(9," On a plane of one the following\xa0"),n.TgZ(10,"b"),n._uU(11,"Sites"),n.qZA()(),n._UZ(12,"BR"),n.TgZ(13,"div",3),n.YNc(14,_,2,1,"ng-container",4),n.ALo(15,"async"),n.qZA(),n._UZ(16,"BR")(17,"BR"),n.TgZ(18,"div",2),n._uU(19," On a plane of the current site and notify team of type\xa0"),n.TgZ(20,"b"),n._uU(21,"Aircraft Maintenance Company"),n.qZA()(),n._UZ(22,"BR"),n.TgZ(23,"div",3),n.YNc(24,M,2,1,"ng-container",4),n.ALo(25,"async"),n.qZA(),n._UZ(26,"BR")(27,"BR"),n.TgZ(28,"div",2),n._uU(29," On a plane of the current site and notify team of type\xa0"),n.TgZ(30,"b"),n._uU(31,"Maintenance Team"),n.qZA()(),n._UZ(32,"BR"),n.TgZ(33,"div",3),n.YNc(34,R,2,1,"ng-container",4),n.ALo(35,"async"),n.qZA()),2&e&&(n.xp6(14),n.Q6J("ngForOf",n.lcZ(15,3,i.allTeams$)),n.xp6(10),n.Q6J("ngForOf",n.lcZ(25,5,i.allTeams$)),n.xp6(10),n.Q6J("ngForOf",n.lcZ(35,7,i.allTeams$)))},directives:[d.xw,d.Wh,d.SQ,y.sg,y.O5,H.Hq],pipes:[y.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}button[_ngcontent-%COMP%]{margin-bottom:15px}.header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:raleway-thin,serif;font-size:36px;font-weight:200;margin:0;line-height:24px}"]}),t})();const b=(0,o(5685).H)({sortComparer:!1}).getInitialState({lastLazyLoadEvent:{},loadingGet:!1}),w=(0,r.Lq)(b);function F(t,a){return(0,r.UY)({hangfire:w})(t,a)}const U=(0,r.ZF)("hangfire"),C=(0,r.P1)(U,t=>t.hangfire),S=(0,r.P1)(C,t=>t.lastLazyLoadEvent);(0,r.P1)(C,t=>t.loadingGet);var p=o(6517),Z=o(1086),D=o(373),$=o(1406),G=o(7168),N=o(7545),Y=o(4850),Q=o(7221),J=o(2832);let z=(()=>{class t extends J.d{constructor(e){super(e,"hangfires")}randomReviewPlane(e){return this.http.put(this.route+"randomReviewPlane/"+e,null)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(n.zs3))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var K=o(2762),W=o(42);let j=(()=>{class t{constructor(e,i,f,h){this.actions$=e,this.hangfireDas=i,this.biaMessageService=f,this.store=h,this.randomReviewPlane$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(T),(0,D.j)("teamId"),(0,$.b)(I=>(0,Z.of)(I).pipe((0,G.M)(this.store.select(S)))),(0,N.w)(([I,tn])=>this.hangfireDas.randomReviewPlane(I).pipe((0,Y.U)(()=>(this.biaMessageService.showUpdateSuccess(),(0,K.b)())),(0,Q.K)(k=>(this.biaMessageService.showError(),(0,Z.of)(c({error:k}))))))))}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(p.eX),n.LFG(z),n.LFG(W.X),n.LFG(r.yh))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})();const X=[{path:"",data:{breadcrumb:null,permission:u.y.Notification_List_Access},component:B,canActivate:[v.n]},{path:"**",redirectTo:""}];let V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[],imports:[[m.m,g.Bz.forChild(X),r.Aw.forFeature("hangfire",F),p.sQ.forFeature([j])]]}),t})()}}]);