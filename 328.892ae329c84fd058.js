"use strict";(self.webpackChunkBIADemo=self.webpackChunkBIADemo||[]).push([[328],{328:(vt,D,s)=>{s.r(D),s.d(D,{ROUTES:()=>H,UserModule:()=>xt});var $=s(4490),V=s(4394),S=s(9157);const j={columns:[Object.assign(new S.kc("lastName","user.lastName"),{isEditable:!1}),Object.assign(new S.kc("firstName","user.firstName"),{isEditable:!1}),Object.assign(new S.kc("login","user.login"),{isEditable:!1}),Object.assign(new S.kc("roles","member.roles"),{type:S.d5.ManyToMany})]},p=new V.B({featureName:"users",fieldsConfig:j,useCalcMode:!1,useSignalR:!1,useView:!1,usePopup:!0,useOfflineMode:!1});var c,n,M=s(1564),y=s(9206),B=s(2338),W=s(9362),X=s(5685),i=s(5094);(n=c||(c={})).loadAllByPost=(0,i.PH)("["+p.storeKey+"] Load all by post",(0,i.Ky)()),n.load=(0,i.PH)("["+p.storeKey+"] Load",(0,i.Ky)()),n.create=(0,i.PH)("["+p.storeKey+"] Create",(0,i.Ky)()),n.update=(0,i.PH)("["+p.storeKey+"] Update",(0,i.Ky)()),n.remove=(0,i.PH)("["+p.storeKey+"] Remove",(0,i.Ky)()),n.multiRemove=(0,i.PH)("["+p.storeKey+"] Multi Remove",(0,i.Ky)()),n.loadAllByPostSuccess=(0,i.PH)("["+p.storeKey+"] Load all by post success",(0,i.Ky)()),n.loadSuccess=(0,i.PH)("["+p.storeKey+"] Load success",(0,i.Ky)()),n.failure=(0,i.PH)("["+p.storeKey+"] Failure",(0,i.Ky)()),n.synchronize=(0,i.PH)("["+p.storeKey+"] Synchronize");const P=(0,X.H)({selectId:n=>n.id,sortComparer:!1}),k=P.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),q=(0,i.Lq)(k,(0,i.on)(c.loadAllByPost,(n,{})=>Object.assign(Object.assign({},n),{loadingGetAll:!0})),(0,i.on)(c.load,n=>Object.assign(Object.assign({},n),{loadingGet:!0})),(0,i.on)(c.loadAllByPostSuccess,(n,{result:l,event:t})=>{const o=P.setAll(l.data,n);return o.totalCount=l.totalCount,o.lastLazyLoadEvent=t,o.loadingGetAll=!1,o}),(0,i.on)(c.loadSuccess,(n,{user:l})=>Object.assign(Object.assign({},n),{currentUser:l,loadingGet:!1})),(0,i.on)(c.failure,(n,{})=>Object.assign(Object.assign({},n),{loadingGetAll:!1,loadingGet:!1})));var m;!function(n){n.reducers=function l(t,o){return(0,i.UY)({users:q})(t,o)},n.getUsersState=(0,i.ZF)(p.storeKey),n.getUsersEntitiesState=(0,i.P1)(n.getUsersState,t=>t.users),n.getUsersTotalCount=(0,i.P1)(n.getUsersEntitiesState,t=>t.totalCount),n.getCurrentUser=(0,i.P1)(n.getUsersEntitiesState,t=>t.currentUser),n.getLastLazyLoadEvent=(0,i.P1)(n.getUsersEntitiesState,t=>t.lastLazyLoadEvent),n.getUserLoadingGet=(0,i.P1)(n.getUsersEntitiesState,t=>t.loadingGet),n.getUserLoadingGetAll=(0,i.P1)(n.getUsersEntitiesState,t=>t.loadingGetAll),n.getAllUsers=P.getSelectors(n.getUsersEntitiesState).selectAll,n.getUserById=t=>(0,i.P1)(n.getUsersEntitiesState,(n=>l=>l.entities[n])(t))}(m||(m={}));var te=s(6053),h=s(4850),ne=s(5424),oe=s(6875),ae=s(4529),le=s(7358),se=s(136),e=s(5e3);let ie=(()=>{class n extends le.O{constructor(t){super(),this.store=t,this.roleOptions$=this.store.select(ne.wA),this.dictOptionDtos$=(0,te.aj)([this.roleOptions$]).pipe((0,h.U)(o=>[new ae.b("roles",o[0])]))}loadAllOptions(){this.store.dispatch(oe.E.loadAll({teamTypeId:se.k0.Root}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(i.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var re=s(4147);let J=(()=>{class n extends re.Z{constructor(t){super(t,"Users")}synchronize(){return this.http.get(`${this.route}synchronize`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.zs3))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ce=s(3248);let w=(()=>{class n extends W.c{constructor(t,o,a,r,_){super(o,a,r),this.store=t,this.dasService=o,this.signalRService=a,this.optionsService=r,this.authService=_,this.crudItems$=this.store.select(m.getAllUsers),this.totalCount$=this.store.select(m.getUsersTotalCount),this.loadingGetAll$=this.store.select(m.getUserLoadingGetAll),this.lastLazyLoadEvent$=this.store.select(m.getLastLazyLoadEvent),this.crudItem$=this.store.select(m.getCurrentUser),this.loadingGet$=this.store.select(m.getUserLoadingGet)}getParentIds(){return[]}getFeatureName(){return p.featureName}load(t){this.store.dispatch(c.load({id:t}))}loadAllByPost(t){this.store.dispatch(c.loadAllByPost({event:t}))}create(t){this.store.dispatch(c.create({user:t}))}update(t){this.store.dispatch(c.update({user:t}))}remove(t){this.store.dispatch(c.remove({id:t}))}multiRemove(t){this.store.dispatch(c.multiRemove({ids:t}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(i.yh),e.LFG(J),e.LFG(ce.z),e.LFG(ie),e.LFG(M.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var pe=s(9238),A=s(3075),F=s(42),z=s(7171),g=s(9808),b=s(4851),R=s(9783),_e=s(7605),de=s(8786),ue=s(2081);function me(n,l){1&n&&(e.TgZ(0,"th",10),e._UZ(1,"p-tableHeaderCheckbox"),e.qZA())}function ge(n,l){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"p-sortIcon",14),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",e.lcZ(2,3,null==t?null:t.header)," "),e.xp6(2),e.Q6J("field",t.field)}}function fe(n,l){if(1&n&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t?null:t.header)," ")}}function be(n,l){if(1&n&&(e.ynx(0),e.YNc(1,ge,4,5,"th",11),e.YNc(2,fe,3,3,"th",12),e.BQk()),2&n){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",!0===(null==t?null:t.isSortable)),e.xp6(1),e.Q6J("ngIf",!0!==(null==t?null:t.isSortable))}}function Ce(n,l){1&n&&e._UZ(0,"th")}function he(n,l){if(1&n&&(e.TgZ(0,"th",19),e._UZ(1,"bia-table-filter",20),e.qZA()),2&n){const t=l.$implicit;e.oxw(3);const o=e.MAs(1);e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("col",t)("table",o)}}function ye(n,l){if(1&n&&(e.TgZ(0,"tr",16),e.YNc(1,Ce,1,0,"th",17),e.YNc(2,he,2,3,"th",18),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.canSelectElement),e.xp6(1),e.Q6J("ngForOf",t)}}function xe(n,l){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,me,2,0,"th",7),e.YNc(2,be,3,2,"ng-container",8),e.qZA(),e.YNc(3,ye,3,2,"tr",9)),2&n){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.canSelectElement),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",o.showColSearch)}}function ve(n,l){if(1&n&&e._UZ(0,"p-tableCheckbox",25),2&n){const t=e.oxw(2).$implicit;e.Q6J("value",t)}}function Te(n,l){1&n&&e._UZ(0,"i",26)}function Se(n,l){if(1&n&&(e.TgZ(0,"td"),e.YNc(1,ve,1,1,"p-tableCheckbox",23),e.YNc(2,Te,1,0,"i",24),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!0!==o.isFooter(t)&&t.id>0),e.xp6(1),e.Q6J("ngIf",!0===o.isFooter(t))}}function Ue(n,l){1&n&&e.GkF(0)}const Le=function(n,l){return{field:n,form:l}};function Ie(n,l){if(1&n&&e.YNc(0,Ue,1,0,"ng-container",34),2&n){const t=e.oxw(3).$implicit,o=e.oxw(3);e.Q6J("ngTemplateOutlet",o.specificInputTemplate)("ngTemplateOutletContext",e.WLB(2,Le,t,o.form))}}function we(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"bia-table-input",32),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(5).onChange()})("complexInput",function(a){return e.CHM(t),e.oxw(5).onComplexInput(a)}),e.YNc(1,Ie,1,5,"ng-template",33),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,o=e.oxw(3);e.Q6J("field",t)("form",o.form)("dictOptionDtos",o.dictOptionDtos)}}function Ae(n,l){1&n&&e.GkF(0)}const Y=function(n,l){return{field:n,data:l}};function Oe(n,l){if(1&n&&e.YNc(0,Ae,1,0,"ng-container",34),2&n){const t=e.oxw(4).$implicit,o=e.oxw().$implicit,a=e.oxw(2);e.Q6J("ngTemplateOutlet",a.specificOutputTemplate)("ngTemplateOutletContext",e.WLB(2,Y,t,a.getCellData(o,t)))}}function Ee(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"bia-table-output",35),e.YNc(2,Oe,1,5,"ng-template",36),e.qZA(),e.BQk()),2&n){const t=e.oxw(3).$implicit,o=e.oxw().$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("field",t)("data",a.getCellData(o,t))}}function Ze(n,l){if(1&n&&e.YNc(0,Ee,3,2,"ng-container",17),2&n){const t=e.oxw(3).$implicit,o=e.oxw(2);e.Q6J("ngIf",!0!==o.isFooter(t))}}function Me(n,l){if(1&n&&(e.YNc(0,we,2,3,"ng-template",30),e.YNc(1,Ze,1,1,"ng-template",null,31,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",!0===o.isEditable)("ngIfElse",t)}}function Pe(n,l){1&n&&(e.TgZ(0,"label"),e._uU(1,"-"),e.qZA())}function ze(n,l){if(1&n&&e.YNc(0,Pe,2,0,"label",17),2&n){const t=e.oxw(2).$implicit;e.Q6J("ngIf",!0===t.isEditable)}}function Ne(n,l){1&n&&e.GkF(0)}function De(n,l){if(1&n&&e.YNc(0,Ne,1,0,"ng-container",34),2&n){const t=e.oxw(3).$implicit,o=e.oxw().$implicit,a=e.oxw(2);e.Q6J("ngTemplateOutlet",a.specificOutputTemplate)("ngTemplateOutletContext",e.WLB(2,Y,t,a.getCellData(o,t)))}}function $e(n,l){if(1&n&&(e.TgZ(0,"bia-table-output",35),e.YNc(1,De,1,5,"ng-template",36),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw().$implicit,a=e.oxw(2);e.Q6J("field",t)("data",a.getCellData(o,t))}}function Je(n,l){if(1&n&&(e.YNc(0,ze,1,1,"ng-template",30),e.YNc(1,$e,2,2,"ng-template",null,37,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw(2).$implicit,a=e.oxw(2);e.Q6J("ngIf",!0===a.isFooter(o))("ngIfElse",t)}}function Fe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"td",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).initEditableRow(a)}),e.TgZ(1,"p-cellEditor"),e.YNc(2,Me,3,2,"ng-template",28),e.YNc(3,Je,3,2,"ng-template",29),e.qZA()()}}function Re(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr",21),e.NdJ("focusout",function(){return e.CHM(t),e.oxw(2).onFocusout()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).initEditableRow(null)})("keyup.escape",function(){return e.CHM(t),e.oxw(2).cancel()}),e.YNc(1,Se,3,2,"td",17),e.YNc(2,Fe,4,0,"td",22),e.qZA()}if(2&n){const t=l.$implicit,o=l.columns,a=e.oxw(2);e.Q6J("pSelectableRow",!0!==a.isFooter(t)?t:null)("pEditableRow",t),e.xp6(1),e.Q6J("ngIf",a.canSelectElement),e.xp6(1),e.Q6J("ngForOf",o)}}function Ye(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td",38),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=l.$implicit;e.xp6(1),e.uIk("colspan",t.length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"bia.NoRecordsFound")," ")}}function Qe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-table",2,3),e.NdJ("onFilter",function(){return e.CHM(t),e.oxw().onFilter()})("onLazyLoad",function(a){return e.CHM(t),e.oxw().onLoadLazy(a)})("onStateSave",function(a){return e.CHM(t),e.oxw().onStateSave(a)})("selectionChange",function(){return e.CHM(t),e.oxw().onSelectionChange()}),e.ALo(2,"async"),e.YNc(3,xe,4,3,"ng-template",4),e.YNc(4,Re,3,4,"ng-template",5),e.YNc(5,Ye,4,4,"ng-template",6),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",t.displayedColumns)("value",t.elements)("paginator",t.paginator)("rows",t.pageSize)("totalRecords",t.totalRecord)("lazy",!0)("loading",t.loading&&null!==e.lcZ(2,14,t.showLoading$))("stateStorage","session")("stateKey",t.tableStateKey)("lazyLoadOnInit",t.getLazyLoadOnInit())("sortField",t.sortFieldValue)("sortOrder",t.sortOrderValue)}}let Q=(()=>{class n extends pe.M{constructor(t,o,a,r){super(t,o,a,r),this.formBuilder=t,this.authService=o,this.biaMessageService=a,this.translateService=r}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.qu),e.Y36(M.e),e.Y36(F.X),e.Y36(z.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bia-user-table"]],features:[e.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],["class","searchTR",4,"ngIf"],[1,"bia-table-select-col"],["pReorderableColumn","",3,"pSortableColumn",4,"ngIf"],["pReorderableColumn","",4,"ngIf"],["pReorderableColumn","",3,"pSortableColumn"],[3,"field"],["pReorderableColumn",""],[1,"searchTR"],[4,"ngIf"],["pReorderableColumn","",3,"ngSwitch",4,"ngFor","ngForOf"],["pReorderableColumn","",3,"ngSwitch"],[3,"col","table"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[3,"field","form","dictOptionDtos","valueChange","complexInput"],["pTemplate","specificInput"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"field","data"],["pTemplate","specificOutput"],["editRow",""],[1,"app-empty-message"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Qe,6,16,"p-table",1),e.qZA()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("ngIf",o.configuration))},directives:[A._Y,A.JL,A.sg,g.O5,b.iA,R.jx,b.Mo,g.sg,b.Af,b.lQ,b.fz,g.RF,_e.f,b.Ei,b.D$,b.UA,b.YL,de.P,g.tP,ue.T],pipes:[g.Ov,z.X$],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),n})();var Ge=s(5863),Ke=s(1307),N=s(277),He=s(1606),Ve=s(845),je=s(6743),Be=s(4119),We=s(8385),Xe=s(5224);function ke(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onSynchronize()}),e.ALo(1,"translate"),e.qZA()}2&n&&e.s9C("label",e.lcZ(1,1,"bia.synchronize"))}function qe(n,l){if(1&n&&e.YNc(0,ke,2,3,"button",9),2&n){const t=e.oxw();e.Q6J("ngIf",t.canSync)}}function et(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"i",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.useClacModeChange(!a.crudConfiguration.useCalcMode)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"i",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.useViewChange(!a.crudConfiguration.useView)}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.useSignalRChange(!a.crudConfiguration.useSignalR)}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"i",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.usePopupChange(!a.crudConfiguration.usePopup)}),e.ALo(8,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Tol(t.crudConfiguration.useCalcMode?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(2,12,"bia.useCalcMode")),e.xp6(2),e.Tol(t.crudConfiguration.useView?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(4,14,"bia.useView")),e.xp6(2),e.Tol(t.crudConfiguration.useSignalR?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(6,16,"bia.useSignalR")),e.xp6(2),e.Tol(t.crudConfiguration.usePopup?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(8,18,"bia.usePopup"))}}function tt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"bia-table",16),e.NdJ("clickRow",function(a){return e.CHM(t),e.oxw().onClickRow(a)})("loadLazy",function(a){return e.CHM(t),e.oxw().onLoadLazy(a)})("selectedElementsChanged",function(a){return e.CHM(t),e.oxw().onSelectedElementsChanged(a)})("stateSave",function(a){return e.CHM(t),e.oxw().onStateSave(a)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("elements",e.lcZ(1,13,t.crudItems$))("totalRecord",e.lcZ(2,15,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.crudConfiguration.fieldsConfig)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canClickRow",t.canEdit)("canSelectElement",t.canDelete)("loading",e.lcZ(3,17,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)("sortFieldValue",t.sortFieldValue)}}function nt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"bia-user-table",17),e.NdJ("loadLazy",function(a){return e.CHM(t),e.oxw().onLoadLazy(a)})("selectedElementsChanged",function(a){return e.CHM(t),e.oxw().onSelectedElementsChanged(a)})("stateSave",function(a){return e.CHM(t),e.oxw().onStateSave(a)})("save",function(a){return e.CHM(t),e.oxw().onSave(a)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("elements",e.lcZ(1,15,t.crudItems$))("dictOptionDtos",e.lcZ(2,17,t.userService.optionsService.dictOptionDtos$))("totalRecord",e.lcZ(3,19,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.crudConfiguration.fieldsConfig)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canAdd",!1)("canSelectElement",t.canDelete)("loading",e.lcZ(4,21,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)("sortFieldValue",t.sortFieldValue)}}let ot=(()=>{class n extends B.t{constructor(t,o,a){super(t,o),this.injector=t,this.userService=o,this.authService=a,this.canSync=!1,this.displayUserAddFromDirectoryDialog=!1,this.crudConfiguration=p}setPermissions(){this.canSync=this.authService.hasPermission(y.y.User_Sync),this.canEdit=this.authService.hasPermission(y.y.User_UpdateRoles),this.canDelete=this.authService.hasPermission(y.y.User_Delete),this.canAdd=this.authService.hasPermission(y.y.User_Add)}ngOnInit(){super.ngOnInit(),this.sub.add(this.store.select(Ge.nC).pipe((0,Ke.T)(1)).subscribe(t=>{setTimeout(()=>this.onLoadLazy(this.crudItemListComponent.getLazyLoadMetadata()))}))}onCreate(){this.displayUserAddFromDirectoryDialog=!0}onSynchronize(){this.store.dispatch(c.synchronize())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(w),e.Y36(M.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bia-users-index"]],viewQuery:function(t,o){if(1&t&&e.Gf(Q,5),2&t){let a;e.iGM(a=e.CRH())&&(o.crudItemTableComponent=a.first)}},features:[e.qOj],decls:11,vars:20,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],["pTemplate","actionOnList"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","tableState","defaultViewPref","useViewTeamWithTypeId","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],["pTemplate","customControl"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","clickRow","loadLazy","selectedElementsChanged","stateSave",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","loadLazy","selectedElementsChanged","stateSave","save",4,"ngIf"],[3,"display","displayChange"],["pButton","","class","p-button-outlined",3,"label","click",4,"ngIf"],["pButton","",1,"p-button-outlined",3,"label","click"],["fxLayout","row","fxLayoutGap","20px",1,"bia-table-controller-container"],["tooltipPosition","top",1,"pi","pi-table","bia-pointer",3,"pTooltip","click"],["tooltipPosition","top",1,"pi","pi-eye","bia-pointer",3,"pTooltip","click"],["tooltipPosition","top",1,"pi","pi-sync","bia-pointer",3,"pTooltip","click"],["tooltipPosition","top",1,"pi","pi-clone","bia-pointer",3,"pTooltip","click"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","clickRow","loadLazy","selectedElementsChanged","stateSave"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","loadLazy","selectedElementsChanged","stateSave","save"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"bia-table-header",2),e.NdJ("create",function(){return o.onCreate()})("exportCSV",function(){return o.onExportCSV()})("delete",function(){return o.onDelete()}),e.ALo(3,"translate"),e.YNc(4,qe,1,1,"ng-template",3),e.qZA(),e.TgZ(5,"bia-table-controller",4),e.NdJ("displayedColumnsChange",function(r){return o.displayedColumnsChanged(r)})("filter",function(r){return o.searchGlobalChanged(r)})("pageSizeChange",function(r){return o.onPageSizeChange(r)})("toggleSearch",function(){return o.onToggleSearch()})("viewChange",function(r){return o.onViewChange(r)}),e.ALo(6,"async"),e.YNc(7,et,9,20,"ng-template",5),e.qZA(),e.YNc(8,tt,4,19,"bia-table",6),e.YNc(9,nt,5,23,"bia-user-table",7),e.qZA()(),e.TgZ(10,"bia-user-add-from-directory-dialog",8),e.NdJ("displayChange",function(r){return o.displayUserAddFromDirectoryDialog=r}),e.qZA()),2&t&&(e.xp6(2),e.Q6J("headerTitle",e.lcZ(3,16,"user.listOf"))("canAdd",o.canAdd)("canDelete",o.canDelete)("canExportCSV",!0)("selectedElements",o.selectedCrudItems),e.xp6(3),e.Q6J("defaultPageSize",o.defaultPageSize)("length",e.lcZ(6,18,o.totalCount$))("columns",o.columns)("columnToDisplays",o.displayedColumns)("tableStateKey",o.tableStateKey)("tableState",o.tableState)("defaultViewPref",o.defaultViewPref)("useViewTeamWithTypeId",o.useViewTeamWithTypeId),e.xp6(3),e.Q6J("ngIf",!o.crudConfiguration.useCalcMode),e.xp6(1),e.Q6J("ngIf",o.crudConfiguration.useCalcMode),e.xp6(1),e.Q6J("display",o.displayUserAddFromDirectoryDialog))},directives:[N.xw,N.yH,He.l,R.jx,g.O5,Ve.Hq,je.B,N.SQ,Be.u,We.$,Q,Xe.C],pipes:[z.X$,g.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),n})();var at=s(6135),O=s(6249),lt=s(466),st=s(7224),it=s(3004),G=s(9373);function rt(n,l){1&n&&e._UZ(0,"bia-spinner",1),2&n&&e.Q6J("overlay",!0)}let ct=(()=>{class n extends it.m{constructor(t,o,a,r){super(o,a),this.store=t,this.injector=o,this.userService=a,this.layoutService=r}ngOnInit(){super.ngOnInit(),this.sub.add(this.userService.crudItem$.subscribe(t=>{(null==t?void 0:t.displayName)&&(this.route.data.pipe((0,st.P)()).subscribe(o=>{o.breadcrumb=t.displayName}),this.layoutService.refreshBreadcrumb())}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.yh),e.Y36(e.zs3),e.Y36(w),e.Y36(lt.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,o){1&t&&(e._UZ(0,"router-outlet"),e.YNc(1,rt,1,1,"bia-spinner",0),e.ALo(2,"async")),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.crudItemService.loadingGet$)))},directives:[$.lC,g.O5,G.O],pipes:[g.Ov],styles:[""]}),n})();var E=s(8832),U=s(3460),pt=s(956),_t=s(9517),dt=s(459),ut=s(3569);let K=(()=>{class n extends dt.V{}return n.\u0275fac=function(){let l;return function(o){return(l||(l=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["bia-user-form"]],features:[e.qOj],decls:1,vars:3,consts:[[3,"element","fields","dictOptionDtos","save","cancel"]],template:function(t,o){1&t&&(e.TgZ(0,"bia-form",0),e.NdJ("save",function(r){return o.onSave(r)})("cancel",function(){return o.onCancel()}),e.qZA()),2&t&&e.Q6J("element",o.crudItem)("fields",o.fields)("dictOptionDtos",o.dictOptionDtos)},directives:[ut.E],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})();function mt(n,l){1&n&&e._UZ(0,"bia-spinner",2),2&n&&e.Q6J("overlay",!0)}let gt=(()=>{class n extends _t.G{constructor(t,o){super(t,o),this.injector=t,this.userService=o,this.crudConfiguration=p}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(w))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bia-user-edit"]],features:[e.qOj],decls:5,vars:10,consts:[[3,"crudItem","fields","dictOptionDtos","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,o){1&t&&(e.TgZ(0,"bia-user-form",0),e.NdJ("cancel",function(){return o.onCancelled()})("save",function(r){return o.onSubmitted(r)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA(),e.YNc(3,mt,1,1,"bia-spinner",1),e.ALo(4,"async")),2&t&&(e.Q6J("crudItem",e.lcZ(1,4,o.userService.crudItem$))("fields",o.crudConfiguration.fieldsConfig.columns)("dictOptionDtos",e.lcZ(2,6,o.userService.optionsService.dictOptionDtos$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,8,o.userService.loadingGet$)))},directives:[K,g.O5,G.O],pipes:[g.Ov],encapsulation:2}),n})();var ft=s(6161);let bt=(()=>{class n extends ft.J{constructor(t,o){super(t,o),this.injector=t,this.userService=o,this.crudConfiguration=p}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(w))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bia-user-new"]],features:[e.qOj],decls:2,vars:4,consts:[[3,"fields","dictOptionDtos","cancel","save"]],template:function(t,o){1&t&&(e.TgZ(0,"bia-user-form",0),e.NdJ("cancel",function(){return o.onCancelled()})("save",function(r){return o.onSubmitted(r)}),e.ALo(1,"async"),e.qZA()),2&t&&e.Q6J("fields",o.crudConfiguration.fieldsConfig.columns)("dictOptionDtos",e.lcZ(1,2,o.userService.optionsService.dictOptionDtos$))},directives:[K],pipes:[g.Ov],encapsulation:2}),n})();var u=s(6517),f=s(1086),T=s(373),x=s(7545),v=s(7221),L=s(1406),I=s(7168),Z=s(2762);let Ct=(()=>{class n{constructor(t,o,a,r){this.actions$=t,this.userDas=o,this.biaMessageService=a,this.store=r,this.loadAllByPost$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.loadAllByPost),(0,T.j)("event"),(0,x.w)(_=>this.userDas.getListByPost({event:_}).pipe((0,h.U)(d=>c.loadAllByPostSuccess({result:d,event:_})),(0,v.K)(d=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:d})))))))),this.load$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.load),(0,T.j)("id"),(0,x.w)(_=>this.userDas.get({id:_}).pipe((0,h.U)(d=>c.loadSuccess({user:d})),(0,v.K)(d=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:d})))))))),this.create$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.create),(0,T.j)("user"),(0,L.b)(_=>(0,f.of)(_).pipe((0,I.M)(this.store.select(m.getLastLazyLoadEvent)))),(0,x.w)(([_,d])=>this.userDas.post({item:_,offlineMode:p.useOfflineMode}).pipe((0,h.U)(()=>(this.biaMessageService.showAddSuccess(),p.useSignalR?(0,Z.b)():c.loadAllByPost({event:d}))),(0,v.K)(C=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:C})))))))),this.update$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.update),(0,T.j)("user"),(0,L.b)(_=>(0,f.of)(_).pipe((0,I.M)(this.store.select(m.getLastLazyLoadEvent)))),(0,x.w)(([_,d])=>this.userDas.put({item:_,id:_.id,offlineMode:p.useOfflineMode}).pipe((0,h.U)(()=>(this.biaMessageService.showUpdateSuccess(),p.useSignalR?(0,Z.b)():c.loadAllByPost({event:d}))),(0,v.K)(C=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:C})))))))),this.destroy$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.remove),(0,T.j)("id"),(0,L.b)(_=>(0,f.of)(_).pipe((0,I.M)(this.store.select(m.getLastLazyLoadEvent)))),(0,x.w)(([_,d])=>this.userDas.delete({id:_,offlineMode:p.useOfflineMode}).pipe((0,h.U)(()=>(this.biaMessageService.showDeleteSuccess(),p.useSignalR?(0,Z.b)():c.loadAllByPost({event:d}))),(0,v.K)(C=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:C})))))))),this.multiDestroy$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.multiRemove),(0,T.j)("ids"),(0,L.b)(_=>(0,f.of)(_).pipe((0,I.M)(this.store.select(m.getLastLazyLoadEvent)))),(0,x.w)(([_,d])=>this.userDas.deletes({ids:_,offlineMode:p.useOfflineMode}).pipe((0,h.U)(()=>(this.biaMessageService.showDeleteSuccess(),p.useSignalR?(0,Z.b)():c.loadAllByPost({event:d}))),(0,v.K)(C=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:C})))))))),this.synchronize$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.synchronize),(0,L.b)(_=>(0,f.of)(_).pipe((0,I.M)(this.store.select(m.getLastLazyLoadEvent)))),(0,x.w)(([_,d])=>this.userDas.synchronize().pipe((0,h.U)(()=>(this.biaMessageService.showSyncSuccess(),c.loadAllByPost({event:d}))),(0,v.K)(C=>(this.biaMessageService.showError(),(0,f.of)(c.failure({error:{concern:"CREATE",error:C}}))))))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.eX),e.LFG(J),e.LFG(F.X),e.LFG(i.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var ht=s(2566),yt=s(3822);let H=[{path:"",data:{breadcrumb:null,permission:y.y.User_List_Access,InjectComponent:ot},component:U.e,canActivate:[O.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:y.y.User_Add,title:"user.add",InjectComponent:bt,dynamicComponent:()=>p.usePopup?E._:U.e},component:p.usePopup?E._:U.e,canActivate:[O.n]},{path:":crudItemId",data:{breadcrumb:"",canNavigate:!0},component:ct,canActivate:[O.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:y.y.User_UpdateRoles,title:"user.edit",InjectComponent:gt,dynamicComponent:()=>p.usePopup?E._:U.e},component:p.usePopup?E._:U.e,canActivate:[O.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],xt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[at.m,pt.U,$.Bz.forChild(H),i.Aw.forFeature(p.storeKey,m.reducers),u.sQ.forFeature([Ct]),ht.p,yt.q]]}),n})()}}]);