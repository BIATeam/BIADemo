!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,i,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(l){s=!0,i=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[791],{63791:function(t,i,o){o.r(i),o.d(i,{PlaneModule:function(){return Ye}});var u,p,d=o(94666),h=o(86710),f=o(91601),v=o(25917),y=o(92996),g=o(43190),b=o(88002),m=o(5304),S=o(94612),A=o(57057),w=o(40136),C="feature-planes",T=w.k0.Site;(p=u||(u={})).loadAllByPost=(0,h.PH)("["+C+"] Load all by post",(0,h.Ky)()),p.load=(0,h.PH)("["+C+"] Load",(0,h.Ky)()),p.create=(0,h.PH)("["+C+"] Create",(0,h.Ky)()),p.update=(0,h.PH)("["+C+"] Update",(0,h.Ky)()),p.remove=(0,h.PH)("["+C+"] Remove",(0,h.Ky)()),p.multiRemove=(0,h.PH)("["+C+"] Multi Remove",(0,h.Ky)()),p.loadAllByPostSuccess=(0,h.PH)("["+C+"] Load all by post success",(0,h.Ky)()),p.loadSuccess=(0,h.PH)("["+C+"] Load success",(0,h.Ky)()),p.failure=(0,h.PH)("["+C+"] Failure",(0,h.Ky)());var Z=o(74147),O=o(37716),L=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,e);var t=c(n);function n(e){return s(this,n),t.call(this,e,"Planes")}return n}(Z.Z);return e.\u0275fac=function(t){return new(t||e)(O.LFG(O.zs3))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),P=(0,o(80273).H)({selectId:function(e){return e.id},sortComparer:!1}),D=P.getInitialState({totalCount:0,currentPlane:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),x=(0,h.Lq)(D,(0,h.on)(u.loadAllByPost,function(e,t){return r(t),Object.assign(Object.assign({},e),{loadingGetAll:!0})}),(0,h.on)(u.load,function(e){return Object.assign(Object.assign({},e),{loadingGet:!0})}),(0,h.on)(u.loadAllByPostSuccess,function(e,t){var n=t.result,a=t.event,i=P.setAll(n.data,e);return i.totalCount=n.totalCount,i.lastLazyLoadEvent=a,i.loadingGetAll=!1,i}),(0,h.on)(u.loadSuccess,function(e,t){var n=t.plane;return Object.assign(Object.assign({},e),{currentPlane:n,loadingGet:!1})}),(0,h.on)(u.failure,function(e,t){return r(t),Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})}));function k(e,t){return(0,h.UY)({planes:x})(e,t)}var M=(0,h.ZF)(C),q=(0,h.P1)(M,function(e){return e.planes}),I=(0,h.P1)(q,function(e){return e.totalCount}),R=(0,h.P1)(q,function(e){return e.currentPlane}),E=(0,h.P1)(q,function(e){return e.lastLazyLoadEvent}),$=(0,h.P1)(q,function(e){return e.loadingGet}),_=(0,h.P1)(q,function(e){return e.loadingGetAll}),z=P.getSelectors(q).selectAll;o(82762);var j=o(42),F=function(){var e=function e(t,n,i,o){var r=this;s(this,e),this.actions$=t,this.planeDas=n,this.biaMessageService=i,this.store=o,this.loadAllByPost$=(0,f.GW)(function(){return r.actions$.pipe((0,f.l4)(u.loadAllByPost),(0,y.j)("event"),(0,g.w)(function(e){return r.planeDas.getListByPost({event:e}).pipe((0,b.U)(function(t){return u.loadAllByPostSuccess({result:t,event:e})}),(0,m.K)(function(e){return r.biaMessageService.showError(),(0,v.of)(u.failure({error:e}))}))}))}),this.load$=(0,f.GW)(function(){return r.actions$.pipe((0,f.l4)(u.load),(0,y.j)("id"),(0,g.w)(function(e){return r.planeDas.get({id:e}).pipe((0,b.U)(function(e){return u.loadSuccess({plane:e})}),(0,m.K)(function(e){return r.biaMessageService.showError(),(0,v.of)(u.failure({error:e}))}))}))}),this.create$=(0,f.GW)(function(){return r.actions$.pipe((0,f.l4)(u.create),(0,y.j)("plane"),(0,S.b)(function(e){return(0,v.of)(e).pipe((0,A.M)(r.store.select(E)))}),(0,g.w)(function(e){var t=a(e,2),n=t[0],i=t[1];return r.planeDas.post({item:n}).pipe((0,b.U)(function(){return r.biaMessageService.showAddSuccess(),u.loadAllByPost({event:i})}),(0,m.K)(function(e){return r.biaMessageService.showError(),(0,v.of)(u.failure({error:e}))}))}))}),this.update$=(0,f.GW)(function(){return r.actions$.pipe((0,f.l4)(u.update),(0,y.j)("plane"),(0,S.b)(function(e){return(0,v.of)(e).pipe((0,A.M)(r.store.select(E)))}),(0,g.w)(function(e){var t=a(e,2),n=t[0],i=t[1];return r.planeDas.put({item:n,id:n.id}).pipe((0,b.U)(function(){return r.biaMessageService.showUpdateSuccess(),u.loadAllByPost({event:i})}),(0,m.K)(function(e){return r.biaMessageService.showError(),(0,v.of)(u.failure({error:e}))}))}))}),this.destroy$=(0,f.GW)(function(){return r.actions$.pipe((0,f.l4)(u.remove),(0,y.j)("id"),(0,S.b)(function(e){return(0,v.of)(e).pipe((0,A.M)(r.store.select(E)))}),(0,g.w)(function(e){var t=a(e,2),n=t[0],i=t[1];return r.planeDas.delete({id:n}).pipe((0,b.U)(function(){return r.biaMessageService.showDeleteSuccess(),u.loadAllByPost({event:i})}),(0,m.K)(function(e){return r.biaMessageService.showError(),(0,v.of)(u.failure({error:e}))}))}))}),this.multiDestroy$=(0,f.GW)(function(){return r.actions$.pipe((0,f.l4)(u.multiRemove),(0,y.j)("ids"),(0,S.b)(function(e){return(0,v.of)(e).pipe((0,A.M)(r.store.select(E)))}),(0,g.w)(function(e){var t=a(e,2),n=t[0],i=t[1];return r.planeDas.deletes({ids:n}).pipe((0,b.U)(function(){return r.biaMessageService.showDeleteSuccess(),u.loadAllByPost({event:i})}),(0,m.K)(function(e){return r.biaMessageService.showError(),(0,v.of)(u.failure({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(O.LFG(f.eX),O.LFG(L),O.LFG(j.X),O.LFG(h.yh))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac}),e}(),G=o(75319),Y=o(88385),U=o(79090),J=o(39083),B=o(49457),K=o(38042),V=o(29206),N=o(28049),H=o(59142),Q=function(){var e=function(){function e(t,n,a){s(this,e),this.store=t,this.signalRService=n,this.authService=a}return n(e,[{key:"initialize",value:function(){var e=this;console.log("%c [Planes] Register SignalR : refresh-planes","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-planes",function(){e.store.select(E).pipe((0,N.P)()).subscribe(function(t){console.log("%c [Planes] RefreshSuccess","color: green; font-weight: bold"),e.store.dispatch(u.loadAllByPost({event:t}))})}),this.targetedFeature={parentKey:this.authService.getCurrentTeamId(w.k0.Site).toString(),featureName:"planes"},this.signalRService.joinGroup(this.targetedFeature)}},{key:"destroy",value:function(){console.log("%c [Planes] Unregister SignalR : refresh-planes","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-planes"),this.signalRService.leaveGroup(this.targetedFeature)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(h.yh),O.LFG(H.Y),O.LFG(J.e))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),W=o(46468),X=o(9112),ee=o(76668),te=o(59931),ne=o(84845),ae=o(37597),ie=o(94529),oe=function(){var e=function(){function e(t){s(this,e),this.store=t,this.planeTypeOptions$=this.store.select(ne.by),this.airportOptions$=this.store.select(ee.HJ),this.dictOptionDtos$=(0,X.aj)([this.planeTypeOptions$,this.airportOptions$]).pipe((0,b.U)(function(e){return[new ie.b("planeType",e[0]),new ie.b("connectingAirports",e[1])]}))}return n(e,[{key:"loadAllOptions",value:function(){this.store.dispatch(ae.l.loadAll()),this.store.dispatch(te.q.loadAll())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(h.yh))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),re=o(95336),se=o(13653),le=o(81780),ce=o(35618),ue=o(81606),pe=o(76743),de=o(38583);function he(e,t){if(1&e){var n=O.EpF();O.TgZ(0,"bia-table",6),O.NdJ("clickRow",function(e){return O.CHM(n),O.oxw().onEdit(e)})("loadLazy",function(e){return O.CHM(n),O.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return O.CHM(n),O.oxw().onSelectedElementsChanged(e)}),O.ALo(1,"async"),O.ALo(2,"async"),O.ALo(3,"async"),O.qZA()}if(2&e){var a=O.oxw();O.Q6J("elements",O.lcZ(1,12,a.planes$))("totalRecord",O.lcZ(2,14,a.totalCount$))("columnToDisplays",a.displayedColumns)("pageSize",a.pageSize)("configuration",a.tableConfiguration)("showColSearch",a.showColSearch)("globalSearchValue",a.globalSearchValue)("canClickRow",a.canEdit)("canSelectElement",a.canDelete)("loading",O.lcZ(3,16,a.loading$))("viewPreference",a.viewPreference)("tableStateKey",a.tableStateKey)}}function fe(e,t){if(1&e){var n=O.EpF();O.TgZ(0,"app-plane-table",7),O.NdJ("loadLazy",function(e){return O.CHM(n),O.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return O.CHM(n),O.oxw().onSelectedElementsChanged(e)})("save",function(e){return O.CHM(n),O.oxw().onSave(e)}),O.ALo(1,"async"),O.ALo(2,"async"),O.ALo(3,"async"),O.ALo(4,"async"),O.qZA()}if(2&e){var a=O.oxw();O.Q6J("elements",O.lcZ(1,14,a.planes$))("dictOptionDtos",O.lcZ(2,16,a.planeOptionsService.dictOptionDtos$))("totalRecord",O.lcZ(3,18,a.totalCount$))("columnToDisplays",a.displayedColumns)("pageSize",a.pageSize)("configuration",a.tableConfiguration)("showColSearch",a.showColSearch)("globalSearchValue",a.globalSearchValue)("canEdit",a.canEdit)("canAdd",a.canAdd)("canSelectElement",a.canDelete)("loading",O.lcZ(4,20,a.loading$))("viewPreference",a.viewPreference)("tableStateKey",a.tableStateKey)}}var ve=function(){var t=function(){function t(e,n,a,i,o,r,l,c,u){s(this,t),this.store=e,this.router=n,this.activatedRoute=a,this.authService=i,this.planeDas=o,this.translateService=r,this.biaTranslationService=l,this.planesSignalRService=c,this.planeOptionsService=u,this.useCalcMode=!1,this.useSignalR=!1,this.useView=!1,this.useRefreshAtLanguageChange=!1,this.flex=!0,this.sub=new G.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=w.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"planesGrid":void 0,this.useViewTeamWithTypeId=this.useView?T:null}return n(t,[{key:"planeListComponent",get:function(){return void 0!==this.biaTableComponent?this.biaTableComponent:this.planeTableComponent}},{key:"ngOnInit",value:function(){var e=this;this.parentIds=[],this.sub=new G.w,this.initTableConfiguration(),this.setPermissions(),this.planes$=this.store.select(z),this.totalCount$=this.store.select(I),this.loading$=this.store.select(_),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(t){e.planeOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange&&this.sub.add(this.biaTranslationService.currentCulture$.pipe((0,se.T)(1)).subscribe(function(t){e.onLoadLazy(e.planeListComponent.getLazyLoadMetadata())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe(),this.OnHide()}},{key:"OnDisplay",value:function(){this.useView&&this.store.dispatch((0,W.Tx)()),this.useSignalR&&this.planesSignalRService.initialize()}},{key:"OnHide",value:function(){this.useSignalR&&this.planesSignalRService.destroy()}},{key:"onCreate",value:function(){this.useCalcMode||this.router.navigate(["create"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(e){this.useCalcMode||this.router.navigate([e,"edit"],{relativeTo:this.activatedRoute})}},{key:"onSave",value:function(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(u.update({plane:e})):this.canAdd&&this.store.dispatch(u.create({plane:e})))}},{key:"onDelete",value:function(){this.selectedPlanes&&this.canDelete&&this.store.dispatch(u.multiRemove({ids:this.selectedPlanes.map(function(e){return e.id})}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedPlanes=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){var t=Object.assign({parentIds:this.parentIds},e);this.store.dispatch(u.loadAllByPost({event:t}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map(function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)});var n=Object.assign({parentIds:this.parentIds,columns:t},this.planeListComponent.getLazyLoadMetadata());this.planeDas.getFile(n).subscribe(function(t){B.saveAs(t,e.translateService.instant("app.planes")+".csv")})}},{key:"setPermissions",value:function(){this.canEdit=this.authService.hasPermission(V.y.Plane_Update),this.canDelete=this.authService.hasPermission(V.y.Plane_Delete),this.canAdd=this.authService.hasPermission(V.y.Plane_Create)}},{key:"initTableConfiguration",value:function(){var t=this;this.biaTranslationService.currentCultureDateFormat$.subscribe(function(n){t.tableConfiguration={columns:[new U.ML("msn","plane.msn"),Object.assign(new U.ML("isActive","plane.isActive"),{isSearchable:!1,isSortable:!1,type:U.d5.Boolean}),Object.assign(new U.ML("lastFlightDate","plane.lastFlightDate"),{type:U.d5.DateTime,formatDate:n.dateTimeFormat}),Object.assign(new U.ML("deliveryDate","plane.deliveryDate"),{type:U.d5.Date,formatDate:n.dateFormat}),Object.assign(new U.ML("syncTime","plane.syncTime"),{type:U.d5.TimeSecOnly,formatDate:n.timeFormatSec}),Object.assign(new U.ML("capacity","plane.capacity"),{type:U.d5.Number,filterMode:U.ZF.Equals}),Object.assign(new U.ML("planeType","plane.planeType"),{type:U.d5.OneToMany}),Object.assign(new U.ML("connectingAirports","plane.connectingAirports"),{type:U.d5.ManyToMany})]},t.columns=t.tableConfiguration.columns.map(function(e){return{key:e.field,value:e.header}}),t.displayedColumns=e(t.columns)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(O.Y36(h.yh),O.Y36(d.F0),O.Y36(d.gz),O.Y36(J.e),O.Y36(L),O.Y36(le.sK),O.Y36(K.P6),O.Y36(Q),O.Y36(oe))},t.\u0275cmp=O.Xpm({type:t,selectors:[["app-planes-index"]],viewQuery:function(e,t){var n;(1&e&&(O.Gf(Y.$,5),O.Gf(re.t,5)),2&e)&&(O.iGM(n=O.CRH())&&(t.biaTableComponent=n.first),O.iGM(n=O.CRH())&&(t.planeTableComponent=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&O.ekj("bia-flex",t.flex)},decls:8,vars:17,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","useViewTeamWithTypeId","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(O.TgZ(0,"div",0),O.TgZ(1,"div",1),O.TgZ(2,"bia-table-header",2),O.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),O.ALo(3,"translate"),O.qZA(),O.TgZ(4,"bia-table-controller",3),O.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),O.ALo(5,"async"),O.qZA(),O.YNc(6,he,4,18,"bia-table",4),O.YNc(7,fe,5,22,"app-plane-table",5),O.qZA(),O.qZA()),2&e&&(O.xp6(2),O.Q6J("headerTitle",O.lcZ(3,13,"plane.listOf"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedPlanes),O.xp6(2),O.Q6J("defaultPageSize",t.defaultPageSize)("length",O.lcZ(5,15,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey)("useViewTeamWithTypeId",t.useViewTeamWithTypeId),O.xp6(2),O.Q6J("ngIf",!t.useCalcMode),O.xp6(1),O.Q6J("ngIf",t.useCalcMode))},directives:[ce.xw,ce.yH,ue.l,pe.B,de.O5,Y.$,re.t],pipes:[le.X$,de.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t}(),ye=o(61028),ge=o(3679),be=o(11466),me=o(13928),Se=o(12332),Ae=o(88598),we=o(45862),Ce=o(50103),Te=o(36949),Ze=o(4207),Oe=function(){return{width:"100%"}},Le=function(){return{width:"100%"}},Pe=function(){var e=function(){function e(t,n){s(this,e),this.formBuilder=t,this.authService=n,this.plane={},this.save=new O.vpe,this.cancel=new O.vpe,this.initForm()}return n(e,[{key:"ngOnChanges",value:function(e){this.plane&&(this.form.reset(),this.plane&&this.form.patchValue(Object.assign({},this.plane)))}},{key:"initForm",value:function(){var e;this.form=this.formBuilder.group({id:[this.plane.id],msn:[this.plane.msn,ge.kI.required],isActive:[this.plane.isActive],lastFlightDate:[this.plane.lastFlightDate],deliveryDate:[this.plane.deliveryDate],syncTime:[this.plane.syncTime],capacity:[this.plane.capacity,ge.kI.required],connectingAirports:[this.plane.connectingAirports],planeType:[null===(e=this.plane.planeType)||void 0===e?void 0:e.id]})}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.isActive=!!t.isActive&&t.isActive,t.connectingAirports=be.P.Differential(t.connectingAirports,null===(e=this.plane)||void 0===e?void 0:e.connectingAirports),t.planeType=be.P.Clone(t.planeType),t.siteId=this.authService.getCurrentTeamId(w.k0.Site),this.save.emit(t),this.form.reset()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.Y36(ge.qu),O.Y36(J.e))},e.\u0275cmp=O.Xpm({type:e,selectors:[["app-plane-form"]],inputs:{plane:"plane",airportOptions:"airportOptions",planeTypeOptions:"planeTypeOptions"},outputs:{save:"save",cancel:"cancel"},features:[O.TTD],decls:63,vars:50,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["formControlName","msn","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["binary","true","formControlName","isActive",3,"label"],["biaLocale","","formControlName","lastFlightDate","showTime","true","placeholder","DateTime","dateFormat","yy-mm-dd","placeholder","\xa0","appendTo","body",3,"inputStyle"],["biaLocale","","formControlName","deliveryDate","placeholder","\xa0","appendTo","body","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["formControlName","syncTime","showTime","true","showSeconds","true","placeholder","\xa0","dataType","string","appendTo","body",3,"timeOnly","inputStyle"],["formControlName","capacity","type","number","pInputText","",2,"width","100%"],["placeholder","\xa0","formControlName","planeType","optionLabel","display","datakey","id","appendTo","body",3,"options","showClear"],["defaultLabel","\xa0","formControlName","connectingAirports","optionLabel","display","datakey","id","appendTo","body",3,"options","virtualScroll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(O.TgZ(0,"form",0),O.NdJ("submit",function(){return t.onSubmit()}),O.TgZ(1,"div",1),O.TgZ(2,"div",2),O.TgZ(3,"span",3),O._UZ(4,"input",4),O.TgZ(5,"label"),O.TgZ(6,"span",5),O._uU(7,"*"),O.qZA(),O._uU(8),O.ALo(9,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(10,"div",1),O.TgZ(11,"div",2),O._UZ(12,"p-checkbox",6),O.ALo(13,"translate"),O.qZA(),O.qZA(),O.TgZ(14,"div",1),O.TgZ(15,"div",2),O.TgZ(16,"span",3),O._UZ(17,"p-calendar",7),O.TgZ(18,"label"),O._uU(19),O.ALo(20,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(21,"div",1),O.TgZ(22,"div",2),O.TgZ(23,"span",3),O._UZ(24,"p-calendar",8),O.TgZ(25,"label"),O._uU(26),O.ALo(27,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(28,"div",1),O.TgZ(29,"div",2),O.TgZ(30,"span",3),O._UZ(31,"p-calendar",9),O.TgZ(32,"label"),O._uU(33),O.ALo(34,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(35,"div",1),O.TgZ(36,"div",2),O.TgZ(37,"span",3),O._UZ(38,"input",10),O.TgZ(39,"label"),O.TgZ(40,"span",5),O._uU(41,"*"),O.qZA(),O._uU(42),O.ALo(43,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(44,"div",1),O.TgZ(45,"div",2),O.TgZ(46,"span",3),O._UZ(47,"p-dropdown",11),O.TgZ(48,"label"),O._uU(49),O.ALo(50,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(51,"div",1),O.TgZ(52,"div",2),O.TgZ(53,"span",3),O._UZ(54,"p-multiSelect",12),O.TgZ(55,"label"),O._uU(56),O.ALo(57,"translate"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(58,"div",13),O._UZ(59,"button",14),O.ALo(60,"translate"),O.TgZ(61,"button",15),O.NdJ("click",function(){return t.onCancel()}),O.ALo(62,"translate"),O.qZA(),O.qZA(),O.qZA()),2&e&&(O.Q6J("formGroup",t.form),O.xp6(8),O.Oqu(O.lcZ(9,25,"plane.msn")),O.xp6(4),O.s9C("label",O.lcZ(13,27,"plane.isActive")),O.xp6(5),O.Q6J("inputStyle",O.DdM(45,Oe)),O.xp6(2),O.Oqu(O.lcZ(20,29,"plane.lastFlightDate")),O.xp6(5),O.Q6J("showButtonBar",!0)("inputStyle",O.DdM(46,Oe)),O.xp6(2),O.Oqu(O.lcZ(27,31,"plane.deliveryDate")),O.xp6(5),O.Q6J("timeOnly",!0)("inputStyle",O.DdM(47,Oe)),O.xp6(2),O.Oqu(O.lcZ(34,33,"plane.syncTime")),O.xp6(9),O.Oqu(O.lcZ(43,35,"plane.capacity")),O.xp6(5),O.Akn(O.DdM(48,Le)),O.Q6J("options",t.planeTypeOptions)("showClear",!0),O.xp6(2),O.Oqu(O.lcZ(50,37,"plane.planeType")),O.xp6(5),O.Akn(O.DdM(49,Le)),O.Q6J("options",t.airportOptions)("virtualScroll",!0),O.xp6(2),O.Oqu(O.lcZ(57,39,"plane.connectingAirports")),O.xp6(3),O.s9C("label",O.lcZ(60,41,"bia.save")),O.Q6J("disabled",!t.form.valid),O.xp6(2),O.s9C("label",O.lcZ(62,43,"bia.cancel")))},directives:[ge._Y,ge.JL,ce.xw,ge.sg,ce.Wh,ce.yH,ge.Fj,ge.JJ,ge.u,me.o,ge.nD,Se.XZ,Ae.f,we.D,ge.wV,Ce.Lt,Te.NU,ce.SQ,Ze.Hq],pipes:[le.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e}(),De=function(){var e=function(){function e(t,n,a,i,o){s(this,e),this.store=t,this.router=n,this.activatedRoute=a,this.planeOptionsService=i,this.biaTranslationService=o,this.sub=new G.w}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(t){e.planeOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(u.create({plane:e})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.Y36(h.yh),O.Y36(d.F0),O.Y36(d.gz),O.Y36(oe),O.Y36(K.P6))},e.\u0275cmp=O.Xpm({type:e,selectors:[["app-plane-new"]],decls:3,vars:6,consts:[[3,"airportOptions","planeTypeOptions","cancel","save"]],template:function(e,t){1&e&&(O.TgZ(0,"app-plane-form",0),O.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),O.ALo(1,"async"),O.ALo(2,"async"),O.qZA()),2&e&&O.Q6J("airportOptions",O.lcZ(1,2,t.planeOptionsService.airportOptions$))("planeTypeOptions",O.lcZ(2,4,t.planeOptionsService.planeTypeOptions$))},directives:[Pe],pipes:[de.Ov],styles:[""]}),e}(),xe=function(){var e=function(){function e(t){s(this,e),this.store=t,this.sub=new G.w,this.InitSub(),this.loading$=this.store.select($),this.plane$=this.store.select(R)}return n(e,[{key:"currentPlane",get:function(){var e;return(null===(e=this._currentPlane)||void 0===e?void 0:e.id)===this._currentPlaneId?this._currentPlane:null}},{key:"currentPlaneId",get:function(){return this._currentPlaneId},set:function(e){this._currentPlaneId=Number(e),this.store.dispatch(u.load({id:e}))}},{key:"InitSub",value:function(){var e=this;this.sub=new G.w,this.sub.add(this.store.select(R).subscribe(function(t){t&&(e._currentPlane=t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(h.yh))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ke=o(79373);function Me(e,t){1&e&&O._UZ(0,"bia-spinner",2),2&e&&O.Q6J("overlay",!0)}var qe=function(){var e=function(){function e(t,n,a,i,o,r){s(this,e),this.store=t,this.router=n,this.activatedRoute=a,this.planeOptionsService=i,this.planeService=o,this.biaTranslationService=r,this.displayChange=new O.vpe,this.sub=new G.w}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(t){e.planeOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(u.update({plane:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.Y36(h.yh),O.Y36(d.F0),O.Y36(d.gz),O.Y36(oe),O.Y36(xe),O.Y36(K.P6))},e.\u0275cmp=O.Xpm({type:e,selectors:[["app-plane-edit"]],outputs:{displayChange:"displayChange"},decls:6,vars:12,consts:[[3,"plane","airportOptions","planeTypeOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(O.TgZ(0,"app-plane-form",0),O.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),O.ALo(1,"async"),O.ALo(2,"async"),O.ALo(3,"async"),O.qZA(),O.YNc(4,Me,1,1,"bia-spinner",1),O.ALo(5,"async")),2&e&&(O.Q6J("plane",O.lcZ(1,4,t.planeService.plane$))("airportOptions",O.lcZ(2,6,t.planeOptionsService.airportOptions$))("planeTypeOptions",O.lcZ(3,8,t.planeOptionsService.planeTypeOptions$)),O.xp6(4),O.Q6J("ngIf",O.lcZ(5,10,t.planeService.loading$)))},directives:[Pe,de.O5,ke.O],pipes:[de.Ov],styles:[""]}),e}(),Ie=o(16249),Re=o(30466);function Ee(e,t){1&e&&O._UZ(0,"bia-spinner",1),2&e&&O.Q6J("overlay",!0)}var $e=function(){var e=function(){function e(t,n,a,i){s(this,e),this.store=t,this.route=n,this.planeService=a,this.layoutService=i,this.sub=new G.w}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.planeService.currentPlaneId=this.route.snapshot.params.planeId,this.sub.add(this.store.select(R).subscribe(function(t){(null==t?void 0:t.msn)&&(e.route.data.pipe((0,N.P)()).subscribe(function(e){e.breadcrumb=t.msn}),e.layoutService.refreshBreadcrumb())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.Y36(h.yh),O.Y36(d.gz),O.Y36(xe),O.Y36(Re.N))},e.\u0275cmp=O.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(O._UZ(0,"router-outlet"),O.YNc(1,Ee,1,1,"bia-spinner",0),O.ALo(2,"async")),2&e&&(O.xp6(1),O.Q6J("ngIf",O.lcZ(2,1,t.planeService.loading$)))},directives:[d.lC,de.O5,ke.O],pipes:[de.Ov],styles:[""]}),e}(),_e=o(98832),ze=o(53460),je=o(63364),Fe=o(23291),Ge=[{path:"",data:{breadcrumb:null,permission:V.y.Plane_List_Access,InjectComponent:ve},component:ze.e,canActivate:[Ie.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:V.y.Plane_Create,title:"plane.add",InjectComponent:De},component:_e._,canActivate:[Ie.n]},{path:":planeId",data:{breadcrumb:"",canNavigate:!0},component:$e,canActivate:[Ie.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:V.y.Plane_Update,title:"plane.edit",InjectComponent:qe},component:_e._,canActivate:[Ie.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],Ye=function(){var e=function e(){s(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=O.oAB({type:e}),e.\u0275inj=O.cJS({imports:[[ye.m,d.Bz.forChild(Ge),h.Aw.forFeature(C,k),f.sQ.forFeature([F]),je.i,Fe.O]]}),e}()}}])}();