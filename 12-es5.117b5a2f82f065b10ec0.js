function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(s){i=!0,r=s}finally{try{a||null==c.return||c.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{aGGL:function(e,t,n){"use strict";n.r(t),n.d(t,"PlaneModule",(function(){return Je}));var a,i=n("tyNb"),r=n("kt0X"),o=n("snw9"),c=n("LRne"),s=n("wO+i"),l=n("eIep"),u=n("lJxs"),p=n("JIr8"),b=n("bOdf"),f=n("zp1y"),d=Object(r.h)("[Planes Popup] Load all by post",Object(r.m)()),h=Object(r.h)("[Planes Popup] Load",Object(r.m)()),y=Object(r.h)("[Planes Popup] Create",Object(r.m)()),g=Object(r.h)("[Planes Popup] Update",Object(r.m)()),O=Object(r.h)("[Planes Popup] Remove",Object(r.m)()),m=Object(r.h)("[Planes Popup] Multi Remove",Object(r.m)()),v=Object(r.h)("[Planes Popup] Load all by post success",Object(r.m)()),S=Object(r.h)("[Planes Popup] Load success",Object(r.m)()),j=Object(r.h)("[Planes Popup] Failure",Object(r.m)()),C=Object(r.h)("[Planes Popup] Open dialog edit"),T=Object(r.h)("[Planes Popup] Close dialog edit"),w=Object(r.h)("[Planes Popup] Open dialog new"),P=Object(r.h)("[Planes Popup] Close dialog new"),_=n("dlt+"),A=n("fXoL"),k=((a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e,"Planes")}return n}(_.a)).\u0275fac=function(e){return new(e||a)(A.Xb(A.r))},a.\u0275prov=A.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),D=n("EVqC"),E=Object(D.a)({selectId:function(e){return e.id},sortComparer:!1}),I=E.getInitialState({totalCount:0,currentPlane:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1,displayEditDialog:!1,displayNewDialog:!1}),x=Object(r.j)(I,Object(r.l)(w,(function(e){return Object.assign(Object.assign({},e),{displayNewDialog:!0})})),Object(r.l)(P,(function(e){return Object.assign(Object.assign({},e),{displayNewDialog:!1})})),Object(r.l)(C,(function(e){return Object.assign(Object.assign({},e),{displayEditDialog:!0})})),Object(r.l)(T,(function(e){return Object.assign(Object.assign({},e),{displayEditDialog:!1})})),Object(r.l)(d,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{loadingGetAll:!0})})),Object(r.l)(h,(function(e){return Object.assign(Object.assign({},e),{loadingGet:!0})})),Object(r.l)(v,(function(e,t){var n=t.result,a=t.event,i=E.setAll(n.data,e);return i.totalCount=n.totalCount,i.lastLazyLoadEvent=a,i.loadingGetAll=!1,i})),Object(r.l)(S,(function(e,t){var n=t.plane;return Object.assign(Object.assign({},e),{currentPlane:n,loadingGet:!1})})),Object(r.l)(j,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})})));function L(e,t){return Object(r.f)({planes:x})(e,t)}var B,F,$=Object(r.i)("planes-popup"),z=Object(r.k)($,(function(e){return e.planes})),N=Object(r.k)(z,(function(e){return e.totalCount})),M=Object(r.k)(z,(function(e){return e.currentPlane})),R=Object(r.k)(z,(function(e){return e.lastLazyLoadEvent})),V=Object(r.k)(z,(function(e){return e.loadingGet})),G=Object(r.k)(z,(function(e){return e.loadingGetAll})),J=Object(r.k)(z,(function(e){return e.displayEditDialog})),q=Object(r.k)(z,(function(e){return e.displayNewDialog})),H=E.getSelectors(z).selectAll,X=n("Fx2S"),U=((B=function e(t,n,a,i){var r=this;_classCallCheck(this,e),this.actions$=t,this.planeDas=n,this.biaMessageService=a,this.store=i,this.loadAllByPost$=Object(o.c)((function(){return r.actions$.pipe(Object(o.d)(d),Object(s.a)("event"),Object(l.a)((function(e){return r.planeDas.getListByPost(e).pipe(Object(u.a)((function(t){return v({result:t,event:e})})),Object(p.a)((function(e){return r.biaMessageService.showError(),Object(c.a)(j({error:e}))})))})))})),this.load$=Object(o.c)((function(){return r.actions$.pipe(Object(o.d)(h),Object(s.a)("id"),Object(l.a)((function(e){return r.planeDas.get(e).pipe(Object(u.a)((function(e){return S({plane:e})})),Object(p.a)((function(e){return r.biaMessageService.showError(),Object(c.a)(j({error:e}))})))})))})),this.create$=Object(o.c)((function(){return r.actions$.pipe(Object(o.d)(y),Object(s.a)("plane"),Object(b.a)((function(e){return Object(c.a)(e).pipe(Object(f.a)(r.store.select(R)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];return r.planeDas.post(n).pipe(Object(u.a)((function(){return r.biaMessageService.showAddSuccess(),d({event:a})})),Object(p.a)((function(e){return r.biaMessageService.showError(),Object(c.a)(j({error:e}))})))})))})),this.update$=Object(o.c)((function(){return r.actions$.pipe(Object(o.d)(g),Object(s.a)("plane"),Object(b.a)((function(e){return Object(c.a)(e).pipe(Object(f.a)(r.store.select(R)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];return r.planeDas.put(n,n.id).pipe(Object(u.a)((function(){return r.biaMessageService.showUpdateSuccess(),d({event:a})})),Object(p.a)((function(e){return r.biaMessageService.showError(),Object(c.a)(j({error:e}))})))})))})),this.destroy$=Object(o.c)((function(){return r.actions$.pipe(Object(o.d)(O),Object(s.a)("id"),Object(b.a)((function(e){return Object(c.a)(e).pipe(Object(f.a)(r.store.select(R)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];return r.planeDas.delete(n).pipe(Object(u.a)((function(){return r.biaMessageService.showDeleteSuccess(),d({event:a})})),Object(p.a)((function(e){return r.biaMessageService.showError(),Object(c.a)(j({error:e}))})))})))})),this.multiDestroy$=Object(o.c)((function(){return r.actions$.pipe(Object(o.d)(m),Object(s.a)("ids"),Object(b.a)((function(e){return Object(c.a)(e).pipe(Object(f.a)(r.store.select(R)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];return r.planeDas.deletes(n).pipe(Object(u.a)((function(){return r.biaMessageService.showDeleteSuccess(),d({event:a})})),Object(p.a)((function(e){return r.biaMessageService.showError(),Object(c.a)(j({error:e}))})))})))}))}).\u0275fac=function(e){return new(e||B)(A.Xb(o.a),A.Xb(k),A.Xb(X.a),A.Xb(r.b))},B.\u0275prov=A.Jb({token:B,factory:B.\u0275fac}),B),W=n("Sa1B"),K=n("VfrA"),Q=n("s0Cq"),Y=n("E6Oa"),Z=n("Iab2"),ee=n("RoCi"),te=n("RdrV"),ne=n("sYmb"),ae=n("XiUz"),ie=n("jIms"),re=n("v8MJ"),oe=n("quSY"),ce=n("oIZ+"),se=n("UONQ"),le=n("060v"),ue=n("i0YE"),pe=n("/RsI"),be=n("7zfz"),fe=n("3Pt+"),de=n("gT8a"),he=n("7kUa"),ye=n("Ji6n"),ge=n("eO1q"),Oe=n("PjIi"),me=n("arFO"),ve=n("lVkt"),Se=n("jIHw"),je=function(){return{width:"100%"}},Ce=function(){return{width:"100%"}},Te=((F=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.plane={},this.save=new A.n,this.cancel=new A.n,this.initForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.plane&&(this.form.reset(),this.plane&&this.form.patchValue(Object.assign({},this.plane)))}},{key:"initForm",value:function(){var e;this.form=this.formBuilder.group({id:[this.plane.id],msn:[this.plane.msn,fe.o.required],isActive:[this.plane.isActive],firstFlightDate:[this.plane.firstFlightDate,fe.o.required],firstFlightTime:[this.plane.firstFlightTime,fe.o.required],lastFlightDate:[this.plane.lastFlightDate],capacity:[this.plane.capacity,fe.o.required],connectingAirports:[this.plane.connectingAirports],planeType:[null===(e=this.plane.planeType)||void 0===e?void 0:e.id]})}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.isActive=!!t.isActive&&t.isActive,t.connectingAirports=de.a.Differential(t.connectingAirports,null===(e=this.plane)||void 0===e?void 0:e.connectingAirports),t.planeType=de.a.Clone(t.planeType),this.save.emit(t),this.form.reset()}}}]),e}()).\u0275fac=function(e){return new(e||F)(A.Nb(fe.b))},F.\u0275cmp=A.Hb({type:F,selectors:[["app-plane-form"]],inputs:{plane:"plane",airportOptions:"airportOptions",planeTypeOptions:"planeTypeOptions"},outputs:{save:"save",cancel:"cancel"},features:[A.zb],decls:67,vars:59,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","msn","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["binary","true","formControlName","isActive",3,"label"],["biaLocale","","formControlName","firstFlightDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["formControlName","firstFlightTime","showTime","true","placeholder","\xa0",3,"timeOnly","inputStyle"],["biaLocale","","formControlName","lastFlightDate","showTime","true","placeholder","DateTime","dateFormat","yy-mm-dd","placeholder","\xa0",3,"inputStyle"],["formControlName","capacity","type","number","pInputText","",2,"width","100%"],["placeholder","\xa0","formControlName","planeType","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","connectingAirports","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"]],template:function(e,t){1&e&&(A.Tb(0,"form",0),A.bc("submit",(function(){return t.onSubmit()})),A.Tb(1,"div",1),A.Tb(2,"div",2),A.Tb(3,"span",3),A.Ob(4,"input",4),A.Tb(5,"label"),A.Tb(6,"span",5),A.Ic(7,"*"),A.Sb(),A.Ic(8),A.ec(9,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(10,"div",1),A.Tb(11,"div",2),A.Ob(12,"p-checkbox",6),A.ec(13,"translate"),A.Sb(),A.Sb(),A.Tb(14,"div",1),A.Tb(15,"div",2),A.Tb(16,"span",3),A.Ob(17,"p-calendar",7),A.Tb(18,"label"),A.Tb(19,"span",5),A.Ic(20,"*"),A.Sb(),A.Ic(21),A.ec(22,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(23,"div",1),A.Tb(24,"div",2),A.Tb(25,"span",3),A.Ob(26,"p-calendar",8),A.Tb(27,"label"),A.Tb(28,"span",5),A.Ic(29,"*"),A.Sb(),A.Ic(30),A.ec(31,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(32,"div",1),A.Tb(33,"div",2),A.Tb(34,"span",3),A.Ob(35,"p-calendar",9),A.Tb(36,"label"),A.Ic(37),A.ec(38,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(39,"div",1),A.Tb(40,"div",2),A.Tb(41,"span",3),A.Ob(42,"input",10),A.Tb(43,"label"),A.Tb(44,"span",5),A.Ic(45,"*"),A.Sb(),A.Ic(46),A.ec(47,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(48,"div",1),A.Tb(49,"div",2),A.Tb(50,"span",3),A.Ob(51,"p-dropdown",11),A.Tb(52,"label"),A.Ic(53),A.ec(54,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(55,"div",1),A.Tb(56,"div",2),A.Tb(57,"span",3),A.Ob(58,"p-multiSelect",12),A.Tb(59,"label"),A.Ic(60),A.ec(61,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(62,"div",13),A.Ob(63,"button",14),A.ec(64,"translate"),A.Tb(65,"button",15),A.bc("click",(function(){return t.onCancel()})),A.ec(66,"translate"),A.Sb(),A.Sb(),A.Sb()),2&e&&(A.lc("formGroup",t.form),A.Bb(8),A.Jc(A.fc(9,31,"plane.msn")),A.Bb(4),A.mc("label",A.fc(13,33,"plane.isActive")),A.Bb(5),A.Ec(A.oc(51,je)),A.lc("showButtonBar",!0)("inputStyle",A.oc(52,je)),A.Bb(4),A.Jc(A.fc(22,35,"plane.firstFlightDate")),A.Bb(5),A.Ec(A.oc(53,je)),A.lc("timeOnly",!0)("inputStyle",A.oc(54,je)),A.Bb(4),A.Jc(A.fc(31,37,"plane.firstFlightTime")),A.Bb(5),A.Ec(A.oc(55,je)),A.lc("inputStyle",A.oc(56,je)),A.Bb(2),A.Jc(A.fc(38,39,"plane.lastFlightDate")),A.Bb(9),A.Jc(A.fc(47,41,"plane.capacity")),A.Bb(5),A.Ec(A.oc(57,Ce)),A.lc("options",t.planeTypeOptions)("showClear",!0),A.Bb(2),A.Jc(A.fc(54,43,"plane.planeType")),A.Bb(5),A.Ec(A.oc(58,Ce)),A.lc("options",t.airportOptions)("virtualScroll",!0),A.Bb(2),A.Jc(A.fc(61,45,"plane.connectingAirports")),A.Bb(3),A.mc("label",A.fc(64,47,"bia.save")),A.lc("disabled",!t.form.valid),A.Bb(2),A.mc("label",A.fc(66,49,"bia.cancel")))},directives:[fe.p,fe.k,ae.d,fe.f,ae.c,ae.b,fe.a,fe.j,fe.e,he.a,fe.h,ye.a,ge.a,Oe.a,fe.m,me.a,ve.a,ae.e,Se.b],pipes:[ne.c],styles:[".app-field-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]}),F),we=n("ofXK"),Pe=n("y0gQ");function _e(e,t){1&e&&A.Ob(0,"bia-spinner",3),2&e&&A.lc("overlay",!0)}var Ae,ke,De,Ee,Ie=function(){return{minWidth:"50vw"}},xe=function(){return{overflow:"auto"}},Le=((Ae=function(){function e(t){_classCallCheck(this,e),this.store=t,this.display=!1,this.sub=new oe.a,this.displayChange=new A.n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading$=this.store.select(V),this.plane$=this.store.select(M),this.sub.add(this.store.select(J).subscribe((function(t){return e.display=t}))),this.airportOptions$=this.store.select(ce.a),this.store.dispatch(Object(se.b)()),this.planeTypeOptions$=this.store.select(le.a),this.store.dispatch(Object(ue.b)())}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(g({plane:e})),this.close()}},{key:"onCancelled",value:function(){this.close()}},{key:"close",value:function(){this.store.dispatch(T())}}]),e}()).\u0275fac=function(e){return new(e||Ae)(A.Nb(r.b))},Ae.\u0275cmp=A.Hb({type:Ae,selectors:[["app-plane-edit-dialog"]],outputs:{displayChange:"displayChange"},decls:10,vars:26,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"plane","airportOptions","planeTypeOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(A.Tb(0,"p-dialog",0),A.bc("visibleChange",(function(e){return t.display=e})),A.Tb(1,"p-header"),A.Ic(2),A.ec(3,"translate"),A.Sb(),A.Tb(4,"app-plane-form",1),A.bc("cancel",(function(){return t.onCancelled()}))("save",(function(e){return t.onSubmitted(e)})),A.ec(5,"async"),A.ec(6,"async"),A.ec(7,"async"),A.Sb(),A.Gc(8,_e,1,1,"bia-spinner",2),A.ec(9,"async"),A.Sb()),2&e&&(A.Ec(A.oc(24,Ie)),A.lc("focusOnShow",!1)("visible",t.display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",A.oc(25,xe)),A.Bb(2),A.Kc(" ",A.fc(3,14,"plane.edit")," "),A.Bb(2),A.lc("plane",A.fc(5,16,t.plane$))("airportOptions",A.fc(6,18,t.airportOptions$))("planeTypeOptions",A.fc(7,20,t.planeTypeOptions$)),A.Bb(4),A.lc("ngIf",A.fc(9,22,t.loading$)))},directives:[pe.a,be.c,Te,we.m,Pe.a],pipes:[ne.c,we.b],styles:[""]}),Ae),Be=function(){return{minWidth:"50vw"}},Fe=function(){return{overflow:"auto"}},$e=((De=function(){function e(t){_classCallCheck(this,e),this.store=t,this.display=!1,this.sub=new oe.a,this.displayChange=new A.n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.sub.add(this.store.select(q).subscribe((function(t){return e.display=t}))),this.airportOptions$=this.store.select(ce.a),this.store.dispatch(Object(se.b)()),this.planeTypeOptions$=this.store.select(le.a),this.store.dispatch(Object(ue.b)())}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(y({plane:e})),this.close()}},{key:"onCancelled",value:function(){this.plane={},this.close()}},{key:"close",value:function(){this.store.dispatch(P())}}]),e}()).\u0275fac=function(e){return new(e||De)(A.Nb(r.b))},De.\u0275cmp=A.Hb({type:De,selectors:[["app-plane-new-dialog"]],outputs:{displayChange:"displayChange"},decls:7,vars:21,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"plane","airportOptions","planeTypeOptions","cancel","save"]],template:function(e,t){1&e&&(A.Tb(0,"p-dialog",0),A.bc("visibleChange",(function(e){return t.display=e})),A.Tb(1,"p-header"),A.Ic(2),A.ec(3,"translate"),A.Sb(),A.Tb(4,"app-plane-form",1),A.bc("cancel",(function(){return t.onCancelled()}))("save",(function(e){return t.onSubmitted(e)})),A.ec(5,"async"),A.ec(6,"async"),A.Sb(),A.Sb()),2&e&&(A.Ec(A.oc(19,Be)),A.lc("focusOnShow",!1)("visible",t.display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",A.oc(20,Fe)),A.Bb(2),A.Kc(" ",A.fc(3,13,"plane.add")," "),A.Bb(2),A.lc("plane",t.plane)("airportOptions",A.fc(5,15,t.airportOptions$))("planeTypeOptions",A.fc(6,17,t.planeTypeOptions$)))},directives:[pe.a,be.c,Te],pipes:[ne.c,we.b],styles:[""]}),De),ze=((ke=function(){function e(t,n,a,i,r){_classCallCheck(this,e),this.store=t,this.authService=n,this.planeDas=a,this.translateService=i,this.biaTranslationService=r,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=Q.b,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.initTableConfiguration(),this.setPermissions(),this.planes$=this.store.select(H),this.totalCount$=this.store.select(N),this.loading$=this.store.select(G)}},{key:"onCreate",value:function(){this.store.dispatch(w())}},{key:"onEdit",value:function(e){this.store.dispatch(h({id:e})),this.store.dispatch(C())}},{key:"onDelete",value:function(){this.selectedPlanes&&this.store.dispatch(m({ids:this.selectedPlanes.map((function(e){return e.id}))}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedPlanes=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){this.store.dispatch(d({event:e}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map((function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)}));var n=Object.assign({columns:t},this.planeListComponent.getLazyLoadMetadata());this.planeDas.getFile(n).subscribe((function(t){Z.saveAs(t,e.translateService.instant("app.planes")+".csv")}))}},{key:"setPermissions",value:function(){this.canEdit=this.authService.hasPermission(te.a.Plane_Update),this.canDelete=this.authService.hasPermission(te.a.Plane_Delete),this.canAdd=this.authService.hasPermission(te.a.Plane_Create)}},{key:"initTableConfiguration",value:function(){var e=this;this.biaTranslationService.culture$.subscribe((function(t){e.tableConfiguration={columns:[new K.b("msn","plane.msn"),Object.assign(new K.b("isActive","plane.isActive"),{isSearchable:!1,isSortable:!1,type:K.c.Boolean}),Object.assign(new K.b("firstFlightDate","plane.firstFlightDate"),{type:K.c.Date,formatDate:t.dateFormat}),Object.assign(new K.b("firstFlightTime","plane.firstFlightTime"),{isSearchable:!1,isSortable:!1,type:K.c.Date,formatDate:t.timeFormat}),Object.assign(new K.b("lastFlightDate","plane.lastFlightDate"),{type:K.c.Date,formatDate:t.dateTimeFormat}),Object.assign(new K.b("capacity","plane.capacity"),{type:K.c.Number,filterMode:K.a.Equals}),Object.assign(new K.b("planeType","plane.planeType"),{type:K.c.OneToMany}),Object.assign(new K.b("connectingAirports","plane.connectingAirports"),{type:K.c.ManyToMany})]},e.columns=e.tableConfiguration.columns.map((function(e){return{key:e.field,value:e.header}})),e.displayedColumns=_toConsumableArray(e.columns)}))}}]),e}()).\u0275fac=function(e){return new(e||ke)(A.Nb(r.b),A.Nb(Y.a),A.Nb(k),A.Nb(ne.d),A.Nb(ee.a))},ke.\u0275cmp=A.Hb({type:ke,selectors:[["app-planes-index"]],viewQuery:function(e,t){var n;1&e&&A.Mc(W.a,!0),2&e&&A.xc(n=A.cc())&&(t.planeListComponent=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&A.Fb("bia-flex",t.flex)},decls:12,vars:29,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","edit","loadLazy","selectedElementsChanged"]],template:function(e,t){1&e&&(A.Tb(0,"div",0),A.Tb(1,"div",1),A.Tb(2,"bia-table-header",2),A.bc("create",(function(){return t.onCreate()}))("exportCSV",(function(){return t.onExportCSV()}))("delete",(function(){return t.onDelete()})),A.ec(3,"translate"),A.Sb(),A.Tb(4,"bia-table-controller",3),A.bc("displayedColumnsChange",(function(e){return t.displayedColumnsChanged(e)}))("filter",(function(e){return t.searchGlobalChanged(e)}))("pageSizeChange",(function(e){return t.onPageSizeChange(e)}))("toggleSearch",(function(){return t.onToggleSearch()}))("viewChange",(function(e){return t.onViewChange(e)})),A.ec(5,"async"),A.Sb(),A.Tb(6,"bia-table",4),A.bc("edit",(function(e){return t.onEdit(e)}))("loadLazy",(function(e){return t.onLoadLazy(e)}))("selectedElementsChanged",(function(e){return t.onSelectedElementsChanged(e)})),A.ec(7,"async"),A.ec(8,"async"),A.ec(9,"async"),A.Sb(),A.Sb(),A.Sb(),A.Ob(10,"app-plane-edit-dialog"),A.Ob(11,"app-plane-new-dialog")),2&e&&(A.Bb(2),A.lc("headerTitle",A.fc(3,19,"plane.listOf"))("canAdd",t.canAdd)("canExportCSV",!0)("selectedElements",t.selectedPlanes),A.Bb(2),A.lc("defaultPageSize",t.defaultPageSize)("length",A.fc(5,21,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),A.Bb(2),A.lc("elements",A.fc(7,23,t.planes$))("totalRecord",A.fc(8,25,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canSelectElement",t.canDelete)("loading",A.fc(9,27,t.loading$))("viewPreference",t.viewPreference))},directives:[ae.d,ae.b,ie.a,re.a,W.a,Le,$e],pipes:[ne.c,we.b],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),ke),Ne=n("PCNd"),Me=n("+dww"),Re=n("ONFI"),Ve=n("8NO8"),Ge=[{path:"",data:{breadcrumb:null,permission:te.a.Plane_List_Access},component:ze,canActivate:[Me.a]},{path:"**",redirectTo:""}],Je=((Ee=function e(){_classCallCheck(this,e)}).\u0275mod=A.Lb({type:Ee}),Ee.\u0275inj=A.Kb({factory:function(e){return new(e||Ee)},imports:[[Ne.a,i.g.forChild(Ge),r.d.forFeature("planes-popup",L),o.b.forFeature([U]),Re.a,Ve.a]]}),Ee)}}]);