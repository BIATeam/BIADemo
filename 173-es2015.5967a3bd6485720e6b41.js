"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[173],{16249:function(t,n,e){e.d(n,{n:function(){return c}});var i=e(39083),o=e(92340),a=e(68307),r=e(37716);let c=(()=>{class t{constructor(t){this.authService=t}canActivate(t,n){return this.authService.hasPermissionObs(t.data.permission).pipe((0,a.b)(t=>{!0!==t&&(window.location.href=o.N.urlErrorPage+"?num=403")}))}}return t.\u0275fac=function(n){return new(n||t)(r.LFG(i.e))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},82762:function(t,n,e){e.d(n,{b:function(){return i}});const i=(0,e(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},40173:function(t,n,e){e.r(n),e.d(n,{HangfireModule:function(){return S}});var i=e(94666),o=e(61028),a=e(16249),r=e(29206),c=e(28731),s=e(86710);const l=(0,s.PH)("[Notifications] Failure",(0,s.Ky)()),f=(0,s.PH)("[Notifications] Call worker with notification",(0,s.Ky)());var u=e(37716),p=e(35618),d=e(38583),h=e(4207);function g(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){u.CHM(t);const n=u.oxw().$implicit;return u.oxw().randomReviewPlane(n.id)}),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.s9C("label",t.title)}}function m(t,n){if(1&t&&(u.ynx(0),u.YNc(1,g,1,1,"button",5),u.BQk()),2&t){const t=n.$implicit;u.xp6(1),u.Q6J("ngIf",1===t.teamTypeId)}}function w(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){u.CHM(t);const n=u.oxw().$implicit;return u.oxw().randomReviewPlane(n.id)}),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.s9C("label",t.title)}}function Z(t,n){if(1&t&&(u.ynx(0),u.YNc(1,w,1,1,"button",5),u.BQk()),2&t){const t=n.$implicit;u.xp6(1),u.Q6J("ngIf",2===t.teamTypeId)}}function v(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){u.CHM(t);const n=u.oxw().$implicit;return u.oxw().randomReviewPlane(n.id)}),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.hYB("label","",t.parentTeamTitle," > ",t.title,"")}}function x(t,n){if(1&t&&(u.ynx(0),u.YNc(1,v,1,2,"button",5),u.BQk()),2&t){const t=n.$implicit;u.xp6(1),u.Q6J("ngIf",3===t.teamTypeId)}}let b=(()=>{class t{constructor(t){this.store=t,this.flex=!0,this.allTeams$=this.store.select(c.qX)}randomReviewPlane(t){this.store.dispatch(f({teamId:t}))}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(s.yh))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-hangfire-index"]],hostVars:2,hostBindings:function(t,n){2&t&&u.ekj("bia-flex",n.flex)},decls:36,vars:9,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],["fxLayout","row wrap"],["fxLayout","row wrap","fxLayoutAlign","space-around"],[4,"ngFor","ngForOf"],["pButton","","type","button",3,"label","click",4,"ngIf"],["pButton","","type","button",3,"label","click"]],template:function(t,n){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"div",1),u.TgZ(2,"div",1),u.TgZ(3,"h1"),u._uU(4,"Launch random review plane in hanfire job."),u.qZA(),u.qZA(),u._UZ(5,"div",1),u.qZA(),u._UZ(6,"BR"),u._UZ(7,"BR"),u.TgZ(8,"div",2),u._uU(9," On a plane of one the following\xa0"),u.TgZ(10,"b"),u._uU(11,"Sites"),u.qZA(),u.qZA(),u._UZ(12,"BR"),u.TgZ(13,"div",3),u.YNc(14,m,2,1,"ng-container",4),u.ALo(15,"async"),u.qZA(),u._UZ(16,"BR"),u._UZ(17,"BR"),u.TgZ(18,"div",2),u._uU(19," On a plane of the current site and notify team of type\xa0"),u.TgZ(20,"b"),u._uU(21,"Aircraft Maintenance Company"),u.qZA(),u.qZA(),u._UZ(22,"BR"),u.TgZ(23,"div",3),u.YNc(24,Z,2,1,"ng-container",4),u.ALo(25,"async"),u.qZA(),u._UZ(26,"BR"),u._UZ(27,"BR"),u.TgZ(28,"div",2),u._uU(29," On a plane of the current site and notify team of type\xa0"),u.TgZ(30,"b"),u._uU(31,"Maintenance Team"),u.qZA(),u.qZA(),u._UZ(32,"BR"),u.TgZ(33,"div",3),u.YNc(34,x,2,1,"ng-container",4),u.ALo(35,"async"),u.qZA()),2&t&&(u.xp6(14),u.Q6J("ngForOf",u.lcZ(15,3,n.allTeams$)),u.xp6(10),u.Q6J("ngForOf",u.lcZ(25,5,n.allTeams$)),u.xp6(10),u.Q6J("ngForOf",u.lcZ(35,7,n.allTeams$)))},directives:[p.xw,p.Wh,p.SQ,d.sg,d.O5,h.Hq],pipes:[d.Ov],styles:['[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}button[_ngcontent-%COMP%]{margin-bottom:15px}.header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:"raleway-thin",serif;font-size:36px;font-weight:200;margin:0;line-height:24px}']}),t})();const y=(0,e(80273).H)({sortComparer:!1}).getInitialState({lastLazyLoadEvent:{},loadingGet:!1}),A=(0,s.Lq)(y);function T(t,n){return(0,s.UY)({hangfire:A})(t,n)}const _=(0,s.ZF)("hangfire"),L=(0,s.P1)(_,t=>t.hangfire),P=(0,s.P1)(L,t=>t.lastLazyLoadEvent);(0,s.P1)(L,t=>t.loadingGet);var U=e(91601),B=e(25917),q=e(92996),F=e(94612),R=e(57057),k=e(43190),C=e(88002),M=e(5304),O=e(1390);let $=(()=>{class t extends O.d{constructor(t){super(t,"hangfires")}randomReviewPlane(t){return this.http.put(this.route+"randomReviewPlane/"+t,null)}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(u.zs3))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=e(82762),I=e(42);let Y=(()=>{class t{constructor(t,n,e,i){this.actions$=t,this.hangfireDas=n,this.biaMessageService=e,this.store=i,this.randomReviewPlane$=(0,U.GW)(()=>this.actions$.pipe((0,U.l4)(f),(0,q.j)("teamId"),(0,F.b)(t=>(0,B.of)(t).pipe((0,R.M)(this.store.select(P)))),(0,k.w)(([t,n])=>this.hangfireDas.randomReviewPlane(t).pipe((0,C.U)(()=>(this.biaMessageService.showUpdateSuccess(),(0,N.b)())),(0,M.K)(t=>(this.biaMessageService.showError(),(0,B.of)(l({error:t}))))))))}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(U.eX),u.LFG($),u.LFG(I.X),u.LFG(s.yh))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();const Q=[{path:"",data:{breadcrumb:null,permission:r.y.Notification_List_Access},component:b,canActivate:[a.n]},{path:"**",redirectTo:""}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[],imports:[[o.m,i.Bz.forChild(Q),s.Aw.forFeature("hangfire",T),U.sQ.forFeature([Y])]]}),t})()}}]);