function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,c=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,c=l}finally{try{i||null==o.return||o.return()}finally{if(r)throw c}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{DmGy:function(e,t,n){"use strict";n.r(t),n.d(t,"MemberModule",(function(){return Sn}));var i,r=n("tyNb"),c=n("kt0X"),a=n("snw9"),o=n("LRne"),l=n("wO+i"),s=n("eIep"),u=n("lJxs"),b=n("JIr8"),d=n("bOdf"),f=n("zp1y"),m=Object(c.h)("[Members] Load all by post",Object(c.m)()),p=Object(c.h)("[Members] Load",Object(c.m)()),h=Object(c.h)("[Members] Create",Object(c.m)()),g=Object(c.h)("[Members] Update",Object(c.m)()),v=Object(c.h)("[Members] Remove",Object(c.m)()),y=Object(c.h)("[Members] Multi Remove",Object(c.m)()),S=Object(c.h)("[Members] Load all by post success",Object(c.m)()),O=Object(c.h)("[Members] Load success",Object(c.m)()),C=Object(c.h)("[Members] Failure",Object(c.m)()),w=n("dlt+"),j=n("fXoL"),I=((i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e,"Members")}return n}(w.a)).\u0275fac=function(e){return new(e||i)(j.Xb(j.r))},i.\u0275prov=j.Jb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),T=n("EVqC"),_=Object(T.a)({selectId:function(e){return e.id},sortComparer:!1}),k=_.getInitialState({totalCount:0,currentMember:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),B=Object(c.j)(k,Object(c.l)(m,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{loadingGetAll:!0})})),Object(c.l)(p,(function(e){return Object.assign(Object.assign({},e),{loadingGet:!0})})),Object(c.l)(S,(function(e,t){var n=t.result,i=t.event,r=_.setAll(n.data,e);return r.totalCount=n.totalCount,r.lastLazyLoadEvent=i,r.loadingGetAll=!1,r})),Object(c.l)(O,(function(e,t){var n=t.member;return Object.assign(Object.assign({},e),{currentMember:n,loadingGet:!1})})),Object(c.l)(C,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})})));function R(e,t){return Object(c.f)({members:B})(e,t)}var $,M,z=Object(c.i)("members"),L=Object(c.k)(z,(function(e){return e.members})),E=Object(c.k)(L,(function(e){return e.totalCount})),G=Object(c.k)(L,(function(e){return e.currentMember})),N=Object(c.k)(L,(function(e){return e.lastLazyLoadEvent})),D=Object(c.k)(L,(function(e){return e.loadingGet})),A=Object(c.k)(L,(function(e){return e.loadingGetAll})),P=_.getSelectors(L).selectAll,x=n("Fx2S"),F=n("basH"),K=(($=function e(t,n,i,r){var c=this;_classCallCheck(this,e),this.actions$=t,this.memberDas=n,this.biaMessageService=i,this.store=r,this.loadAllByPost$=Object(a.c)((function(){return c.actions$.pipe(Object(a.d)(m),Object(l.a)("event"),Object(s.a)((function(e){return c.memberDas.getListByPost(e).pipe(Object(u.a)((function(t){return S({result:t,event:e})})),Object(b.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(C({error:e}))})))})))})),this.load$=Object(a.c)((function(){return c.actions$.pipe(Object(a.d)(p),Object(l.a)("id"),Object(s.a)((function(e){return c.memberDas.get(e).pipe(Object(u.a)((function(e){return O({member:e})})),Object(b.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(C({error:e}))})))})))})),this.create$=Object(a.c)((function(){return c.actions$.pipe(Object(a.d)(h),Object(l.a)("member"),Object(d.a)((function(e){return Object(o.a)(e).pipe(Object(f.a)(c.store.select(N)))})),Object(s.a)((function(t){var n=_slicedToArray(t,2),i=n[0],r=n[1];return c.memberDas.post(i).pipe(Object(u.a)((function(){return c.biaMessageService.showAddSuccess(),e.useSignalR?Object(F.a)():m({event:r})})),Object(b.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(C({error:e}))})))})))})),this.update$=Object(a.c)((function(){return c.actions$.pipe(Object(a.d)(g),Object(l.a)("member"),Object(d.a)((function(e){return Object(o.a)(e).pipe(Object(f.a)(c.store.select(N)))})),Object(s.a)((function(t){var n=_slicedToArray(t,2),i=n[0],r=n[1];return c.memberDas.put(i,i.id).pipe(Object(u.a)((function(){return c.biaMessageService.showUpdateSuccess(),e.useSignalR?Object(F.a)():m({event:r})})),Object(b.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(C({error:e}))})))})))})),this.destroy$=Object(a.c)((function(){return c.actions$.pipe(Object(a.d)(v),Object(l.a)("id"),Object(d.a)((function(e){return Object(o.a)(e).pipe(Object(f.a)(c.store.select(N)))})),Object(s.a)((function(t){var n=_slicedToArray(t,2),i=n[0],r=n[1];return c.memberDas.delete(i).pipe(Object(u.a)((function(){return c.biaMessageService.showDeleteSuccess(),e.useSignalR?Object(F.a)():m({event:r})})),Object(b.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(C({error:e}))})))})))})),this.multiDestroy$=Object(a.c)((function(){return c.actions$.pipe(Object(a.d)(y),Object(l.a)("ids"),Object(d.a)((function(e){return Object(o.a)(e).pipe(Object(f.a)(c.store.select(N)))})),Object(s.a)((function(t){var n=_slicedToArray(t,2),i=n[0],r=n[1];return c.memberDas.deletes(i).pipe(Object(u.a)((function(){return c.biaMessageService.showDeleteSuccess(),e.useSignalR?Object(F.a)():m({event:r})})),Object(b.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(C({error:e}))})))})))}))}).useSignalR=!1,$.\u0275fac=function(e){return new(e||$)(j.Xb(a.a),j.Xb(I),j.Xb(x.a),j.Xb(c.b))},$.\u0275prov=j.Jb({token:$,factory:$.\u0275fac}),$),V=n("Sa1B"),Q=n("VfrA"),U=n("s0Cq"),H=n("E6Oa"),X=n("Iab2"),J=n("RoCi"),q=n("RdrV"),W=n("SxV6"),Y=n("yOL8"),Z=n("Lnda"),ee=((M=function(){function e(t,n,i){_classCallCheck(this,e),this.store=t,this.signalRService=n,this.siteService=i}return _createClass(e,[{key:"initialize",value:function(){var e=this;console.log("%c [Members] Register SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-members",(function(){e.store.select(N).pipe(Object(W.a)()).subscribe((function(t){console.log("%c [Members] RefreshSuccess","color: green; font-weight: bold"),e.store.dispatch(m({event:t}))}))})),this.targetedFeature={parentKey:this.siteService.currentSiteId.toString(),featureName:"members"},this.signalRService.joinGroup(this.targetedFeature)}},{key:"destroy",value:function(){console.log("%c [Members] Unregister SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-members"),this.signalRService.leaveGroup(this.targetedFeature)}}]),e}()).\u0275fac=function(e){return new(e||M)(j.Xb(c.b),j.Xb(Y.a),j.Xb(Z.a))},M.\u0275prov=j.Jb({token:M,factory:M.\u0275fac,providedIn:"root"}),M),te=n("P5II"),ne=n("itXk"),ie=Object(c.h)("[Domain Role Options] Load all"),re=Object(c.h)("[Domain Role Options] Load all success",Object(c.m)()),ce=Object(c.h)("[Domain Role Options] Failure",Object(c.m)()),ae=Object(T.a)({selectId:function(e){return e.id},sortComparer:!1}),oe=ae.getInitialState({}),le=Object(c.j)(oe,Object(c.l)(re,(function(e,t){var n=t.roles;return ae.setAll(n,e)})));function se(e,t){return Object(c.f)({roleOptions:le})(e,t)}var ue,be=Object(c.i)("domain-role-options"),de=Object(c.k)(be,(function(e){return e.roleOptions})),fe=ae.getSelectors(de).selectAll,me=n("4tvz"),pe=n("B67f"),he=n("dnD0"),ge=((ue=function(){function e(t){_classCallCheck(this,e),this.store=t,this.userOptions$=this.store.select(me.a),this.roleOptions$=this.store.select(fe),this.dictOptionDtos$=Object(ne.a)([this.userOptions$,this.roleOptions$]).pipe(Object(u.a)((function(e){return[new he.a("user",e[0]),new he.a("roles",e[1])]})))}return _createClass(e,[{key:"loadAllOptions",value:function(){this.store.dispatch(Object(pe.d)()),this.store.dispatch(ie())}}]),e}()).\u0275fac=function(e){return new(e||ue)(j.Xb(c.b))},ue.\u0275prov=j.Jb({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue),ve=n("sYmb"),ye=n("XiUz"),Se=n("jIms"),Oe=n("v8MJ"),Ce=n("ofXK"),we=n("3Pt+"),je=n("gT8a"),Ie=n("/ZTc"),Te=n("rEr+"),_e=n("7zfz"),ke=n("7kUa"),Be=n("znSr"),Re=n("arFO"),$e=n("lVkt"),Me=n("Ji6n"),ze=n("eO1q"),Le=n("PjIi");function Ee(e,t){1&e&&(j.Tb(0,"th",10),j.Ob(1,"p-tableHeaderCheckbox"),j.Sb())}function Ge(e,t){if(1&e&&(j.Tb(0,"th",12),j.Ic(1),j.ec(2,"translate"),j.Ob(3,"p-sortIcon",13),j.Sb()),2&e){var n=j.dc().$implicit;j.lc("pSortableColumn",n.field),j.Bb(1),j.Kc(" ",j.fc(2,3,null==n?null:n.header)," "),j.Bb(2),j.lc("field",n.field)}}function Ne(e,t){if(1&e&&(j.Tb(0,"th"),j.Ic(1),j.ec(2,"translate"),j.Sb()),2&e){var n=j.dc().$implicit;j.Bb(1),j.Kc(" ",j.fc(2,1,null==n?null:n.header)," ")}}function De(e,t){if(1&e&&(j.Rb(0),j.Gc(1,Ge,4,5,"th",11),j.Gc(2,Ne,3,3,"th",9),j.Qb()),2&e){var n=t.$implicit;j.Bb(1),j.lc("ngIf",!0===(null==n?null:n.isSortable)),j.Bb(1),j.lc("ngIf",!0!==(null==n?null:n.isSortable))}}function Ae(e,t){1&e&&j.Ob(0,"th")}var Pe=function(e){return{"ui-state-filled":e}};function xe(e,t){if(1&e){var n=j.Ub();j.Tb(0,"span",17),j.Tb(1,"input",18),j.bc("input",(function(e){j.zc(n);var t=j.dc().$implicit;return j.dc(3),j.yc(1).filter(e.target.value,t.field,t.filterMode)})),j.ec(2,"translate"),j.Sb(),j.Sb()}if(2&e){var i=j.dc().$implicit;j.dc(3);var r=j.yc(1);j.Bb(1),j.mc("type","Number"===i.type?"number":"text"),j.mc("placeholder",null!=i.searchPlaceholder?i.searchPlaceholder:!0===i.isDate?j.fc(2,4,"bia.dateIso8601"):""),j.lc("value",null==r.filters[i.field]?null:r.filters[i.field].value)("ngClass",j.pc(6,Pe,""!=(null==r.filters[i.field]?null:r.filters[i.field].value)))}}function Fe(e,t){if(1&e&&(j.Tb(0,"th",15),j.Gc(1,xe,3,8,"span",16),j.Sb()),2&e){var n=t.$implicit;j.lc("ngSwitch",n.field),j.Bb(1),j.lc("ngIf",!0===n.isSearchable)}}function Ke(e,t){if(1&e&&(j.Tb(0,"tr"),j.Gc(1,Ae,1,0,"th",9),j.Gc(2,Fe,2,2,"th",14),j.Sb()),2&e){var n=j.dc().$implicit,i=j.dc(2);j.Bb(1),j.lc("ngIf",i.canSelectElement),j.Bb(1),j.lc("ngForOf",n)}}function Ve(e,t){if(1&e&&(j.Tb(0,"tr"),j.Gc(1,Ee,2,0,"th",7),j.Gc(2,De,3,2,"ng-container",8),j.Sb(),j.Gc(3,Ke,3,2,"tr",9)),2&e){var n=t.$implicit,i=j.dc(2);j.Bb(1),j.lc("ngIf",i.canSelectElement),j.Bb(1),j.lc("ngForOf",n),j.Bb(1),j.lc("ngIf",i.showColSearch)}}function Qe(e,t){if(1&e&&j.Ob(0,"p-tableCheckbox",23),2&e){var n=j.dc(2).$implicit;j.lc("value",n)}}function Ue(e,t){1&e&&j.Ob(0,"i",24)}function He(e,t){if(1&e&&(j.Tb(0,"td"),j.Gc(1,Qe,1,1,"p-tableCheckbox",21),j.Gc(2,Ue,1,0,"i",22),j.Sb()),2&e){var n=j.dc().$implicit,i=j.dc(2);j.Bb(1),j.lc("ngIf",!0!==i.isFooter(n)&&n.id>0),j.Bb(1),j.lc("ngIf",!0===i.isFooter(n))}}function Xe(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"input",29),j.bc("change",(function(){return j.zc(n),j.dc(6).onChange()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(3).$implicit;j.Bb(1),j.lc("formControlName",i.field)}}function Je(e,t){1&e&&(j.Tb(0,"span",30),j.Ic(1,"*"),j.Sb())}function qe(e,t){if(1&e&&(j.Rb(0,15),j.Gc(1,Xe,2,1,"ng-container",27),j.Qb(),j.Gc(2,Je,2,0,"span",28)),2&e){var n=j.dc(2).$implicit,i=j.dc(3);j.lc("ngSwitch",n.field),j.Bb(2),j.lc("ngIf",!0===i.isRequired(n.field))}}function We(e,t){1&e&&j.Gc(0,qe,3,2,"ng-template",26)}function Ye(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.Qb()),2&e){var n=j.dc(3).$implicit,i=j.dc().$implicit;j.Bb(1),j.Kc(" ",i[n.field]," ")}}function Ze(e,t){if(1&e&&(j.Rb(0,15),j.Gc(1,Ye,2,1,"ng-container",27),j.Qb()),2&e){var n=j.dc(2).$implicit;j.lc("ngSwitch",n.field)}}function et(e,t){1&e&&j.Gc(0,Ze,2,1,"ng-template",31)}var tt=function(){return{width:"100%"}};function nt(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"p-dropdown",35),j.bc("onChange",(function(){return j.zc(n),j.dc(7).onChange()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit,r=j.dc(3);j.Bb(1),j.Ec(j.oc(4,tt)),j.lc("formControlName",i.field)("options",r.getOptionDto(i.field))}}function it(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"p-multiSelect",36),j.bc("onChange",(function(){return j.zc(n),j.dc(7).onChange()}))("onPanelShow",(function(){return j.zc(n),j.dc(7).onPanelShowMultiSelect()}))("onPanelHide",(function(){return j.zc(n),j.dc(7).onPanelHideMultiSelect()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit,r=j.dc(3);j.Bb(1),j.Ec(j.oc(4,tt)),j.lc("formControlName",i.field)("options",r.getOptionDto(i.field))}}function rt(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"p-checkbox",37),j.bc("onChange",(function(){return j.zc(n),j.dc(7).onChange()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit;j.Bb(1),j.lc("binary",!0)("formControlName",i.field)}}function ct(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"input",38),j.bc("change",(function(){return j.zc(n),j.dc(7).onChange()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit;j.Bb(1),j.lc("formControlName",i.field)}}function at(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"p-calendar",39),j.bc("onShow",(function(){return j.zc(n),j.dc(7).onShowCalendar()}))("onSelect",(function(){return j.zc(n),j.dc(7).onChange()}))("onBlur",(function(){return j.zc(n),j.dc(7).onBlurCalendar()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit;j.Bb(1),j.Ec(j.oc(5,tt)),j.lc("formControlName",i.field)("showButtonBar",!0)("inputStyle",j.oc(6,tt))}}function ot(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"p-calendar",40),j.bc("onShow",(function(){return j.zc(n),j.dc(7).onShowCalendar()}))("onSelect",(function(){return j.zc(n),j.dc(7).onChange()}))("onBlur",(function(){return j.zc(n),j.dc(7).onBlurCalendar()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit;j.Bb(1),j.Ec(j.oc(5,tt)),j.lc("formControlName",i.field)("inputStyle",j.oc(6,tt))("timeOnly",!0)}}function lt(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"p-calendar",41),j.bc("onShow",(function(){return j.zc(n),j.dc(7).onShowCalendar()}))("onSelect",(function(){return j.zc(n),j.dc(7).onChange()}))("onBlur",(function(){return j.zc(n),j.dc(7).onBlurCalendar()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit;j.Bb(1),j.Ec(j.oc(5,tt)),j.lc("formControlName",i.field)("showButtonBar",!0)("inputStyle",j.oc(6,tt))}}function st(e,t){if(1&e){var n=j.Ub();j.Rb(0),j.Tb(1,"input",42),j.bc("change",(function(){return j.zc(n),j.dc(7).onChange()})),j.Sb(),j.Qb()}if(2&e){var i=j.dc(4).$implicit;j.Bb(1),j.lc("maxlength",i.maxlength)("formControlName",i.field)}}function ut(e,t){1&e&&(j.Tb(0,"span",30),j.Ic(1,"*"),j.Sb())}function bt(e,t){if(1&e&&(j.Rb(0,15),j.Gc(1,nt,2,5,"ng-container",34),j.Gc(2,it,2,5,"ng-container",34),j.Gc(3,rt,2,2,"ng-container",34),j.Gc(4,ct,2,1,"ng-container",34),j.Gc(5,at,2,7,"ng-container",34),j.Gc(6,ot,2,7,"ng-container",34),j.Gc(7,lt,2,7,"ng-container",34),j.Gc(8,st,2,2,"ng-container",27),j.Qb(),j.Gc(9,ut,2,0,"span",28)),2&e){var n=j.dc(3).$implicit,i=j.dc(3);j.lc("ngSwitch",n.type),j.Bb(1),j.lc("ngSwitchCase","OneToMany"),j.Bb(1),j.lc("ngSwitchCase","ManyToMany"),j.Bb(1),j.lc("ngSwitchCase","Boolean"),j.Bb(1),j.lc("ngSwitchCase","Number"),j.Bb(1),j.lc("ngSwitchCase","Date"),j.Bb(1),j.lc("ngSwitchCase","Time"),j.Bb(1),j.lc("ngSwitchCase","DateTime"),j.Bb(2),j.lc("ngIf",!0===i.isRequired(n.field))}}function dt(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.Qb()),2&e){var n=j.dc(5).$implicit,i=j.dc().$implicit;j.Bb(1),j.Kc(" ",null==i[n.field]?null:i[n.field].display," ")}}function ft(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.Qb()),2&e){var n=j.dc(5).$implicit,i=j.dc().$implicit,r=j.dc(2);j.Bb(1),j.Kc(" ",r.formatDisplayName(i[n.field])," ")}}function mt(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.ec(2,"date"),j.Qb()),2&e){var n=j.dc(5).$implicit,i=j.dc().$implicit;j.Bb(1),j.Kc(" ",!0===n.isDate?j.gc(2,1,i[n.field],n.formatDate):i[n.field]," ")}}function pt(e,t){if(1&e&&(j.Rb(0),j.Rb(1,15),j.Gc(2,dt,2,1,"ng-container",34),j.Gc(3,ft,2,1,"ng-container",34),j.Gc(4,mt,3,4,"ng-container",27),j.Qb(),j.Qb()),2&e){var n=j.dc(4).$implicit;j.Bb(1),j.lc("ngSwitch",n.type),j.Bb(1),j.lc("ngSwitchCase","OneToMany"),j.Bb(1),j.lc("ngSwitchCase","ManyToMany")}}function ht(e,t){if(1&e&&j.Gc(0,pt,5,3,"ng-container",9),2&e){var n=j.dc(4).$implicit,i=j.dc(2);j.lc("ngIf",!0!==i.isFooter(n))}}function gt(e,t){if(1&e&&(j.Gc(0,bt,10,9,"ng-template",32),j.Gc(1,ht,1,1,"ng-template",null,33,j.Hc)),2&e){var n=j.yc(2),i=j.dc(2).$implicit;j.lc("ngIf",!0===i.isEditable)("ngIfElse",n)}}function vt(e,t){1&e&&j.Gc(0,gt,3,2,"ng-template",26)}function yt(e,t){1&e&&(j.Tb(0,"label"),j.Ic(1,"-"),j.Sb())}function St(e,t){if(1&e&&j.Gc(0,yt,2,0,"label",9),2&e){var n=j.dc(3).$implicit;j.lc("ngIf",!0===n.isEditable)}}function Ot(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.Qb()),2&e){var n=j.dc(4).$implicit,i=j.dc().$implicit;j.Bb(1),j.Kc(" ",null==i[n.field]?null:i[n.field].display," ")}}function Ct(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.Qb()),2&e){var n=j.dc(4).$implicit,i=j.dc().$implicit,r=j.dc(2);j.Bb(1),j.Kc(" ",r.formatDisplayName(i[n.field])," ")}}function wt(e,t){1&e&&j.Ob(0,"i",45)}function jt(e,t){if(1&e&&(j.Rb(0),j.Gc(1,wt,1,0,"i",44),j.Qb()),2&e){var n=j.dc(4).$implicit,i=j.dc().$implicit;j.Bb(1),j.lc("ngIf",!0===i[n.field])}}function It(e,t){if(1&e&&(j.Rb(0),j.Ic(1),j.ec(2,"date"),j.Qb()),2&e){var n=j.dc(4).$implicit,i=j.dc().$implicit;j.Bb(1),j.Kc(" ",!0===n.isDate?j.gc(2,1,i[n.field],n.formatDate):i[n.field]," ")}}function Tt(e,t){if(1&e&&(j.Rb(0,15),j.Gc(1,Ot,2,1,"ng-container",34),j.Gc(2,Ct,2,1,"ng-container",34),j.Gc(3,jt,2,1,"ng-container",34),j.Gc(4,It,3,4,"ng-container",27),j.Qb()),2&e){var n=j.dc(3).$implicit;j.lc("ngSwitch",n.type),j.Bb(1),j.lc("ngSwitchCase","OneToMany"),j.Bb(1),j.lc("ngSwitchCase","ManyToMany"),j.Bb(1),j.lc("ngSwitchCase","Boolean")}}function _t(e,t){if(1&e&&(j.Gc(0,St,1,1,"ng-template",32),j.Gc(1,Tt,5,4,"ng-template",null,43,j.Hc)),2&e){var n=j.yc(2),i=j.dc(3).$implicit,r=j.dc(2);j.lc("ngIf",!0===r.isFooter(i))("ngIfElse",n)}}function kt(e,t){1&e&&j.Gc(0,_t,3,2,"ng-template",31)}function Bt(e,t){if(1&e){var n=j.Ub();j.Tb(0,"td",25),j.bc("click",(function(){j.zc(n);var e=j.dc().$implicit;return j.dc(2).initEditableRow(e)})),j.Tb(1,"p-cellEditor"),j.Gc(2,We,1,0,void 0,9),j.Gc(3,et,1,0,void 0,9),j.Gc(4,vt,1,0,void 0,9),j.Gc(5,kt,1,0,void 0,9),j.Sb(),j.Sb()}if(2&e){var i=t.$implicit,r=j.dc(3);j.Bb(2),j.lc("ngIf",!0===r.isSpecificInput(i.field)),j.Bb(1),j.lc("ngIf",!0===r.isSpecificInput(i.field)),j.Bb(1),j.lc("ngIf",!0!==r.isSpecificInput(i.field)),j.Bb(1),j.lc("ngIf",!0!==r.isSpecificInput(i.field))}}function Rt(e,t){if(1&e){var n=j.Ub();j.Tb(0,"tr",19),j.bc("focusout",(function(){return j.zc(n),j.dc(2).onFocusout()}))("keyup.enter",(function(){return j.zc(n),j.dc(2).initEditableRow(null)}))("keyup.escape",(function(){return j.zc(n),j.dc(2).cancel()})),j.Gc(1,He,3,2,"td",9),j.Gc(2,Bt,6,4,"td",20),j.Sb()}if(2&e){var i=t.$implicit,r=t.columns,c=j.dc(2);j.lc("pSelectableRow",!0!==c.isFooter(i)?i:null)("pEditableRow",i),j.Bb(1),j.lc("ngIf",c.canSelectElement),j.Bb(1),j.lc("ngForOf",r)}}function $t(e,t){if(1&e&&(j.Tb(0,"tr"),j.Tb(1,"td",46),j.Ic(2),j.ec(3,"translate"),j.Sb(),j.Sb()),2&e){var n=t.$implicit;j.Bb(1),j.Cb("colspan",n.length+1),j.Bb(1),j.Kc(" ",j.fc(3,2,"bia.NoRecordsFound")," ")}}function Mt(e,t){if(1&e){var n=j.Ub();j.Tb(0,"p-table",2,3),j.bc("onFilter",(function(){return j.zc(n),j.dc().onFilter()}))("onLazyLoad",(function(e){return j.zc(n),j.dc().onLoadLazy(e)}))("onStateSave",(function(e){return j.zc(n),j.dc().onStateSave(e)}))("selectionChange",(function(){return j.zc(n),j.dc().onSelectionChange()})),j.ec(2,"async"),j.Gc(3,Ve,4,3,"ng-template",4),j.Gc(4,Rt,3,4,"ng-template",5),j.Gc(5,$t,4,4,"ng-template",6),j.Sb()}if(2&e){var i=j.dc();j.lc("autoLayout",!0)("reorderableColumns",!0)("columns",i.displayedColumns)("value",i.elements)("paginator",i.paginator)("rows",i.pageSize)("totalRecords",i.totalRecord)("lazy",!0)("loading",i.loading&&null!==j.fc(2,14,i.showLoading$))("stateStorage","session")("stateKey",i.tableStateKey)("lazyLoadOnInit",i.getLazyLoadOnInit())("sortField",i.sortFieldValue)("sortOrder",i.sortOrderValue)}}var zt,Lt=((zt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c,a){var o;return _classCallCheck(this,n),(o=t.call(this,e,i,r,c)).formBuilder=e,o.authService=i,o.biaMessageService=r,o.translateService=c,o.siteService=a,o}return _createClass(n,[{key:"initForm",value:function(){this.form=this.formBuilder.group({id:[this.element.id],user:[this.element.user,we.o.required],roles:[this.element.roles]})}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.roles=je.a.Differential(t.roles,null===(e=this.element)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.siteId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}]),n}(Ie.a)).\u0275fac=function(e){return new(e||zt)(j.Nb(we.b),j.Nb(H.a),j.Nb(x.a),j.Nb(ve.d),j.Nb(Z.a))},zt.\u0275cmp=j.Hb({type:zt,selectors:[["app-member-table"]],features:[j.yb],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","md-inputfield",4,"ngIf"],[1,"md-inputfield"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","ui-icon-check",4,"ngIf"],[1,"ui-icon-check"],[1,"app-empty-message"]],template:function(e,t){1&e&&(j.Tb(0,"form",0),j.Gc(1,Mt,6,16,"p-table",1),j.Sb()),2&e&&(j.lc("formGroup",t.form),j.Bb(1),j.lc("ngIf",t.configuration))},directives:[we.p,we.k,we.f,Ce.m,Te.f,_e.e,Ce.l,Te.h,Te.e,Te.d,Ce.o,ke.a,Ce.k,Be.a,Te.c,Te.b,Te.g,Te.a,Ce.q,we.a,we.j,we.e,Ce.p,Re.a,$e.a,Me.a,we.m,ze.a,Le.a,we.h],pipes:[Ce.b,ve.c,Ce.e],styles:["[_nghost-%COMP%]{flex-direction:column}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),zt);function Et(e,t){if(1&e){var n=j.Ub();j.Tb(0,"bia-table",6),j.bc("edit",(function(e){return j.zc(n),j.dc().onEdit(e)}))("loadLazy",(function(e){return j.zc(n),j.dc().onLoadLazy(e)}))("selectedElementsChanged",(function(e){return j.zc(n),j.dc().onSelectedElementsChanged(e)})),j.ec(1,"async"),j.ec(2,"async"),j.ec(3,"async"),j.Sb()}if(2&e){var i=j.dc();j.lc("elements",j.fc(1,12,i.members$))("totalRecord",j.fc(2,14,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canEdit",i.canEdit)("canSelectElement",i.canDelete)("loading",j.fc(3,16,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}function Gt(e,t){if(1&e){var n=j.Ub();j.Tb(0,"app-member-table",7),j.bc("loadLazy",(function(e){return j.zc(n),j.dc().onLoadLazy(e)}))("selectedElementsChanged",(function(e){return j.zc(n),j.dc().onSelectedElementsChanged(e)}))("save",(function(e){return j.zc(n),j.dc().onSave(e)})),j.ec(1,"async"),j.ec(2,"async"),j.ec(3,"async"),j.ec(4,"async"),j.Sb()}if(2&e){var i=j.dc();j.lc("elements",j.fc(1,14,i.members$))("dictOptionDtos",j.fc(2,16,i.memberOptionsService.dictOptionDtos$))("totalRecord",j.fc(3,18,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canEdit",i.canEdit)("canAdd",i.canAdd)("canSelectElement",i.canDelete)("loading",j.fc(4,20,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}var Nt,Dt=((Nt=function(){function e(t,n,i,r,c,a,o,l,s,u){_classCallCheck(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.authService=r,this.memberDas=c,this.translateService=a,this.biaTranslationService=o,this.membersSignalRService=l,this.memberOptionsService=s,this.siteService=u,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!1,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=U.b,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"membersGrid":void 0}return _createClass(e,[{key:"ngOnInit",value:function(){this.initTableConfiguration(),this.setPermissions(),this.members$=this.store.select(P),this.totalCount$=this.store.select(E),this.loading$=this.store.select(A),this.OnDisplay(),this.useCalcMode&&this.memberOptionsService.loadAllOptions()}},{key:"ngOnDestroy",value:function(){this.OnHide()}},{key:"OnDisplay",value:function(){void 0!==this.memberListComponent&&this.store.dispatch(m({event:this.memberListComponent.getLazyLoadMetadata()})),this.useView&&this.store.dispatch(Object(te.g)()),this.useSignalR&&(this.membersSignalRService.initialize(),K.useSignalR=!0)}},{key:"OnHide",value:function(){this.useSignalR&&(K.useSignalR=!1,this.membersSignalRService.destroy())}},{key:"onCreate",value:function(){this.useCalcMode||this.router.navigate(["../create"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(e){this.useCalcMode||this.router.navigate(["../"+e+"/edit"],{relativeTo:this.activatedRoute})}},{key:"onSave",value:function(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(g({member:e})):this.canAdd&&this.store.dispatch(h({member:e})))}},{key:"onDelete",value:function(){this.selectedMembers&&this.canDelete&&this.store.dispatch(y({ids:this.selectedMembers.map((function(e){return e.id}))}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedMembers=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){if(this.siteService.currentSiteId>0){var t=Object.assign({siteId:+this.siteService.currentSiteId},e);this.store.dispatch(m({event:t}))}}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map((function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)}));var n=Object.assign({columns:t},this.memberListComponent.getLazyLoadMetadata());this.memberDas.getFile(n).subscribe((function(t){X.saveAs(t,e.translateService.instant("app.members")+".csv")}))}},{key:"setPermissions",value:function(){this.canEdit=this.authService.hasPermission(q.a.Member_Update),this.canDelete=this.authService.hasPermission(q.a.Member_Delete),this.canAdd=this.authService.hasPermission(q.a.Member_Create)}},{key:"initTableConfiguration",value:function(){var e=this;this.biaTranslationService.culture$.subscribe((function(t){e.tableConfiguration={columns:[Object.assign(new Q.b("user","member.user"),{type:Q.c.OneToMany}),Object.assign(new Q.b("roles","member.rolesForSite"),{type:Q.c.ManyToMany,translateKey:"role.",searchPlaceholder:"Site_Admin|Pilot|..."})]},e.columns=e.tableConfiguration.columns.map((function(e){return{key:e.field,value:e.header}})),e.displayedColumns=_toConsumableArray(e.columns)}))}}]),e}()).\u0275fac=function(e){return new(e||Nt)(j.Nb(c.b),j.Nb(r.c),j.Nb(r.a),j.Nb(H.a),j.Nb(I),j.Nb(ve.d),j.Nb(J.a),j.Nb(ee),j.Nb(ge),j.Nb(Z.a))},Nt.\u0275cmp=j.Hb({type:Nt,selectors:[["app-members-index"]],viewQuery:function(e,t){var n;1&e&&j.Mc(V.a,!0),2&e&&j.xc(n=j.cc())&&(t.memberListComponent=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&j.Fb("bia-flex",t.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"bia-table-header",2),j.bc("create",(function(){return t.onCreate()}))("exportCSV",(function(){return t.onExportCSV()}))("delete",(function(){return t.onDelete()})),j.ec(3,"translate"),j.Sb(),j.Tb(4,"bia-table-controller",3),j.bc("displayedColumnsChange",(function(e){return t.displayedColumnsChanged(e)}))("filter",(function(e){return t.searchGlobalChanged(e)}))("pageSizeChange",(function(e){return t.onPageSizeChange(e)}))("toggleSearch",(function(){return t.onToggleSearch()}))("viewChange",(function(e){return t.onViewChange(e)})),j.ec(5,"async"),j.Sb(),j.Gc(6,Et,4,18,"bia-table",4),j.Gc(7,Gt,5,22,"app-member-table",5),j.Sb(),j.Sb()),2&e&&(j.Bb(2),j.lc("headerTitle",j.fc(3,12,"member.listOfSiteMembers"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedMembers),j.Bb(2),j.lc("defaultPageSize",t.defaultPageSize)("length",j.fc(5,14,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey),j.Bb(2),j.lc("ngIf",!t.useCalcMode),j.Bb(1),j.lc("ngIf",t.useCalcMode))},directives:[ye.d,ye.b,Se.a,Oe.a,Ce.m,V.a,Lt],pipes:[ve.c,Ce.b],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),Nt),At=n("PCNd"),Pt=n("+07z"),xt=n("jIHw"),Ft=n("wItY");function Kt(e,t){if(1&e&&(j.Ic(0),j.ec(1,"translateField")),2&e){var n=t.$implicit,i=j.dc();j.Kc(" ",j.ic(1,1,n,"label","role.",i.translateService.currentLang)," ")}}var Vt,Qt=function(){return{width:"100%"}},Ut=((Vt=function(){function e(t,n,i){_classCallCheck(this,e),this.formBuilder=t,this.translateService=n,this.siteService=i,this.member={},this.save=new j.n,this.cancel=new j.n,this.initForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.member&&(this.form.reset(),this.member&&this.form.patchValue(Object.assign({},this.member)))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({id:[this.member.id],user:[this.member.user,we.o.required],roles:[this.member.roles]})}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.roles=je.a.Differential(t.roles,null===(e=this.member)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.siteId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}]),e}()).\u0275fac=function(e){return new(e||Vt)(j.Nb(we.b),j.Nb(ve.d),j.Nb(Z.a))},Vt.\u0275cmp=j.Hb({type:Vt,selectors:[["app-member-form"]],inputs:{member:"member",roleOptions:"roleOptions",userOptions:"userOptions"},outputs:{save:"save",cancel:"cancel"},features:[j.zb],decls:22,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["placeholder","\xa0","formControlName","user","optionLabel","display","datakey","id",3,"options","filter","showClear"],[1,"bia-star-mandatory"],["formControlName","roles","multiple","multiple","checkbox","checkbox","optionLabel","display",3,"options","showToggleAll"],["pTemplate","group"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"]],template:function(e,t){1&e&&(j.Tb(0,"form",0),j.bc("submit",(function(){return t.onSubmit()})),j.Tb(1,"div",1),j.Tb(2,"div",2),j.Tb(3,"span",3),j.Ob(4,"p-dropdown",4),j.Tb(5,"label"),j.Tb(6,"span",5),j.Ic(7,"*"),j.Sb(),j.Ic(8),j.ec(9,"translate"),j.Sb(),j.Sb(),j.Sb(),j.Sb(),j.Tb(10,"div",1),j.Tb(11,"div",2),j.Tb(12,"label"),j.Ic(13),j.ec(14,"translate"),j.Sb(),j.Tb(15,"p-listbox",6),j.Gc(16,Kt,2,6,"ng-template",7),j.Sb(),j.Sb(),j.Sb(),j.Tb(17,"div",8),j.Ob(18,"button",9),j.ec(19,"translate"),j.Tb(20,"button",10),j.bc("click",(function(){return t.onCancel()})),j.ec(21,"translate"),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.lc("formGroup",t.form),j.Bb(4),j.Ec(j.oc(23,Qt)),j.lc("options",t.userOptions)("filter",!0)("showClear",!0),j.Bb(4),j.Jc(j.fc(9,15,"member.user")),j.Bb(5),j.Kc("",j.fc(14,17,"member.roles"),":"),j.Bb(2),j.Ec(j.oc(24,Qt)),j.lc("options",t.roleOptions)("showToggleAll",!1),j.Bb(3),j.mc("label",j.fc(19,19,"bia.save")),j.lc("disabled",!t.form.valid),j.Bb(2),j.mc("label",j.fc(21,21,"bia.cancel")))},directives:[we.p,we.k,ye.d,we.f,ye.c,ye.b,Re.a,we.j,we.e,Pt.a,_e.e,ye.e,xt.b],pipes:[ve.c,Ft.a],styles:[".app-field-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]}),Vt);function Ht(e,t){if(1&e){var n=j.Ub();j.Tb(0,"app-member-form",1),j.bc("cancel",(function(){return j.zc(n),j.dc().onCancelled()}))("save",(function(e){return j.zc(n),j.dc().onSubmitted(e)})),j.ec(1,"async"),j.ec(2,"async"),j.Sb()}if(2&e){var i=j.dc();j.lc("roleOptions",j.fc(1,3,i.memberOptionsService.roleOptions$))("userOptions",j.fc(2,5,i.memberOptionsService.userOptions$))("siteId",null==i.siteService.currentSite?null:i.siteService.currentSite.id)}}var Xt,Jt,qt=((Xt=function(){function e(t,n,i,r,c){_classCallCheck(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.memberOptionsService=r,this.siteService=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.memberOptionsService.loadAllOptions()}},{key:"onSubmitted",value:function(e){this.store.dispatch(h({member:e})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}]),e}()).\u0275fac=function(e){return new(e||Xt)(j.Nb(c.b),j.Nb(r.c),j.Nb(r.a),j.Nb(ge),j.Nb(Z.a))},Xt.\u0275cmp=j.Hb({type:Xt,selectors:[["app-member-new"]],decls:2,vars:3,consts:[[3,"roleOptions","userOptions","siteId","cancel","save",4,"ngIf"],[3,"roleOptions","userOptions","siteId","cancel","save"]],template:function(e,t){1&e&&(j.Gc(0,Ht,3,7,"app-member-form",0),j.ec(1,"async")),2&e&&j.lc("ngIf",!1===j.fc(1,1,t.siteService.loading$))},directives:[Ce.m,Ut],pipes:[Ce.b],styles:[""]}),Xt),Wt=n("quSY"),Yt=((Jt=function(){function e(t){_classCallCheck(this,e),this.store=t,this.sub=new Wt.a,this.InitSub(),this.loading$=this.store.select(D),this.member$=this.store.select(G)}return _createClass(e,[{key:"InitSub",value:function(){var e=this;this.sub=new Wt.a,this.sub.add(this.store.select(G).subscribe((function(t){t&&(e._currentMember=t)})))}},{key:"currentMember",get:function(){var e;return(null===(e=this._currentMember)||void 0===e?void 0:e.id)===this._currentMemberId?this._currentMember:null}},{key:"currentMemberId",get:function(){return this._currentMemberId},set:function(e){this._currentMemberId=Number(e),this.store.dispatch(p({id:e}))}}]),e}()).\u0275fac=function(e){return new(e||Jt)(j.Xb(c.b))},Jt.\u0275prov=j.Jb({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt),Zt=n("y0gQ");function en(e,t){1&e&&j.Ob(0,"bia-spinner",2),2&e&&j.lc("overlay",!0)}var tn,nn=((tn=function(){function e(t,n,i,r,c,a){_classCallCheck(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.memberOptionsService=r,this.memberService=c,this.siteService=a,this.displayChange=new j.n,this.sub=new Wt.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.memberOptionsService.loadAllOptions()}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(g({member:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),e}()).\u0275fac=function(e){return new(e||tn)(j.Nb(c.b),j.Nb(r.c),j.Nb(r.a),j.Nb(ge),j.Nb(Yt),j.Nb(Z.a))},tn.\u0275cmp=j.Hb({type:tn,selectors:[["app-member-edit"]],outputs:{displayChange:"displayChange"},decls:6,vars:12,consts:[[3,"member","roleOptions","userOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(j.Tb(0,"app-member-form",0),j.bc("cancel",(function(){return t.onCancelled()}))("save",(function(e){return t.onSubmitted(e)})),j.ec(1,"async"),j.ec(2,"async"),j.ec(3,"async"),j.Sb(),j.Gc(4,en,1,1,"bia-spinner",1),j.ec(5,"async")),2&e&&(j.lc("member",j.fc(1,4,t.memberService.member$))("roleOptions",j.fc(2,6,t.memberOptionsService.roleOptions$))("userOptions",j.fc(3,8,t.memberOptionsService.userOptions$)),j.Bb(4),j.lc("ngIf",j.fc(5,10,t.memberService.loading$)))},directives:[Ut,Ce.m,Zt.a],pipes:[Ce.b],styles:[""]}),tn),rn=n("+dww"),cn=n("95+j");function an(e,t){1&e&&j.Ob(0,"bia-spinner",1),2&e&&j.lc("overlay",!0)}var on,ln,sn,un,bn,dn=((on=function(){function e(t,n,i,r){_classCallCheck(this,e),this.store=t,this.route=n,this.memberService=i,this.layoutService=r,this.sub=new Wt.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.memberService.currentMemberId=this.route.snapshot.params.memberId,this.sub.add(this.store.select(G).subscribe((function(t){(null==t?void 0:t.user)&&(e.route.data.pipe(Object(W.a)()).subscribe((function(e){e.breadcrumb=t.user.display})),e.layoutService.refreshBreadcrumb())})))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||on)(j.Nb(c.b),j.Nb(r.a),j.Nb(Yt),j.Nb(cn.a))},on.\u0275cmp=j.Hb({type:on,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(j.Ob(0,"router-outlet"),j.Gc(1,an,1,1,"bia-spinner",0),j.ec(2,"async")),2&e&&(j.Bb(1),j.lc("ngIf",j.fc(2,1,t.memberService.loading$)))},directives:[r.h,Ce.m,Zt.a],pipes:[Ce.b],styles:[""]}),on),fn=n("PW2p"),mn=n("iW9+"),pn=((un=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e,"Roles")}return n}(w.a)).\u0275fac=function(e){return new(e||un)(j.Xb(j.r))},un.\u0275prov=j.Jb({token:un,factory:un.\u0275fac,providedIn:"root"}),un),hn=((sn=function e(t,n,i){var r=this;_classCallCheck(this,e),this.actions$=t,this.roleDas=n,this.biaMessageService=i,this.loadAll$=Object(a.c)((function(){return r.actions$.pipe(Object(a.d)(ie),Object(s.a)((function(){return r.roleDas.getList("allOptions").pipe(Object(u.a)((function(e){return re({roles:e})})),Object(b.a)((function(e){return r.biaMessageService.showError(),Object(o.a)(ce({error:e}))})))})))}))}).\u0275fac=function(e){return new(e||sn)(j.Xb(a.a),j.Xb(pn),j.Xb(x.a))},sn.\u0275prov=j.Jb({token:sn,factory:sn.\u0275fac}),sn),gn=((ln=function e(){_classCallCheck(this,e)}).\u0275mod=j.Lb({type:ln}),ln.\u0275inj=j.Kb({factory:function(e){return new(e||ln)},providers:[],imports:[[c.d.forFeature("domain-role-options",se),a.b.forFeature([hn])]]}),ln),vn=n("smYE"),yn=[{path:"",data:{breadcrumb:null,permission:q.a.Member_List_Access,InjectComponent:Dt},component:mn.a,canActivate:[rn.a],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:q.a.Member_Create,title:"member.add",InjectComponent:qt},component:fn.a,canActivate:[rn.a]},{path:":memberId",data:{breadcrumb:"",canNavigate:!0},component:dn,canActivate:[rn.a],children:[{path:"edit",data:{breadcrumb:"member.manage",canNavigate:!0,permission:q.a.Member_Update,title:"member.manage",InjectComponent:nn},component:fn.a,canActivate:[rn.a]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],Sn=((bn=function e(){_classCallCheck(this,e)}).\u0275mod=j.Lb({type:bn}),bn.\u0275inj=j.Kb({factory:function(e){return new(e||bn)},imports:[[At.a,r.g.forChild(yn),c.d.forFeature("members",R),a.b.forFeature([K]),vn.a,gn]]}),bn)}}]);