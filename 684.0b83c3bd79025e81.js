"use strict";(self.webpackChunkBIADemo=self.webpackChunkBIADemo||[]).push([[684],{6631:(E,T,a)=>{a.d(T,{N:()=>g});var d=a(4147),s=a(5e3);let g=(()=>{class r extends d.Z{constructor(I){super(I,"Sites")}}return r.\u0275fac=function(I){return new(I||r)(s.LFG(s.zs3))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},4603:(E,T,a)=>{a.d(T,{P:()=>h});var d=a(1564),s=a(9362),g=a(9825),r=a(4297),y=a(9147),I=a(6631),P=a(3248),e=a(136),u=a(5e3),c=a(5094),b=a(7358);let p=(()=>{class S extends b.O{constructor(){super()}loadAllOptions(){}}return S.\u0275fac=function(m){return new(m||S)},S.\u0275prov=u.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),h=(()=>{class S extends s.c{constructor(m,R,$,Y,V){super(R,$,Y),this.store=m,this.dasService=R,this.signalRService=$,this.optionsService=Y,this.authService=V,this.crudItems$=this.store.select(r.G.getAllSites),this.totalCount$=this.store.select(r.G.getSitesTotalCount),this.loadingGetAll$=this.store.select(r.G.getSiteLoadingGetAll),this.lastLazyLoadEvent$=this.store.select(r.G.getLastLazyLoadEvent),this.crudItem$=this.store.select(r.G.getCurrentSite),this.loadingGet$=this.store.select(r.G.getSiteLoadingGet)}get currentCrudItemId(){return super.currentCrudItemId}set currentCrudItemId(m){this._currentCrudItemId!==m&&(this._currentCrudItemId=m,this.authService.changeCurrentTeamId(e.k0.Site,m)),this.load(m)}getParentIds(){return[]}getFeatureName(){return g.I.featureName}load(m){this.store.dispatch(y.h.load({id:m}))}loadAllByPost(m){this.store.dispatch(y.h.loadAllByPost({event:m}))}create(m){this.store.dispatch(y.h.create({site:m}))}update(m){this.store.dispatch(y.h.update({site:m}))}remove(m){this.store.dispatch(y.h.remove({id:m}))}multiRemove(m){this.store.dispatch(y.h.multiRemove({ids:m}))}}return S.\u0275fac=function(m){return new(m||S)(u.LFG(c.yh),u.LFG(I.N),u.LFG(P.z),u.LFG(p),u.LFG(d.e))},S.\u0275prov=u.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},9825:(E,T,a)=>{a.d(T,{I:()=>r});var d=a(4394),s=a(9157);const g={columns:[Object.assign(new s.kc("title","site.title"),{isRequired:!0}),Object.assign(new s.kc("siteAdmins","site.admins"),{isEditable:!1,type:s.d5.ManyToMany})]},r=new d.B({featureName:"sites",fieldsConfig:g,useCalcMode:!1,useSignalR:!1,useView:!1,usePopup:!0,useOfflineMode:!1})},8684:(E,T,a)=>{a.r(T),a.d(T,{ROUTES:()=>ee,SiteModule:()=>ct});var d=a(4490),s=a(9825),g=a(1564),r=a(9206),y=a(2338),I=a(4603),P=a(9238),e=a(5e3),u=a(3075),c=a(42),b=a(7171),p=a(9808),h=a(4851),S=a(9783),N=a(7605),m=a(8786),R=a(2081);function $(n,l){1&n&&(e.TgZ(0,"th",10),e._UZ(1,"p-tableHeaderCheckbox"),e.qZA())}function Y(n,l){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"p-sortIcon",14),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",e.lcZ(2,3,null==t?null:t.header)," "),e.xp6(2),e.Q6J("field",t.field)}}function V(n,l){if(1&n&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t?null:t.header)," ")}}function te(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Y,4,5,"th",11),e.YNc(2,V,3,3,"th",12),e.BQk()),2&n){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",!0===(null==t?null:t.isSortable)),e.xp6(1),e.Q6J("ngIf",!0!==(null==t?null:t.isSortable))}}function ne(n,l){1&n&&e._UZ(0,"th")}function oe(n,l){if(1&n&&(e.TgZ(0,"th",19),e._UZ(1,"bia-table-filter",20),e.qZA()),2&n){const t=l.$implicit;e.oxw(3);const o=e.MAs(1);e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("col",t)("table",o)}}function ie(n,l){if(1&n&&(e.TgZ(0,"tr",16),e.YNc(1,ne,1,0,"th",17),e.YNc(2,oe,2,3,"th",18),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.canSelectElement),e.xp6(1),e.Q6J("ngForOf",t)}}function ae(n,l){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,$,2,0,"th",7),e.YNc(2,te,3,2,"ng-container",8),e.qZA(),e.YNc(3,ie,3,2,"tr",9)),2&n){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.canSelectElement),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",o.showColSearch)}}function le(n,l){if(1&n&&e._UZ(0,"p-tableCheckbox",25),2&n){const t=e.oxw(2).$implicit;e.Q6J("value",t)}}function se(n,l){1&n&&e._UZ(0,"i",26)}function re(n,l){if(1&n&&(e.TgZ(0,"td"),e.YNc(1,le,1,1,"p-tableCheckbox",23),e.YNc(2,se,1,0,"i",24),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!0!==o.isFooter(t)&&t.id>0),e.xp6(1),e.Q6J("ngIf",!0===o.isFooter(t))}}function ce(n,l){1&n&&e.GkF(0)}const pe=function(n,l){return{field:n,form:l}};function _e(n,l){if(1&n&&e.YNc(0,ce,1,0,"ng-container",34),2&n){const t=e.oxw(3).$implicit,o=e.oxw(3);e.Q6J("ngTemplateOutlet",o.specificInputTemplate)("ngTemplateOutletContext",e.WLB(2,pe,t,o.form))}}function de(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"bia-table-input",32),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(5).onChange()})("complexInput",function(i){return e.CHM(t),e.oxw(5).onComplexInput(i)}),e.YNc(1,_e,1,5,"ng-template",33),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,o=e.oxw(3);e.Q6J("field",t)("form",o.form)("dictOptionDtos",o.dictOptionDtos)}}function me(n,l){1&n&&e.GkF(0)}const B=function(n,l){return{field:n,data:l}};function ue(n,l){if(1&n&&e.YNc(0,me,1,0,"ng-container",34),2&n){const t=e.oxw(4).$implicit,o=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngTemplateOutlet",i.specificOutputTemplate)("ngTemplateOutletContext",e.WLB(2,B,t,i.getCellData(o,t)))}}function fe(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"bia-table-output",35),e.YNc(2,ue,1,5,"ng-template",36),e.qZA(),e.BQk()),2&n){const t=e.oxw(3).$implicit,o=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("field",t)("data",i.getCellData(o,t))}}function ge(n,l){if(1&n&&e.YNc(0,fe,3,2,"ng-container",17),2&n){const t=e.oxw(3).$implicit,o=e.oxw(2);e.Q6J("ngIf",!0!==o.isFooter(t))}}function he(n,l){if(1&n&&(e.YNc(0,de,2,3,"ng-template",30),e.YNc(1,ge,1,1,"ng-template",null,31,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",!0===o.isEditable)("ngIfElse",t)}}function Ce(n,l){1&n&&(e.TgZ(0,"label"),e._uU(1,"-"),e.qZA())}function be(n,l){if(1&n&&e.YNc(0,Ce,2,0,"label",17),2&n){const t=e.oxw(2).$implicit;e.Q6J("ngIf",!0===t.isEditable)}}function Se(n,l){1&n&&e.GkF(0)}function xe(n,l){if(1&n&&e.YNc(0,Se,1,0,"ng-container",34),2&n){const t=e.oxw(3).$implicit,o=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngTemplateOutlet",i.specificOutputTemplate)("ngTemplateOutletContext",e.WLB(2,B,t,i.getCellData(o,t)))}}function ve(n,l){if(1&n&&(e.TgZ(0,"bia-table-output",35),e.YNc(1,xe,1,5,"ng-template",36),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw().$implicit,i=e.oxw(2);e.Q6J("field",t)("data",i.getCellData(o,t))}}function Te(n,l){if(1&n&&(e.YNc(0,be,1,1,"ng-template",30),e.YNc(1,ve,2,2,"ng-template",null,37,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngIf",!0===i.isFooter(o))("ngIfElse",t)}}function ye(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"td",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).initEditableRow(i)}),e.TgZ(1,"p-cellEditor"),e.YNc(2,he,3,2,"ng-template",28),e.YNc(3,Te,3,2,"ng-template",29),e.qZA()()}}function Ie(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr",21),e.NdJ("focusout",function(){return e.CHM(t),e.oxw(2).onFocusout()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).initEditableRow(null)})("keyup.escape",function(){return e.CHM(t),e.oxw(2).cancel()}),e.YNc(1,re,3,2,"td",17),e.YNc(2,ye,4,0,"td",22),e.qZA()}if(2&n){const t=l.$implicit,o=l.columns,i=e.oxw(2);e.Q6J("pSelectableRow",!0!==i.isFooter(t)?t:null)("pEditableRow",t),e.xp6(1),e.Q6J("ngIf",i.canSelectElement),e.xp6(1),e.Q6J("ngForOf",o)}}function Le(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td",38),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=l.$implicit;e.xp6(1),e.uIk("colspan",t.length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"bia.NoRecordsFound")," ")}}function we(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-table",2,3),e.NdJ("onFilter",function(){return e.CHM(t),e.oxw().onFilter()})("onLazyLoad",function(i){return e.CHM(t),e.oxw().onLoadLazy(i)})("onStateSave",function(i){return e.CHM(t),e.oxw().onStateSave(i)})("selectionChange",function(){return e.CHM(t),e.oxw().onSelectionChange()}),e.ALo(2,"async"),e.YNc(3,ae,4,3,"ng-template",4),e.YNc(4,Ie,3,4,"ng-template",5),e.YNc(5,Le,4,4,"ng-template",6),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",t.displayedColumns)("value",t.elements)("paginator",t.paginator)("rows",t.pageSize)("totalRecords",t.totalRecord)("lazy",!0)("loading",t.loading&&null!==e.lcZ(2,14,t.showLoading$))("stateStorage","session")("stateKey",t.tableStateKey)("lazyLoadOnInit",t.getLazyLoadOnInit())("sortField",t.sortFieldValue)("sortOrder",t.sortOrderValue)}}let j=(()=>{class n extends P.M{constructor(t,o,i,_){super(t,o,i,_),this.formBuilder=t,this.authService=o,this.biaMessageService=i,this.translateService=_}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu),e.Y36(g.e),e.Y36(c.X),e.Y36(b.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-site-table"]],features:[e.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],["class","searchTR",4,"ngIf"],[1,"bia-table-select-col"],["pReorderableColumn","",3,"pSortableColumn",4,"ngIf"],["pReorderableColumn","",4,"ngIf"],["pReorderableColumn","",3,"pSortableColumn"],[3,"field"],["pReorderableColumn",""],[1,"searchTR"],[4,"ngIf"],["pReorderableColumn","",3,"ngSwitch",4,"ngFor","ngForOf"],["pReorderableColumn","",3,"ngSwitch"],[3,"col","table"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[3,"field","form","dictOptionDtos","valueChange","complexInput"],["pTemplate","specificInput"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"field","data"],["pTemplate","specificOutput"],["editRow",""],[1,"app-empty-message"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.YNc(1,we,6,16,"p-table",1),e.qZA()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("ngIf",o.configuration))},directives:[u._Y,u.JL,u.sg,p.O5,h.iA,S.jx,h.Mo,p.sg,h.Af,h.lQ,h.fz,p.RF,N.f,h.Ei,h.D$,h.UA,h.YL,m.P,p.tP,R.T],pipes:[p.Ov,b.X$],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),n})();var A=a(277),Fe=a(5863),Oe=a(6048),z=a(5094),W=a(845),X=a(4119),Me=a(4036);const Ze=["template"],Ee=function(){return{width:"100%"}};function Pe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("submit",function(){return e.CHM(t),e.oxw().onFilter()}),e.TgZ(4,"div",4)(5,"h1"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"span",7),e._UZ(11,"p-dropdown",8),e.ALo(12,"async"),e.TgZ(13,"label"),e._uU(14),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"div",9)(17,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"button",11),e.ALo(20,"translate"),e.qZA()()()}if(2&n){const t=e.oxw();e.s9C("fxFlex",t.fxFlexValue),e.Q6J("hidden",t.hidden),e.xp6(1),e.s9C("pTooltip",e.lcZ(2,12,"msg.showFilters")),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(3),e.Oqu(e.lcZ(7,14,"bia.filters")),e.xp6(5),e.Akn(e.DdM(24,Ee)),e.Q6J("options",e.lcZ(12,16,t.userOptions$))("showClear",!0),e.xp6(3),e.Oqu(e.lcZ(15,18,"site.filterMember")),e.xp6(3),e.s9C("label",e.lcZ(18,20,"bia.reset")),e.xp6(2),e.s9C("label",e.lcZ(20,22,"bia.filter"))}}let Ne=(()=>{class n{constructor(t,o,i){this.formBuilder=t,this.viewContainerRef=o,this.store=i,this.hidden=!1,this.closeFilter=new e.vpe,this.searchUsers=new e.vpe,this.filter=new e.vpe,this.initForm()}initForm(){this.form=this.formBuilder.group({userSelected:null})}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.initUsers()}initUsers(){this.store.dispatch(Oe.d.loadAll()),this.userOptions$=this.store.select(Fe.yp)}onClose(){this.closeFilter.emit()}onReset(){this.form.reset()}onFilter(){this.form.valid&&this.filter.emit({userId:this.form.value.userSelected})}onSearchUsers(t){this.searchUsers.emit(t.query)}ngOnChanges(t){var o;if(t.advancedFilter){const i={userSelected:null===(o=this.advancedFilter)||void 0===o?void 0:o.userId};this.form.patchValue(Object.assign({},i))}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu),e.Y36(e.s_b),e.Y36(z.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-site-filter"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ze,7),2&t){let i;e.iGM(i=e.CRH())&&(o.template=i.first)}},inputs:{fxFlexValue:"fxFlexValue",hidden:"hidden",advancedFilter:"advancedFilter"},outputs:{closeFilter:"closeFilter",searchUsers:"searchUsers",filter:"filter"},features:[e.TTD],decls:2,vars:0,consts:[["template",""],[1,"app-search-filter",3,"hidden","fxFlex"],["type","button","icon","pi pi-times","pButton","",1,"p-button-rounded","p-button-text","flat",3,"pTooltip","click"],["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","stretch center",1,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-filter-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","userSelected","optionValue","id","optionLabel","display","datakey","id","appendTo","body","filter","true",3,"options","showClear"],["fxLayout","row","fxLayoutAlign","space-around"],["pButton","","fxFlex","33",1,"p-button-outlined",3,"label","click"],["type","submit","pButton","","fxFlex","33",3,"label"]],template:function(t,o){1&t&&e.YNc(0,Pe,21,25,"ng-template",null,0,e.W1O)},directives:[A.yH,W.Hq,X.u,u._Y,u.JL,A.xw,u.sg,A.Wh,Me.Lt,u.JJ,u.u],pipes:[b.X$,p.Ov],styles:["h3[_ngcontent-%COMP%]{margin-bottom:0}.app-filter-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.app-search-filter[_ngcontent-%COMP%]{margin:-15px 35px -15px -35px}.app-search-filter[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{position:absolute}.pi[_ngcontent-%COMP%]   pi-clear[_ngcontent-%COMP%]{margin-left:12px;margin-right:9px}.header[_ngcontent-%COMP%]{position:relative;top:30px;margin-bottom:15px;margin-left:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:raleway-thin,serif;font-size:36px;font-weight:200;margin:0}"]}),n})();var Je=a(1606),De=a(6743),Re=a(8385);function $e(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-site-filter",9),e.NdJ("filter",function(i){return e.CHM(t),e.oxw().onFilter(i)})("closeFilter",function(){return e.CHM(t),e.oxw().onCloseFilter()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("fxFlexValue",25)("advancedFilter",null==t.crudConfiguration.fieldsConfig?null:t.crudConfiguration.fieldsConfig.advancedFilter)}}function Ye(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return i.onEdit(i.selectedCrudItems[0].id)}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=e.oxw(2);e.s9C("label",e.lcZ(1,2,"site.edit")),e.Q6J("disabled",1!==(null==t.selectedCrudItems?null:t.selectedCrudItems.length))}}function ze(n,l){if(1&n&&e.YNc(0,Ye,2,4,"button",10),2&n){const t=e.oxw();e.Q6J("ngIf",t.canEdit)}}function Ge(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"i",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.useClacModeChange(!i.crudConfiguration.useCalcMode)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"i",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.useViewChange(!i.crudConfiguration.useView)}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.useSignalRChange(!i.crudConfiguration.useSignalR)}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"i",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.usePopupChange(!i.crudConfiguration.usePopup)}),e.ALo(8,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Tol(t.crudConfiguration.useCalcMode?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(2,12,"bia.useCalcMode")),e.xp6(2),e.Tol(t.crudConfiguration.useView?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(4,14,"bia.useView")),e.xp6(2),e.Tol(t.crudConfiguration.useSignalR?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(6,16,"bia.useSignalR")),e.xp6(2),e.Tol(t.crudConfiguration.usePopup?"enable":"disabled"),e.s9C("pTooltip",e.lcZ(8,18,"bia.usePopup"))}}function Qe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"bia-table",17),e.NdJ("clickRow",function(i){return e.CHM(t),e.oxw().onClickRow(i)})("loadLazy",function(i){return e.CHM(t),e.oxw().onLoadLazy(i)})("selectedElementsChanged",function(i){return e.CHM(t),e.oxw().onSelectedElementsChanged(i)})("stateSave",function(i){return e.CHM(t),e.oxw().onStateSave(i)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("elements",e.lcZ(1,13,t.crudItems$))("totalRecord",e.lcZ(2,15,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.crudConfiguration.fieldsConfig)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canClickRow",t.canManageMembers)("canSelectElement",t.canDelete)("loading",e.lcZ(3,17,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)("sortFieldValue",t.sortFieldValue)}}function Ke(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-site-table",18),e.NdJ("loadLazy",function(i){return e.CHM(t),e.oxw().onLoadLazy(i)})("selectedElementsChanged",function(i){return e.CHM(t),e.oxw().onSelectedElementsChanged(i)})("stateSave",function(i){return e.CHM(t),e.oxw().onStateSave(i)})("save",function(i){return e.CHM(t),e.oxw().onSave(i)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("elements",e.lcZ(1,15,t.crudItems$))("dictOptionDtos",e.lcZ(2,17,t.siteService.optionsService.dictOptionDtos$))("totalRecord",e.lcZ(3,19,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.crudConfiguration.fieldsConfig)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canAdd",t.canAdd)("canSelectElement",t.canDelete)("loading",e.lcZ(4,21,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)("sortFieldValue",t.sortFieldValue)}}let He=(()=>{class n extends y.t{constructor(t,o,i){super(t,o),this.injector=t,this.siteService=o,this.authService=i,this.canManageMembers=!1,this.crudConfiguration=s.I}checkHaveAdvancedFilter(){this.haveAdvancedFilter=class Ae{static haveFilter(l){return null!=(null==l?void 0:l.userId)}}.haveFilter(this.crudConfiguration.fieldsConfig.advancedFilter)}setPermissions(){this.canEdit=this.authService.hasPermission(r.y.Site_Update),this.canDelete=this.authService.hasPermission(r.y.Site_Delete),this.canAdd=this.authService.hasPermission(r.y.Site_Create),this.canManageMembers=this.authService.hasPermission(r.y.Site_Member_List_Access)}onClickRow(t){this.onManageMember(t)}onManageMember(t){t&&t>0&&this.router.navigate([t,"members"],{relativeTo:this.activatedRoute})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(I.P),e.Y36(g.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sites-index"]],viewQuery:function(t,o){if(1&t&&e.Gf(j,5),2&t){let i;e.iGM(i=e.CRH())&&(o.crudItemTableComponent=i.first)}},features:[e.qOj],decls:11,vars:22,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],[3,"fxFlexValue","advancedFilter","filter","closeFilter",4,"ngIf"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","showBtnFilter","showFilter","haveFilter","create","exportCSV","delete","openFilter"],["pTemplate","actionOnSelected"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","tableState","useViewTeamWithTypeId","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],["pTemplate","customControl"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","clickRow","loadLazy","selectedElementsChanged","stateSave",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","loadLazy","selectedElementsChanged","stateSave","save",4,"ngIf"],[3,"fxFlexValue","advancedFilter","filter","closeFilter"],["pButton","","class","p-button-outlined",3,"disabled","label","click",4,"ngIf"],["pButton","",1,"p-button-outlined",3,"disabled","label","click"],["fxLayout","row","fxLayoutGap","20px",1,"bia-table-controller-container"],["tooltipPosition","top",1,"pi","pi-table","bia-pointer",3,"pTooltip","click"],["tooltipPosition","top",1,"pi","pi-eye","bia-pointer",3,"pTooltip","click"],["tooltipPosition","top",1,"pi","pi-sync","bia-pointer",3,"pTooltip","click"],["tooltipPosition","top",1,"pi","pi-clone","bia-pointer",3,"pTooltip","click"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","clickRow","loadLazy","selectedElementsChanged","stateSave"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","sortFieldValue","loadLazy","selectedElementsChanged","stateSave","save"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,$e,1,2,"app-site-filter",1),e.TgZ(2,"div",2)(3,"bia-table-header",3),e.NdJ("create",function(){return o.onCreate()})("exportCSV",function(){return o.onExportCSV()})("delete",function(){return o.onDelete()})("openFilter",function(){return o.onOpenFilter()}),e.ALo(4,"translate"),e.YNc(5,ze,1,1,"ng-template",4),e.qZA(),e.TgZ(6,"bia-table-controller",5),e.NdJ("displayedColumnsChange",function(_){return o.displayedColumnsChanged(_)})("filter",function(_){return o.searchGlobalChanged(_)})("pageSizeChange",function(_){return o.onPageSizeChange(_)})("toggleSearch",function(){return o.onToggleSearch()})("viewChange",function(_){return o.onViewChange(_)}),e.ALo(7,"async"),e.YNc(8,Ge,9,20,"ng-template",6),e.qZA(),e.YNc(9,Qe,4,19,"bia-table",7),e.YNc(10,Ke,5,23,"app-site-table",8),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.showAdvancedFilter),e.xp6(2),e.Q6J("headerTitle",e.lcZ(4,18,"site.listOf"))("canAdd",o.canAdd&&!o.crudConfiguration.useCalcMode)("canDelete",o.canDelete)("canExportCSV",!0)("selectedElements",o.selectedCrudItems)("showBtnFilter",!0)("showFilter",o.showAdvancedFilter)("haveFilter",o.haveAdvancedFilter),e.xp6(3),e.Q6J("defaultPageSize",o.defaultPageSize)("length",e.lcZ(7,20,o.totalCount$))("columns",o.columns)("columnToDisplays",o.displayedColumns)("tableStateKey",o.tableStateKey)("tableState",o.tableState)("useViewTeamWithTypeId",o.useViewTeamWithTypeId),e.xp6(3),e.Q6J("ngIf",!o.crudConfiguration.useCalcMode),e.xp6(1),e.Q6J("ngIf",o.crudConfiguration.useCalcMode))},directives:[A.xw,p.O5,Ne,A.yH,Je.l,S.jx,W.Hq,De.B,A.SQ,X.u,Re.$,j],pipes:[b.X$,p.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),n})();var Ue=a(6135),G=a(6249),Ve=a(466),Be=a(7224),je=a(3004),k=a(9373);function We(n,l){1&n&&e._UZ(0,"bia-spinner",1),2&n&&e.Q6J("overlay",!0)}let Xe=(()=>{class n extends je.m{constructor(t,o,i,_){super(o,i),this.store=t,this.injector=o,this.siteService=i,this.layoutService=_}ngOnInit(){super.ngOnInit(),this.sub.add(this.siteService.crudItem$.subscribe(t=>{(null==t?void 0:t.title)&&(this.route.data.pipe((0,Be.P)()).subscribe(o=>{o.breadcrumb=t.title}),this.layoutService.refreshBreadcrumb())}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.yh),e.Y36(e.zs3),e.Y36(I.P),e.Y36(Ve.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,o){1&t&&(e._UZ(0,"router-outlet"),e.YNc(1,We,1,1,"bia-spinner",0),e.ALo(2,"async")),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.crudItemService.loadingGet$)))},directives:[d.lC,p.O5,k.O],pipes:[p.Ov],styles:[""]}),n})();var Q=a(8832),J=a(3460),ke=a(956),qe=a(9517),et=a(459),tt=a(3569);let q=(()=>{class n extends et.V{}return n.\u0275fac=function(){let l;return function(o){return(l||(l=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-site-form"]],features:[e.qOj],decls:1,vars:3,consts:[[3,"element","fields","dictOptionDtos","save","cancel"]],template:function(t,o){1&t&&(e.TgZ(0,"bia-form",0),e.NdJ("save",function(_){return o.onSave(_)})("cancel",function(){return o.onCancel()}),e.qZA()),2&t&&e.Q6J("element",o.crudItem)("fields",o.fields)("dictOptionDtos",o.dictOptionDtos)},directives:[tt.E],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})();function nt(n,l){1&n&&e._UZ(0,"bia-spinner",2),2&n&&e.Q6J("overlay",!0)}let ot=(()=>{class n extends qe.G{constructor(t,o){super(t,o),this.injector=t,this.siteService=o,this.crudConfiguration=s.I}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(I.P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-site-edit"]],features:[e.qOj],decls:5,vars:10,consts:[[3,"crudItem","fields","dictOptionDtos","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,o){1&t&&(e.TgZ(0,"app-site-form",0),e.NdJ("cancel",function(){return o.onCancelled()})("save",function(_){return o.onSubmitted(_)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA(),e.YNc(3,nt,1,1,"bia-spinner",1),e.ALo(4,"async")),2&t&&(e.Q6J("crudItem",e.lcZ(1,4,o.siteService.crudItem$))("fields",o.crudConfiguration.fieldsConfig.columns)("dictOptionDtos",e.lcZ(2,6,o.siteService.optionsService.dictOptionDtos$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,8,o.siteService.loadingGet$)))},directives:[q,p.O5,k.O],pipes:[p.Ov],encapsulation:2}),n})();var it=a(6161);let at=(()=>{class n extends it.J{constructor(t,o){super(t,o),this.injector=t,this.siteService=o,this.crudConfiguration=s.I}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(I.P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-site-new"]],features:[e.qOj],decls:2,vars:4,consts:[[3,"fields","dictOptionDtos","cancel","save"]],template:function(t,o){1&t&&(e.TgZ(0,"app-site-form",0),e.NdJ("cancel",function(){return o.onCancelled()})("save",function(_){return o.onSubmitted(_)}),e.ALo(1,"async"),e.qZA()),2&t&&e.Q6J("fields",o.crudConfiguration.fieldsConfig.columns)("dictOptionDtos",e.lcZ(1,2,o.siteService.optionsService.dictOptionDtos$))},directives:[q],pipes:[p.Ov],encapsulation:2}),n})();var v=a(6517),L=a(1086),F=a(373),O=a(7545),M=a(4850),Z=a(7221),K=a(1406),H=a(7168),C=a(9147),D=a(4297),U=a(2762),lt=a(6631);let st=(()=>{class n{constructor(t,o,i,_){this.actions$=t,this.siteDas=o,this.biaMessageService=i,this.store=_,this.loadAllByPost$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(C.h.loadAllByPost),(0,F.j)("event"),(0,O.w)(f=>this.siteDas.getListByPost({event:f}).pipe((0,M.U)(x=>C.h.loadAllByPostSuccess({result:x,event:f})),(0,Z.K)(x=>(this.biaMessageService.showError(),(0,L.of)(C.h.failure({error:x})))))))),this.load$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(C.h.load),(0,F.j)("id"),(0,O.w)(f=>this.siteDas.get({id:f}).pipe((0,M.U)(x=>C.h.loadSuccess({site:x})),(0,Z.K)(x=>(this.biaMessageService.showError(),(0,L.of)(C.h.failure({error:x})))))))),this.create$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(C.h.create),(0,F.j)("site"),(0,K.b)(f=>(0,L.of)(f).pipe((0,H.M)(this.store.select(D.G.getLastLazyLoadEvent)))),(0,O.w)(([f,x])=>this.siteDas.post({item:f,offlineMode:s.I.useOfflineMode}).pipe((0,M.U)(()=>(this.biaMessageService.showAddSuccess(),s.I.useSignalR?(0,U.b)():C.h.loadAllByPost({event:x}))),(0,Z.K)(w=>(this.biaMessageService.showError(),(0,L.of)(C.h.failure({error:w})))))))),this.update$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(C.h.update),(0,F.j)("site"),(0,K.b)(f=>(0,L.of)(f).pipe((0,H.M)(this.store.select(D.G.getLastLazyLoadEvent)))),(0,O.w)(([f,x])=>this.siteDas.put({item:f,id:f.id,offlineMode:s.I.useOfflineMode}).pipe((0,M.U)(()=>(this.biaMessageService.showUpdateSuccess(),s.I.useSignalR?(0,U.b)():C.h.loadAllByPost({event:x}))),(0,Z.K)(w=>(this.biaMessageService.showError(),(0,L.of)(C.h.failure({error:w})))))))),this.destroy$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(C.h.remove),(0,F.j)("id"),(0,K.b)(f=>(0,L.of)(f).pipe((0,H.M)(this.store.select(D.G.getLastLazyLoadEvent)))),(0,O.w)(([f,x])=>this.siteDas.delete({id:f,offlineMode:s.I.useOfflineMode}).pipe((0,M.U)(()=>(this.biaMessageService.showDeleteSuccess(),s.I.useSignalR?(0,U.b)():C.h.loadAllByPost({event:x}))),(0,Z.K)(w=>(this.biaMessageService.showError(),(0,L.of)(C.h.failure({error:w})))))))),this.multiDestroy$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(C.h.multiRemove),(0,F.j)("ids"),(0,K.b)(f=>(0,L.of)(f).pipe((0,H.M)(this.store.select(D.G.getLastLazyLoadEvent)))),(0,O.w)(([f,x])=>this.siteDas.deletes({ids:f,offlineMode:s.I.useOfflineMode}).pipe((0,M.U)(()=>(this.biaMessageService.showDeleteSuccess(),s.I.useSignalR?(0,U.b)():C.h.loadAllByPost({event:x}))),(0,Z.K)(w=>(this.biaMessageService.showError(),(0,L.of)(C.h.failure({error:w}))))))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eX),e.LFG(lt.N),e.LFG(c.X),e.LFG(z.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var rt=a(3931);let ee=[{path:"",data:{breadcrumb:null,permission:r.y.Site_List_Access,InjectComponent:He},component:J.e,canActivate:[G.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:r.y.Site_Create,title:"site.add",InjectComponent:at,dynamicComponent:()=>s.I.usePopup?Q._:J.e},component:s.I.usePopup?Q._:J.e,canActivate:[G.n]},{path:":crudItemId",data:{breadcrumb:"",canNavigate:!1},component:Xe,canActivate:[G.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:r.y.Site_Update,title:"site.edit",InjectComponent:ot,dynamicComponent:()=>s.I.usePopup?Q._:J.e},component:s.I.usePopup?Q._:J.e,canActivate:[G.n]},{path:"",redirectTo:"edit"},{path:"members",data:{breadcrumb:"app.members",canNavigate:!0,permission:r.y.Site_Member_List_Access},loadChildren:()=>Promise.all([a.e(760),a.e(925),a.e(504)]).then(a.bind(a,5504)).then(n=>n.SiteMemberModule)}]}]},{path:"**",redirectTo:""}],ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[Ue.m,ke.U,d.Bz.forChild(ee),z.Aw.forFeature(s.I.storeKey,D.G.reducers),v.sQ.forFeature([st]),rt.U]]}),n})()},4297:(E,T,a)=>{a.d(T,{G:()=>u});var d=a(5685),s=a(5094),g=a(9147);const r=(0,d.H)({selectId:c=>c.id,sortComparer:!1}),y=r.getInitialState({totalCount:0,currentSite:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),I=(0,s.Lq)(y,(0,s.on)(g.h.loadAllByPost,(c,{})=>Object.assign(Object.assign({},c),{loadingGetAll:!0})),(0,s.on)(g.h.load,c=>Object.assign(Object.assign({},c),{loadingGet:!0})),(0,s.on)(g.h.loadAllByPostSuccess,(c,{result:b,event:p})=>{const h=r.setAll(b.data,c);return h.totalCount=b.totalCount,h.lastLazyLoadEvent=p,h.loadingGetAll=!1,h}),(0,s.on)(g.h.loadSuccess,(c,{site:b})=>Object.assign(Object.assign({},c),{currentSite:b,loadingGet:!1})),(0,s.on)(g.h.failure,(c,{})=>Object.assign(Object.assign({},c),{loadingGetAll:!1,loadingGet:!1})));var u,c,e=a(9825);(c=u||(u={})).reducers=function b(p,h){return(0,s.UY)({sites:I})(p,h)},c.getSitesState=(0,s.ZF)(e.I.storeKey),c.getSitesEntitiesState=(0,s.P1)(c.getSitesState,p=>p.sites),c.getSitesTotalCount=(0,s.P1)(c.getSitesEntitiesState,p=>p.totalCount),c.getCurrentSite=(0,s.P1)(c.getSitesEntitiesState,p=>p.currentSite),c.getLastLazyLoadEvent=(0,s.P1)(c.getSitesEntitiesState,p=>p.lastLazyLoadEvent),c.getSiteLoadingGet=(0,s.P1)(c.getSitesEntitiesState,p=>p.loadingGet),c.getSiteLoadingGetAll=(0,s.P1)(c.getSitesEntitiesState,p=>p.loadingGetAll),c.getAllSites=r.getSelectors(c.getSitesEntitiesState).selectAll,c.getSiteById=p=>(0,s.P1)(c.getSitesEntitiesState,(c=>b=>b.entities[c])(p))},9147:(E,T,a)=>{a.d(T,{h:()=>g});var g,r,d=a(5094),s=a(9825);(r=g||(g={})).loadAllByPost=(0,d.PH)("["+s.I.storeKey+"] Load all by post",(0,d.Ky)()),r.load=(0,d.PH)("["+s.I.storeKey+"] Load",(0,d.Ky)()),r.create=(0,d.PH)("["+s.I.storeKey+"] Create",(0,d.Ky)()),r.update=(0,d.PH)("["+s.I.storeKey+"] Update",(0,d.Ky)()),r.remove=(0,d.PH)("["+s.I.storeKey+"] Remove",(0,d.Ky)()),r.multiRemove=(0,d.PH)("["+s.I.storeKey+"] Multi Remove",(0,d.Ky)()),r.loadAllByPostSuccess=(0,d.PH)("["+s.I.storeKey+"] Load all by post success",(0,d.Ky)()),r.loadSuccess=(0,d.PH)("["+s.I.storeKey+"] Load success",(0,d.Ky)()),r.failure=(0,d.PH)("["+s.I.storeKey+"] Failure",(0,d.Ky)())}}]);