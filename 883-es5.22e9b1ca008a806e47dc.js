!function(){function e(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[883],{49457:function(e,t){var n,i;void 0!==(i="function"==typeof(n=function(){"use strict";function t(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){a(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,r,a){var s=o.URL||o.webkitURL,l=document.createElement("a");l.download=r=r||e.name||"download",l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):n(l.href)?t(e,r,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,r){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),o);else if(n(e))t(e,o,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){i(a)})}}:function(e,n,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,i);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var f=o.URL||o.webkitURL,p=f.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,[]):n)&&(e.exports=i)},11466:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var i=n(16244),o=function(){function e(){u(this,e)}return p(e,null,[{key:"Clone",value:function(e){return e?Object.assign({},e):null}},{key:"Differential",value:function(e,t){var n=[];if(t&&Array.isArray(t)){var o=t.filter(function(t){return!e||!e.map(function(e){return e.id}).includes(t.id)}).map(function(e){return Object.assign(Object.assign({},e),{dtoState:i.e.Deleted})});o&&(n=n.concat(o))}if(e){var r=null==e?void 0:e.filter(function(e){return!t||!t.map(function(e){return e.id}).includes(e.id)}).map(function(e){return Object.assign(Object.assign({},e),{dtoState:i.e.Added})});r&&(n=n.concat(r))}return n}}]),e}()},82762:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var i=(0,n(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},79883:function(n,i,a){"use strict";a.r(i),a.d(i,{MemberModule:function(){return mn}});var l,c=a(2694),f=a(86710),d=a(91601),m=a(25917),h=a(92996),g=a(43190),b=a(88002),v=a(5304),y=a(94612),w=a(57057),S=(0,f.PH)("[Members] Load all by post",(0,f.Ky)()),x=(0,f.PH)("[Members] Load",(0,f.Ky)()),C=(0,f.PH)("[Members] Create",(0,f.Ky)()),M=(0,f.PH)("[Members] Update",(0,f.Ky)()),A=(0,f.PH)("[Members] Remove",(0,f.Ky)()),O=(0,f.PH)("[Members] Multi Remove",(0,f.Ky)()),Z=(0,f.PH)("[Members] Load all by post success",(0,f.Ky)()),L=(0,f.PH)("[Members] Load success",(0,f.Ky)()),T=(0,f.PH)("[Members] Failure",(0,f.Ky)()),k=a(74147),N=a(37716),I=((l=function(e){r(n,e);var t=s(n);function n(e){return u(this,n),t.call(this,e,"Members")}return n}(k.Z)).\u0275fac=function(e){return new(e||l)(N.LFG(N.zs3))},l.\u0275prov=N.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l),J=a(80273),Q=(0,J.H)({selectId:function(e){return e.id},sortComparer:!1}),Y=Q.getInitialState({totalCount:0,currentMember:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),$=(0,f.Lq)(Y,(0,f.on)(S,function(e,t){return o(t),Object.assign(Object.assign({},e),{loadingGetAll:!0})}),(0,f.on)(x,function(e){return Object.assign(Object.assign({},e),{loadingGet:!0})}),(0,f.on)(Z,function(e,t){var n=t.result,i=t.event,o=Q.setAll(n.data,e);return o.totalCount=n.totalCount,o.lastLazyLoadEvent=i,o.loadingGetAll=!1,o}),(0,f.on)(L,function(e,t){var n=t.member;return Object.assign(Object.assign({},e),{currentMember:n,loadingGet:!1})}),(0,f.on)(T,function(e,t){return o(t),Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})}));function E(e,t){return(0,f.UY)({members:$})(e,t)}var F=(0,f.ZF)("members"),D=(0,f.P1)(F,function(e){return e.members}),R=(0,f.P1)(D,function(e){return e.totalCount}),P=(0,f.P1)(D,function(e){return e.currentMember}),B=(0,f.P1)(D,function(e){return e.lastLazyLoadEvent}),j=(0,f.P1)(D,function(e){return e.loadingGet}),H=(0,f.P1)(D,function(e){return e.loadingGetAll}),_=Q.getSelectors(D).selectAll,q=a(82762),z=a(42),U=function(){var e=function e(n,i,o,r){var a=this;u(this,e),this.actions$=n,this.memberDas=i,this.biaMessageService=o,this.store=r,this.loadAllByPost$=(0,d.GW)(function(){return a.actions$.pipe((0,d.l4)(S),(0,h.j)("event"),(0,g.w)(function(e){return a.memberDas.getListByPost(e).pipe((0,b.U)(function(t){return Z({result:t,event:e})}),(0,v.K)(function(e){return a.biaMessageService.showError(),(0,m.of)(T({error:e}))}))}))}),this.load$=(0,d.GW)(function(){return a.actions$.pipe((0,d.l4)(x),(0,h.j)("id"),(0,g.w)(function(e){return a.memberDas.get(e).pipe((0,b.U)(function(e){return L({member:e})}),(0,v.K)(function(e){return a.biaMessageService.showError(),(0,m.of)(T({error:e}))}))}))}),this.create$=(0,d.GW)(function(){return a.actions$.pipe((0,d.l4)(C),(0,h.j)("member"),(0,y.b)(function(e){return(0,m.of)(e).pipe((0,w.M)(a.store.select(B)))}),(0,g.w)(function(n){var i=t(n,2),o=i[0],r=i[1];return a.memberDas.post(o).pipe((0,b.U)(function(){return a.biaMessageService.showAddSuccess(),e.useSignalR?(0,q.b)():S({event:r})}),(0,v.K)(function(e){return a.biaMessageService.showError(),(0,m.of)(T({error:e}))}))}))}),this.update$=(0,d.GW)(function(){return a.actions$.pipe((0,d.l4)(M),(0,h.j)("member"),(0,y.b)(function(e){return(0,m.of)(e).pipe((0,w.M)(a.store.select(B)))}),(0,g.w)(function(n){var i=t(n,2),o=i[0],r=i[1];return a.memberDas.put(o,o.id).pipe((0,b.U)(function(){return a.biaMessageService.showUpdateSuccess(),e.useSignalR?(0,q.b)():S({event:r})}),(0,v.K)(function(e){return a.biaMessageService.showError(),(0,m.of)(T({error:e}))}))}))}),this.destroy$=(0,d.GW)(function(){return a.actions$.pipe((0,d.l4)(A),(0,h.j)("id"),(0,y.b)(function(e){return(0,m.of)(e).pipe((0,w.M)(a.store.select(B)))}),(0,g.w)(function(n){var i=t(n,2),o=i[0],r=i[1];return a.memberDas.delete(o).pipe((0,b.U)(function(){return a.biaMessageService.showDeleteSuccess(),e.useSignalR?(0,q.b)():S({event:r})}),(0,v.K)(function(e){return a.biaMessageService.showError(),(0,m.of)(T({error:e}))}))}))}),this.multiDestroy$=(0,d.GW)(function(){return a.actions$.pipe((0,d.l4)(O),(0,h.j)("ids"),(0,y.b)(function(e){return(0,m.of)(e).pipe((0,w.M)(a.store.select(B)))}),(0,g.w)(function(n){var i=t(n,2),o=i[0],r=i[1];return a.memberDas.deletes(o).pipe((0,b.U)(function(){return a.biaMessageService.showDeleteSuccess(),e.useSignalR?(0,q.b)():S({event:r})}),(0,v.K)(function(e){return a.biaMessageService.showError(),(0,m.of)(T({error:e}))}))}))})};return e.useSignalR=!1,e.\u0275fac=function(t){return new(t||e)(N.LFG(d.eX),N.LFG(I),N.LFG(z.X),N.LFG(f.yh))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac}),e}(),G=a(75319),K=a(88385),V=a(79090),X=a(40136),W=a(8340),ee=a(49457),te=a(38042),ne=a(29206),ie=a(28049),oe=a(59142),re=a(9716),ae=function(){var e=function(){function e(t,n,i){u(this,e),this.store=t,this.signalRService=n,this.siteService=i}return p(e,[{key:"initialize",value:function(){var e=this;console.log("%c [Members] Register SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-members",function(){e.store.select(B).pipe((0,ie.P)()).subscribe(function(t){console.log("%c [Members] RefreshSuccess","color: green; font-weight: bold"),e.store.dispatch(S({event:t}))})}),this.targetedFeature={parentKey:this.siteService.currentSiteId.toString(),featureName:"members"},this.signalRService.joinGroup(this.targetedFeature)}},{key:"destroy",value:function(){console.log("%c [Members] Unregister SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-members"),this.signalRService.leaveGroup(this.targetedFeature)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.LFG(f.yh),N.LFG(oe.Y),N.LFG(re.P))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),se=a(46468),le=a(9112),ce=(0,f.PH)("[Domain Role Options] Load all"),ue=(0,f.PH)("[Domain Role Options] Load all success",(0,f.Ky)()),fe=(0,f.PH)("[Domain Role Options] Failure",(0,f.Ky)()),pe=(0,J.H)({selectId:function(e){return e.id},sortComparer:!1}),de=pe.getInitialState({}),me=(0,f.Lq)(de,(0,f.on)(ue,function(e,t){var n=t.roles;return pe.setAll(n,e)}));function he(e,t){return(0,f.UY)({roleOptions:me})(e,t)}var ge=(0,f.ZF)("domain-role-options"),be=(0,f.P1)(ge,function(e){return e.roleOptions}),ve=pe.getSelectors(be).selectAll,ye=a(43590),we=a(71585),Se=a(94529),xe=function(){var e=function(){function e(t){u(this,e),this.store=t,this.userOptions$=this.store.select(ye.yp),this.roleOptions$=this.store.select(ve),this.dictOptionDtos$=(0,le.aj)([this.userOptions$,this.roleOptions$]).pipe((0,b.U)(function(e){return[new Se.b("user",e[0]),new Se.b("roles",e[1])]}))}return p(e,[{key:"loadAllOptions",value:function(){this.store.dispatch((0,we.Ae)()),this.store.dispatch(ce())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.LFG(f.yh))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ce=a(81780),Me=a(35618),Ae=a(81606),Oe=a(76743),Ze=a(38583),Le=a(3679),Te=a(11466),ke=a(86320),Ne=a(70667),Ie=a(33013),Je=a(13928),Qe=a(88030),Ye=a(50103),$e=a(36949),Ee=a(12332),Fe=a(88598),De=a(45862),Re=a(49067);function Pe(e,t){1&e&&(N.TgZ(0,"th",10),N._UZ(1,"p-tableHeaderCheckbox"),N.qZA())}function Be(e,t){if(1&e&&(N.TgZ(0,"th",12),N._uU(1),N.ALo(2,"translate"),N._UZ(3,"p-sortIcon",13),N.qZA()),2&e){var n=N.oxw().$implicit;N.Q6J("pSortableColumn",n.field),N.xp6(1),N.hij(" ",N.lcZ(2,3,null==n?null:n.header)," "),N.xp6(2),N.Q6J("field",n.field)}}function je(e,t){if(1&e&&(N.TgZ(0,"th"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e){var n=N.oxw().$implicit;N.xp6(1),N.hij(" ",N.lcZ(2,1,null==n?null:n.header)," ")}}function He(e,t){if(1&e&&(N.ynx(0),N.YNc(1,Be,4,5,"th",11),N.YNc(2,je,3,3,"th",9),N.BQk()),2&e){var n=t.$implicit;N.xp6(1),N.Q6J("ngIf",!0===(null==n?null:n.isSortable)),N.xp6(1),N.Q6J("ngIf",!0!==(null==n?null:n.isSortable))}}function _e(e,t){1&e&&N._UZ(0,"th")}var qe=function(e){return{"p-state-filled":e}};function ze(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"span",17),N.TgZ(1,"input",18),N.NdJ("input",function(e){N.CHM(n);var t=N.oxw().$implicit;return N.oxw(3),N.MAs(1).filter(e.target.value,t.field,t.filterMode)}),N.ALo(2,"translate"),N.qZA(),N.qZA()}if(2&e){var i=N.oxw().$implicit;N.oxw(3);var o=N.MAs(1);N.xp6(1),N.s9C("type","Number"===i.type?"number":"text"),N.s9C("placeholder",void 0!==i.searchPlaceholder?i.searchPlaceholder:!0===i.isDate?N.lcZ(2,4,"bia.dateIso8601"):""),N.Q6J("value",null==o.filters[i.field]?null:o.filters[i.field].value)("ngClass",N.VKq(6,qe,""!==(null==o.filters[i.field]?null:o.filters[i.field].value)))}}function Ue(e,t){if(1&e&&(N.TgZ(0,"th",15),N.YNc(1,ze,3,8,"span",16),N.qZA()),2&e){var n=t.$implicit;N.Q6J("ngSwitch",n.field),N.xp6(1),N.Q6J("ngIf",!0===n.isSearchable)}}function Ge(e,t){if(1&e&&(N.TgZ(0,"tr"),N.YNc(1,_e,1,0,"th",9),N.YNc(2,Ue,2,2,"th",14),N.qZA()),2&e){var n=N.oxw().$implicit,i=N.oxw(2);N.xp6(1),N.Q6J("ngIf",i.canSelectElement),N.xp6(1),N.Q6J("ngForOf",n)}}function Ke(e,t){if(1&e&&(N.TgZ(0,"tr"),N.YNc(1,Pe,2,0,"th",7),N.YNc(2,He,3,2,"ng-container",8),N.qZA(),N.YNc(3,Ge,3,2,"tr",9)),2&e){var n=t.$implicit,i=N.oxw(2);N.xp6(1),N.Q6J("ngIf",i.canSelectElement),N.xp6(1),N.Q6J("ngForOf",n),N.xp6(1),N.Q6J("ngIf",i.showColSearch)}}function Ve(e,t){if(1&e&&N._UZ(0,"p-tableCheckbox",23),2&e){var n=N.oxw(2).$implicit;N.Q6J("value",n)}}function Xe(e,t){1&e&&N._UZ(0,"i",24)}function We(e,t){if(1&e&&(N.TgZ(0,"td"),N.YNc(1,Ve,1,1,"p-tableCheckbox",21),N.YNc(2,Xe,1,0,"i",22),N.qZA()),2&e){var n=N.oxw().$implicit,i=N.oxw(2);N.xp6(1),N.Q6J("ngIf",!0!==i.isFooter(n)&&n.id>0),N.xp6(1),N.Q6J("ngIf",!0===i.isFooter(n))}}function et(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"input",29),N.NdJ("change",function(){return N.CHM(n),N.oxw(6).onChange()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(3).$implicit;N.xp6(1),N.Q6J("formControlName",i.field)}}function tt(e,t){1&e&&(N.TgZ(0,"span",30),N._uU(1,"*"),N.qZA())}function nt(e,t){if(1&e&&(N.ynx(0,15),N.YNc(1,et,2,1,"ng-container",27),N.BQk(),N.YNc(2,tt,2,0,"span",28)),2&e){var n=N.oxw(2).$implicit,i=N.oxw(3);N.Q6J("ngSwitch",n.field),N.xp6(2),N.Q6J("ngIf",!0===i.isRequired(n.field))}}function it(e,t){1&e&&N.YNc(0,nt,3,2,"ng-template",26)}function ot(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.BQk()),2&e){var n=N.oxw(3).$implicit,i=N.oxw().$implicit;N.xp6(1),N.hij(" ",i[n.field]," ")}}function rt(e,t){if(1&e&&(N.ynx(0,15),N.YNc(1,ot,2,1,"ng-container",27),N.BQk()),2&e){var n=N.oxw(2).$implicit;N.Q6J("ngSwitch",n.field)}}function at(e,t){1&e&&N.YNc(0,rt,2,1,"ng-template",31)}var st=function(){return{width:"100%"}};function lt(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-dropdown",35),N.NdJ("onChange",function(){return N.CHM(n),N.oxw(7).onChange()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit,o=N.oxw(3);N.xp6(1),N.Akn(N.DdM(4,st)),N.Q6J("formControlName",i.field)("options",o.getOptionDto(i.field))}}function ct(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-multiSelect",36),N.NdJ("onChange",function(){return N.CHM(n),N.oxw(7).onChange()})("onPanelShow",function(){return N.CHM(n),N.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return N.CHM(n),N.oxw(7).onPanelHideMultiSelect()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit,o=N.oxw(3);N.xp6(1),N.Akn(N.DdM(4,st)),N.Q6J("formControlName",i.field)("options",o.getOptionDto(i.field))}}function ut(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-checkbox",37),N.NdJ("onChange",function(){return N.CHM(n),N.oxw(7).onChange()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Q6J("binary",!0)("formControlName",i.field)}}function ft(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"input",38),N.NdJ("change",function(){return N.CHM(n),N.oxw(7).onChange()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Q6J("formControlName",i.field)}}function pt(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-calendar",39),N.NdJ("onShow",function(){return N.CHM(n),N.oxw(7).onShowCalendar()})("onSelect",function(){return N.CHM(n),N.oxw(7).onChange()})("onBlur",function(){return N.CHM(n),N.oxw(7).onBlurCalendar()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Akn(N.DdM(5,st)),N.Q6J("formControlName",i.field)("showButtonBar",!0)("inputStyle",N.DdM(6,st))}}function dt(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-calendar",40),N.NdJ("onShow",function(){return N.CHM(n),N.oxw(7).onShowCalendar()})("onSelect",function(){return N.CHM(n),N.oxw(7).onChange()})("onBlur",function(){return N.CHM(n),N.oxw(7).onBlurCalendar()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Akn(N.DdM(5,st)),N.Q6J("formControlName",i.field)("inputStyle",N.DdM(6,st))("timeOnly",!0)}}function mt(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-calendar",41),N.NdJ("onShow",function(){return N.CHM(n),N.oxw(7).onShowCalendar()})("onSelect",function(){return N.CHM(n),N.oxw(7).onChange()})("onBlur",function(){return N.CHM(n),N.oxw(7).onBlurCalendar()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Akn(N.DdM(5,st)),N.Q6J("formControlName",i.field)("inputStyle",N.DdM(6,st))("timeOnly",!0)}}function ht(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-calendar",42),N.NdJ("onShow",function(){return N.CHM(n),N.oxw(7).onShowCalendar()})("onSelect",function(){return N.CHM(n),N.oxw(7).onChange()})("onBlur",function(){return N.CHM(n),N.oxw(7).onBlurCalendar()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Akn(N.DdM(5,st)),N.Q6J("formControlName",i.field)("inputStyle",N.DdM(6,st))("timeOnly",!0)}}function gt(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"p-calendar",43),N.NdJ("onShow",function(){return N.CHM(n),N.oxw(7).onShowCalendar()})("onSelect",function(){return N.CHM(n),N.oxw(7).onChange()})("onBlur",function(){return N.CHM(n),N.oxw(7).onBlurCalendar()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Akn(N.DdM(5,st)),N.Q6J("formControlName",i.field)("showButtonBar",!0)("inputStyle",N.DdM(6,st))}}function bt(e,t){if(1&e){var n=N.EpF();N.ynx(0),N.TgZ(1,"input",44),N.NdJ("change",function(){return N.CHM(n),N.oxw(7).onChange()}),N.qZA(),N.BQk()}if(2&e){var i=N.oxw(4).$implicit;N.xp6(1),N.Q6J("maxlength",i.maxlength)("formControlName",i.field)}}function vt(e,t){1&e&&(N.TgZ(0,"span",30),N._uU(1,"*"),N.qZA())}function yt(e,t){if(1&e&&(N.ynx(0,15),N.YNc(1,lt,2,5,"ng-container",34),N.YNc(2,ct,2,5,"ng-container",34),N.YNc(3,ut,2,2,"ng-container",34),N.YNc(4,ft,2,1,"ng-container",34),N.YNc(5,pt,2,7,"ng-container",34),N.YNc(6,dt,2,7,"ng-container",34),N.YNc(7,mt,2,7,"ng-container",34),N.YNc(8,ht,2,7,"ng-container",34),N.YNc(9,gt,2,7,"ng-container",34),N.YNc(10,bt,2,2,"ng-container",27),N.BQk(),N.YNc(11,vt,2,0,"span",28)),2&e){var n=N.oxw(3).$implicit,i=N.oxw(3);N.Q6J("ngSwitch",n.type),N.xp6(1),N.Q6J("ngSwitchCase","OneToMany"),N.xp6(1),N.Q6J("ngSwitchCase","ManyToMany"),N.xp6(1),N.Q6J("ngSwitchCase","Boolean"),N.xp6(1),N.Q6J("ngSwitchCase","Number"),N.xp6(1),N.Q6J("ngSwitchCase","Date"),N.xp6(1),N.Q6J("ngSwitchCase","Time"),N.xp6(1),N.Q6J("ngSwitchCase","TimeOnly"),N.xp6(1),N.Q6J("ngSwitchCase","TimeSecOnly"),N.xp6(1),N.Q6J("ngSwitchCase","DateTime"),N.xp6(2),N.Q6J("ngIf",!0===i.isRequired(n.field))}}function wt(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.BQk()),2&e){var n=N.oxw(5).$implicit,i=N.oxw().$implicit;N.xp6(1),N.hij(" ",null==i[n.field]?null:i[n.field].display," ")}}function St(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.BQk()),2&e){var n=N.oxw(5).$implicit,i=N.oxw().$implicit,o=N.oxw(2);N.xp6(1),N.hij(" ",o.formatDisplayName(i[n.field])," ")}}function xt(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.ALo(2,"formatValue"),N.BQk()),2&e){var n=N.oxw(5).$implicit,i=N.oxw().$implicit;N.xp6(1),N.hij(" ",N.xi3(2,1,i[n.field],n)," ")}}function Ct(e,t){if(1&e&&(N.ynx(0),N.ynx(1,15),N.YNc(2,wt,2,1,"ng-container",34),N.YNc(3,St,2,1,"ng-container",34),N.YNc(4,xt,3,4,"ng-container",27),N.BQk(),N.BQk()),2&e){var n=N.oxw(4).$implicit;N.xp6(1),N.Q6J("ngSwitch",n.type),N.xp6(1),N.Q6J("ngSwitchCase","OneToMany"),N.xp6(1),N.Q6J("ngSwitchCase","ManyToMany")}}function Mt(e,t){if(1&e&&N.YNc(0,Ct,5,3,"ng-container",9),2&e){var n=N.oxw(4).$implicit,i=N.oxw(2);N.Q6J("ngIf",!0!==i.isFooter(n))}}function At(e,t){if(1&e&&(N.YNc(0,yt,12,11,"ng-template",32),N.YNc(1,Mt,1,1,"ng-template",null,33,N.W1O)),2&e){var n=N.MAs(2),i=N.oxw(2).$implicit;N.Q6J("ngIf",!0===i.isEditable)("ngIfElse",n)}}function Ot(e,t){1&e&&N.YNc(0,At,3,2,"ng-template",26)}function Zt(e,t){1&e&&(N.TgZ(0,"label"),N._uU(1,"-"),N.qZA())}function Lt(e,t){if(1&e&&N.YNc(0,Zt,2,0,"label",9),2&e){var n=N.oxw(3).$implicit;N.Q6J("ngIf",!0===n.isEditable)}}function Tt(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.BQk()),2&e){var n=N.oxw(4).$implicit,i=N.oxw().$implicit;N.xp6(1),N.hij(" ",null==i[n.field]?null:i[n.field].display," ")}}function kt(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.BQk()),2&e){var n=N.oxw(4).$implicit,i=N.oxw().$implicit,o=N.oxw(2);N.xp6(1),N.hij(" ",o.formatDisplayName(i[n.field])," ")}}function Nt(e,t){1&e&&N._UZ(0,"i",47)}function It(e,t){if(1&e&&(N.ynx(0),N.YNc(1,Nt,1,0,"i",46),N.BQk()),2&e){var n=N.oxw(4).$implicit,i=N.oxw().$implicit;N.xp6(1),N.Q6J("ngIf",!0===i[n.field])}}function Jt(e,t){if(1&e&&(N.ynx(0),N._uU(1),N.ALo(2,"formatValue"),N.BQk()),2&e){var n=N.oxw(4).$implicit,i=N.oxw().$implicit;N.xp6(1),N.hij(" ",N.xi3(2,1,i[n.field],n)," ")}}function Qt(e,t){if(1&e&&(N.ynx(0,15),N.YNc(1,Tt,2,1,"ng-container",34),N.YNc(2,kt,2,1,"ng-container",34),N.YNc(3,It,2,1,"ng-container",34),N.YNc(4,Jt,3,4,"ng-container",27),N.BQk()),2&e){var n=N.oxw(3).$implicit;N.Q6J("ngSwitch",n.type),N.xp6(1),N.Q6J("ngSwitchCase","OneToMany"),N.xp6(1),N.Q6J("ngSwitchCase","ManyToMany"),N.xp6(1),N.Q6J("ngSwitchCase","Boolean")}}function Yt(e,t){if(1&e&&(N.YNc(0,Lt,1,1,"ng-template",32),N.YNc(1,Qt,5,4,"ng-template",null,45,N.W1O)),2&e){var n=N.MAs(2),i=N.oxw(3).$implicit,o=N.oxw(2);N.Q6J("ngIf",!0===o.isFooter(i))("ngIfElse",n)}}function $t(e,t){1&e&&N.YNc(0,Yt,3,2,"ng-template",31)}function Et(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"td",25),N.NdJ("click",function(){N.CHM(n);var e=N.oxw().$implicit;return N.oxw(2).initEditableRow(e)}),N.TgZ(1,"p-cellEditor"),N.YNc(2,it,1,0,void 0,9),N.YNc(3,at,1,0,void 0,9),N.YNc(4,Ot,1,0,void 0,9),N.YNc(5,$t,1,0,void 0,9),N.qZA(),N.qZA()}if(2&e){var i=t.$implicit,o=N.oxw(3);N.xp6(2),N.Q6J("ngIf",!0===o.isSpecificInput(i.field)),N.xp6(1),N.Q6J("ngIf",!0===o.isSpecificInput(i.field)),N.xp6(1),N.Q6J("ngIf",!0!==o.isSpecificInput(i.field)),N.xp6(1),N.Q6J("ngIf",!0!==o.isSpecificInput(i.field))}}function Ft(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"tr",19),N.NdJ("focusout",function(){return N.CHM(n),N.oxw(2).onFocusout()})("keyup.enter",function(){return N.CHM(n),N.oxw(2).initEditableRow(null)})("keyup.escape",function(){return N.CHM(n),N.oxw(2).cancel()}),N.YNc(1,We,3,2,"td",9),N.YNc(2,Et,6,4,"td",20),N.qZA()}if(2&e){var i=t.$implicit,o=t.columns,r=N.oxw(2);N.Q6J("pSelectableRow",!0!==r.isFooter(i)?i:null)("pEditableRow",i),N.xp6(1),N.Q6J("ngIf",r.canSelectElement),N.xp6(1),N.Q6J("ngForOf",o)}}function Dt(e,t){if(1&e&&(N.TgZ(0,"tr"),N.TgZ(1,"td",48),N._uU(2),N.ALo(3,"translate"),N.qZA(),N.qZA()),2&e){var n=t.$implicit;N.xp6(1),N.uIk("colspan",n.length+1),N.xp6(1),N.hij(" ",N.lcZ(3,2,"bia.NoRecordsFound")," ")}}function Rt(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"p-table",2,3),N.NdJ("onFilter",function(){return N.CHM(n),N.oxw().onFilter()})("onLazyLoad",function(e){return N.CHM(n),N.oxw().onLoadLazy(e)})("onStateSave",function(e){return N.CHM(n),N.oxw().onStateSave(e)})("selectionChange",function(){return N.CHM(n),N.oxw().onSelectionChange()}),N.ALo(2,"async"),N.YNc(3,Ke,4,3,"ng-template",4),N.YNc(4,Ft,3,4,"ng-template",5),N.YNc(5,Dt,4,4,"ng-template",6),N.qZA()}if(2&e){var i=N.oxw();N.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",i.displayedColumns)("value",i.elements)("paginator",i.paginator)("rows",i.pageSize)("totalRecords",i.totalRecord)("lazy",!0)("loading",i.loading&&null!==N.lcZ(2,14,i.showLoading$))("stateStorage","session")("stateKey",i.tableStateKey)("lazyLoadOnInit",i.getLazyLoadOnInit())("sortField",i.sortFieldValue)("sortOrder",i.sortOrderValue)}}var Pt=function(){var e=function(e){r(n,e);var t=s(n);function n(e,i,o,r,a){var s;return u(this,n),(s=t.call(this,e,i,o,r)).formBuilder=e,s.authService=i,s.biaMessageService=o,s.translateService=r,s.siteService=a,s}return p(n,[{key:"initForm",value:function(){this.form=this.formBuilder.group({id:[this.element.id],user:[this.element.user,Le.kI.required],roles:[this.element.roles]})}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.roles=Te.P.Differential(t.roles,null===(e=this.element)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.siteId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}]),n}(ke.l);return e.\u0275fac=function(t){return new(t||e)(N.Y36(Le.qu),N.Y36(W.e),N.Y36(z.X),N.Y36(Ce.sK),N.Y36(re.P))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-member-table"]],features:[N.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(e,t){1&e&&(N.TgZ(0,"form",0),N.YNc(1,Rt,6,16,"p-table",1),N.qZA()),2&e&&(N.Q6J("formGroup",t.form),N.xp6(1),N.Q6J("ngIf",t.configuration))},directives:[Le._Y,Le.JL,Le.sg,Ze.O5,Ne.iA,Ie.jx,Ze.sg,Ne.Mo,Ne.lQ,Ne.fz,Ze.RF,Je.o,Ze.mk,Qe.oO,Ne.Ei,Ne.D$,Ne.UA,Ne.YL,Ze.ED,Le.Fj,Le.JJ,Le.u,Ze.n9,Ye.Lt,$e.NU,Ee.XZ,Le.wV,Fe.f,De.D,Le.nD],pipes:[Ze.Ov,Ce.X$,Re.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),e}();function Bt(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"bia-table",6),N.NdJ("edit",function(e){return N.CHM(n),N.oxw().onEdit(e)})("loadLazy",function(e){return N.CHM(n),N.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return N.CHM(n),N.oxw().onSelectedElementsChanged(e)}),N.ALo(1,"async"),N.ALo(2,"async"),N.ALo(3,"async"),N.qZA()}if(2&e){var i=N.oxw();N.Q6J("elements",N.lcZ(1,12,i.members$))("totalRecord",N.lcZ(2,14,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canEdit",i.canEdit)("canSelectElement",i.canDelete)("loading",N.lcZ(3,16,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}function jt(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"app-member-table",7),N.NdJ("loadLazy",function(e){return N.CHM(n),N.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return N.CHM(n),N.oxw().onSelectedElementsChanged(e)})("save",function(e){return N.CHM(n),N.oxw().onSave(e)}),N.ALo(1,"async"),N.ALo(2,"async"),N.ALo(3,"async"),N.ALo(4,"async"),N.qZA()}if(2&e){var i=N.oxw();N.Q6J("elements",N.lcZ(1,14,i.members$))("dictOptionDtos",N.lcZ(2,16,i.memberOptionsService.dictOptionDtos$))("totalRecord",N.lcZ(3,18,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canEdit",i.canEdit)("canAdd",i.canAdd)("canSelectElement",i.canDelete)("loading",N.lcZ(4,20,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}var Ht=function(){var t=function(){function t(e,n,i,o,r,a,s,l,c,f){u(this,t),this.store=e,this.router=n,this.activatedRoute=i,this.authService=o,this.memberDas=r,this.translateService=a,this.biaTranslationService=s,this.membersSignalRService=l,this.memberOptionsService=c,this.siteService=f,this.useCalcMode=!1,this.useSignalR=!1,this.useView=!1,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new G.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=X.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"membersGrid":void 0}return p(t,[{key:"ngOnInit",value:function(){var e=this;if(this.sub=new G.w,this.initTableConfiguration(),this.setPermissions(),this.members$=this.store.select(_),this.totalCount$=this.store.select(R),this.loading$=this.store.select(H),this.OnDisplay(),this.useCalcMode&&this.memberOptionsService.loadAllOptions(),this.useRefreshAtLanguageChange){var t=!0;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t?t=!1:e.onLoadLazy(e.memberListComponent.getLazyLoadMetadata())}))}this.parentIds=[""+this.siteService.currentSiteId]}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe(),this.OnHide()}},{key:"OnDisplay",value:function(){this.useView&&this.store.dispatch((0,se.Tx)()),this.useSignalR&&(this.membersSignalRService.initialize(),U.useSignalR=!0)}},{key:"OnHide",value:function(){this.useSignalR&&(U.useSignalR=!1,this.membersSignalRService.destroy())}},{key:"onCreate",value:function(){this.useCalcMode||this.router.navigate(["../create"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(e){this.useCalcMode||this.router.navigate(["../"+e+"/edit"],{relativeTo:this.activatedRoute})}},{key:"onSave",value:function(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(M({member:e})):this.canAdd&&this.store.dispatch(C({member:e})))}},{key:"onDelete",value:function(){this.selectedMembers&&this.canDelete&&this.store.dispatch(O({ids:this.selectedMembers.map(function(e){return e.id})}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedMembers=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){var t=Object.assign({parentIds:this.parentIds},e);this.store.dispatch(S({event:t}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map(function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)});var n=Object.assign({parentIds:this.parentIds,columns:t},this.memberListComponent.getLazyLoadMetadata());this.memberDas.getFile(n).subscribe(function(t){ee.saveAs(t,e.translateService.instant("app.members")+".csv")})}},{key:"setPermissions",value:function(){this.canEdit=this.authService.hasPermission(ne.y.Member_Update),this.canDelete=this.authService.hasPermission(ne.y.Member_Delete),this.canAdd=this.authService.hasPermission(ne.y.Member_Create)}},{key:"initTableConfiguration",value:function(){var t=this;this.biaTranslationService.currentCultureDateFormat$.subscribe(function(n){t.tableConfiguration={columns:[Object.assign(new V.ML("user","member.user"),{type:V.d5.OneToMany}),Object.assign(new V.ML("roles","member.rolesForSite"),{type:V.d5.ManyToMany})]},t.columns=t.tableConfiguration.columns.map(function(e){return{key:e.field,value:e.header}}),t.displayedColumns=e(t.columns)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(N.Y36(f.yh),N.Y36(c.F0),N.Y36(c.gz),N.Y36(W.e),N.Y36(I),N.Y36(Ce.sK),N.Y36(te.P6),N.Y36(ae),N.Y36(xe),N.Y36(re.P))},t.\u0275cmp=N.Xpm({type:t,selectors:[["app-members-index"]],viewQuery:function(e,t){var n;(1&e&&N.Gf(K.$,5),2&e)&&(N.iGM(n=N.CRH())&&(t.memberListComponent=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&N.ekj("bia-flex",t.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(N.TgZ(0,"div",0),N.TgZ(1,"div",1),N.TgZ(2,"bia-table-header",2),N.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),N.ALo(3,"translate"),N.qZA(),N.TgZ(4,"bia-table-controller",3),N.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),N.ALo(5,"async"),N.qZA(),N.YNc(6,Bt,4,18,"bia-table",4),N.YNc(7,jt,5,22,"app-member-table",5),N.qZA(),N.qZA()),2&e&&(N.xp6(2),N.Q6J("headerTitle",N.lcZ(3,12,"member.listOfSiteMembers"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedMembers),N.xp6(2),N.Q6J("defaultPageSize",t.defaultPageSize)("length",N.lcZ(5,14,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey),N.xp6(2),N.Q6J("ngIf",!t.useCalcMode),N.xp6(1),N.Q6J("ngIf",t.useCalcMode))},directives:[Me.xw,Me.yH,Ae.l,Oe.B,Ze.O5,K.$,Pt],pipes:[Ce.X$,Ze.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t}(),_t=a(84594),qt=a(4714),zt=a(4207),Ut=function(){return{width:"100%"}},Gt=function(){var e=function(){function e(t,n,i){u(this,e),this.formBuilder=t,this.translateService=n,this.siteService=i,this.member={},this.save=new N.vpe,this.cancel=new N.vpe,this.initForm()}return p(e,[{key:"ngOnChanges",value:function(e){this.member&&(this.form.reset(),this.member&&this.form.patchValue(Object.assign({},this.member)))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({id:[this.member.id],user:[this.member.user,Le.kI.required],roles:[this.member.roles]})}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.roles=Te.P.Differential(t.roles,null===(e=this.member)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.siteId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(Le.qu),N.Y36(Ce.sK),N.Y36(re.P))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-member-form"]],inputs:{member:"member",roleOptions:"roleOptions",userOptions:"userOptions"},outputs:{save:"save",cancel:"cancel"},features:[N.TTD],decls:21,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","user","optionLabel","display","datakey","id",3,"options","filter","showClear"],[1,"bia-star-mandatory"],["formControlName","roles","multiple","multiple","checkbox","checkbox","optionLabel","display",3,"options","showToggleAll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"]],template:function(e,t){1&e&&(N.TgZ(0,"form",0),N.NdJ("submit",function(){return t.onSubmit()}),N.TgZ(1,"div",1),N.TgZ(2,"div",2),N.TgZ(3,"span",3),N._UZ(4,"p-dropdown",4),N.TgZ(5,"label"),N.TgZ(6,"span",5),N._uU(7,"*"),N.qZA(),N._uU(8),N.ALo(9,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(10,"div",1),N.TgZ(11,"div",2),N.TgZ(12,"label"),N._uU(13),N.ALo(14,"translate"),N.qZA(),N._UZ(15,"p-listbox",6),N.qZA(),N.qZA(),N.TgZ(16,"div",7),N._UZ(17,"button",8),N.ALo(18,"translate"),N.TgZ(19,"button",9),N.NdJ("click",function(){return t.onCancel()}),N.ALo(20,"translate"),N.qZA(),N.qZA(),N.qZA()),2&e&&(N.Q6J("formGroup",t.form),N.xp6(4),N.Akn(N.DdM(23,Ut)),N.Q6J("options",t.userOptions)("filter",!0)("showClear",!0),N.xp6(4),N.Oqu(N.lcZ(9,15,"member.user")),N.xp6(5),N.hij("",N.lcZ(14,17,"member.roles"),":"),N.xp6(2),N.Akn(N.DdM(24,Ut)),N.Q6J("options",t.roleOptions)("showToggleAll",!1),N.xp6(2),N.s9C("label",N.lcZ(18,19,"bia.save")),N.Q6J("disabled",!t.form.valid),N.xp6(2),N.s9C("label",N.lcZ(20,21,"bia.cancel")))},directives:[Le._Y,Le.JL,Me.xw,Le.sg,Me.Wh,Me.yH,Ye.Lt,Le.JJ,Le.u,qt.Ri,Me.SQ,zt.Hq],pipes:[Ce.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e}();function Kt(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"app-member-form",1),N.NdJ("cancel",function(){return N.CHM(n),N.oxw().onCancelled()})("save",function(e){return N.CHM(n),N.oxw().onSubmitted(e)}),N.ALo(1,"async"),N.ALo(2,"async"),N.qZA()}if(2&e){var i=N.oxw();N.Q6J("roleOptions",N.lcZ(1,3,i.memberOptionsService.roleOptions$))("userOptions",N.lcZ(2,5,i.memberOptionsService.userOptions$))("siteId",null==i.siteService.currentSite?null:i.siteService.currentSite.id)}}var Vt=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.memberOptionsService=o,this.siteService=r}return p(e,[{key:"ngOnInit",value:function(){this.memberOptionsService.loadAllOptions()}},{key:"onSubmitted",value:function(e){this.store.dispatch(C({member:e})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(f.yh),N.Y36(c.F0),N.Y36(c.gz),N.Y36(xe),N.Y36(re.P))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-member-new"]],decls:2,vars:3,consts:[[3,"roleOptions","userOptions","siteId","cancel","save",4,"ngIf"],[3,"roleOptions","userOptions","siteId","cancel","save"]],template:function(e,t){1&e&&(N.YNc(0,Kt,3,7,"app-member-form",0),N.ALo(1,"async")),2&e&&N.Q6J("ngIf",!1===N.lcZ(1,1,t.siteService.loading$))},directives:[Ze.O5,Gt],pipes:[Ze.Ov],styles:[""]}),e}(),Xt=function(){var e=function(){function e(t){u(this,e),this.store=t,this.sub=new G.w,this.InitSub(),this.loading$=this.store.select(j),this.member$=this.store.select(P)}return p(e,[{key:"currentMember",get:function(){var e;return(null===(e=this._currentMember)||void 0===e?void 0:e.id)===this._currentMemberId?this._currentMember:null}},{key:"currentMemberId",get:function(){return this._currentMemberId},set:function(e){this._currentMemberId=Number(e),this.store.dispatch(x({id:e}))}},{key:"InitSub",value:function(){var e=this;this.sub=new G.w,this.sub.add(this.store.select(P).subscribe(function(t){t&&(e._currentMember=t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.LFG(f.yh))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Wt=a(79373);function en(e,t){1&e&&N._UZ(0,"bia-spinner",2),2&e&&N.Q6J("overlay",!0)}var tn=function(){var e=function(){function e(t,n,i,o,r,a){u(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.memberOptionsService=o,this.memberService=r,this.siteService=a,this.displayChange=new N.vpe,this.sub=new G.w}return p(e,[{key:"ngOnInit",value:function(){this.memberOptionsService.loadAllOptions()}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(M({member:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(f.yh),N.Y36(c.F0),N.Y36(c.gz),N.Y36(xe),N.Y36(Xt),N.Y36(re.P))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-member-edit"]],outputs:{displayChange:"displayChange"},decls:6,vars:12,consts:[[3,"member","roleOptions","userOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(N.TgZ(0,"app-member-form",0),N.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),N.ALo(1,"async"),N.ALo(2,"async"),N.ALo(3,"async"),N.qZA(),N.YNc(4,en,1,1,"bia-spinner",1),N.ALo(5,"async")),2&e&&(N.Q6J("member",N.lcZ(1,4,t.memberService.member$))("roleOptions",N.lcZ(2,6,t.memberOptionsService.roleOptions$))("userOptions",N.lcZ(3,8,t.memberOptionsService.userOptions$)),N.xp6(4),N.Q6J("ngIf",N.lcZ(5,10,t.memberService.loading$)))},directives:[Gt,Ze.O5,Wt.O],pipes:[Ze.Ov],styles:[""]}),e}(),nn=a(16249),on=a(30466);function rn(e,t){1&e&&N._UZ(0,"bia-spinner",1),2&e&&N.Q6J("overlay",!0)}var an=function(){var e=function(){function e(t,n,i,o){u(this,e),this.store=t,this.route=n,this.memberService=i,this.layoutService=o,this.sub=new G.w}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.memberService.currentMemberId=this.route.snapshot.params.memberId,this.sub.add(this.store.select(P).subscribe(function(t){(null==t?void 0:t.user)&&(e.route.data.pipe((0,ie.P)()).subscribe(function(e){e.breadcrumb=t.user.display}),e.layoutService.refreshBreadcrumb())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(f.yh),N.Y36(c.gz),N.Y36(Xt),N.Y36(on.N))},e.\u0275cmp=N.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(N._UZ(0,"router-outlet"),N.YNc(1,rn,1,1,"bia-spinner",0),N.ALo(2,"async")),2&e&&(N.xp6(1),N.Q6J("ngIf",N.lcZ(2,1,t.memberService.loading$)))},directives:[c.lC,Ze.O5,Wt.O],pipes:[Ze.Ov],styles:[""]}),e}(),sn=a(98832),ln=a(53460),cn=function(){var e=function(e){r(n,e);var t=s(n);function n(e){return u(this,n),t.call(this,e,"Roles")}return n}(k.Z);return e.\u0275fac=function(t){return new(t||e)(N.LFG(N.zs3))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),un=function(){var e=function e(t,n,i){var o=this;u(this,e),this.actions$=t,this.roleDas=n,this.biaMessageService=i,this.loadAll$=(0,d.GW)(function(){return o.actions$.pipe((0,d.l4)(ce),(0,g.w)(function(){return o.roleDas.getList("allOptions").pipe((0,b.U)(function(e){return ue({roles:e})}),(0,v.K)(function(e){return o.biaMessageService.showError(),(0,m.of)(fe({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(N.LFG(d.eX),N.LFG(cn),N.LFG(z.X))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac}),e}(),fn=function(){var e=function e(){u(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=N.oAB({type:e}),e.\u0275inj=N.cJS({providers:[],imports:[[f.Aw.forFeature("domain-role-options",he),d.sQ.forFeature([un])]]}),e}(),pn=a(62439),dn=[{path:"",data:{breadcrumb:null,permission:ne.y.Member_List_Access,InjectComponent:Ht},component:ln.e,canActivate:[nn.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:ne.y.Member_Create,title:"member.add",InjectComponent:Vt},component:sn._,canActivate:[nn.n]},{path:":memberId",data:{breadcrumb:"",canNavigate:!0},component:an,canActivate:[nn.n],children:[{path:"edit",data:{breadcrumb:"member.manage",canNavigate:!0,permission:ne.y.Member_Update,title:"member.manage",InjectComponent:tn},component:sn._,canActivate:[nn.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],mn=function(){var e=function e(){u(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=N.oAB({type:e}),e.\u0275inj=N.cJS({imports:[[_t.m,c.Bz.forChild(dn),f.Aw.forFeature("members",E),d.sQ.forFeature([U]),pn.U,fn]]}),e}()},94529:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var i=function e(t,n){u(this,e),this.key=t,this.value=n}},16244:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i,o=((i=o||(o={}))[i.Unchanged=0]="Unchanged",i[i.Added=1]="Added",i[i.Modified=2]="Modified",i[i.Deleted=3]="Deleted",o)}}])}();