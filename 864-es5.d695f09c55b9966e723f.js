!function(){function e(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[864],{49457:function(e,t){var n,i;void 0!==(i="function"==typeof(n=function(){"use strict";function t(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){a(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,r,a){var s=o.URL||o.webkitURL,l=document.createElement("a");l.download=r=r||e.name||"download",l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):n(l.href)?t(e,r,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,r){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),o);else if(n(e))t(e,o,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){i(a)})}}:function(e,n,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,i);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var f=o.URL||o.webkitURL,d=f.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,[]):n)&&(e.exports=i)},16249:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var i,o=n(39083),r=n(92340),a=n(68307),s=n(37716),l=((i=function(){function e(t){u(this,e),this.authService=t}return d(e,[{key:"canActivate",value:function(e,t){return this.authService.hasPermissionObs(e.data.permission).pipe((0,a.b)(function(e){!0!==e&&(window.location.href=r.N.urlErrorPage+"?num=403")}))}}]),e}()).\u0275fac=function(e){return new(e||i)(s.LFG(o.e))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},82762:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var i=(0,n(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},41864:function(n,i,a){"use strict";a.r(i),a.d(i,{UserModule:function(){return Gt}});var l,c,f=a(94666),p=a(86710),h=a(91601),g=a(25917),m=a(92996),y=a(43190),v=a(88002),b=a(5304),w=a(94612),S=a(57057),C=a(40136),x="feature-users",A=C.k0.Site;(c=l||(l={})).loadAllByPost=(0,p.PH)("["+x+"] Load all by post",(0,p.Ky)()),c.load=(0,p.PH)("["+x+"] Load",(0,p.Ky)()),c.create=(0,p.PH)("["+x+"] Create",(0,p.Ky)()),c.update=(0,p.PH)("["+x+"] Update",(0,p.Ky)()),c.remove=(0,p.PH)("["+x+"] Remove",(0,p.Ky)()),c.multiRemove=(0,p.PH)("["+x+"] Multi Remove",(0,p.Ky)()),c.loadAllByPostSuccess=(0,p.PH)("["+x+"] Load all by post success",(0,p.Ky)()),c.loadSuccess=(0,p.PH)("["+x+"] Load success",(0,p.Ky)()),c.failure=(0,p.PH)("["+x+"] Failure",(0,p.Ky)()),c.synchronize=(0,p.PH)("["+x+"] Synchronize");var T=a(74147),Z=a(37716),N=function(){var e=function(e){r(n,e);var t=s(n);function n(e){return u(this,n),t.call(this,e,"Users")}return d(n,[{key:"synchronize",value:function(){return this.http.get("".concat(this.route,"synchronize"))}}]),n}(T.Z);return e.\u0275fac=function(t){return new(t||e)(Z.LFG(Z.zs3))},e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),L=(0,a(80273).H)({selectId:function(e){return e.id},sortComparer:!1}),k=L.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),M=(0,p.Lq)(k,(0,p.on)(l.loadAllByPost,function(e,t){return o(t),Object.assign(Object.assign({},e),{loadingGetAll:!0})}),(0,p.on)(l.load,function(e){return Object.assign(Object.assign({},e),{loadingGet:!0})}),(0,p.on)(l.loadAllByPostSuccess,function(e,t){var n=t.result,i=t.event,o=L.setAll(n.data,e);return o.totalCount=n.totalCount,o.lastLazyLoadEvent=i,o.loadingGetAll=!1,o}),(0,p.on)(l.loadSuccess,function(e,t){var n=t.user;return Object.assign(Object.assign({},e),{currentUser:n,loadingGet:!1})}),(0,p.on)(l.failure,function(e,t){return o(t),Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})}));function O(e,t){return(0,p.UY)({users:M})(e,t)}var I=(0,p.ZF)(x),J=(0,p.P1)(I,function(e){return e.users}),Q=(0,p.P1)(J,function(e){return e.totalCount}),E=(0,p.P1)(J,function(e){return e.currentUser}),$=(0,p.P1)(J,function(e){return e.lastLazyLoadEvent}),Y=(0,p.P1)(J,function(e){return e.loadingGet}),U=(0,p.P1)(J,function(e){return e.loadingGetAll}),B=L.getSelectors(J).selectAll;a(82762);var P=a(42),D=function(){var e=function e(n,i,o,r){var a=this;u(this,e),this.actions$=n,this.userDas=i,this.biaMessageService=o,this.store=r,this.loadAllByPost$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.loadAllByPost),(0,m.j)("event"),(0,y.w)(function(e){return a.userDas.getListByPost({event:e}).pipe((0,v.U)(function(t){return l.loadAllByPostSuccess({result:t,event:e})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:e}))}))}))}),this.load$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.load),(0,m.j)("id"),(0,y.w)(function(e){return a.userDas.get({id:e}).pipe((0,v.U)(function(e){return l.loadSuccess({user:e})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:e}))}))}))}),this.create$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.create),(0,m.j)("user"),(0,w.b)(function(e){return(0,g.of)(e).pipe((0,S.M)(a.store.select($)))}),(0,y.w)(function(e){var n=t(e,2),i=n[0],o=n[1];return a.userDas.post({item:i}).pipe((0,v.U)(function(){return a.biaMessageService.showAddSuccess(),l.loadAllByPost({event:o})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:e}))}))}))}),this.update$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.update),(0,m.j)("user"),(0,w.b)(function(e){return(0,g.of)(e).pipe((0,S.M)(a.store.select($)))}),(0,y.w)(function(e){var n=t(e,2),i=n[0],o=n[1];return a.userDas.put({item:i,id:i.id}).pipe((0,v.U)(function(){return a.biaMessageService.showUpdateSuccess(),l.loadAllByPost({event:o})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:e}))}))}))}),this.synchronize$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.synchronize),(0,w.b)(function(e){return(0,g.of)(e).pipe((0,S.M)(a.store.select($)))}),(0,y.w)(function(e){var n=t(e,2),i=(n[0],n[1]);return a.userDas.synchronize().pipe((0,v.U)(function(){return a.biaMessageService.showSyncSuccess(),l.loadAllByPost({event:i})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:{concern:"CREATE",error:e}}))}))}))}),this.destroy$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.remove),(0,m.j)("id"),(0,w.b)(function(e){return(0,g.of)(e).pipe((0,S.M)(a.store.select($)))}),(0,y.w)(function(e){var n=t(e,2),i=n[0],o=n[1];return a.userDas.delete({id:i}).pipe((0,v.U)(function(){return a.biaMessageService.showDeleteSuccess(),l.loadAllByPost({event:o})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:e}))}))}))}),this.multiDestroy$=(0,h.GW)(function(){return a.actions$.pipe((0,h.l4)(l.multiRemove),(0,m.j)("ids"),(0,w.b)(function(e){return(0,g.of)(e).pipe((0,S.M)(a.store.select($)))}),(0,y.w)(function(e){var n=t(e,2),i=n[0],o=n[1];return a.userDas.deletes({ids:i}).pipe((0,v.U)(function(){return a.biaMessageService.showDeleteSuccess(),l.loadAllByPost({event:o})}),(0,b.K)(function(e){return a.biaMessageService.showError(),(0,g.of)(l.failure({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(Z.LFG(h.eX),Z.LFG(N),Z.LFG(P.X),Z.LFG(p.yh))},e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac}),e}(),q=a(75319),R=a(88385),F=a(79090),z=a(39083),H=a(49457),_=a(38042),j=a(29206),G=a(28049),K=a(59142),V=function(){var e=function(){function e(t,n,i){u(this,e),this.store=t,this.signalRService=n,this.authService=i}return d(e,[{key:"initialize",value:function(){var e=this;console.log("%c [Users] Register SignalR : refresh-users","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-users",function(){e.store.select($).pipe((0,G.P)()).subscribe(function(t){console.log("%c [Users] RefreshSuccess","color: green; font-weight: bold"),e.store.dispatch(l.loadAllByPost({event:t}))})}),this.targetedFeature={parentKey:this.authService.getCurrentTeamId(C.k0.Site).toString(),featureName:"users"},this.signalRService.joinGroup(this.targetedFeature)}},{key:"destroy",value:function(){console.log("%c [Users] Unregister SignalR : refresh-users","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-users"),this.signalRService.leaveGroup(this.targetedFeature)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.LFG(p.yh),Z.LFG(K.Y),Z.LFG(z.e))},e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),W=a(46468),X=a(9112),ee=a(65448),te=a(96875),ne=a(94529),ie=function(){var e=function(){function e(t){u(this,e),this.store=t,this.roleOptions$=this.store.select(ee.wA),this.dictOptionDtos$=(0,X.aj)([this.roleOptions$]).pipe((0,v.U)(function(e){return[new ne.b("roles",e[0])]}))}return d(e,[{key:"loadAllOptions",value:function(){this.store.dispatch(te.E.loadAll({teamTypeId:C.k0.Root}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.LFG(p.yh))},e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),oe=a(3679),re=a(11466),ae=a(86320),se=a(81780),le=a(38583),ce=a(70667),ue=a(33013),fe=a(13928),de=a(88030),pe=a(50103),he=a(36949),ge=a(12332),me=a(88598),ye=a(45862),ve=a(49067);function be(e,t){1&e&&(Z.TgZ(0,"th",10),Z._UZ(1,"p-tableHeaderCheckbox"),Z.qZA())}function we(e,t){if(1&e&&(Z.TgZ(0,"th",12),Z._uU(1),Z.ALo(2,"translate"),Z._UZ(3,"p-sortIcon",13),Z.qZA()),2&e){var n=Z.oxw().$implicit;Z.Q6J("pSortableColumn",n.field),Z.xp6(1),Z.hij(" ",Z.lcZ(2,3,null==n?null:n.header)," "),Z.xp6(2),Z.Q6J("field",n.field)}}function Se(e,t){if(1&e&&(Z.TgZ(0,"th"),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()),2&e){var n=Z.oxw().$implicit;Z.xp6(1),Z.hij(" ",Z.lcZ(2,1,null==n?null:n.header)," ")}}function Ce(e,t){if(1&e&&(Z.ynx(0),Z.YNc(1,we,4,5,"th",11),Z.YNc(2,Se,3,3,"th",9),Z.BQk()),2&e){var n=t.$implicit;Z.xp6(1),Z.Q6J("ngIf",!0===(null==n?null:n.isSortable)),Z.xp6(1),Z.Q6J("ngIf",!0!==(null==n?null:n.isSortable))}}function xe(e,t){1&e&&Z._UZ(0,"th")}var Ae=function(e){return{"p-state-filled":e}};function Te(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"span",17),Z.TgZ(1,"input",18),Z.NdJ("input",function(e){Z.CHM(n);var t=Z.oxw().$implicit;return Z.oxw(3),Z.MAs(1).filter(e.target.value,t.field,t.filterMode)}),Z.ALo(2,"translate"),Z.qZA(),Z.qZA()}if(2&e){var i=Z.oxw().$implicit;Z.oxw(3);var o=Z.MAs(1);Z.xp6(1),Z.s9C("type","Number"===i.type?"number":"text"),Z.s9C("placeholder",void 0!==i.searchPlaceholder?i.searchPlaceholder:!0===i.isDate?Z.lcZ(2,4,"bia.dateIso8601"):""),Z.Q6J("value",null==o.filters[i.field]?null:o.filters[i.field].value)("ngClass",Z.VKq(6,Ae,""!==(null==o.filters[i.field]?null:o.filters[i.field].value)))}}function Ze(e,t){if(1&e&&(Z.TgZ(0,"th",15),Z.YNc(1,Te,3,8,"span",16),Z.qZA()),2&e){var n=t.$implicit;Z.Q6J("ngSwitch",n.field),Z.xp6(1),Z.Q6J("ngIf",!0===n.isSearchable)}}function Ne(e,t){if(1&e&&(Z.TgZ(0,"tr"),Z.YNc(1,xe,1,0,"th",9),Z.YNc(2,Ze,2,2,"th",14),Z.qZA()),2&e){var n=Z.oxw().$implicit,i=Z.oxw(2);Z.xp6(1),Z.Q6J("ngIf",i.canSelectElement),Z.xp6(1),Z.Q6J("ngForOf",n)}}function Le(e,t){if(1&e&&(Z.TgZ(0,"tr"),Z.YNc(1,be,2,0,"th",7),Z.YNc(2,Ce,3,2,"ng-container",8),Z.qZA(),Z.YNc(3,Ne,3,2,"tr",9)),2&e){var n=t.$implicit,i=Z.oxw(2);Z.xp6(1),Z.Q6J("ngIf",i.canSelectElement),Z.xp6(1),Z.Q6J("ngForOf",n),Z.xp6(1),Z.Q6J("ngIf",i.showColSearch)}}function ke(e,t){if(1&e&&Z._UZ(0,"p-tableCheckbox",23),2&e){var n=Z.oxw(2).$implicit;Z.Q6J("value",n)}}function Me(e,t){1&e&&Z._UZ(0,"i",24)}function Oe(e,t){if(1&e&&(Z.TgZ(0,"td"),Z.YNc(1,ke,1,1,"p-tableCheckbox",21),Z.YNc(2,Me,1,0,"i",22),Z.qZA()),2&e){var n=Z.oxw().$implicit,i=Z.oxw(2);Z.xp6(1),Z.Q6J("ngIf",!0!==i.isFooter(n)&&n.id>0),Z.xp6(1),Z.Q6J("ngIf",!0===i.isFooter(n))}}function Ie(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"input",29),Z.NdJ("change",function(){return Z.CHM(n),Z.oxw(6).onChange()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(3).$implicit;Z.xp6(1),Z.Q6J("formControlName",i.field)}}function Je(e,t){1&e&&(Z.TgZ(0,"span",30),Z._uU(1,"*"),Z.qZA())}function Qe(e,t){if(1&e&&(Z.ynx(0,15),Z.YNc(1,Ie,2,1,"ng-container",27),Z.BQk(),Z.YNc(2,Je,2,0,"span",28)),2&e){var n=Z.oxw(2).$implicit,i=Z.oxw(3);Z.Q6J("ngSwitch",n.field),Z.xp6(2),Z.Q6J("ngIf",!0===i.isRequired(n.field))}}function Ee(e,t){1&e&&Z.YNc(0,Qe,3,2,"ng-template",26)}function $e(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.BQk()),2&e){var n=Z.oxw(3).$implicit,i=Z.oxw().$implicit;Z.xp6(1),Z.hij(" ",i[n.field]," ")}}function Ye(e,t){if(1&e&&(Z.ynx(0,15),Z.YNc(1,$e,2,1,"ng-container",27),Z.BQk()),2&e){var n=Z.oxw(2).$implicit;Z.Q6J("ngSwitch",n.field)}}function Ue(e,t){1&e&&Z.YNc(0,Ye,2,1,"ng-template",31)}var Be=function(){return{width:"100%"}};function Pe(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-dropdown",35),Z.NdJ("onChange",function(){return Z.CHM(n),Z.oxw(7).onChange()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit,o=Z.oxw(3);Z.xp6(1),Z.Akn(Z.DdM(4,Be)),Z.Q6J("formControlName",i.field)("options",o.getOptionDto(i.field))}}function De(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-multiSelect",36),Z.NdJ("onChange",function(){return Z.CHM(n),Z.oxw(7).onChange()})("onPanelShow",function(){return Z.CHM(n),Z.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return Z.CHM(n),Z.oxw(7).onPanelHideMultiSelect()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit,o=Z.oxw(3);Z.xp6(1),Z.Akn(Z.DdM(4,Be)),Z.Q6J("formControlName",i.field)("options",o.getOptionDto(i.field))}}function qe(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-checkbox",37),Z.NdJ("onChange",function(){return Z.CHM(n),Z.oxw(7).onChange()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Q6J("binary",!0)("formControlName",i.field)}}function Re(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"input",38),Z.NdJ("change",function(){return Z.CHM(n),Z.oxw(7).onChange()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Q6J("formControlName",i.field)}}function Fe(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-calendar",39),Z.NdJ("onShow",function(){return Z.CHM(n),Z.oxw(7).onShowCalendar()})("onSelect",function(){return Z.CHM(n),Z.oxw(7).onChange()})("onBlur",function(){return Z.CHM(n),Z.oxw(7).onBlurCalendar()})("onClose",function(){return Z.CHM(n),Z.oxw(7).onCloseCalendar()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Akn(Z.DdM(5,Be)),Z.Q6J("formControlName",i.field)("showButtonBar",!0)("inputStyle",Z.DdM(6,Be))}}function ze(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-calendar",40),Z.NdJ("onShow",function(){return Z.CHM(n),Z.oxw(7).onShowCalendar()})("onSelect",function(){return Z.CHM(n),Z.oxw(7).onChange()})("onBlur",function(){return Z.CHM(n),Z.oxw(7).onBlurCalendar()})("onClose",function(){return Z.CHM(n),Z.oxw(7).onCloseCalendar()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Akn(Z.DdM(5,Be)),Z.Q6J("formControlName",i.field)("inputStyle",Z.DdM(6,Be))("timeOnly",!0)}}function He(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-calendar",41),Z.NdJ("onShow",function(){return Z.CHM(n),Z.oxw(7).onShowCalendar()})("onSelect",function(){return Z.CHM(n),Z.oxw(7).onChange()})("onBlur",function(){return Z.CHM(n),Z.oxw(7).onBlurCalendar()})("onClose",function(){return Z.CHM(n),Z.oxw(7).onCloseCalendar()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Akn(Z.DdM(5,Be)),Z.Q6J("formControlName",i.field)("inputStyle",Z.DdM(6,Be))("timeOnly",!0)}}function _e(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-calendar",42),Z.NdJ("onShow",function(){return Z.CHM(n),Z.oxw(7).onShowCalendar()})("onSelect",function(){return Z.CHM(n),Z.oxw(7).onChange()})("onBlur",function(){return Z.CHM(n),Z.oxw(7).onBlurCalendar()})("onClose",function(){return Z.CHM(n),Z.oxw(7).onCloseCalendar()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Akn(Z.DdM(5,Be)),Z.Q6J("formControlName",i.field)("inputStyle",Z.DdM(6,Be))("timeOnly",!0)}}function je(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"p-calendar",43),Z.NdJ("onShow",function(){return Z.CHM(n),Z.oxw(7).onShowCalendar()})("onSelect",function(){return Z.CHM(n),Z.oxw(7).onChange()})("onBlur",function(){return Z.CHM(n),Z.oxw(7).onBlurCalendar()})("onClose",function(){return Z.CHM(n),Z.oxw(7).onCloseCalendar()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Akn(Z.DdM(5,Be)),Z.Q6J("formControlName",i.field)("showButtonBar",!0)("inputStyle",Z.DdM(6,Be))}}function Ge(e,t){if(1&e){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"input",44),Z.NdJ("change",function(){return Z.CHM(n),Z.oxw(7).onChange()}),Z.qZA(),Z.BQk()}if(2&e){var i=Z.oxw(4).$implicit;Z.xp6(1),Z.Q6J("maxlength",i.maxlength)("formControlName",i.field)}}function Ke(e,t){1&e&&(Z.TgZ(0,"span",30),Z._uU(1,"*"),Z.qZA())}function Ve(e,t){if(1&e&&(Z.ynx(0,15),Z.YNc(1,Pe,2,5,"ng-container",34),Z.YNc(2,De,2,5,"ng-container",34),Z.YNc(3,qe,2,2,"ng-container",34),Z.YNc(4,Re,2,1,"ng-container",34),Z.YNc(5,Fe,2,7,"ng-container",34),Z.YNc(6,ze,2,7,"ng-container",34),Z.YNc(7,He,2,7,"ng-container",34),Z.YNc(8,_e,2,7,"ng-container",34),Z.YNc(9,je,2,7,"ng-container",34),Z.YNc(10,Ge,2,2,"ng-container",27),Z.BQk(),Z.YNc(11,Ke,2,0,"span",28)),2&e){var n=Z.oxw(3).$implicit,i=Z.oxw(3);Z.Q6J("ngSwitch",n.type),Z.xp6(1),Z.Q6J("ngSwitchCase","OneToMany"),Z.xp6(1),Z.Q6J("ngSwitchCase","ManyToMany"),Z.xp6(1),Z.Q6J("ngSwitchCase","Boolean"),Z.xp6(1),Z.Q6J("ngSwitchCase","Number"),Z.xp6(1),Z.Q6J("ngSwitchCase","Date"),Z.xp6(1),Z.Q6J("ngSwitchCase","Time"),Z.xp6(1),Z.Q6J("ngSwitchCase","TimeOnly"),Z.xp6(1),Z.Q6J("ngSwitchCase","TimeSecOnly"),Z.xp6(1),Z.Q6J("ngSwitchCase","DateTime"),Z.xp6(2),Z.Q6J("ngIf",!0===i.isRequired(n.field))}}function We(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.BQk()),2&e){var n=Z.oxw(5).$implicit,i=Z.oxw().$implicit;Z.xp6(1),Z.hij(" ",null==i[n.field]?null:i[n.field].display," ")}}function Xe(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.BQk()),2&e){var n=Z.oxw(5).$implicit,i=Z.oxw().$implicit,o=Z.oxw(2);Z.xp6(1),Z.hij(" ",o.formatDisplayName(i[n.field])," ")}}function et(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.ALo(2,"formatValue"),Z.BQk()),2&e){var n=Z.oxw(5).$implicit,i=Z.oxw().$implicit;Z.xp6(1),Z.hij(" ",Z.xi3(2,1,i[n.field],n)," ")}}function tt(e,t){if(1&e&&(Z.ynx(0),Z.ynx(1,15),Z.YNc(2,We,2,1,"ng-container",34),Z.YNc(3,Xe,2,1,"ng-container",34),Z.YNc(4,et,3,4,"ng-container",27),Z.BQk(),Z.BQk()),2&e){var n=Z.oxw(4).$implicit;Z.xp6(1),Z.Q6J("ngSwitch",n.type),Z.xp6(1),Z.Q6J("ngSwitchCase","OneToMany"),Z.xp6(1),Z.Q6J("ngSwitchCase","ManyToMany")}}function nt(e,t){if(1&e&&Z.YNc(0,tt,5,3,"ng-container",9),2&e){var n=Z.oxw(4).$implicit,i=Z.oxw(2);Z.Q6J("ngIf",!0!==i.isFooter(n))}}function it(e,t){if(1&e&&(Z.YNc(0,Ve,12,11,"ng-template",32),Z.YNc(1,nt,1,1,"ng-template",null,33,Z.W1O)),2&e){var n=Z.MAs(2),i=Z.oxw(2).$implicit;Z.Q6J("ngIf",!0===i.isEditable)("ngIfElse",n)}}function ot(e,t){1&e&&Z.YNc(0,it,3,2,"ng-template",26)}function rt(e,t){1&e&&(Z.TgZ(0,"label"),Z._uU(1,"-"),Z.qZA())}function at(e,t){if(1&e&&Z.YNc(0,rt,2,0,"label",9),2&e){var n=Z.oxw(3).$implicit;Z.Q6J("ngIf",!0===n.isEditable)}}function st(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.BQk()),2&e){var n=Z.oxw(4).$implicit,i=Z.oxw().$implicit;Z.xp6(1),Z.hij(" ",null==i[n.field]?null:i[n.field].display," ")}}function lt(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.BQk()),2&e){var n=Z.oxw(4).$implicit,i=Z.oxw().$implicit,o=Z.oxw(2);Z.xp6(1),Z.hij(" ",o.formatDisplayName(i[n.field])," ")}}function ct(e,t){1&e&&Z._UZ(0,"i",47)}function ut(e,t){if(1&e&&(Z.ynx(0),Z.YNc(1,ct,1,0,"i",46),Z.BQk()),2&e){var n=Z.oxw(4).$implicit,i=Z.oxw().$implicit;Z.xp6(1),Z.Q6J("ngIf",!0===i[n.field])}}function ft(e,t){if(1&e&&(Z.ynx(0),Z._uU(1),Z.ALo(2,"formatValue"),Z.BQk()),2&e){var n=Z.oxw(4).$implicit,i=Z.oxw().$implicit;Z.xp6(1),Z.hij(" ",Z.xi3(2,1,i[n.field],n)," ")}}function dt(e,t){if(1&e&&(Z.ynx(0,15),Z.YNc(1,st,2,1,"ng-container",34),Z.YNc(2,lt,2,1,"ng-container",34),Z.YNc(3,ut,2,1,"ng-container",34),Z.YNc(4,ft,3,4,"ng-container",27),Z.BQk()),2&e){var n=Z.oxw(3).$implicit;Z.Q6J("ngSwitch",n.type),Z.xp6(1),Z.Q6J("ngSwitchCase","OneToMany"),Z.xp6(1),Z.Q6J("ngSwitchCase","ManyToMany"),Z.xp6(1),Z.Q6J("ngSwitchCase","Boolean")}}function pt(e,t){if(1&e&&(Z.YNc(0,at,1,1,"ng-template",32),Z.YNc(1,dt,5,4,"ng-template",null,45,Z.W1O)),2&e){var n=Z.MAs(2),i=Z.oxw(3).$implicit,o=Z.oxw(2);Z.Q6J("ngIf",!0===o.isFooter(i))("ngIfElse",n)}}function ht(e,t){1&e&&Z.YNc(0,pt,3,2,"ng-template",31)}function gt(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"td",25),Z.NdJ("click",function(){Z.CHM(n);var e=Z.oxw().$implicit;return Z.oxw(2).initEditableRow(e)}),Z.TgZ(1,"p-cellEditor"),Z.YNc(2,Ee,1,0,void 0,9),Z.YNc(3,Ue,1,0,void 0,9),Z.YNc(4,ot,1,0,void 0,9),Z.YNc(5,ht,1,0,void 0,9),Z.qZA(),Z.qZA()}if(2&e){var i=t.$implicit,o=Z.oxw(3);Z.xp6(2),Z.Q6J("ngIf",!0===o.isSpecificInput(i.field)),Z.xp6(1),Z.Q6J("ngIf",!0===o.isSpecificInput(i.field)),Z.xp6(1),Z.Q6J("ngIf",!0!==o.isSpecificInput(i.field)),Z.xp6(1),Z.Q6J("ngIf",!0!==o.isSpecificInput(i.field))}}function mt(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"tr",19),Z.NdJ("focusout",function(){return Z.CHM(n),Z.oxw(2).onFocusout()})("keyup.enter",function(){return Z.CHM(n),Z.oxw(2).initEditableRow(null)})("keyup.escape",function(){return Z.CHM(n),Z.oxw(2).cancel()}),Z.YNc(1,Oe,3,2,"td",9),Z.YNc(2,gt,6,4,"td",20),Z.qZA()}if(2&e){var i=t.$implicit,o=t.columns,r=Z.oxw(2);Z.Q6J("pSelectableRow",!0!==r.isFooter(i)?i:null)("pEditableRow",i),Z.xp6(1),Z.Q6J("ngIf",r.canSelectElement),Z.xp6(1),Z.Q6J("ngForOf",o)}}function yt(e,t){if(1&e&&(Z.TgZ(0,"tr"),Z.TgZ(1,"td",48),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.qZA()),2&e){var n=t.$implicit;Z.xp6(1),Z.uIk("colspan",n.length+1),Z.xp6(1),Z.hij(" ",Z.lcZ(3,2,"bia.NoRecordsFound")," ")}}function vt(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"p-table",2,3),Z.NdJ("onFilter",function(){return Z.CHM(n),Z.oxw().onFilter()})("onLazyLoad",function(e){return Z.CHM(n),Z.oxw().onLoadLazy(e)})("onStateSave",function(e){return Z.CHM(n),Z.oxw().onStateSave(e)})("selectionChange",function(){return Z.CHM(n),Z.oxw().onSelectionChange()}),Z.ALo(2,"async"),Z.YNc(3,Le,4,3,"ng-template",4),Z.YNc(4,mt,3,4,"ng-template",5),Z.YNc(5,yt,4,4,"ng-template",6),Z.qZA()}if(2&e){var i=Z.oxw();Z.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",i.displayedColumns)("value",i.elements)("paginator",i.paginator)("rows",i.pageSize)("totalRecords",i.totalRecord)("lazy",!0)("loading",i.loading&&null!==Z.lcZ(2,14,i.showLoading$))("stateStorage","session")("stateKey",i.tableStateKey)("lazyLoadOnInit",i.getLazyLoadOnInit())("sortField",i.sortFieldValue)("sortOrder",i.sortOrderValue)}}var bt=function(){var e=function(e){r(n,e);var t=s(n);function n(e,i,o,r){var a;return u(this,n),(a=t.call(this,e,i,o,r)).formBuilder=e,a.authService=i,a.biaMessageService=o,a.translateService=r,a}return d(n,[{key:"initForm",value:function(){this.form=this.formBuilder.group({id:[this.element.id],firstName:[this.element.firstName,oe.kI.required],lastName:[this.element.lastName,oe.kI.required],login:[this.element.login,oe.kI.required],roles:[this.element.roles]})}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.roles=re.P.Differential(t.roles,null===(e=this.element)||void 0===e?void 0:e.roles),this.save.emit(t),this.form.reset()}}}]),n}(ae.l);return e.\u0275fac=function(t){return new(t||e)(Z.Y36(oe.qu),Z.Y36(z.e),Z.Y36(P.X),Z.Y36(se.sK))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["bia-user-table"]],features:[Z.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(e,t){1&e&&(Z.TgZ(0,"form",0),Z.YNc(1,vt,6,16,"p-table",1),Z.qZA()),2&e&&(Z.Q6J("formGroup",t.form),Z.xp6(1),Z.Q6J("ngIf",t.configuration))},directives:[oe._Y,oe.JL,oe.sg,le.O5,ce.iA,ue.jx,le.sg,ce.Mo,ce.lQ,ce.fz,le.RF,fe.o,le.mk,de.oO,ce.Ei,ce.D$,ce.UA,ce.YL,le.ED,oe.Fj,oe.JJ,oe.u,le.n9,pe.Lt,he.NU,ge.XZ,oe.wV,me.f,ye.D,oe.nD],pipes:[le.Ov,se.X$,ve.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),e}(),wt=a(13653),St=a(23913),Ct=a(35618),xt=a(81606),At=a(76743),Tt=a(65224),Zt=a(4207);function Nt(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"button",9),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw(2).onSynchronize()}),Z.ALo(1,"translate"),Z.qZA()}2&e&&Z.s9C("label",Z.lcZ(1,1,"bia.synchronize"))}function Lt(e,t){if(1&e&&Z.YNc(0,Nt,2,3,"button",8),2&e){var n=Z.oxw();Z.Q6J("ngIf",n.canSync)}}function kt(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"bia-table",10),Z.NdJ("clickRow",function(e){return Z.CHM(n),Z.oxw().onEdit(e)})("loadLazy",function(e){return Z.CHM(n),Z.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return Z.CHM(n),Z.oxw().onSelectedElementsChanged(e)}),Z.ALo(1,"async"),Z.ALo(2,"async"),Z.ALo(3,"async"),Z.qZA()}if(2&e){var i=Z.oxw();Z.Q6J("elements",Z.lcZ(1,12,i.users$))("totalRecord",Z.lcZ(2,14,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canClickRow",i.canEdit)("canSelectElement",i.canDelete)("loading",Z.lcZ(3,16,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}function Mt(e,t){if(1&e){var n=Z.EpF();Z.TgZ(0,"bia-user-table",11),Z.NdJ("loadLazy",function(e){return Z.CHM(n),Z.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return Z.CHM(n),Z.oxw().onSelectedElementsChanged(e)})("save",function(e){return Z.CHM(n),Z.oxw().onSave(e)}),Z.ALo(1,"async"),Z.ALo(2,"async"),Z.ALo(3,"async"),Z.ALo(4,"async"),Z.qZA()}if(2&e){var i=Z.oxw();Z.Q6J("elements",Z.lcZ(1,14,i.users$))("dictOptionDtos",Z.lcZ(2,16,i.userOptionsService.dictOptionDtos$))("totalRecord",Z.lcZ(3,18,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canEdit",i.canEdit)("canAdd",i.canAdd)("canSelectElement",i.canDelete)("loading",Z.lcZ(4,20,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}var Ot=function(){var t=function(){function t(e,n,i,o,r,a,s,l,c){u(this,t),this.store=e,this.router=n,this.activatedRoute=i,this.authService=o,this.userDas=r,this.translateService=a,this.biaTranslationService=s,this.usersSignalRService=l,this.userOptionsService=c,this.useCalcMode=!1,this.useSignalR=!1,this.useView=!1,this.useRefreshAtLanguageChange=!1,this.flex=!0,this.sub=new q.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=C.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.canSync=!1,this.tableStateKey=this.useView?"usersGrid":void 0,this.useViewTeamWithTypeId=this.useView?A:null,this.displayUserAddFromDirectoryDialog=!1}return d(t,[{key:"userListComponent",get:function(){return void 0!==this.biaTableComponent?this.biaTableComponent:this.userTableComponent}},{key:"ngOnInit",value:function(){var e=this;this.parentIds=[],this.sub=new q.w,this.initTableConfiguration(),this.setPermissions(),this.users$=this.store.select(B),this.totalCount$=this.store.select(Q),this.loading$=this.store.select(U),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(t){e.userOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange&&this.sub.add(this.biaTranslationService.currentCulture$.pipe((0,wt.T)(1)).subscribe(function(t){e.onLoadLazy(e.userListComponent.getLazyLoadMetadata())})),this.sub.add(this.store.select(St.nC).pipe((0,wt.T)(1)).subscribe(function(t){setTimeout(function(){return e.onLoadLazy(e.userListComponent.getLazyLoadMetadata())})}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe(),this.OnHide()}},{key:"OnDisplay",value:function(){this.useView&&this.store.dispatch((0,W.Tx)()),this.useSignalR&&this.usersSignalRService.initialize()}},{key:"OnHide",value:function(){this.useSignalR&&this.usersSignalRService.destroy()}},{key:"onCreate",value:function(){this.displayUserAddFromDirectoryDialog=!0}},{key:"onEdit",value:function(e){this.useCalcMode||this.router.navigate([e,"edit"],{relativeTo:this.activatedRoute})}},{key:"onSave",value:function(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(l.update({user:e})):this.canAdd&&this.store.dispatch(l.create({user:e})))}},{key:"onDelete",value:function(){this.selectedUsers&&this.canDelete&&this.store.dispatch(l.multiRemove({ids:this.selectedUsers.map(function(e){return e.id})}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedUsers=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){var t=Object.assign({parentIds:this.parentIds},e);this.store.dispatch(l.loadAllByPost({event:t}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map(function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)});var n=Object.assign({parentIds:this.parentIds,columns:t},this.userListComponent.getLazyLoadMetadata());this.userDas.getFile(n).subscribe(function(t){H.saveAs(t,e.translateService.instant("app.users")+".csv")})}},{key:"onSynchronize",value:function(){this.store.dispatch(l.synchronize())}},{key:"setPermissions",value:function(){this.canSync=this.authService.hasPermission(j.y.User_Sync),this.canEdit=this.authService.hasPermission(j.y.User_UpdateRoles),this.canDelete=this.authService.hasPermission(j.y.User_Delete),this.canAdd=this.authService.hasPermission(j.y.User_Add)}},{key:"initTableConfiguration",value:function(){var t=this;this.biaTranslationService.currentCultureDateFormat$.subscribe(function(n){t.tableConfiguration={columns:[new F.ML("lastName","user.lastName"),new F.ML("firstName","user.firstName"),new F.ML("login","user.login"),Object.assign(new F.ML("roles","member.roles"),{type:F.d5.ManyToMany})]},t.columns=t.tableConfiguration.columns.map(function(e){return{key:e.field,value:e.header}}),t.displayedColumns=e(t.columns)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Z.Y36(p.yh),Z.Y36(f.F0),Z.Y36(f.gz),Z.Y36(z.e),Z.Y36(N),Z.Y36(se.sK),Z.Y36(_.P6),Z.Y36(V),Z.Y36(ie))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["bia-users-index"]],viewQuery:function(e,t){var n;(1&e&&(Z.Gf(R.$,5),Z.Gf(bt,5)),2&e)&&(Z.iGM(n=Z.CRH())&&(t.biaTableComponent=n.first),Z.iGM(n=Z.CRH())&&(t.userTableComponent=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&Z.ekj("bia-flex",t.flex)},decls:10,vars:18,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],["pTemplate","actionOnList"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","useViewTeamWithTypeId","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"display","displayChange"],["pButton","","class","p-button-outlined",3,"label","click",4,"ngIf"],["pButton","",1,"p-button-outlined",3,"label","click"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.TgZ(1,"div",1),Z.TgZ(2,"bia-table-header",2),Z.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),Z.ALo(3,"translate"),Z.YNc(4,Lt,1,1,"ng-template",3),Z.qZA(),Z.TgZ(5,"bia-table-controller",4),Z.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),Z.ALo(6,"async"),Z.qZA(),Z.YNc(7,kt,4,18,"bia-table",5),Z.YNc(8,Mt,5,22,"bia-user-table",6),Z.qZA(),Z.qZA(),Z.TgZ(9,"bia-user-add-from-directory-dialog",7),Z.NdJ("displayChange",function(e){return t.displayUserAddFromDirectoryDialog=e}),Z.qZA()),2&e&&(Z.xp6(2),Z.Q6J("headerTitle",Z.lcZ(3,14,"user.listOf"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedUsers),Z.xp6(3),Z.Q6J("defaultPageSize",t.defaultPageSize)("length",Z.lcZ(6,16,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey)("useViewTeamWithTypeId",t.useViewTeamWithTypeId),Z.xp6(2),Z.Q6J("ngIf",!t.useCalcMode),Z.xp6(1),Z.Q6J("ngIf",t.useCalcMode),Z.xp6(1),Z.Q6J("display",t.displayUserAddFromDirectoryDialog))},directives:[Ct.xw,Ct.yH,xt.l,ue.jx,At.B,le.O5,Tt.C,Zt.Hq,R.$,bt],pipes:[se.X$,le.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t}(),It=a(61028),Jt=function(){return{width:"100%"}},Qt=function(){var e=function(){function e(t){u(this,e),this.formBuilder=t,this.user={},this.save=new Z.vpe,this.cancel=new Z.vpe,this.initForm()}return d(e,[{key:"ngOnChanges",value:function(e){this.user&&(this.form.reset(),this.user&&this.form.patchValue(Object.assign({},this.user)))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({id:[this.user.id],firstName:[this.user.firstName,oe.kI.required],lastName:[this.user.lastName,oe.kI.required],login:[this.user.login,oe.kI.required],roles:[this.user.roles]})}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var e;if(this.form.valid){var t=this.form.value;t.id=t.id>0?t.id:0,t.roles=re.P.Differential(t.roles,null===(e=this.user)||void 0===e?void 0:e.roles),this.save.emit(t),this.form.reset()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(oe.qu))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["bia-user-form"]],inputs:{user:"user",roleOptions:"roleOptions"},outputs:{save:"save",cancel:"cancel"},features:[Z.TTD],decls:40,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["formControlName","firstName","type","text","pInputText","","maxlength","64","disabled","true",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","lastName","type","text","pInputText","","maxlength","64","disabled","true",2,"width","100%"],["formControlName","login","type","text","pInputText","","maxlength","64","disabled","true",2,"width","100%"],["defaultLabel","\xa0","formControlName","roles","optionLabel","display","datakey","id","appendTo","body",3,"options","virtualScroll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(Z.TgZ(0,"form",0),Z.NdJ("submit",function(){return t.onSubmit()}),Z.TgZ(1,"div",1),Z.TgZ(2,"div",2),Z.TgZ(3,"span",3),Z._UZ(4,"input",4),Z.TgZ(5,"label"),Z.TgZ(6,"span",5),Z._uU(7,"*"),Z.qZA(),Z._uU(8),Z.ALo(9,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(10,"div",1),Z.TgZ(11,"div",2),Z.TgZ(12,"span",3),Z._UZ(13,"input",6),Z.TgZ(14,"label"),Z.TgZ(15,"span",5),Z._uU(16,"*"),Z.qZA(),Z._uU(17),Z.ALo(18,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(19,"div",1),Z.TgZ(20,"div",2),Z.TgZ(21,"span",3),Z._UZ(22,"input",7),Z.TgZ(23,"label"),Z.TgZ(24,"span",5),Z._uU(25,"*"),Z.qZA(),Z._uU(26),Z.ALo(27,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(28,"div",1),Z.TgZ(29,"div",2),Z.TgZ(30,"span",3),Z._UZ(31,"p-multiSelect",8),Z.TgZ(32,"label"),Z._uU(33),Z.ALo(34,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(35,"div",9),Z._UZ(36,"button",10),Z.ALo(37,"translate"),Z.TgZ(38,"button",11),Z.NdJ("click",function(){return t.onCancel()}),Z.ALo(39,"translate"),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.Q6J("formGroup",t.form),Z.xp6(8),Z.Oqu(Z.lcZ(9,12,"user.firstName")),Z.xp6(9),Z.Oqu(Z.lcZ(18,14,"user.lastName")),Z.xp6(9),Z.Oqu(Z.lcZ(27,16,"user.login")),Z.xp6(5),Z.Akn(Z.DdM(24,Jt)),Z.Q6J("options",t.roleOptions)("virtualScroll",!0),Z.xp6(2),Z.Oqu(Z.lcZ(34,18,"member.roles")),Z.xp6(3),Z.s9C("label",Z.lcZ(37,20,"bia.save")),Z.Q6J("disabled",!t.form.valid),Z.xp6(2),Z.s9C("label",Z.lcZ(39,22,"bia.cancel")))},directives:[oe._Y,oe.JL,Ct.xw,oe.sg,Ct.Wh,Ct.yH,oe.Fj,oe.JJ,oe.u,fe.o,oe.nD,he.NU,Ct.SQ,Zt.Hq],pipes:[se.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e}(),Et=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.userOptionsService=o,this.biaTranslationService=r,this.sub=new q.w}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(t){e.userOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(l.create({user:e})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(p.yh),Z.Y36(f.F0),Z.Y36(f.gz),Z.Y36(ie),Z.Y36(_.P6))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["bia-user-new"]],decls:2,vars:3,consts:[[3,"roleOptions","cancel","save"]],template:function(e,t){1&e&&(Z.TgZ(0,"bia-user-form",0),Z.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),Z.ALo(1,"async"),Z.qZA()),2&e&&Z.Q6J("roleOptions",Z.lcZ(1,1,t.userOptionsService.roleOptions$))},directives:[Qt],pipes:[le.Ov],styles:[""]}),e}(),$t=function(){var e=function(){function e(t){u(this,e),this.store=t,this.sub=new q.w,this.InitSub(),this.loading$=this.store.select(Y),this.user$=this.store.select(E)}return d(e,[{key:"currentUser",get:function(){var e;return(null===(e=this._currentUser)||void 0===e?void 0:e.id)===this._currentUserId?this._currentUser:null}},{key:"currentUserId",get:function(){return this._currentUserId},set:function(e){this._currentUserId=Number(e),this.store.dispatch(l.load({id:e}))}},{key:"InitSub",value:function(){var e=this;this.sub=new q.w,this.sub.add(this.store.select(E).subscribe(function(t){t&&(e._currentUser=t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.LFG(p.yh))},e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Yt=a(79373);function Ut(e,t){1&e&&Z._UZ(0,"bia-spinner",2),2&e&&Z.Q6J("overlay",!0)}var Bt=function(){var e=function(){function e(t,n,i,o,r,a){u(this,e),this.store=t,this.router=n,this.activatedRoute=i,this.userOptionsService=o,this.userService=r,this.biaTranslationService=a,this.displayChange=new Z.vpe,this.sub=new q.w}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(t){e.userOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(e){this.store.dispatch(l.update({user:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(p.yh),Z.Y36(f.F0),Z.Y36(f.gz),Z.Y36(ie),Z.Y36($t),Z.Y36(_.P6))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["bia-user-edit"]],outputs:{displayChange:"displayChange"},decls:5,vars:9,consts:[[3,"user","roleOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(Z.TgZ(0,"bia-user-form",0),Z.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),Z.ALo(1,"async"),Z.ALo(2,"async"),Z.qZA(),Z.YNc(3,Ut,1,1,"bia-spinner",1),Z.ALo(4,"async")),2&e&&(Z.Q6J("user",Z.lcZ(1,3,t.userService.user$))("roleOptions",Z.lcZ(2,5,t.userOptionsService.roleOptions$)),Z.xp6(3),Z.Q6J("ngIf",Z.lcZ(4,7,t.userService.loading$)))},directives:[Qt,le.O5,Yt.O],pipes:[le.Ov],styles:[""]}),e}(),Pt=a(16249),Dt=a(30466);function qt(e,t){1&e&&Z._UZ(0,"bia-spinner",1),2&e&&Z.Q6J("overlay",!0)}var Rt=function(){var e=function(){function e(t,n,i,o){u(this,e),this.store=t,this.route=n,this.userService=i,this.layoutService=o,this.sub=new q.w}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.currentUserId=this.route.snapshot.params.userId,this.sub.add(this.store.select(E).subscribe(function(t){(null==t?void 0:t.displayName)&&(e.route.data.pipe((0,G.P)()).subscribe(function(e){e.breadcrumb=t.displayName}),e.layoutService.refreshBreadcrumb())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(p.yh),Z.Y36(f.gz),Z.Y36($t),Z.Y36(Dt.N))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(Z._UZ(0,"router-outlet"),Z.YNc(1,qt,1,1,"bia-spinner",0),Z.ALo(2,"async")),2&e&&(Z.xp6(1),Z.Q6J("ngIf",Z.lcZ(2,1,t.userService.loading$)))},directives:[f.lC,le.O5,Yt.O],pipes:[le.Ov],styles:[""]}),e}(),Ft=a(98832),zt=a(53460),Ht=a(11936),_t=a(95546),jt=[{path:"",data:{breadcrumb:null,permission:j.y.User_List_Access,InjectComponent:Ot},component:zt.e,canActivate:[Pt.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:j.y.User_Add,title:"user.add",InjectComponent:Et},component:Ft._,canActivate:[Pt.n]},{path:":userId",data:{breadcrumb:"",canNavigate:!0},component:Rt,canActivate:[Pt.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:j.y.User_UpdateRoles,title:"user.edit",InjectComponent:Bt},component:Ft._,canActivate:[Pt.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],Gt=function(){var e=function e(){u(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[It.m,f.Bz.forChild(jt),p.Aw.forFeature(x,O),h.sQ.forFeature([D]),Ht.p,_t.q]]}),e}()}}])}();