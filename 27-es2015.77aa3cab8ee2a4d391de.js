"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[27],{7767:function(e,t,n){n.d(t,{q:function(){return f}});var i=n(37716),o=n(3679),s=n(11466),r=n(81780),a=n(35618),l=n(50103),c=n(38583),u=n(4714),d=n(4207),p=n(65224);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",12),i.TgZ(1,"button",13),i.NdJ("click",function(){return i.CHM(e),i.oxw().addUserFromDirectory()}),i.qZA(),i.qZA()}}const h=function(){return{width:"100%"}};let f=(()=>{class e{constructor(e,t){this.formBuilder=e,this.translateService=t,this.member={},this.canAddFromDirectory=!1,this.save=new i.vpe,this.cancel=new i.vpe,this.displayUserAddFromDirectoryDialog=!1,this.initForm()}ngOnChanges(e){this.member&&(this.form.reset(),this.member&&this.form.patchValue(Object.assign({},this.member)))}initForm(){this.form=this.formBuilder.group({id:[this.member.id],user:[this.member.user,o.kI.required],roles:[this.member.roles]})}onCancel(){this.form.reset(),this.cancel.next()}addUserFromDirectory(){this.displayUserAddFromDirectoryDialog=!0}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,t.roles=s.P.Differential(t.roles,null===(e=this.member)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.teamId=this.teamId,this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.qu),i.Y36(r.sK))},e.\u0275cmp=i.Xpm({type:e,selectors:[["bia-member-form-edit"]],inputs:{member:"member",roleOptions:"roleOptions",userOptions:"userOptions",teamId:"teamId",canAddFromDirectory:"canAddFromDirectory"},outputs:{save:"save",cancel:"cancel"},features:[i.TTD],decls:25,vars:27,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","user","optionLabel","display","datakey","id",3,"options","filter","showClear"],[1,"bia-star-mandatory"],["class","app-field-container","fxFlex","10",4,"ngIf"],["formControlName","roles","multiple","multiple","checkbox","checkbox","optionLabel","display",3,"options","showToggleAll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],[3,"display","displayChange"],["fxFlex","10",1,"app-field-container"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-sm","p-button-rounded","p-button-text","align-right",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"form",0),i.NdJ("submit",function(){return t.onSubmit()}),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",1),i.TgZ(4,"div",2),i.TgZ(5,"span",3),i._UZ(6,"p-dropdown",4),i.TgZ(7,"label"),i.TgZ(8,"span",5),i._uU(9,"*"),i.qZA(),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.qZA(),i.qZA(),i.YNc(12,m,2,0,"div",6),i.qZA(),i.qZA(),i.qZA(),i.TgZ(13,"div",1),i.TgZ(14,"div",2),i.TgZ(15,"label"),i._uU(16),i.ALo(17,"translate"),i.qZA(),i._UZ(18,"p-listbox",7),i.qZA(),i.qZA(),i.TgZ(19,"div",8),i._UZ(20,"button",9),i.ALo(21,"translate"),i.TgZ(22,"button",10),i.NdJ("click",function(){return t.onCancel()}),i.ALo(23,"translate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(24,"bia-user-add-from-directory-dialog",11),i.NdJ("displayChange",function(e){return t.displayUserAddFromDirectoryDialog=e}),i.qZA()),2&e&&(i.Q6J("formGroup",t.form),i.xp6(6),i.Akn(i.DdM(25,h)),i.Q6J("options",t.userOptions)("filter",!0)("showClear",!0),i.xp6(4),i.Oqu(i.lcZ(11,17,"member.user")),i.xp6(2),i.Q6J("ngIf",t.canAddFromDirectory),i.xp6(4),i.hij("",i.lcZ(17,19,"member.roles"),":"),i.xp6(2),i.Akn(i.DdM(26,h)),i.Q6J("options",t.roleOptions)("showToggleAll",!1),i.xp6(2),i.s9C("label",i.lcZ(21,21,"bia.save")),i.Q6J("disabled",!t.form.valid),i.xp6(2),i.s9C("label",i.lcZ(23,23,"bia.cancel")),i.xp6(2),i.Q6J("display",t.displayUserAddFromDirectoryDialog))},directives:[o._Y,o.JL,a.xw,o.sg,a.Wh,a.yH,l.Lt,o.JJ,o.u,c.O5,u.Ri,a.SQ,d.Hq,p.C],pipes:[r.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}.align-right[_ngcontent-%COMP%]{margin-left:auto;display:block;padding-right:0}"]}),e})()},89490:function(e,t,n){n.d(t,{m:function(){return f}});var i=n(37716),o=n(3679),s=n(11466),r=n(81780),a=n(35618),l=n(36949),c=n(38583),u=n(4714),d=n(4207),p=n(65224);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",12),i.TgZ(1,"button",13),i.NdJ("click",function(){return i.CHM(e),i.oxw().addUserFromDirectory()}),i.qZA(),i.qZA()}}const h=function(){return{width:"100%"}};let f=(()=>{class e{constructor(e,t){this.formBuilder=e,this.translateService=t,this.members={},this.canAddFromDirectory=!1,this.save=new i.vpe,this.cancel=new i.vpe,this.displayUserAddFromDirectoryDialog=!1,this.initForm()}ngOnChanges(e){if(this.members){let e=this.form.value.users;e&&(this.members.users=this.members.users.concat(e)),this.form.reset(),this.form.patchValue(Object.assign({},this.members))}}initForm(){this.form=this.formBuilder.group({users:[this.members.users,o.kI.required],roles:[]})}onCancel(){this.form.reset(),this.cancel.next()}addUserFromDirectory(){this.displayUserAddFromDirectoryDialog=!0}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.roles=s.P.Differential(t.roles,null===(e=this.members)||void 0===e?void 0:e.roles),t.users=s.P.Differential(t.users,[]),t.teamId=this.teamId,this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.qu),i.Y36(r.sK))},e.\u0275cmp=i.Xpm({type:e,selectors:[["bia-member-form-new"]],inputs:{members:"members",roleOptions:"roleOptions",userOptions:"userOptions",teamId:"teamId",canAddFromDirectory:"canAddFromDirectory"},outputs:{save:"save",cancel:"cancel"},features:[i.TTD],decls:25,vars:26,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["defaultLabel","\xa0","formControlName","users","optionLabel","display","datakey","id","appendTo","body",3,"options","virtualScroll"],[1,"bia-star-mandatory"],["class","app-field-container","fxFlex","10",4,"ngIf"],["formControlName","roles","multiple","multiple","checkbox","checkbox","optionLabel","display",3,"options","showToggleAll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],[3,"display","displayChange"],["fxFlex","10",1,"app-field-container"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-sm","p-button-rounded","p-button-text","align-right",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"form",0),i.NdJ("submit",function(){return t.onSubmit()}),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",1),i.TgZ(4,"div",2),i.TgZ(5,"span",3),i._UZ(6,"p-multiSelect",4),i.TgZ(7,"label"),i.TgZ(8,"span",5),i._uU(9,"*"),i.qZA(),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.qZA(),i.qZA(),i.YNc(12,m,2,0,"div",6),i.qZA(),i.qZA(),i.qZA(),i.TgZ(13,"div",1),i.TgZ(14,"div",2),i.TgZ(15,"label"),i._uU(16),i.ALo(17,"translate"),i.qZA(),i._UZ(18,"p-listbox",7),i.qZA(),i.qZA(),i.TgZ(19,"div",8),i._UZ(20,"button",9),i.ALo(21,"translate"),i.TgZ(22,"button",10),i.NdJ("click",function(){return t.onCancel()}),i.ALo(23,"translate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(24,"bia-user-add-from-directory-dialog",11),i.NdJ("displayChange",function(e){return t.displayUserAddFromDirectoryDialog=e}),i.qZA()),2&e&&(i.Q6J("formGroup",t.form),i.xp6(6),i.Akn(i.DdM(24,h)),i.Q6J("options",t.userOptions)("virtualScroll",!0),i.xp6(4),i.Oqu(i.lcZ(11,16,"member.user")),i.xp6(2),i.Q6J("ngIf",t.canAddFromDirectory),i.xp6(4),i.hij("",i.lcZ(17,18,"member.roles"),":"),i.xp6(2),i.Akn(i.DdM(25,h)),i.Q6J("options",t.roleOptions)("showToggleAll",!1),i.xp6(2),i.s9C("label",i.lcZ(21,20,"bia.save")),i.Q6J("disabled",!t.form.valid),i.xp6(2),i.s9C("label",i.lcZ(23,22,"bia.cancel")),i.xp6(2),i.Q6J("display",t.displayUserAddFromDirectoryDialog))},directives:[o._Y,o.JL,a.xw,o.sg,a.Wh,a.yH,l.NU,o.JJ,o.u,c.O5,u.Ri,a.SQ,d.Hq,p.C],pipes:[r.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}.align-right[_ngcontent-%COMP%]{margin-left:auto;display:block;padding-right:0}"]}),e})()},34601:function(e,t,n){n.d(t,{U:function(){return Se}});var i=n(3679),o=n(39083),s=n(11466),r=n(9716),a=n(86320),l=n(37716),c=n(42),u=n(81780),d=n(38583),p=n(70667),m=n(33013),h=n(13928),f=n(88030),g=n(50103),b=n(36949),y=n(12332),w=n(88598),x=n(45862),C=n(49067);function S(e,t){1&e&&(l.TgZ(0,"th",10),l._UZ(1,"p-tableHeaderCheckbox"),l.qZA())}function v(e,t){if(1&e&&(l.TgZ(0,"th",12),l._uU(1),l.ALo(2,"translate"),l._UZ(3,"p-sortIcon",13),l.qZA()),2&e){const e=l.oxw().$implicit;l.Q6J("pSortableColumn",e.field),l.xp6(1),l.hij(" ",l.lcZ(2,3,null==e?null:e.header)," "),l.xp6(2),l.Q6J("field",e.field)}}function A(e,t){if(1&e&&(l.TgZ(0,"th"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,1,null==e?null:e.header)," ")}}function Z(e,t){if(1&e&&(l.ynx(0),l.YNc(1,v,4,5,"th",11),l.YNc(2,A,3,3,"th",9),l.BQk()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("ngIf",!0===(null==e?null:e.isSortable)),l.xp6(1),l.Q6J("ngIf",!0!==(null==e?null:e.isSortable))}}function M(e,t){1&e&&l._UZ(0,"th")}const L=function(e){return{"p-state-filled":e}};function T(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span",17),l.TgZ(1,"input",18),l.NdJ("input",function(t){l.CHM(e);const n=l.oxw().$implicit;return l.oxw(3),l.MAs(1).filter(t.target.value,n.field,n.filterMode)}),l.ALo(2,"translate"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw().$implicit;l.oxw(3);const t=l.MAs(1);l.xp6(1),l.s9C("type","Number"===e.type?"number":"text"),l.s9C("placeholder",void 0!==e.searchPlaceholder?e.searchPlaceholder:!0===e.isDate?l.lcZ(2,4,"bia.dateIso8601"):""),l.Q6J("value",null==t.filters[e.field]?null:t.filters[e.field].value)("ngClass",l.VKq(6,L,""!==(null==t.filters[e.field]?null:t.filters[e.field].value)))}}function O(e,t){if(1&e&&(l.TgZ(0,"th",15),l.YNc(1,T,3,8,"span",16),l.qZA()),2&e){const e=t.$implicit;l.Q6J("ngSwitch",e.field),l.xp6(1),l.Q6J("ngIf",!0===e.isSearchable)}}function J(e,t){if(1&e&&(l.TgZ(0,"tr"),l.YNc(1,M,1,0,"th",9),l.YNc(2,O,2,2,"th",14),l.qZA()),2&e){const e=l.oxw().$implicit,t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",t.canSelectElement),l.xp6(1),l.Q6J("ngForOf",e)}}function N(e,t){if(1&e&&(l.TgZ(0,"tr"),l.YNc(1,S,2,0,"th",7),l.YNc(2,Z,3,2,"ng-container",8),l.qZA(),l.YNc(3,J,3,2,"tr",9)),2&e){const e=t.$implicit,n=l.oxw(2);l.xp6(1),l.Q6J("ngIf",n.canSelectElement),l.xp6(1),l.Q6J("ngForOf",e),l.xp6(1),l.Q6J("ngIf",n.showColSearch)}}function Q(e,t){if(1&e&&l._UZ(0,"p-tableCheckbox",23),2&e){const e=l.oxw(2).$implicit;l.Q6J("value",e)}}function I(e,t){1&e&&l._UZ(0,"i",24)}function D(e,t){if(1&e&&(l.TgZ(0,"td"),l.YNc(1,Q,1,1,"p-tableCheckbox",21),l.YNc(2,I,1,0,"i",22),l.qZA()),2&e){const e=l.oxw().$implicit,t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!0!==t.isFooter(e)&&e.id>0),l.xp6(1),l.Q6J("ngIf",!0===t.isFooter(e))}}function F(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"input",29),l.NdJ("change",function(){return l.CHM(e),l.oxw(6).onChange()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(3).$implicit;l.xp6(1),l.Q6J("formControlName",e.field)}}function $(e,t){1&e&&(l.TgZ(0,"span",30),l._uU(1,"*"),l.qZA())}function k(e,t){if(1&e&&(l.ynx(0,15),l.YNc(1,F,2,1,"ng-container",27),l.BQk(),l.YNc(2,$,2,0,"span",28)),2&e){const e=l.oxw(2).$implicit,t=l.oxw(3);l.Q6J("ngSwitch",e.field),l.xp6(2),l.Q6J("ngIf",!0===t.isRequired(e.field))}}function q(e,t){1&e&&l.YNc(0,k,3,2,"ng-template",26)}function B(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.BQk()),2&e){const e=l.oxw(3).$implicit,t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t[e.field]," ")}}function Y(e,t){if(1&e&&(l.ynx(0,15),l.YNc(1,B,2,1,"ng-container",27),l.BQk()),2&e){const e=l.oxw(2).$implicit;l.Q6J("ngSwitch",e.field)}}function P(e,t){1&e&&l.YNc(0,Y,2,1,"ng-template",31)}const R=function(){return{width:"100%"}};function E(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-dropdown",35),l.NdJ("onChange",function(){return l.CHM(e),l.oxw(7).onChange()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit,t=l.oxw(3);l.xp6(1),l.Akn(l.DdM(4,R)),l.Q6J("formControlName",e.field)("options",t.getOptionDto(e.field))}}function U(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-multiSelect",36),l.NdJ("onChange",function(){return l.CHM(e),l.oxw(7).onChange()})("onPanelShow",function(){return l.CHM(e),l.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return l.CHM(e),l.oxw(7).onPanelHideMultiSelect()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit,t=l.oxw(3);l.xp6(1),l.Akn(l.DdM(4,R)),l.Q6J("formControlName",e.field)("options",t.getOptionDto(e.field))}}function H(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-checkbox",37),l.NdJ("onChange",function(){return l.CHM(e),l.oxw(7).onChange()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Q6J("binary",!0)("formControlName",e.field)}}function z(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"input",38),l.NdJ("change",function(){return l.CHM(e),l.oxw(7).onChange()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Q6J("formControlName",e.field)}}function _(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-calendar",39),l.NdJ("onShow",function(){return l.CHM(e),l.oxw(7).onShowCalendar()})("onSelect",function(){return l.CHM(e),l.oxw(7).onChange()})("onBlur",function(){return l.CHM(e),l.oxw(7).onBlurCalendar()})("onClose",function(){return l.CHM(e),l.oxw(7).onCloseCalendar()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Akn(l.DdM(5,R)),l.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",l.DdM(6,R))}}function G(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-calendar",40),l.NdJ("onShow",function(){return l.CHM(e),l.oxw(7).onShowCalendar()})("onSelect",function(){return l.CHM(e),l.oxw(7).onChange()})("onBlur",function(){return l.CHM(e),l.oxw(7).onBlurCalendar()})("onClose",function(){return l.CHM(e),l.oxw(7).onCloseCalendar()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Akn(l.DdM(5,R)),l.Q6J("formControlName",e.field)("inputStyle",l.DdM(6,R))("timeOnly",!0)}}function j(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-calendar",41),l.NdJ("onShow",function(){return l.CHM(e),l.oxw(7).onShowCalendar()})("onSelect",function(){return l.CHM(e),l.oxw(7).onChange()})("onBlur",function(){return l.CHM(e),l.oxw(7).onBlurCalendar()})("onClose",function(){return l.CHM(e),l.oxw(7).onCloseCalendar()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Akn(l.DdM(5,R)),l.Q6J("formControlName",e.field)("inputStyle",l.DdM(6,R))("timeOnly",!0)}}function K(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-calendar",42),l.NdJ("onShow",function(){return l.CHM(e),l.oxw(7).onShowCalendar()})("onSelect",function(){return l.CHM(e),l.oxw(7).onChange()})("onBlur",function(){return l.CHM(e),l.oxw(7).onBlurCalendar()})("onClose",function(){return l.CHM(e),l.oxw(7).onCloseCalendar()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Akn(l.DdM(5,R)),l.Q6J("formControlName",e.field)("inputStyle",l.DdM(6,R))("timeOnly",!0)}}function V(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"p-calendar",43),l.NdJ("onShow",function(){return l.CHM(e),l.oxw(7).onShowCalendar()})("onSelect",function(){return l.CHM(e),l.oxw(7).onChange()})("onBlur",function(){return l.CHM(e),l.oxw(7).onBlurCalendar()})("onClose",function(){return l.CHM(e),l.oxw(7).onCloseCalendar()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Akn(l.DdM(5,R)),l.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",l.DdM(6,R))}}function W(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"input",44),l.NdJ("change",function(){return l.CHM(e),l.oxw(7).onChange()}),l.qZA(),l.BQk()}if(2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Q6J("maxlength",e.maxlength)("formControlName",e.field)}}function X(e,t){1&e&&(l.TgZ(0,"span",30),l._uU(1,"*"),l.qZA())}function ee(e,t){if(1&e&&(l.ynx(0,15),l.YNc(1,E,2,5,"ng-container",34),l.YNc(2,U,2,5,"ng-container",34),l.YNc(3,H,2,2,"ng-container",34),l.YNc(4,z,2,1,"ng-container",34),l.YNc(5,_,2,7,"ng-container",34),l.YNc(6,G,2,7,"ng-container",34),l.YNc(7,j,2,7,"ng-container",34),l.YNc(8,K,2,7,"ng-container",34),l.YNc(9,V,2,7,"ng-container",34),l.YNc(10,W,2,2,"ng-container",27),l.BQk(),l.YNc(11,X,2,0,"span",28)),2&e){const e=l.oxw(3).$implicit,t=l.oxw(3);l.Q6J("ngSwitch",e.type),l.xp6(1),l.Q6J("ngSwitchCase","OneToMany"),l.xp6(1),l.Q6J("ngSwitchCase","ManyToMany"),l.xp6(1),l.Q6J("ngSwitchCase","Boolean"),l.xp6(1),l.Q6J("ngSwitchCase","Number"),l.xp6(1),l.Q6J("ngSwitchCase","Date"),l.xp6(1),l.Q6J("ngSwitchCase","Time"),l.xp6(1),l.Q6J("ngSwitchCase","TimeOnly"),l.xp6(1),l.Q6J("ngSwitchCase","TimeSecOnly"),l.xp6(1),l.Q6J("ngSwitchCase","DateTime"),l.xp6(2),l.Q6J("ngIf",!0===t.isRequired(e.field))}}function te(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.BQk()),2&e){const e=l.oxw(5).$implicit,t=l.oxw().$implicit;l.xp6(1),l.hij(" ",null==t[e.field]?null:t[e.field].display," ")}}function ne(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.BQk()),2&e){const e=l.oxw(5).$implicit,t=l.oxw().$implicit,n=l.oxw(2);l.xp6(1),l.hij(" ",n.formatDisplayName(t[e.field])," ")}}function ie(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"formatValue"),l.BQk()),2&e){const e=l.oxw(5).$implicit,t=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,t[e.field],e)," ")}}function oe(e,t){if(1&e&&(l.ynx(0),l.ynx(1,15),l.YNc(2,te,2,1,"ng-container",34),l.YNc(3,ne,2,1,"ng-container",34),l.YNc(4,ie,3,4,"ng-container",27),l.BQk(),l.BQk()),2&e){const e=l.oxw(4).$implicit;l.xp6(1),l.Q6J("ngSwitch",e.type),l.xp6(1),l.Q6J("ngSwitchCase","OneToMany"),l.xp6(1),l.Q6J("ngSwitchCase","ManyToMany")}}function se(e,t){if(1&e&&l.YNc(0,oe,5,3,"ng-container",9),2&e){const e=l.oxw(4).$implicit,t=l.oxw(2);l.Q6J("ngIf",!0!==t.isFooter(e))}}function re(e,t){if(1&e&&(l.YNc(0,ee,12,11,"ng-template",32),l.YNc(1,se,1,1,"ng-template",null,33,l.W1O)),2&e){const e=l.MAs(2),t=l.oxw(2).$implicit;l.Q6J("ngIf",!0===t.isEditable)("ngIfElse",e)}}function ae(e,t){1&e&&l.YNc(0,re,3,2,"ng-template",26)}function le(e,t){1&e&&(l.TgZ(0,"label"),l._uU(1,"-"),l.qZA())}function ce(e,t){if(1&e&&l.YNc(0,le,2,0,"label",9),2&e){const e=l.oxw(3).$implicit;l.Q6J("ngIf",!0===e.isEditable)}}function ue(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.BQk()),2&e){const e=l.oxw(4).$implicit,t=l.oxw().$implicit;l.xp6(1),l.hij(" ",null==t[e.field]?null:t[e.field].display," ")}}function de(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.BQk()),2&e){const e=l.oxw(4).$implicit,t=l.oxw().$implicit,n=l.oxw(2);l.xp6(1),l.hij(" ",n.formatDisplayName(t[e.field])," ")}}function pe(e,t){1&e&&l._UZ(0,"i",47)}function me(e,t){if(1&e&&(l.ynx(0),l.YNc(1,pe,1,0,"i",46),l.BQk()),2&e){const e=l.oxw(4).$implicit,t=l.oxw().$implicit;l.xp6(1),l.Q6J("ngIf",!0===t[e.field])}}function he(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"formatValue"),l.BQk()),2&e){const e=l.oxw(4).$implicit,t=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,t[e.field],e)," ")}}function fe(e,t){if(1&e&&(l.ynx(0,15),l.YNc(1,ue,2,1,"ng-container",34),l.YNc(2,de,2,1,"ng-container",34),l.YNc(3,me,2,1,"ng-container",34),l.YNc(4,he,3,4,"ng-container",27),l.BQk()),2&e){const e=l.oxw(3).$implicit;l.Q6J("ngSwitch",e.type),l.xp6(1),l.Q6J("ngSwitchCase","OneToMany"),l.xp6(1),l.Q6J("ngSwitchCase","ManyToMany"),l.xp6(1),l.Q6J("ngSwitchCase","Boolean")}}function ge(e,t){if(1&e&&(l.YNc(0,ce,1,1,"ng-template",32),l.YNc(1,fe,5,4,"ng-template",null,45,l.W1O)),2&e){const e=l.MAs(2),t=l.oxw(3).$implicit,n=l.oxw(2);l.Q6J("ngIf",!0===n.isFooter(t))("ngIfElse",e)}}function be(e,t){1&e&&l.YNc(0,ge,3,2,"ng-template",31)}function ye(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"td",25),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(2).initEditableRow(t)}),l.TgZ(1,"p-cellEditor"),l.YNc(2,q,1,0,void 0,9),l.YNc(3,P,1,0,void 0,9),l.YNc(4,ae,1,0,void 0,9),l.YNc(5,be,1,0,void 0,9),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,n=l.oxw(3);l.xp6(2),l.Q6J("ngIf",!0===n.isSpecificInput(e.field)),l.xp6(1),l.Q6J("ngIf",!0===n.isSpecificInput(e.field)),l.xp6(1),l.Q6J("ngIf",!0!==n.isSpecificInput(e.field)),l.xp6(1),l.Q6J("ngIf",!0!==n.isSpecificInput(e.field))}}function we(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr",19),l.NdJ("focusout",function(){return l.CHM(e),l.oxw(2).onFocusout()})("keyup.enter",function(){return l.CHM(e),l.oxw(2).initEditableRow(null)})("keyup.escape",function(){return l.CHM(e),l.oxw(2).cancel()}),l.YNc(1,D,3,2,"td",9),l.YNc(2,ye,6,4,"td",20),l.qZA()}if(2&e){const e=t.$implicit,n=t.columns,i=l.oxw(2);l.Q6J("pSelectableRow",!0!==i.isFooter(e)?e:null)("pEditableRow",e),l.xp6(1),l.Q6J("ngIf",i.canSelectElement),l.xp6(1),l.Q6J("ngForOf",n)}}function xe(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td",48),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.uIk("colspan",e.length+1),l.xp6(1),l.hij(" ",l.lcZ(3,2,"bia.NoRecordsFound")," ")}}function Ce(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"p-table",2,3),l.NdJ("onFilter",function(){return l.CHM(e),l.oxw().onFilter()})("onLazyLoad",function(t){return l.CHM(e),l.oxw().onLoadLazy(t)})("onStateSave",function(t){return l.CHM(e),l.oxw().onStateSave(t)})("selectionChange",function(){return l.CHM(e),l.oxw().onSelectionChange()}),l.ALo(2,"async"),l.YNc(3,N,4,3,"ng-template",4),l.YNc(4,we,3,4,"ng-template",5),l.YNc(5,xe,4,4,"ng-template",6),l.qZA()}if(2&e){const e=l.oxw();l.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",e.displayedColumns)("value",e.elements)("paginator",e.paginator)("rows",e.pageSize)("totalRecords",e.totalRecord)("lazy",!0)("loading",e.loading&&null!==l.lcZ(2,14,e.showLoading$))("stateStorage","session")("stateKey",e.tableStateKey)("lazyLoadOnInit",e.getLazyLoadOnInit())("sortField",e.sortFieldValue)("sortOrder",e.sortOrderValue)}}let Se=(()=>{class e extends a.l{constructor(e,t,n,i,o){super(e,t,n,i),this.formBuilder=e,this.authService=t,this.biaMessageService=n,this.translateService=i,this.siteService=o}initForm(){this.form=this.formBuilder.group({id:[this.element.id],user:[this.element.user,i.kI.required],roles:[this.element.roles]})}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,t.roles=s.P.Differential(t.roles,null===(e=this.element)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.teamId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(i.qu),l.Y36(o.e),l.Y36(c.X),l.Y36(u.sK),l.Y36(r.P))},e.\u0275cmp=l.Xpm({type:e,selectors:[["bia-member-table"]],features:[l.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(e,t){1&e&&(l.TgZ(0,"form",0),l.YNc(1,Ce,6,16,"p-table",1),l.qZA()),2&e&&(l.Q6J("formGroup",t.form),l.xp6(1),l.Q6J("ngIf",t.configuration))},directives:[i._Y,i.JL,i.sg,d.O5,p.iA,m.jx,d.sg,p.Mo,p.lQ,p.fz,d.RF,h.o,d.mk,f.oO,p.Ei,p.D$,p.UA,p.YL,d.ED,i.Fj,i.JJ,i.u,d.n9,g.Lt,b.NU,y.XZ,i.wV,w.f,x.D,i.nD],pipes:[d.Ov,u.X$,C.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),e})()},3014:function(e,t,n){n.d(t,{W:function(){return p}});var i=n(86710),o=n(91601),s=n(25021),r=n(24317),a=n(61028),l=n(11936),c=n(39682),u=n(95546),d=n(37716);let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.m,i.Aw.forFeature("members",r.ll),o.sQ.forFeature([s.c]),c.U,l.p,u.q]]}),e})()},19737:function(e,t,n){n.d(t,{W:function(){return s}});var i=n(74147),o=n(37716);let s=(()=>{class e extends i.Z{constructor(e){super(e,"Members")}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(o.zs3))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},63140:function(e,t,n){n.d(t,{n:function(){return p}});var i=n(9112),o=n(88002),s=n(65448),r=n(96875),a=n(23913),l=n(76048),c=n(94529),u=n(37716),d=n(86710);let p=(()=>{class e{constructor(e){this.store=e,this.userOptions$=this.store.select(a.yp),this.roleOptions$=this.store.select(s.wA),this.dictOptionDtos$=(0,i.aj)([this.userOptions$,this.roleOptions$]).pipe((0,o.U)(e=>[new c.b("user",e[0]),new c.b("roles",e[1])]))}loadAllOptions(e){this.store.dispatch(l.d.loadAll()),this.store.dispatch(r.E.loadAll({teamTypeId:e}))}refreshUsersOptions(){this.store.dispatch(l.d.loadAll())}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(d.yh))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},92580:function(e,t,n){n.d(t,{n:function(){return l}});var i=n(75319),o=n(24317),s=n(22795),r=n(37716),a=n(86710);let l=(()=>{class e{constructor(e){this.store=e,this.sub=new i.w,this.InitSub(),this.loading$=this.store.select(o.Sg),this.member$=this.store.select(o.R4)}get currentMember(){var e;return(null===(e=this._currentMember)||void 0===e?void 0:e.id)===this._currentMemberId?this._currentMember:null}get currentMemberId(){return this._currentMemberId}set currentMemberId(e){this._currentMemberId=Number(e),this.store.dispatch(s.L.load({id:e}))}InitSub(){this.sub=new i.w,this.sub.add(this.store.select(o.R4).subscribe(e=>{e&&(this._currentMember=e)}))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a.yh))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},24317:function(e,t,n){n.d(t,{Ux:function(){return b},R4:function(){return m},yG:function(){return h},Sg:function(){return f},QJ:function(){return g},T7:function(){return p},ll:function(){return c}});var i=n(80273),o=n(86710),s=n(22795);const r=(0,i.H)({selectId:e=>e.id,sortComparer:!1}),a=r.getInitialState({totalCount:0,currentMember:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),l=(0,o.Lq)(a,(0,o.on)(s.L.loadAllByPost,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!0})),(0,o.on)(s.L.load,e=>Object.assign(Object.assign({},e),{loadingGet:!0})),(0,o.on)(s.L.loadAllByPostSuccess,(e,{result:t,event:n})=>{const i=r.setAll(t.data,e);return i.totalCount=t.totalCount,i.lastLazyLoadEvent=n,i.loadingGetAll=!1,i}),(0,o.on)(s.L.loadSuccess,(e,{member:t})=>Object.assign(Object.assign({},e),{currentMember:t,loadingGet:!1})),(0,o.on)(s.L.failure,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})));function c(e,t){return(0,o.UY)({members:l})(e,t)}const u=(0,o.ZF)("members"),d=(0,o.P1)(u,e=>e.members),p=(0,o.P1)(d,e=>e.totalCount),m=(0,o.P1)(d,e=>e.currentMember),h=(0,o.P1)(d,e=>e.lastLazyLoadEvent),f=(0,o.P1)(d,e=>e.loadingGet),g=(0,o.P1)(d,e=>e.loadingGetAll),{selectAll:b}=r.getSelectors(d)},22795:function(e,t,n){n.d(t,{L:function(){return i}});var i,o,s=n(86710);(o=i||(i={})).loadAllByPost=(0,s.PH)("[Members] Load all by post",(0,s.Ky)()),o.load=(0,s.PH)("[Members] Load",(0,s.Ky)()),o.create=(0,s.PH)("[Members] Create",(0,s.Ky)()),o.createMulti=(0,s.PH)("[Members] Create multi",(0,s.Ky)()),o.update=(0,s.PH)("[Members] Update",(0,s.Ky)()),o.remove=(0,s.PH)("[Members] Remove",(0,s.Ky)()),o.multiRemove=(0,s.PH)("[Members] Multi Remove",(0,s.Ky)()),o.loadAllByPostSuccess=(0,s.PH)("[Members] Load all by post success",(0,s.Ky)()),o.loadSuccess=(0,s.PH)("[Members] Load success",(0,s.Ky)()),o.failure=(0,s.PH)("[Members] Failure",(0,s.Ky)())},25021:function(e,t,n){n.d(t,{c:function(){return y}});var i=n(25917),o=n(92996),s=n(43190),r=n(88002),a=n(5304),l=n(94612),c=n(57057),u=n(91601),d=n(22795),p=n(19737),m=n(24317),h=n(82762),f=n(37716),g=n(42),b=n(86710);let y=(()=>{class e{constructor(t,n,p,f){this.actions$=t,this.memberDas=n,this.biaMessageService=p,this.store=f,this.loadAllByPost$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.loadAllByPost),(0,o.j)("event"),(0,s.w)(e=>this.memberDas.getListByPost({event:e}).pipe((0,r.U)(t=>d.L.loadAllByPostSuccess({result:t,event:e})),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e})))))))),this.load$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.load),(0,o.j)("id"),(0,s.w)(e=>this.memberDas.get({id:e}).pipe((0,r.U)(e=>d.L.loadSuccess({member:e})),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e})))))))),this.create$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.create),(0,o.j)("member"),(0,l.b)(e=>(0,i.of)(e).pipe((0,c.M)(this.store.select(m.yG)))),(0,s.w)(([t,n])=>this.memberDas.post({item:t}).pipe((0,r.U)(()=>(this.biaMessageService.showAddSuccess(),e.useSignalR?(0,h.b)():d.L.loadAllByPost({event:n}))),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e})))))))),this.createMulti$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.createMulti),(0,o.j)("members"),(0,l.b)(e=>(0,i.of)(e).pipe((0,c.M)(this.store.select(m.yG)))),(0,s.w)(([t,n])=>this.memberDas.postItem({item:t,endpoint:"addMulti"}).pipe((0,r.U)(()=>(this.biaMessageService.showAddSuccess(),e.useSignalR?(0,h.b)():d.L.loadAllByPost({event:n}))),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e})))))))),this.update$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.update),(0,o.j)("member"),(0,l.b)(e=>(0,i.of)(e).pipe((0,c.M)(this.store.select(m.yG)))),(0,s.w)(([t,n])=>this.memberDas.put({item:t,id:t.id}).pipe((0,r.U)(()=>(this.biaMessageService.showUpdateSuccess(),e.useSignalR?(0,h.b)():d.L.loadAllByPost({event:n}))),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e})))))))),this.destroy$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.remove),(0,o.j)("id"),(0,l.b)(e=>(0,i.of)(e).pipe((0,c.M)(this.store.select(m.yG)))),(0,s.w)(([t,n])=>this.memberDas.delete({id:t}).pipe((0,r.U)(()=>(this.biaMessageService.showDeleteSuccess(),e.useSignalR?(0,h.b)():d.L.loadAllByPost({event:n}))),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e})))))))),this.multiDestroy$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(d.L.multiRemove),(0,o.j)("ids"),(0,l.b)(e=>(0,i.of)(e).pipe((0,c.M)(this.store.select(m.yG)))),(0,s.w)(([t,n])=>this.memberDas.deletes({ids:t}).pipe((0,r.U)(()=>(this.biaMessageService.showDeleteSuccess(),e.useSignalR?(0,h.b)():d.L.loadAllByPost({event:n}))),(0,a.K)(e=>(this.biaMessageService.showError(),(0,i.of)(d.L.failure({error:e}))))))))}}return e.useSignalR=!1,e.\u0275fac=function(t){return new(t||e)(f.LFG(u.eX),f.LFG(p.W),f.LFG(g.X),f.LFG(b.yh))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac}),e})()},97985:function(e,t,n){n.d(t,{Z:function(){return y}});var i=n(37716),o=n(86710),s=n(22795),r=n(75319),a=n(92580),l=n(94666),c=n(63140),u=n(23913),d=n(13653),p=n(39083),m=n(29206),h=n(7767),f=n(38583),g=n(79373);function b(e,t){1&e&&i._UZ(0,"bia-spinner",2),2&e&&i.Q6J("overlay",!0)}let y=(()=>{class e{constructor(e){this.displayChange=new i.vpe,this.sub=new r.w,this.canAddFromDirectory=!1,this.memberService=e.get(a.n),this.store=e.get(o.yh),this.router=e.get(l.F0),this.activatedRoute=e.get(l.gz),this.memberOptionsService=e.get(c.n),this.authService=e.get(p.e)}ngOnInit(){this.sub=new r.w,this.canAddFromDirectory=this.authService.hasPermission(m.y.User_Add),this.memberOptionsService.loadAllOptions(this.teamTypeId),this.sub.add(this.store.select(u.nC).pipe((0,d.T)(1)).subscribe(e=>{this.memberOptionsService.refreshUsersOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(s.L.update({member:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.zs3))},e.\u0275cmp=i.Xpm({type:e,selectors:[["bia-member-edit"]],outputs:{displayChange:"displayChange"},decls:6,vars:14,consts:[[3,"member","roleOptions","userOptions","teamId","canAddFromDirectory","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(i.TgZ(0,"bia-member-form-edit",0),i.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),i.ALo(1,"async"),i.ALo(2,"async"),i.ALo(3,"async"),i.qZA(),i.YNc(4,b,1,1,"bia-spinner",1),i.ALo(5,"async")),2&e&&(i.Q6J("member",i.lcZ(1,6,t.memberService.member$))("roleOptions",i.lcZ(2,8,t.memberOptionsService.roleOptions$))("userOptions",i.lcZ(3,10,t.memberOptionsService.userOptions$))("teamId",t.teamId)("canAddFromDirectory",t.canAddFromDirectory),i.xp6(4),i.Q6J("ngIf",i.lcZ(5,12,t.memberService.loading$)))},directives:[h.q,f.O5,g.O],pipes:[f.Ov],styles:[""]}),e})()},78311:function(e,t,n){n.d(t,{b:function(){return h}});var i=n(86710),o=n(75319),s=n(24317),r=n(94666),a=n(92580),l=n(30466),c=n(28049),u=n(37716),d=n(38583),p=n(79373);function m(e,t){1&e&&u._UZ(0,"bia-spinner",1),2&e&&u.Q6J("overlay",!0)}let h=(()=>{class e{constructor(e){this.sub=new o.w,this.store=e.get(i.yh),this.activatedRoute=e.get(r.gz),this.memberService=e.get(a.n),this.layoutService=e.get(l.N)}ngOnInit(){this.memberService.currentMemberId=this.activatedRoute.snapshot.params.memberId,this.sub.add(this.store.select(s.R4).subscribe(e=>{(null==e?void 0:e.user)&&(this.activatedRoute.data.pipe((0,c.P)()).subscribe(t=>{t.breadcrumb=e.user.display}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.zs3))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(u._UZ(0,"router-outlet"),u.YNc(1,m,1,1,"bia-spinner",0),u.ALo(2,"async")),2&e&&(u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,t.memberService.loading$)))},directives:[r.lC,d.O5,p.O],pipes:[d.Ov],styles:[""]}),e})()},36819:function(e,t,n){n.d(t,{A:function(){return g}});var i=n(86710),o=n(22795);class s{}var r=n(63140),a=n(94666),l=n(23913),c=n(75319),u=n(13653),d=n(39083),p=n(29206),m=n(37716),h=n(89490),f=n(38583);let g=(()=>{class e{constructor(e){this.sub=new c.w,this.canAddFromDirectory=!1,this.store=e.get(i.yh),this.router=e.get(a.F0),this.activatedRoute=e.get(a.gz),this.memberOptionsService=e.get(r.n),this.authService=e.get(d.e)}ngOnInit(){this.sub=new c.w,this.canAddFromDirectory=this.authService.hasPermission(p.y.User_Add),this.members=new s,this.memberOptionsService.loadAllOptions(this.teamTypeId),this.sub.add(this.store.select(l.nC).pipe((0,u.T)(1)).subscribe(e=>{this.memberOptionsService.refreshUsersOptions(),this.members.users=e}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(o.L.createMulti({members:e})),this.members=new s,this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.members=new s,this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(m.zs3))},e.\u0275cmp=m.Xpm({type:e,selectors:[["bia-member-new"]],decls:3,vars:9,consts:[[3,"members","roleOptions","userOptions","teamId","canAddFromDirectory","cancel","save"]],template:function(e,t){1&e&&(m.TgZ(0,"bia-member-form-new",0),m.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),m.ALo(1,"async"),m.ALo(2,"async"),m.qZA()),2&e&&m.Q6J("members",t.members)("roleOptions",m.lcZ(1,5,t.memberOptionsService.roleOptions$))("userOptions",m.lcZ(2,7,t.memberOptionsService.userOptions$))("teamId",t.teamId)("canAddFromDirectory",t.canAddFromDirectory)},directives:[h.m],pipes:[f.Ov],styles:[""]}),e})()},1691:function(e,t,n){n.d(t,{p:function(){return Q}});var i=n(86710),o=n(24317),s=n(22795),r=n(75319),a=n(88385),l=n(79090),c=n(40136),u=n(94666),d=n(19737),p=n(49457),m=n(81780),h=n(38042),f=n(28049),g=n(59142),b=n(37716);let y=(()=>{class e{constructor(e,t){this.store=e,this.signalRService=t}initialize(e){console.log("%c [Members] Register SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-members",()=>{this.store.select(o.yG).pipe((0,f.P)()).subscribe(e=>{console.log("%c [Members] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(s.L.loadAllByPost({event:e}))})}),this.targetedFeature={parentKey:e,featureName:"members"},this.signalRService.joinGroup(this.targetedFeature)}destroy(){console.log("%c [Members] Unregister SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-members"),this.signalRService.leaveGroup(this.targetedFeature)}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(i.yh),b.LFG(g.Y))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=n(25021),x=n(46468),C=n(63140),S=n(28731),v=n(13653),A=n(23913),Z=n(35618),M=n(81606),L=n(76743),T=n(38583),O=n(34601);function J(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"bia-table",6),b.NdJ("clickRow",function(t){return b.CHM(e),b.oxw().onEdit(t)})("loadLazy",function(t){return b.CHM(e),b.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return b.CHM(e),b.oxw().onSelectedElementsChanged(t)}),b.ALo(1,"async"),b.ALo(2,"async"),b.ALo(3,"async"),b.qZA()}if(2&e){const e=b.oxw();b.Q6J("elements",b.lcZ(1,12,e.members$))("totalRecord",b.lcZ(2,14,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canClickRow",e.canEdit)("canSelectElement",e.canDelete)("loading",b.lcZ(3,16,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}function N(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"bia-member-table",7),b.NdJ("loadLazy",function(t){return b.CHM(e),b.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return b.CHM(e),b.oxw().onSelectedElementsChanged(t)})("save",function(t){return b.CHM(e),b.oxw().onSave(t)}),b.ALo(1,"async"),b.ALo(2,"async"),b.ALo(3,"async"),b.ALo(4,"async"),b.qZA()}if(2&e){const e=b.oxw();b.Q6J("elements",b.lcZ(1,14,e.members$))("dictOptionDtos",b.lcZ(2,16,e.memberOptionsService.dictOptionDtos$))("totalRecord",b.lcZ(3,18,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canEdit",e.canEdit)("canAdd",e.canAdd)("canSelectElement",e.canDelete)("loading",b.lcZ(4,20,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}let Q=(()=>{class e{constructor(e){this.useCalcMode=!1,this.useSignalR=!1,this.useView=!1,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new r.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=c.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"membersGrid":void 0,this.store=e.get(i.yh),this.router=e.get(u.F0),this.activatedRoute=e.get(u.gz),this.memberDas=e.get(d.W),this.translateService=e.get(m.sK),this.biaTranslationService=e.get(h.P6),this.membersSignalRService=e.get(y),this.useCalcMode&&(this.memberOptionsService=e.get(C.n))}ngOnInit(){this.sub=new r.w,this.initTableConfiguration(),this.teams$=this.store.select((0,S.sf)(this.teamTypeId)),this.sub.add(this.teams$.subscribe(()=>{this.setPermissions()})),this.members$=this.store.select(o.Ux),this.totalCount$=this.store.select(o.T7),this.loading$=this.store.select(o.QJ),this.OnDisplay(),this.useCalcMode&&(this.memberOptionsService.loadAllOptions(this.teamTypeId),this.sub.add(this.store.select(A.nC).subscribe(e=>{this.memberOptionsService.refreshUsersOptions()}))),this.useRefreshAtLanguageChange&&this.sub.add(this.biaTranslationService.currentCulture$.pipe((0,v.T)(1)).subscribe(e=>{this.onLoadLazy(this.memberListComponent.getLazyLoadMetadata())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.OnHide()}OnDisplay(){this.useView&&this.store.dispatch((0,x.Tx)()),this.useSignalR&&(this.membersSignalRService.initialize(this.parentIds[0]),w.c.useSignalR=!0)}OnHide(){this.useSignalR&&(w.c.useSignalR=!1,this.membersSignalRService.destroy())}onCreate(){this.useCalcMode||this.router.navigate(["../create"],{relativeTo:this.activatedRoute})}onEdit(e){this.useCalcMode||this.router.navigate(["../"+e+"/edit"],{relativeTo:this.activatedRoute})}onSave(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(s.L.update({member:e})):this.canAdd&&this.store.dispatch(s.L.create({member:e})))}onDelete(){this.selectedMembers&&this.canDelete&&this.store.dispatch(s.L.multiRemove({ids:this.selectedMembers.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedMembers=e}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){const t=Object.assign({parentIds:this.parentIds},e);this.store.dispatch(s.L.loadAllByPost({event:t}))}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(e){this.viewPreference=e}onExportCSV(){const e={};this.columns.map(t=>e[t.value.split(".")[1]]=this.translateService.instant(t.value));const t=Object.assign({parentIds:this.parentIds,columns:e},this.memberListComponent.getLazyLoadMetadata());this.memberDas.getFile(t).subscribe(e=>{p.saveAs(e,this.translateService.instant("app.members")+".csv")})}setPermissions(){}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(e=>{this.tableConfiguration={columns:[Object.assign(new l.ML("user","member.user"),{type:l.d5.OneToMany}),Object.assign(new l.ML("roles","member.rolesForSite"),{type:l.d5.ManyToMany})]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=[...this.columns]})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(b.zs3))},e.\u0275cmp=b.Xpm({type:e,selectors:[["bia-members-index"]],viewQuery:function(e,t){if(1&e&&b.Gf(a.$,5),2&e){let e;b.iGM(e=b.CRH())&&(t.memberListComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&b.ekj("bia-flex",t.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b.TgZ(1,"div",1),b.TgZ(2,"bia-table-header",2),b.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),b.ALo(3,"translate"),b.qZA(),b.TgZ(4,"bia-table-controller",3),b.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),b.ALo(5,"async"),b.qZA(),b.YNc(6,J,4,18,"bia-table",4),b.YNc(7,N,5,22,"bia-member-table",5),b.qZA(),b.qZA()),2&e&&(b.xp6(2),b.Q6J("headerTitle",b.lcZ(3,12,"member.listOfSiteMembers"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedMembers),b.xp6(2),b.Q6J("defaultPageSize",t.defaultPageSize)("length",b.lcZ(5,14,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey),b.xp6(2),b.Q6J("ngIf",!t.useCalcMode),b.xp6(1),b.Q6J("ngIf",t.useCalcMode))},directives:[Z.xw,Z.yH,M.l,L.B,T.O5,a.$,O.U],pipes:[m.X$,T.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})()}}]);