!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(c){a=!0,o=c}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[714],{71714:function(t,r,i){i.r(r),i.d(r,{UserModule:function(){return Re}});var s,c=i(2694),l=i(86710),f=i(91601),p=i(25917),h=i(92996),d=i(43190),y=i(88002),m=i(5304),v=i(94612),g=i(57057),b=(0,l.PH)("[Users] Load all by post",(0,l.Ky)()),S=(0,l.PH)("[Users] Load",(0,l.Ky)()),C=(0,l.PH)("[Users] Create",(0,l.Ky)()),w=(0,l.PH)("[Users] Update",(0,l.Ky)()),A=(0,l.PH)("[Users] Remove",(0,l.Ky)()),D=(0,l.PH)("[Users] Multi Remove",(0,l.Ky)()),L=(0,l.PH)("[Users] Save",(0,l.Ky)()),x=(0,l.PH)("[Users] Synchronize"),Z=((0,l.PH)("[Users] Load all success",(0,l.Ky)()),(0,l.PH)("[Users] Load all by post success",(0,l.Ky)())),k=(0,l.PH)("[Users] Load success",(0,l.Ky)()),U=((0,l.PH)("[Users] Create success",(0,l.Ky)()),(0,l.PH)("[Users] Update success",(0,l.Ky)()),(0,l.PH)("[Users] Remove success",(0,l.Ky)()),(0,l.PH)("[Users] Failure",(0,l.Ky)())),E=i(74147),N=i(37716),T=((s=function(){function e(){a(this,e)}return u(e,[{key:"formatDisplayNameObs",value:function(e){var t=this;return e.pipe((0,y.U)(function(e){return t.formatDisplayNames(e)}))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach(function(e){e=t.formatDisplayName(e)}),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")"),e}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275prov=N.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s),P=function(){var e=function(e){n(r,e);var t=o(r);function r(e,n){var o;return a(this,r),(o=t.call(this,e,"users")).userService=n,o}return u(r,[{key:"getAllByFilter",value:function(e){return this.userService.formatDisplayNameObs(this.http.get("".concat(this.route,"?filter=").concat(e)))}},{key:"synchronize",value:function(){return this.http.get("".concat(this.route,"synchronize"))}}]),r}(E.Z);return e.\u0275fac=function(t){return new(t||e)(N.LFG(N.zs3),N.LFG(T))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),M=i(80273),F=(0,M.H)({selectId:function(e){return e.id},sortComparer:!1}),z=F.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{}}),J=(0,l.Lq)(z,(0,l.on)(Z,function(e,t){var n=t.result,r=t.event,o=F.setAll(n.data,e);return o.currentUser={},o.totalCount=n.totalCount,o.lastLazyLoadEvent=r,o}),(0,l.on)(k,function(e,t){var n=t.user;return Object.assign(Object.assign({},e),{currentUser:n})}));function q(e,t){return(0,l.UY)({users:J})(e,t)}var O=(0,l.ZF)("users"),$=(0,l.P1)(O,function(e){return e.users}),_=(0,l.P1)($,function(e){return e.totalCount}),B=((0,l.P1)($,function(e){return e.currentUser}),(0,l.P1)($,function(e){return e.lastLazyLoadEvent})),G=F.getSelectors($).selectAll,H=i(38165),I=i(42),Q=i(81780),j=function(){var t=function t(n,r,o,i,s,c){var u=this;a(this,t),this.actions$=n,this.userDas=r,this.userFromADDas=o,this.biaMessageService=i,this.translateService=s,this.store=c,this.loadAllByPost$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(b),(0,h.j)("event"),(0,d.w)(function(e){return u.userDas.getListByPost(e).pipe((0,y.U)(function(t){return Z({result:t,event:e})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.load$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(S),(0,h.j)("id"),(0,d.w)(function(e){return u.userDas.get(e).pipe((0,y.U)(function(e){return k({user:e})}))}))}),this.synchronize$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(x),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(B)))}),(0,d.w)(function(t){var n=e(t,2),r=(n[0],n[1]);return u.userDas.synchronize().pipe((0,y.U)(function(){return u.biaMessageService.showSyncSuccess(),b({event:r})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.create$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(C),(0,h.j)("user"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(B)))}),(0,d.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.post(r).pipe((0,y.U)(function(){return u.biaMessageService.showAddSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.update$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(w),(0,h.j)("user"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(B)))}),(0,d.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.put(r,r.id).pipe((0,y.U)(function(){return u.biaMessageService.showUpdateSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.destroy$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(A),(0,h.j)("id"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(B)))}),(0,d.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.delete(r).pipe((0,y.U)(function(){return u.biaMessageService.showDeleteSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.multiDestroy$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(D),(0,h.j)("ids"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(B)))}),(0,d.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.deletes(r).pipe((0,y.U)(function(){return u.biaMessageService.showDeleteSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.save$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(L),(0,h.j)("usersFromAD"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(B)))}),(0,d.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userFromADDas.save(r,"").pipe((0,y.U)(function(){return u.biaMessageService.showAddSuccess(),b({event:o})}),(0,m.K)(function(e){if(303===e.status){var t="";e.error&&e.error.forEach(function(e){var n="".concat(u.translateService.instant("user.cannotAddMember")).replace("${login}",e);""!==t&&(t+="\n"),t+=n}),u.biaMessageService.showErrorDetail(t)}else u.biaMessageService.showError();return(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))})};return t.\u0275fac=function(e){return new(e||t)(N.LFG(f.eX),N.LFG(P),N.LFG(H.L),N.LFG(I.X),N.LFG(Q.sK),N.LFG(l.yh))},t.\u0275prov=N.Yz7({token:t,factory:t.\u0275fac}),t}(),K=i(88385),Y=i(79090),R=i(40136),V=i(8340),W=i(29206),X=i(49457),ee=i.n(X),te=i(35618),ne=i(33013),re=i(81606),oe=i(38583),ie=i(83473),se=i(4207),ae=i(99287);function ce(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",9),N.NdJ("click",function(){return N.CHM(n),N.oxw(2).toggleFilter()}),N.ALo(1,"translate"),N.qZA()}2&e&&N.s9C("pTooltip",N.lcZ(1,1,"msg.showFilters"))}function ue(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",10),N.NdJ("click",function(){return N.CHM(n),N.oxw(2).toggleFilter()}),N.ALo(1,"translate"),N.qZA()}2&e&&N.s9C("pTooltip",N.lcZ(1,1,"msg.showFilters"))}function le(e,t){if(1&e&&(N.ynx(0),N.YNc(1,ce,2,3,"button",7),N.YNc(2,ue,2,3,"button",8),N.BQk()),2&e){var n=N.oxw();N.xp6(1),N.Q6J("ngIf",!1===n.showFilter&&!1===n.haveFilter),N.xp6(1),N.Q6J("ngIf",!1===n.showFilter&&!0===n.haveFilter)}}function fe(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",11),N.NdJ("click",function(){return N.CHM(n),N.oxw().onDelete()}),N.ALo(1,"translate"),N.qZA()}if(2&e){var r=N.oxw();N.s9C("label",N.lcZ(1,2,"bia.delete")),N.Q6J("disabled",0===r.nbSelectedElements)}}function pe(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",12),N.NdJ("click",function(){return N.CHM(n),N.oxw().onBack()}),N.ALo(1,"translate"),N.qZA()}2&e&&N.s9C("label",N.lcZ(1,1,"bia.back"))}function he(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",13),N.NdJ("click",function(){return N.CHM(n),N.oxw().exportCSV.emit()}),N.qZA()}}function de(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",12),N.NdJ("click",function(){return N.CHM(n),N.oxw().synchronize.emit()}),N.ALo(1,"translate"),N.qZA()}2&e&&N.s9C("label",N.lcZ(1,1,"bia.synchronize"))}function ye(e,t){if(1&e){var n=N.EpF();N.TgZ(0,"button",14),N.NdJ("click",function(){return N.CHM(n),N.oxw().onCreate()}),N.ALo(1,"translate"),N.qZA()}2&e&&N.s9C("label",N.lcZ(1,1,"bia.add"))}var me=function(){var e,t=function(e){n(r,e);var t=o(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).canSync=!1,e.synchronize=new N.vpe,e}return r}(re.l);return t.\u0275fac=function(n){return(e||(e=N.n5z(t)))(n||t)},t.\u0275cmp=N.Xpm({type:t,selectors:[["app-user-table-header"]],inputs:{canSync:"canSync"},outputs:{synchronize:"synchronize"},features:[N._Bn([ne.YP]),N.qOj],decls:13,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],[4,"ngIf"],["pButton","",3,"disabled","label","click",4,"ngIf"],["pButton","","class","p-button-outlined",3,"label","click",4,"ngIf"],["pButton","","class","p-button-outlined","label","CSV",3,"click",4,"ngIf"],["pButton","",3,"label","click",4,"ngIf"],["type","button","icon","pi pi-filter","class","p-button-outlined flat","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","pi pi-filter","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","pi pi-filter","pButton","",1,"p-button-outlined","flat",3,"pTooltip","click"],["type","button","icon","pi pi-filter","pButton","",3,"pTooltip","click"],["pButton","",3,"disabled","label","click"],["pButton","",1,"p-button-outlined",3,"label","click"],["pButton","","label","CSV",1,"p-button-outlined",3,"click"],["pButton","",3,"label","click"]],template:function(e,t){1&e&&(N.TgZ(0,"div",0),N.TgZ(1,"div",1),N.YNc(2,le,3,2,"ng-container",2),N.YNc(3,fe,2,4,"button",3),N.qZA(),N.TgZ(4,"div",1),N.TgZ(5,"h1"),N._uU(6),N.qZA(),N.qZA(),N.TgZ(7,"div",1),N.YNc(8,pe,2,3,"button",4),N.YNc(9,he,1,0,"button",5),N.YNc(10,de,2,3,"button",4),N.YNc(11,ye,2,3,"button",6),N.qZA(),N.qZA(),N._UZ(12,"p-confirmDialog")),2&e&&(N.xp6(2),N.Q6J("ngIf",t.showBtnFilter),N.xp6(1),N.Q6J("ngIf",t.canDelete),N.xp6(3),N.Oqu(t.headerTitle),N.xp6(2),N.Q6J("ngIf",t.canBack),N.xp6(1),N.Q6J("ngIf",t.canExportCSV),N.xp6(1),N.Q6J("ngIf",t.canSync),N.xp6(1),N.Q6J("ngIf",t.canAdd))},directives:[te.xw,te.Wh,te.SQ,oe.O5,ie.Q,se.Hq,ae.u],pipes:[Q.X$],styles:['.header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:"raleway-thin",serif;font-size:36px;font-weight:200;margin:0;line-height:24px}',""]}),t}(),ve=i(76743),ge=i(64762),be=i(60881),Se=i(39678),Ce=(0,l.PH)("[Domain LDAP Domains] Load all"),we=(0,l.PH)("[Domain LDAP Domains] Load all success",(0,l.Ky)()),Ae=(0,l.PH)("[Domain LDAP Domains] Failure",(0,l.Ky)()),De=(0,M.H)({selectId:function(e){return e.ldapName},sortComparer:!1}),Le=De.getInitialState({}),xe=(0,l.Lq)(Le,(0,l.on)(we,function(e,t){var n=t.ldapDomains;return De.setAll(n,e)}));function Ze(e,t){return(0,l.UY)({ldapDomain:xe})(e,t)}var ke=(0,l.ZF)("domain-ldap-domains"),Ue=(0,l.P1)(ke,function(e){return e.ldapDomain}),Ee=De.getSelectors(Ue).selectAll,Ne=i(45121),Te=i(3679),Pe=i(50103),Me=i(96516),Fe=function(){return{width:"50%"}},ze=function(){return{width:"100%"}},Je=function(){var e=function(){function e(t){a(this,e),this.formBuilder=t,this.searchUsers=new N.vpe,this.save=new N.vpe,this.cancel=new N.vpe,this.initForm()}return u(e,[{key:"ngOnChanges",value:function(e){this.users&&e.users&&(this.users=this.users.sort(function(e,t){return e.firstName.localeCompare(t.firstName)}))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,Te.kI.required],domains:[this.domains]})}},{key:"onCancel",value:function(){this.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}},{key:"reset",value:function(){this.selectedDomain="",this.form.reset()}},{key:"onSearchUsers",value:function(e){this.searchUsers.emit({filter:e.query,ldapName:this.selectedDomain})}},{key:"onDomainChange",value:function(e){this.selectedDomain=e.value?e.value.ldapName:""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(Te.qu))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-user-form"]],inputs:{users:"users",domains:"domains"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[N.TTD],decls:14,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"p-fluid","app-field-container"],["placeholder","LDAP Domain","formControlName","domains","optionLabel","displayName","showClear","true",3,"options","onChange"],[1,"p-float-label"],["formControlName","selectedUsers","field","displayName",3,"multiple","suggestions","delay","size","minLength","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(N.TgZ(0,"form",0),N.NdJ("submit",function(){return t.onSubmit()}),N.TgZ(1,"div",1),N.TgZ(2,"p-dropdown",2),N.NdJ("onChange",function(e){return t.onDomainChange(e)}),N.qZA(),N._UZ(3,"br"),N.TgZ(4,"span",3),N.TgZ(5,"p-autoComplete",4),N.NdJ("completeMethod",function(e){return t.onSearchUsers(e)}),N.qZA(),N.TgZ(6,"label"),N._uU(7),N.ALo(8,"translate"),N.qZA(),N.qZA(),N.qZA(),N.TgZ(9,"div",5),N._UZ(10,"button",6),N.ALo(11,"translate"),N.TgZ(12,"button",7),N.NdJ("click",function(){return t.onCancel()}),N.ALo(13,"translate"),N.qZA(),N.qZA(),N.qZA()),2&e&&(N.Q6J("formGroup",t.form),N.xp6(2),N.Akn(N.DdM(22,Fe)),N.Q6J("options",t.domains),N.xp6(3),N.Akn(N.DdM(23,Fe)),N.Q6J("multiple",!0)("suggestions",t.users)("delay",700)("size",30)("minLength",3)("inputStyle",N.DdM(24,ze)),N.xp6(2),N.Oqu(N.lcZ(8,16,"bia.select")),N.xp6(3),N.s9C("label",N.lcZ(11,18,"bia.save")),N.Q6J("disabled",!t.form.valid),N.xp6(2),N.s9C("label",N.lcZ(13,20,"bia.cancel")))},directives:[Te._Y,Te.JL,te.xw,Te.sg,te.Wh,Pe.Lt,Te.JJ,Te.u,Me.Qc,te.SQ,se.Hq],pipes:[Q.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),e}(),qe=function(){return{minWidth:"50vw"}},Oe=function(){return{overflow:"auto"}},$e=function(){var e=function(){function e(t){a(this,e),this.store=t,this._display=!1,this.displayChange=new N.vpe}return u(e,[{key:"display",set:function(e){this._display=e,this.displayChange.emit(this._display)}},{key:"ngOnInit",value:function(){return(0,ge.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.usersFromAD$=this.store.select(Se.mo),this.ldapDomains$=this.store.select(Ee),this.store.dispatch(Ce());case 1:case"end":return e.stop()}},e,this)}))}},{key:"onSubmitted",value:function(e){this.store.dispatch(L({usersFromAD:e})),this.close()}},{key:"onCancelled",value:function(){this.close()}},{key:"close",value:function(){this.display=!1}},{key:"onSearchUsers",value:function(e){this.store.dispatch((0,be.Cq)({userFilter:e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(l.yh))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-user-new-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:20,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(e,t){1&e&&(N.TgZ(0,"p-dialog",0),N.NdJ("visibleChange",function(e){return t._display=e}),N.TgZ(1,"p-header"),N._uU(2),N.ALo(3,"translate"),N.qZA(),N.TgZ(4,"app-user-form",1),N.NdJ("searchUsers",function(e){return t.onSearchUsers(e)})("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),N.ALo(5,"async"),N.ALo(6,"async"),N.qZA(),N.qZA()),2&e&&(N.Akn(N.DdM(18,qe)),N.Q6J("focusOnShow",!1)("visible",t._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",N.DdM(19,Oe)),N.xp6(2),N.hij(" ",N.lcZ(3,12,"user.add")," "),N.xp6(2),N.Q6J("users",N.lcZ(5,14,t.usersFromAD$))("domains",N.lcZ(6,16,t.ldapDomains$)))},directives:[Ne.V,ne.h4,Je],pipes:[Q.X$,oe.Ov],styles:[""]}),e}(),_e=function(){var e=function(){function e(t,n,r,o){a(this,e),this.store=t,this.authService=n,this.userDas=r,this.translateService=o,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.pageSize=R.L8,this.displayEditUserDialog=!1,this.displayNewUserDialog=!1,this.canSync=!1,this.canDelete=!1,this.canAdd=!1,this.canExport=!1,this.tableConfiguration={columns:[new Y.ML("lastName","user.lastName"),new Y.ML("firstName","user.firstName"),new Y.ML("login","user.login")]},this.columns=this.tableConfiguration.columns.map(function(e){return{key:e.field,value:e.header}}),this.displayedColumns=this.columns}return u(e,[{key:"ngOnInit",value:function(){this.setPermissions(),this.users$=this.store.select(G),this.totalCount$=this.store.select(_)}},{key:"onCreate",value:function(){this.displayNewUserDialog=!0}},{key:"onDelete",value:function(){this.selectedUsers&&this.store.dispatch(D({ids:this.selectedUsers.map(function(e){return e.id})}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedUsers=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){this.lastLazyLoadEvent=e,this.store.dispatch(b({event:e}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onSynchronize",value:function(){this.store.dispatch(x())}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map(function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)});var n=Object.assign({columns:t},this.userListComponent.getLazyLoadMetadata());this.userDas.getFile(n).subscribe(function(t){ee().saveAs(t,e.translateService.instant("app.users")+".csv")})}},{key:"setPermissions",value:function(){this.canSync=this.authService.hasPermission(W.y.User_Sync),this.canDelete=this.authService.hasPermission(W.y.User_Delete),this.canAdd=this.authService.hasPermission(W.y.User_Add),this.canExport=this.authService.hasPermission(W.y.User_List_Access)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(l.yh),N.Y36(V.e),N.Y36(P),N.Y36(Q.sK))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-users-index"]],viewQuery:function(e,t){var n;(1&e&&N.Gf(K.$,5),2&e)&&(N.iGM(n=N.CRH())&&(t.userListComponent=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&N.ekj("bia-flex",t.flex)},decls:10,vars:28,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canSync","canAdd","canExportCSV","selectedElements","create","exportCSV","synchronize","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","viewPreference","loadLazy","selectedElementsChanged"],[3,"display","displayChange"]],template:function(e,t){1&e&&(N.TgZ(0,"div",0),N.TgZ(1,"div",1),N.TgZ(2,"app-user-table-header",2),N.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("synchronize",function(){return t.onSynchronize()})("delete",function(){return t.onDelete()}),N.ALo(3,"translate"),N.qZA(),N.TgZ(4,"bia-table-controller",3),N.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),N.ALo(5,"async"),N.qZA(),N.TgZ(6,"bia-table",4),N.NdJ("loadLazy",function(e){return t.onLoadLazy(e)})("selectedElementsChanged",function(e){return t.onSelectedElementsChanged(e)}),N.ALo(7,"async"),N.ALo(8,"async"),N.qZA(),N.qZA(),N.qZA(),N.TgZ(9,"app-user-new-dialog",5),N.NdJ("displayChange",function(e){return t.displayNewUserDialog=e}),N.qZA()),2&e&&(N.xp6(2),N.Q6J("headerTitle",N.lcZ(3,20,"user.listOf"))("canSync",t.canSync)("canAdd",t.canAdd)("canExportCSV",t.canExport)("selectedElements",t.selectedUsers),N.xp6(2),N.Q6J("defaultPageSize",t.pageSize)("length",N.lcZ(5,22,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),N.xp6(2),N.Q6J("elements",N.lcZ(7,24,t.users$))("totalRecord",N.lcZ(8,26,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",!1)("canSelectElement",t.canDelete)("viewPreference",t.viewPreference),N.xp6(3),N.Q6J("display",t.displayNewUserDialog))},directives:[te.xw,te.yH,me,ve.B,K.$,$e],pipes:[Q.X$,oe.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e}(),Be=i(84594),Ge=i(16249),He=function(){var e=function(){function e(){a(this,e)}return u(e,[{key:"formatDisplayNameFromObs",value:function(e){var t=this;return e.pipe((0,y.U)(function(e){return t.formatDisplayNames(e)}))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach(function(e){e=t.formatDisplayName(e)}),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.name," (").concat(e.ldapName,")"),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ie=function(){var e=function(e){n(r,e);var t=o(r);function r(e,n){var o;return a(this,r),(o=t.call(this,e,"ldapDomains")).ldapDomainService=n,o}return u(r,[{key:"getAll",value:function(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}]),r}(E.Z);return e.\u0275fac=function(t){return new(t||e)(N.LFG(N.zs3),N.LFG(He))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Qe=function(){var e=function e(t,n,r){var o=this;a(this,e),this.actions$=t,this.ldapDomainDas=n,this.biaMessageService=r,this.loadAll$=(0,f.GW)(function(){return o.actions$.pipe((0,f.l4)(Ce),(0,d.w)(function(e){return o.ldapDomainDas.getAll().pipe((0,y.U)(function(e){return we({ldapDomains:e})}),(0,m.K)(function(e){return o.biaMessageService.showError(),(0,p.of)(Ae({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(N.LFG(f.eX),N.LFG(Ie),N.LFG(I.X))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac}),e}(),je=function(){var e=function e(){a(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=N.oAB({type:e}),e.\u0275inj=N.cJS({imports:[[l.Aw.forFeature("domain-ldap-domains",Ze),f.sQ.forFeature([Qe])]]}),e}(),Ke=i(49277),Ye=[{path:"",data:{breadcrumb:null,permission:W.y.User_List_Access},component:_e,canActivate:[Ge.n]},{path:"**",redirectTo:""}],Re=function(){var e=function e(){a(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=N.oAB({type:e}),e.\u0275inj=N.cJS({imports:[[Be.m,je,Ke.a,c.Bz.forChild(Ye),l.Aw.forFeature("users",q),f.sQ.forFeature([j])]]}),e}()}}])}();