(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[714],{49457:function(e,t){var s,n;void 0!==(n="function"==typeof(s=function(){"use strict";function t(e,t,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){r(n.response,t,s)},n.onerror=function(){console.error("could not download file")},n.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(s){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,r){var a=o.URL||o.webkitURL,c=document.createElement("a");c.download=i=i||e.name||"download",c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?n(c):s(c.href)?t(e,i,r):n(c,c.target="_blank")):(c.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(c.href)},4e4),setTimeout(function(){n(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,i){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),o);else if(s(e))t(e,o,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){n(r)})}}:function(e,s,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,s,n);var a="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&c||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,h=p.createObjectURL(e);r?r.location=h:location.href=h,r=null,setTimeout(function(){p.revokeObjectURL(h)},4e4)}});o.saveAs=r.saveAs=r,e.exports=r})?s.apply(t,[]):s)&&(e.exports=n)},16249:function(e,t,s){"use strict";s.d(t,{n:function(){return a}});var n=s(8340),o=s(92340),i=s(68307),r=s(37716);let a=(()=>{class e{constructor(e){this.authService=e}canActivate(e,t){return this.authService.hasPermissionObs(e.data.permission).pipe((0,i.b)(e=>{!0!==e&&(window.location.href=o.N.urlErrorPage+"?num=403")}))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(n.e))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},71714:function(e,t,s){"use strict";s.r(t),s.d(t,{UserModule:function(){return _e}});var n=s(2694),o=s(86710),i=s(91601),r=s(25917),a=s(92996),c=s(43190),l=s(88002),u=s(5304),p=s(94612),h=s(57057);const d=(0,o.PH)("[Users] Load all by post",(0,o.Ky)()),f=(0,o.PH)("[Users] Load",(0,o.Ky)()),m=(0,o.PH)("[Users] Create",(0,o.Ky)()),g=(0,o.PH)("[Users] Update",(0,o.Ky)()),y=(0,o.PH)("[Users] Remove",(0,o.Ky)()),b=(0,o.PH)("[Users] Multi Remove",(0,o.Ky)()),v=(0,o.PH)("[Users] Save",(0,o.Ky)()),w=(0,o.PH)("[Users] Synchronize"),S=((0,o.PH)("[Users] Load all success",(0,o.Ky)()),(0,o.PH)("[Users] Load all by post success",(0,o.Ky)())),C=(0,o.PH)("[Users] Load success",(0,o.Ky)()),A=((0,o.PH)("[Users] Create success",(0,o.Ky)()),(0,o.PH)("[Users] Update success",(0,o.Ky)()),(0,o.PH)("[Users] Remove success",(0,o.Ky)()),(0,o.PH)("[Users] Failure",(0,o.Ky)()));var L=s(74147),D=s(37716);let x=(()=>{class e{constructor(){}formatDisplayNameObs(e){return e.pipe((0,l.U)(e=>this.formatDisplayNames(e)))}formatDisplayNames(e){return e.forEach(e=>{e=this.formatDisplayName(e)}),e}formatDisplayName(e){return e.displayName=`${e.firstName} ${e.lastName} (${e.login})`,e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Z=(()=>{class e extends L.Z{constructor(e,t){super(e,"users"),this.userService=t}getAllByFilter(e){return this.userService.formatDisplayNameObs(this.http.get(`${this.route}?filter=${e}`))}synchronize(){return this.http.get(`${this.route}synchronize`)}}return e.\u0275fac=function(t){return new(t||e)(D.LFG(D.zs3),D.LFG(x))},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=s(80273);const E=(0,U.H)({selectId:e=>e.id,sortComparer:!1}),T=E.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{}}),N=(0,o.Lq)(T,(0,o.on)(S,(e,{result:t,event:s})=>{const n=E.setAll(t.data,e);return n.currentUser={},n.totalCount=t.totalCount,n.lastLazyLoadEvent=s,n}),(0,o.on)(C,(e,{user:t})=>Object.assign(Object.assign({},e),{currentUser:t})));function M(e,t){return(0,o.UY)({users:N})(e,t)}const F=(0,o.ZF)("users"),P=(0,o.P1)(F,e=>e.users),k=(0,o.P1)(P,e=>e.totalCount),z=((0,o.P1)(P,e=>e.currentUser),(0,o.P1)(P,e=>e.lastLazyLoadEvent)),{selectAll:$}=E.getSelectors(P);var q=s(38165),J=s(42),H=s(81780);let B=(()=>{class e{constructor(e,t,s,n,o,L){this.actions$=e,this.userDas=t,this.userFromADDas=s,this.biaMessageService=n,this.translateService=o,this.store=L,this.loadAllByPost$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(d),(0,a.j)("event"),(0,c.w)(e=>this.userDas.getListByPost(e).pipe((0,l.U)(t=>S({result:t,event:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(A({err:{concern:"CREATE",error:e}})))))))),this.load$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(f),(0,a.j)("id"),(0,c.w)(e=>this.userDas.get(e).pipe((0,l.U)(e=>C({user:e})))))),this.synchronize$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(w),(0,p.b)(e=>(0,r.of)(e).pipe((0,h.M)(this.store.select(z)))),(0,c.w)(([e,t])=>this.userDas.synchronize().pipe((0,l.U)(()=>(this.biaMessageService.showSyncSuccess(),d({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(A({err:{concern:"CREATE",error:e}})))))))),this.create$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(m),(0,a.j)("user"),(0,p.b)(e=>(0,r.of)(e).pipe((0,h.M)(this.store.select(z)))),(0,c.w)(([e,t])=>this.userDas.post(e).pipe((0,l.U)(()=>(this.biaMessageService.showAddSuccess(),d({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(A({err:{concern:"CREATE",error:e}})))))))),this.update$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(g),(0,a.j)("user"),(0,p.b)(e=>(0,r.of)(e).pipe((0,h.M)(this.store.select(z)))),(0,c.w)(([e,t])=>this.userDas.put(e,e.id).pipe((0,l.U)(()=>(this.biaMessageService.showUpdateSuccess(),d({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(A({err:{concern:"CREATE",error:e}})))))))),this.destroy$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(y),(0,a.j)("id"),(0,p.b)(e=>(0,r.of)(e).pipe((0,h.M)(this.store.select(z)))),(0,c.w)(([e,t])=>this.userDas.delete(e).pipe((0,l.U)(()=>(this.biaMessageService.showDeleteSuccess(),d({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(A({err:{concern:"CREATE",error:e}})))))))),this.multiDestroy$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(b),(0,a.j)("ids"),(0,p.b)(e=>(0,r.of)(e).pipe((0,h.M)(this.store.select(z)))),(0,c.w)(([e,t])=>this.userDas.deletes(e).pipe((0,l.U)(()=>(this.biaMessageService.showDeleteSuccess(),d({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(A({err:{concern:"CREATE",error:e}})))))))),this.save$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(v),(0,a.j)("usersFromAD"),(0,p.b)(e=>(0,r.of)(e).pipe((0,h.M)(this.store.select(z)))),(0,c.w)(([e,t])=>this.userFromADDas.save(e,"").pipe((0,l.U)(()=>(this.biaMessageService.showAddSuccess(),d({event:t}))),(0,u.K)(e=>{if(303===e.status){let t="";e.error&&e.error.forEach(e=>{const s=`${this.translateService.instant("user.cannotAddMember")}`.replace("${login}",e);""!==t&&(t+="\n"),t+=s}),this.biaMessageService.showErrorDetail(t)}else this.biaMessageService.showError();return(0,r.of)(A({err:{concern:"CREATE",error:e}}))})))))}}return e.\u0275fac=function(t){return new(t||e)(D.LFG(i.eX),D.LFG(Z),D.LFG(q.L),D.LFG(J.X),D.LFG(H.sK),D.LFG(o.yh))},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac}),e})();var O=s(88385),G=s(79090),_=s(40136),I=s(8340),K=s(29206),Q=s(49457),R=s.n(Q),j=s(35618),Y=s(33013),V=s(81606),W=s(38583),X=s(83473),ee=s(4207),te=s(99287);function se(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",9),D.NdJ("click",function(){return D.CHM(e),D.oxw(2).toggleFilter()}),D.ALo(1,"translate"),D.qZA()}2&e&&D.s9C("pTooltip",D.lcZ(1,1,"msg.showFilters"))}function ne(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",10),D.NdJ("click",function(){return D.CHM(e),D.oxw(2).toggleFilter()}),D.ALo(1,"translate"),D.qZA()}2&e&&D.s9C("pTooltip",D.lcZ(1,1,"msg.showFilters"))}function oe(e,t){if(1&e&&(D.ynx(0),D.YNc(1,se,2,3,"button",7),D.YNc(2,ne,2,3,"button",8),D.BQk()),2&e){const e=D.oxw();D.xp6(1),D.Q6J("ngIf",!1===e.showFilter&&!1===e.haveFilter),D.xp6(1),D.Q6J("ngIf",!1===e.showFilter&&!0===e.haveFilter)}}function ie(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",11),D.NdJ("click",function(){return D.CHM(e),D.oxw().onDelete()}),D.ALo(1,"translate"),D.qZA()}if(2&e){const e=D.oxw();D.s9C("label",D.lcZ(1,2,"bia.delete")),D.Q6J("disabled",0===e.nbSelectedElements)}}function re(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",12),D.NdJ("click",function(){return D.CHM(e),D.oxw().onBack()}),D.ALo(1,"translate"),D.qZA()}2&e&&D.s9C("label",D.lcZ(1,1,"bia.back"))}function ae(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",13),D.NdJ("click",function(){return D.CHM(e),D.oxw().exportCSV.emit()}),D.qZA()}}function ce(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",12),D.NdJ("click",function(){return D.CHM(e),D.oxw().synchronize.emit()}),D.ALo(1,"translate"),D.qZA()}2&e&&D.s9C("label",D.lcZ(1,1,"bia.synchronize"))}function le(e,t){if(1&e){const e=D.EpF();D.TgZ(0,"button",14),D.NdJ("click",function(){return D.CHM(e),D.oxw().onCreate()}),D.ALo(1,"translate"),D.qZA()}2&e&&D.s9C("label",D.lcZ(1,1,"bia.add"))}let ue=(()=>{class e extends V.l{constructor(){super(...arguments),this.canSync=!1,this.synchronize=new D.vpe}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=D.n5z(e)))(s||e)}}(),e.\u0275cmp=D.Xpm({type:e,selectors:[["app-user-table-header"]],inputs:{canSync:"canSync"},outputs:{synchronize:"synchronize"},features:[D._Bn([Y.YP]),D.qOj],decls:13,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],[4,"ngIf"],["pButton","",3,"disabled","label","click",4,"ngIf"],["pButton","","class","p-button-outlined",3,"label","click",4,"ngIf"],["pButton","","class","p-button-outlined","label","CSV",3,"click",4,"ngIf"],["pButton","",3,"label","click",4,"ngIf"],["type","button","icon","pi pi-filter","class","p-button-outlined flat","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","pi pi-filter","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","pi pi-filter","pButton","",1,"p-button-outlined","flat",3,"pTooltip","click"],["type","button","icon","pi pi-filter","pButton","",3,"pTooltip","click"],["pButton","",3,"disabled","label","click"],["pButton","",1,"p-button-outlined",3,"label","click"],["pButton","","label","CSV",1,"p-button-outlined",3,"click"],["pButton","",3,"label","click"]],template:function(e,t){1&e&&(D.TgZ(0,"div",0),D.TgZ(1,"div",1),D.YNc(2,oe,3,2,"ng-container",2),D.YNc(3,ie,2,4,"button",3),D.qZA(),D.TgZ(4,"div",1),D.TgZ(5,"h1"),D._uU(6),D.qZA(),D.qZA(),D.TgZ(7,"div",1),D.YNc(8,re,2,3,"button",4),D.YNc(9,ae,1,0,"button",5),D.YNc(10,ce,2,3,"button",4),D.YNc(11,le,2,3,"button",6),D.qZA(),D.qZA(),D._UZ(12,"p-confirmDialog")),2&e&&(D.xp6(2),D.Q6J("ngIf",t.showBtnFilter),D.xp6(1),D.Q6J("ngIf",t.canDelete),D.xp6(3),D.Oqu(t.headerTitle),D.xp6(2),D.Q6J("ngIf",t.canBack),D.xp6(1),D.Q6J("ngIf",t.canExportCSV),D.xp6(1),D.Q6J("ngIf",t.canSync),D.xp6(1),D.Q6J("ngIf",t.canAdd))},directives:[j.xw,j.Wh,j.SQ,W.O5,X.Q,ee.Hq,te.u],pipes:[H.X$],styles:['.header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:"raleway-thin",serif;font-size:36px;font-weight:200;margin:0;line-height:24px}',""]}),e})();var pe=s(76743),he=s(64762),de=s(60881),fe=s(39678);const me=(0,o.PH)("[Domain LDAP Domains] Load all"),ge=(0,o.PH)("[Domain LDAP Domains] Load all success",(0,o.Ky)()),ye=(0,o.PH)("[Domain LDAP Domains] Failure",(0,o.Ky)()),be=(0,U.H)({selectId:e=>e.ldapName,sortComparer:!1}),ve=be.getInitialState({}),we=(0,o.Lq)(ve,(0,o.on)(ge,(e,{ldapDomains:t})=>be.setAll(t,e)));function Se(e,t){return(0,o.UY)({ldapDomain:we})(e,t)}const Ce=(0,o.ZF)("domain-ldap-domains"),Ae=(0,o.P1)(Ce,e=>e.ldapDomain),{selectAll:Le}=be.getSelectors(Ae);var De=s(45121),xe=s(3679),Ze=s(50103),Ue=s(96516);const Ee=function(){return{width:"50%"}},Te=function(){return{width:"100%"}};let Ne=(()=>{class e{constructor(e){this.formBuilder=e,this.searchUsers=new D.vpe,this.save=new D.vpe,this.cancel=new D.vpe,this.initForm()}ngOnChanges(e){this.users&&e.users&&(this.users=this.users.sort((e,t)=>e.firstName.localeCompare(t.firstName)))}initForm(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,xe.kI.required],domains:[this.domains]})}onCancel(){this.reset(),this.cancel.next()}onSubmit(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}reset(){this.selectedDomain="",this.form.reset()}onSearchUsers(e){this.searchUsers.emit({filter:e.query,ldapName:this.selectedDomain})}onDomainChange(e){this.selectedDomain=e.value?e.value.ldapName:""}}return e.\u0275fac=function(t){return new(t||e)(D.Y36(xe.qu))},e.\u0275cmp=D.Xpm({type:e,selectors:[["app-user-form"]],inputs:{users:"users",domains:"domains"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[D.TTD],decls:14,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"p-fluid","app-field-container"],["placeholder","LDAP Domain","formControlName","domains","optionLabel","displayName","showClear","true",3,"options","onChange"],[1,"p-float-label"],["formControlName","selectedUsers","field","displayName",3,"multiple","suggestions","delay","size","minLength","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(D.TgZ(0,"form",0),D.NdJ("submit",function(){return t.onSubmit()}),D.TgZ(1,"div",1),D.TgZ(2,"p-dropdown",2),D.NdJ("onChange",function(e){return t.onDomainChange(e)}),D.qZA(),D._UZ(3,"br"),D.TgZ(4,"span",3),D.TgZ(5,"p-autoComplete",4),D.NdJ("completeMethod",function(e){return t.onSearchUsers(e)}),D.qZA(),D.TgZ(6,"label"),D._uU(7),D.ALo(8,"translate"),D.qZA(),D.qZA(),D.qZA(),D.TgZ(9,"div",5),D._UZ(10,"button",6),D.ALo(11,"translate"),D.TgZ(12,"button",7),D.NdJ("click",function(){return t.onCancel()}),D.ALo(13,"translate"),D.qZA(),D.qZA(),D.qZA()),2&e&&(D.Q6J("formGroup",t.form),D.xp6(2),D.Akn(D.DdM(22,Ee)),D.Q6J("options",t.domains),D.xp6(3),D.Akn(D.DdM(23,Ee)),D.Q6J("multiple",!0)("suggestions",t.users)("delay",700)("size",30)("minLength",3)("inputStyle",D.DdM(24,Te)),D.xp6(2),D.Oqu(D.lcZ(8,16,"bia.select")),D.xp6(3),D.s9C("label",D.lcZ(11,18,"bia.save")),D.Q6J("disabled",!t.form.valid),D.xp6(2),D.s9C("label",D.lcZ(13,20,"bia.cancel")))},directives:[xe._Y,xe.JL,j.xw,xe.sg,j.Wh,Ze.Lt,xe.JJ,xe.u,Ue.Qc,j.SQ,ee.Hq],pipes:[H.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),e})();const Me=function(){return{minWidth:"50vw"}},Fe=function(){return{overflow:"auto"}};let Pe=(()=>{class e{constructor(e){this.store=e,this._display=!1,this.displayChange=new D.vpe}set display(e){this._display=e,this.displayChange.emit(this._display)}ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){this.usersFromAD$=this.store.select(fe.mo),this.ldapDomains$=this.store.select(Le),this.store.dispatch(me())})}onSubmitted(e){this.store.dispatch(v({usersFromAD:e})),this.close()}onCancelled(){this.close()}close(){this.display=!1}onSearchUsers(e){this.store.dispatch((0,de.Cq)({userFilter:e}))}}return e.\u0275fac=function(t){return new(t||e)(D.Y36(o.yh))},e.\u0275cmp=D.Xpm({type:e,selectors:[["app-user-new-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:20,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(e,t){1&e&&(D.TgZ(0,"p-dialog",0),D.NdJ("visibleChange",function(e){return t._display=e}),D.TgZ(1,"p-header"),D._uU(2),D.ALo(3,"translate"),D.qZA(),D.TgZ(4,"app-user-form",1),D.NdJ("searchUsers",function(e){return t.onSearchUsers(e)})("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),D.ALo(5,"async"),D.ALo(6,"async"),D.qZA(),D.qZA()),2&e&&(D.Akn(D.DdM(18,Me)),D.Q6J("focusOnShow",!1)("visible",t._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",D.DdM(19,Fe)),D.xp6(2),D.hij(" ",D.lcZ(3,12,"user.add")," "),D.xp6(2),D.Q6J("users",D.lcZ(5,14,t.usersFromAD$))("domains",D.lcZ(6,16,t.ldapDomains$)))},directives:[De.V,Y.h4,Ne],pipes:[H.X$,W.Ov],styles:[""]}),e})(),ke=(()=>{class e{constructor(e,t,s,n){this.store=e,this.authService=t,this.userDas=s,this.translateService=n,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.pageSize=_.L8,this.displayEditUserDialog=!1,this.displayNewUserDialog=!1,this.canSync=!1,this.canDelete=!1,this.canAdd=!1,this.canExport=!1,this.tableConfiguration={columns:[new G.ML("lastName","user.lastName"),new G.ML("firstName","user.firstName"),new G.ML("login","user.login")]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=this.columns}ngOnInit(){this.setPermissions(),this.users$=this.store.select($),this.totalCount$=this.store.select(k)}onCreate(){this.displayNewUserDialog=!0}onDelete(){this.selectedUsers&&this.store.dispatch(b({ids:this.selectedUsers.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedUsers=e}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){this.lastLazyLoadEvent=e,this.store.dispatch(d({event:e}))}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onToggleSearch(){this.showColSearch=!this.showColSearch}onSynchronize(){this.store.dispatch(w())}onViewChange(e){this.viewPreference=e}onExportCSV(){const e={};this.columns.map(t=>e[t.value.split(".")[1]]=this.translateService.instant(t.value));const t=Object.assign({columns:e},this.userListComponent.getLazyLoadMetadata());this.userDas.getFile(t).subscribe(e=>{R().saveAs(e,this.translateService.instant("app.users")+".csv")})}setPermissions(){this.canSync=this.authService.hasPermission(K.y.User_Sync),this.canDelete=this.authService.hasPermission(K.y.User_Delete),this.canAdd=this.authService.hasPermission(K.y.User_Add),this.canExport=this.authService.hasPermission(K.y.User_List_Access)}}return e.\u0275fac=function(t){return new(t||e)(D.Y36(o.yh),D.Y36(I.e),D.Y36(Z),D.Y36(H.sK))},e.\u0275cmp=D.Xpm({type:e,selectors:[["app-users-index"]],viewQuery:function(e,t){if(1&e&&D.Gf(O.$,5),2&e){let e;D.iGM(e=D.CRH())&&(t.userListComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&D.ekj("bia-flex",t.flex)},decls:10,vars:28,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canSync","canAdd","canExportCSV","selectedElements","create","exportCSV","synchronize","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","viewPreference","loadLazy","selectedElementsChanged"],[3,"display","displayChange"]],template:function(e,t){1&e&&(D.TgZ(0,"div",0),D.TgZ(1,"div",1),D.TgZ(2,"app-user-table-header",2),D.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("synchronize",function(){return t.onSynchronize()})("delete",function(){return t.onDelete()}),D.ALo(3,"translate"),D.qZA(),D.TgZ(4,"bia-table-controller",3),D.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),D.ALo(5,"async"),D.qZA(),D.TgZ(6,"bia-table",4),D.NdJ("loadLazy",function(e){return t.onLoadLazy(e)})("selectedElementsChanged",function(e){return t.onSelectedElementsChanged(e)}),D.ALo(7,"async"),D.ALo(8,"async"),D.qZA(),D.qZA(),D.qZA(),D.TgZ(9,"app-user-new-dialog",5),D.NdJ("displayChange",function(e){return t.displayNewUserDialog=e}),D.qZA()),2&e&&(D.xp6(2),D.Q6J("headerTitle",D.lcZ(3,20,"user.listOf"))("canSync",t.canSync)("canAdd",t.canAdd)("canExportCSV",t.canExport)("selectedElements",t.selectedUsers),D.xp6(2),D.Q6J("defaultPageSize",t.pageSize)("length",D.lcZ(5,22,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),D.xp6(2),D.Q6J("elements",D.lcZ(7,24,t.users$))("totalRecord",D.lcZ(8,26,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",!1)("canSelectElement",t.canDelete)("viewPreference",t.viewPreference),D.xp6(3),D.Q6J("display",t.displayNewUserDialog))},directives:[j.xw,j.yH,ue,pe.B,O.$,Pe],pipes:[H.X$,W.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})();var ze=s(84594),$e=s(16249);let qe=(()=>{class e{constructor(){}formatDisplayNameFromObs(e){return e.pipe((0,l.U)(e=>this.formatDisplayNames(e)))}formatDisplayNames(e){return e.forEach(e=>{e=this.formatDisplayName(e)}),e}formatDisplayName(e){return e.displayName=`${e.name} (${e.ldapName})`,e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Je=(()=>{class e extends L.Z{constructor(e,t){super(e,"ldapDomains"),this.ldapDomainService=t}getAll(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}return e.\u0275fac=function(t){return new(t||e)(D.LFG(D.zs3),D.LFG(qe))},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),He=(()=>{class e{constructor(e,t,s){this.actions$=e,this.ldapDomainDas=t,this.biaMessageService=s,this.loadAll$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(me),(0,c.w)(e=>this.ldapDomainDas.getAll().pipe((0,l.U)(e=>ge({ldapDomains:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,r.of)(ye({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(D.LFG(i.eX),D.LFG(Je),D.LFG(J.X))},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac}),e})(),Be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=D.oAB({type:e}),e.\u0275inj=D.cJS({imports:[[o.Aw.forFeature("domain-ldap-domains",Se),i.sQ.forFeature([He])]]}),e})();var Oe=s(49277);const Ge=[{path:"",data:{breadcrumb:null,permission:K.y.User_List_Access},component:ke,canActivate:[$e.n]},{path:"**",redirectTo:""}];let _e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=D.oAB({type:e}),e.\u0275inj=D.cJS({imports:[[ze.m,Be,Oe.a,n.Bz.forChild(Ge),o.Aw.forFeature("users",M),i.sQ.forFeature([B])]]}),e})()}}]);