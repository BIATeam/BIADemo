(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[864],{49457:function(e,t){var n,o;void 0!==(o="function"==typeof(n=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){a(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,s,a){var r=i.URL||i.webkitURL,l=document.createElement("a");l.download=s=s||e.name||"download",l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):n(l.href)?t(e,s,a):o(l,l.target="_blank")):(l.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,s){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),i);else if(n(e))t(e,i,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){o(a)})}}:function(e,n,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var r="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&l||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,p=d.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout(function(){d.revokeObjectURL(p)},4e4)}});i.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,[]):n)&&(e.exports=o)},16249:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var o=n(39083),i=n(92340),s=n(68307),a=n(37716);let r=(()=>{class e{constructor(e){this.authService=e}canActivate(e,t){return this.authService.hasPermissionObs(e.data.permission).pipe((0,s.b)(e=>{!0!==e&&(window.location.href=i.N.urlErrorPage+"?num=403")}))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(o.e))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},82762:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});const o=(0,n(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},41864:function(e,t,n){"use strict";n.r(t),n.d(t,{UserModule:function(){return Ft}});var o=n(94666),i=n(86710),s=n(91601),a=n(25917),r=n(92996),l=n(43190),c=n(88002),u=n(5304),d=n(94612),p=n(57057),h=n(40136);const f="feature-users",g=h.k0.Site;var m,y;(y=m||(m={})).loadAllByPost=(0,i.PH)("["+f+"] Load all by post",(0,i.Ky)()),y.load=(0,i.PH)("["+f+"] Load",(0,i.Ky)()),y.create=(0,i.PH)("["+f+"] Create",(0,i.Ky)()),y.update=(0,i.PH)("["+f+"] Update",(0,i.Ky)()),y.remove=(0,i.PH)("["+f+"] Remove",(0,i.Ky)()),y.multiRemove=(0,i.PH)("["+f+"] Multi Remove",(0,i.Ky)()),y.loadAllByPostSuccess=(0,i.PH)("["+f+"] Load all by post success",(0,i.Ky)()),y.loadSuccess=(0,i.PH)("["+f+"] Load success",(0,i.Ky)()),y.failure=(0,i.PH)("["+f+"] Failure",(0,i.Ky)()),y.synchronize=(0,i.PH)("["+f+"] Synchronize");var b=n(74147),w=n(37716);let S=(()=>{class e extends b.Z{constructor(e){super(e,"Users")}synchronize(){return this.http.get(`${this.route}synchronize`)}}return e.\u0275fac=function(t){return new(t||e)(w.LFG(w.zs3))},e.\u0275prov=w.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const C=(0,n(80273).H)({selectId:e=>e.id,sortComparer:!1}),x=C.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),v=(0,i.Lq)(x,(0,i.on)(m.loadAllByPost,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!0})),(0,i.on)(m.load,e=>Object.assign(Object.assign({},e),{loadingGet:!0})),(0,i.on)(m.loadAllByPostSuccess,(e,{result:t,event:n})=>{const o=C.setAll(t.data,e);return o.totalCount=t.totalCount,o.lastLazyLoadEvent=n,o.loadingGetAll=!1,o}),(0,i.on)(m.loadSuccess,(e,{user:t})=>Object.assign(Object.assign({},e),{currentUser:t,loadingGet:!1})),(0,i.on)(m.failure,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})));function A(e,t){return(0,i.UY)({users:v})(e,t)}const Z=(0,i.ZF)(f),T=(0,i.P1)(Z,e=>e.users),N=(0,i.P1)(T,e=>e.totalCount),L=(0,i.P1)(T,e=>e.currentUser),M=(0,i.P1)(T,e=>e.lastLazyLoadEvent),O=(0,i.P1)(T,e=>e.loadingGet),J=(0,i.P1)(T,e=>e.loadingGetAll),{selectAll:Q}=C.getSelectors(T);n(82762);var I=n(42);let $=(()=>{class e{constructor(e,t,n,o){this.actions$=e,this.userDas=t,this.biaMessageService=n,this.store=o,this.loadAllByPost$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.loadAllByPost),(0,r.j)("event"),(0,l.w)(e=>this.userDas.getListByPost({event:e}).pipe((0,c.U)(t=>m.loadAllByPostSuccess({result:t,event:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:e})))))))),this.load$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.load),(0,r.j)("id"),(0,l.w)(e=>this.userDas.get({id:e}).pipe((0,c.U)(e=>m.loadSuccess({user:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:e})))))))),this.create$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.create),(0,r.j)("user"),(0,d.b)(e=>(0,a.of)(e).pipe((0,p.M)(this.store.select(M)))),(0,l.w)(([e,t])=>this.userDas.post({item:e}).pipe((0,c.U)(()=>(this.biaMessageService.showAddSuccess(),m.loadAllByPost({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:e})))))))),this.update$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.update),(0,r.j)("user"),(0,d.b)(e=>(0,a.of)(e).pipe((0,p.M)(this.store.select(M)))),(0,l.w)(([e,t])=>this.userDas.put({item:e,id:e.id}).pipe((0,c.U)(()=>(this.biaMessageService.showUpdateSuccess(),m.loadAllByPost({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:e})))))))),this.synchronize$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.synchronize),(0,d.b)(e=>(0,a.of)(e).pipe((0,p.M)(this.store.select(M)))),(0,l.w)(([e,t])=>this.userDas.synchronize().pipe((0,c.U)(()=>(this.biaMessageService.showSyncSuccess(),m.loadAllByPost({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:{concern:"CREATE",error:e}})))))))),this.destroy$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.remove),(0,r.j)("id"),(0,d.b)(e=>(0,a.of)(e).pipe((0,p.M)(this.store.select(M)))),(0,l.w)(([e,t])=>this.userDas.delete({id:e}).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),m.loadAllByPost({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:e})))))))),this.multiDestroy$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m.multiRemove),(0,r.j)("ids"),(0,d.b)(e=>(0,a.of)(e).pipe((0,p.M)(this.store.select(M)))),(0,l.w)(([e,t])=>this.userDas.deletes({ids:e}).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),m.loadAllByPost({event:t}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(m.failure({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(w.LFG(s.eX),w.LFG(S),w.LFG(I.X),w.LFG(i.yh))},e.\u0275prov=w.Yz7({token:e,factory:e.\u0275fac}),e})();var Y=n(75319),U=n(88385),k=n(79090),E=n(39083),B=n(49457),q=n(38042),D=n(29206),F=n(28049),P=n(59142);let R=(()=>{class e{constructor(e,t,n){this.store=e,this.signalRService=t,this.authService=n}initialize(){console.log("%c [Users] Register SignalR : refresh-users","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-users",()=>{this.store.select(M).pipe((0,F.P)()).subscribe(e=>{console.log("%c [Users] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(m.loadAllByPost({event:e}))})}),this.targetedFeature={parentKey:this.authService.getCurrentTeamId(h.k0.Site).toString(),featureName:"users"},this.signalRService.joinGroup(this.targetedFeature)}destroy(){console.log("%c [Users] Unregister SignalR : refresh-users","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-users"),this.signalRService.leaveGroup(this.targetedFeature)}}return e.\u0275fac=function(t){return new(t||e)(w.LFG(i.yh),w.LFG(P.Y),w.LFG(E.e))},e.\u0275prov=w.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=n(46468),H=n(9112),_=n(65448),j=n(96875),G=n(94529);let K=(()=>{class e{constructor(e){this.store=e,this.roleOptions$=this.store.select(_.wA),this.dictOptionDtos$=(0,H.aj)([this.roleOptions$]).pipe((0,c.U)(e=>[new G.b("roles",e[0])]))}loadAllOptions(){this.store.dispatch(j.E.loadAll({teamTypeId:h.k0.Root}))}}return e.\u0275fac=function(t){return new(t||e)(w.LFG(i.yh))},e.\u0275prov=w.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=n(3679),W=n(11466),X=n(86320),ee=n(81780),te=n(38583),ne=n(70667),oe=n(33013),ie=n(13928),se=n(88030),ae=n(50103),re=n(36949),le=n(12332),ce=n(88598),ue=n(45862),de=n(49067);function pe(e,t){1&e&&(w.TgZ(0,"th",10),w._UZ(1,"p-tableHeaderCheckbox"),w.qZA())}function he(e,t){if(1&e&&(w.TgZ(0,"th",12),w._uU(1),w.ALo(2,"translate"),w._UZ(3,"p-sortIcon",13),w.qZA()),2&e){const e=w.oxw().$implicit;w.Q6J("pSortableColumn",e.field),w.xp6(1),w.hij(" ",w.lcZ(2,3,null==e?null:e.header)," "),w.xp6(2),w.Q6J("field",e.field)}}function fe(e,t){if(1&e&&(w.TgZ(0,"th"),w._uU(1),w.ALo(2,"translate"),w.qZA()),2&e){const e=w.oxw().$implicit;w.xp6(1),w.hij(" ",w.lcZ(2,1,null==e?null:e.header)," ")}}function ge(e,t){if(1&e&&(w.ynx(0),w.YNc(1,he,4,5,"th",11),w.YNc(2,fe,3,3,"th",9),w.BQk()),2&e){const e=t.$implicit;w.xp6(1),w.Q6J("ngIf",!0===(null==e?null:e.isSortable)),w.xp6(1),w.Q6J("ngIf",!0!==(null==e?null:e.isSortable))}}function me(e,t){1&e&&w._UZ(0,"th")}const ye=function(e){return{"p-state-filled":e}};function be(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"span",17),w.TgZ(1,"input",18),w.NdJ("input",function(t){w.CHM(e);const n=w.oxw().$implicit;return w.oxw(3),w.MAs(1).filter(t.target.value,n.field,n.filterMode)}),w.ALo(2,"translate"),w.qZA(),w.qZA()}if(2&e){const e=w.oxw().$implicit;w.oxw(3);const t=w.MAs(1);w.xp6(1),w.s9C("type","Number"===e.type?"number":"text"),w.s9C("placeholder",void 0!==e.searchPlaceholder?e.searchPlaceholder:!0===e.isDate?w.lcZ(2,4,"bia.dateIso8601"):""),w.Q6J("value",null==t.filters[e.field]?null:t.filters[e.field].value)("ngClass",w.VKq(6,ye,""!==(null==t.filters[e.field]?null:t.filters[e.field].value)))}}function we(e,t){if(1&e&&(w.TgZ(0,"th",15),w.YNc(1,be,3,8,"span",16),w.qZA()),2&e){const e=t.$implicit;w.Q6J("ngSwitch",e.field),w.xp6(1),w.Q6J("ngIf",!0===e.isSearchable)}}function Se(e,t){if(1&e&&(w.TgZ(0,"tr"),w.YNc(1,me,1,0,"th",9),w.YNc(2,we,2,2,"th",14),w.qZA()),2&e){const e=w.oxw().$implicit,t=w.oxw(2);w.xp6(1),w.Q6J("ngIf",t.canSelectElement),w.xp6(1),w.Q6J("ngForOf",e)}}function Ce(e,t){if(1&e&&(w.TgZ(0,"tr"),w.YNc(1,pe,2,0,"th",7),w.YNc(2,ge,3,2,"ng-container",8),w.qZA(),w.YNc(3,Se,3,2,"tr",9)),2&e){const e=t.$implicit,n=w.oxw(2);w.xp6(1),w.Q6J("ngIf",n.canSelectElement),w.xp6(1),w.Q6J("ngForOf",e),w.xp6(1),w.Q6J("ngIf",n.showColSearch)}}function xe(e,t){if(1&e&&w._UZ(0,"p-tableCheckbox",23),2&e){const e=w.oxw(2).$implicit;w.Q6J("value",e)}}function ve(e,t){1&e&&w._UZ(0,"i",24)}function Ae(e,t){if(1&e&&(w.TgZ(0,"td"),w.YNc(1,xe,1,1,"p-tableCheckbox",21),w.YNc(2,ve,1,0,"i",22),w.qZA()),2&e){const e=w.oxw().$implicit,t=w.oxw(2);w.xp6(1),w.Q6J("ngIf",!0!==t.isFooter(e)&&e.id>0),w.xp6(1),w.Q6J("ngIf",!0===t.isFooter(e))}}function Ze(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"input",29),w.NdJ("change",function(){return w.CHM(e),w.oxw(6).onChange()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(3).$implicit;w.xp6(1),w.Q6J("formControlName",e.field)}}function Te(e,t){1&e&&(w.TgZ(0,"span",30),w._uU(1,"*"),w.qZA())}function Ne(e,t){if(1&e&&(w.ynx(0,15),w.YNc(1,Ze,2,1,"ng-container",27),w.BQk(),w.YNc(2,Te,2,0,"span",28)),2&e){const e=w.oxw(2).$implicit,t=w.oxw(3);w.Q6J("ngSwitch",e.field),w.xp6(2),w.Q6J("ngIf",!0===t.isRequired(e.field))}}function Le(e,t){1&e&&w.YNc(0,Ne,3,2,"ng-template",26)}function Me(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.BQk()),2&e){const e=w.oxw(3).$implicit,t=w.oxw().$implicit;w.xp6(1),w.hij(" ",t[e.field]," ")}}function Oe(e,t){if(1&e&&(w.ynx(0,15),w.YNc(1,Me,2,1,"ng-container",27),w.BQk()),2&e){const e=w.oxw(2).$implicit;w.Q6J("ngSwitch",e.field)}}function Je(e,t){1&e&&w.YNc(0,Oe,2,1,"ng-template",31)}const Qe=function(){return{width:"100%"}};function Ie(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-dropdown",35),w.NdJ("onChange",function(){return w.CHM(e),w.oxw(7).onChange()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit,t=w.oxw(3);w.xp6(1),w.Akn(w.DdM(4,Qe)),w.Q6J("formControlName",e.field)("options",t.getOptionDto(e.field))}}function $e(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-multiSelect",36),w.NdJ("onChange",function(){return w.CHM(e),w.oxw(7).onChange()})("onPanelShow",function(){return w.CHM(e),w.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return w.CHM(e),w.oxw(7).onPanelHideMultiSelect()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit,t=w.oxw(3);w.xp6(1),w.Akn(w.DdM(4,Qe)),w.Q6J("formControlName",e.field)("options",t.getOptionDto(e.field))}}function Ye(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-checkbox",37),w.NdJ("onChange",function(){return w.CHM(e),w.oxw(7).onChange()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Q6J("binary",!0)("formControlName",e.field)}}function Ue(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"input",38),w.NdJ("change",function(){return w.CHM(e),w.oxw(7).onChange()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Q6J("formControlName",e.field)}}function ke(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-calendar",39),w.NdJ("onShow",function(){return w.CHM(e),w.oxw(7).onShowCalendar()})("onSelect",function(){return w.CHM(e),w.oxw(7).onChange()})("onBlur",function(){return w.CHM(e),w.oxw(7).onBlurCalendar()})("onClose",function(){return w.CHM(e),w.oxw(7).onCloseCalendar()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Akn(w.DdM(5,Qe)),w.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",w.DdM(6,Qe))}}function Ee(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-calendar",40),w.NdJ("onShow",function(){return w.CHM(e),w.oxw(7).onShowCalendar()})("onSelect",function(){return w.CHM(e),w.oxw(7).onChange()})("onBlur",function(){return w.CHM(e),w.oxw(7).onBlurCalendar()})("onClose",function(){return w.CHM(e),w.oxw(7).onCloseCalendar()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Akn(w.DdM(5,Qe)),w.Q6J("formControlName",e.field)("inputStyle",w.DdM(6,Qe))("timeOnly",!0)}}function Be(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-calendar",41),w.NdJ("onShow",function(){return w.CHM(e),w.oxw(7).onShowCalendar()})("onSelect",function(){return w.CHM(e),w.oxw(7).onChange()})("onBlur",function(){return w.CHM(e),w.oxw(7).onBlurCalendar()})("onClose",function(){return w.CHM(e),w.oxw(7).onCloseCalendar()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Akn(w.DdM(5,Qe)),w.Q6J("formControlName",e.field)("inputStyle",w.DdM(6,Qe))("timeOnly",!0)}}function qe(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-calendar",42),w.NdJ("onShow",function(){return w.CHM(e),w.oxw(7).onShowCalendar()})("onSelect",function(){return w.CHM(e),w.oxw(7).onChange()})("onBlur",function(){return w.CHM(e),w.oxw(7).onBlurCalendar()})("onClose",function(){return w.CHM(e),w.oxw(7).onCloseCalendar()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Akn(w.DdM(5,Qe)),w.Q6J("formControlName",e.field)("inputStyle",w.DdM(6,Qe))("timeOnly",!0)}}function De(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"p-calendar",43),w.NdJ("onShow",function(){return w.CHM(e),w.oxw(7).onShowCalendar()})("onSelect",function(){return w.CHM(e),w.oxw(7).onChange()})("onBlur",function(){return w.CHM(e),w.oxw(7).onBlurCalendar()})("onClose",function(){return w.CHM(e),w.oxw(7).onCloseCalendar()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Akn(w.DdM(5,Qe)),w.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",w.DdM(6,Qe))}}function Fe(e,t){if(1&e){const e=w.EpF();w.ynx(0),w.TgZ(1,"input",44),w.NdJ("change",function(){return w.CHM(e),w.oxw(7).onChange()}),w.qZA(),w.BQk()}if(2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Q6J("maxlength",e.maxlength)("formControlName",e.field)}}function Pe(e,t){1&e&&(w.TgZ(0,"span",30),w._uU(1,"*"),w.qZA())}function Re(e,t){if(1&e&&(w.ynx(0,15),w.YNc(1,Ie,2,5,"ng-container",34),w.YNc(2,$e,2,5,"ng-container",34),w.YNc(3,Ye,2,2,"ng-container",34),w.YNc(4,Ue,2,1,"ng-container",34),w.YNc(5,ke,2,7,"ng-container",34),w.YNc(6,Ee,2,7,"ng-container",34),w.YNc(7,Be,2,7,"ng-container",34),w.YNc(8,qe,2,7,"ng-container",34),w.YNc(9,De,2,7,"ng-container",34),w.YNc(10,Fe,2,2,"ng-container",27),w.BQk(),w.YNc(11,Pe,2,0,"span",28)),2&e){const e=w.oxw(3).$implicit,t=w.oxw(3);w.Q6J("ngSwitch",e.type),w.xp6(1),w.Q6J("ngSwitchCase","OneToMany"),w.xp6(1),w.Q6J("ngSwitchCase","ManyToMany"),w.xp6(1),w.Q6J("ngSwitchCase","Boolean"),w.xp6(1),w.Q6J("ngSwitchCase","Number"),w.xp6(1),w.Q6J("ngSwitchCase","Date"),w.xp6(1),w.Q6J("ngSwitchCase","Time"),w.xp6(1),w.Q6J("ngSwitchCase","TimeOnly"),w.xp6(1),w.Q6J("ngSwitchCase","TimeSecOnly"),w.xp6(1),w.Q6J("ngSwitchCase","DateTime"),w.xp6(2),w.Q6J("ngIf",!0===t.isRequired(e.field))}}function ze(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.BQk()),2&e){const e=w.oxw(5).$implicit,t=w.oxw().$implicit;w.xp6(1),w.hij(" ",null==t[e.field]?null:t[e.field].display," ")}}function He(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.BQk()),2&e){const e=w.oxw(5).$implicit,t=w.oxw().$implicit,n=w.oxw(2);w.xp6(1),w.hij(" ",n.formatDisplayName(t[e.field])," ")}}function _e(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.ALo(2,"formatValue"),w.BQk()),2&e){const e=w.oxw(5).$implicit,t=w.oxw().$implicit;w.xp6(1),w.hij(" ",w.xi3(2,1,t[e.field],e)," ")}}function je(e,t){if(1&e&&(w.ynx(0),w.ynx(1,15),w.YNc(2,ze,2,1,"ng-container",34),w.YNc(3,He,2,1,"ng-container",34),w.YNc(4,_e,3,4,"ng-container",27),w.BQk(),w.BQk()),2&e){const e=w.oxw(4).$implicit;w.xp6(1),w.Q6J("ngSwitch",e.type),w.xp6(1),w.Q6J("ngSwitchCase","OneToMany"),w.xp6(1),w.Q6J("ngSwitchCase","ManyToMany")}}function Ge(e,t){if(1&e&&w.YNc(0,je,5,3,"ng-container",9),2&e){const e=w.oxw(4).$implicit,t=w.oxw(2);w.Q6J("ngIf",!0!==t.isFooter(e))}}function Ke(e,t){if(1&e&&(w.YNc(0,Re,12,11,"ng-template",32),w.YNc(1,Ge,1,1,"ng-template",null,33,w.W1O)),2&e){const e=w.MAs(2),t=w.oxw(2).$implicit;w.Q6J("ngIf",!0===t.isEditable)("ngIfElse",e)}}function Ve(e,t){1&e&&w.YNc(0,Ke,3,2,"ng-template",26)}function We(e,t){1&e&&(w.TgZ(0,"label"),w._uU(1,"-"),w.qZA())}function Xe(e,t){if(1&e&&w.YNc(0,We,2,0,"label",9),2&e){const e=w.oxw(3).$implicit;w.Q6J("ngIf",!0===e.isEditable)}}function et(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.BQk()),2&e){const e=w.oxw(4).$implicit,t=w.oxw().$implicit;w.xp6(1),w.hij(" ",null==t[e.field]?null:t[e.field].display," ")}}function tt(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.BQk()),2&e){const e=w.oxw(4).$implicit,t=w.oxw().$implicit,n=w.oxw(2);w.xp6(1),w.hij(" ",n.formatDisplayName(t[e.field])," ")}}function nt(e,t){1&e&&w._UZ(0,"i",47)}function ot(e,t){if(1&e&&(w.ynx(0),w.YNc(1,nt,1,0,"i",46),w.BQk()),2&e){const e=w.oxw(4).$implicit,t=w.oxw().$implicit;w.xp6(1),w.Q6J("ngIf",!0===t[e.field])}}function it(e,t){if(1&e&&(w.ynx(0),w._uU(1),w.ALo(2,"formatValue"),w.BQk()),2&e){const e=w.oxw(4).$implicit,t=w.oxw().$implicit;w.xp6(1),w.hij(" ",w.xi3(2,1,t[e.field],e)," ")}}function st(e,t){if(1&e&&(w.ynx(0,15),w.YNc(1,et,2,1,"ng-container",34),w.YNc(2,tt,2,1,"ng-container",34),w.YNc(3,ot,2,1,"ng-container",34),w.YNc(4,it,3,4,"ng-container",27),w.BQk()),2&e){const e=w.oxw(3).$implicit;w.Q6J("ngSwitch",e.type),w.xp6(1),w.Q6J("ngSwitchCase","OneToMany"),w.xp6(1),w.Q6J("ngSwitchCase","ManyToMany"),w.xp6(1),w.Q6J("ngSwitchCase","Boolean")}}function at(e,t){if(1&e&&(w.YNc(0,Xe,1,1,"ng-template",32),w.YNc(1,st,5,4,"ng-template",null,45,w.W1O)),2&e){const e=w.MAs(2),t=w.oxw(3).$implicit,n=w.oxw(2);w.Q6J("ngIf",!0===n.isFooter(t))("ngIfElse",e)}}function rt(e,t){1&e&&w.YNc(0,at,3,2,"ng-template",31)}function lt(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"td",25),w.NdJ("click",function(){w.CHM(e);const t=w.oxw().$implicit;return w.oxw(2).initEditableRow(t)}),w.TgZ(1,"p-cellEditor"),w.YNc(2,Le,1,0,void 0,9),w.YNc(3,Je,1,0,void 0,9),w.YNc(4,Ve,1,0,void 0,9),w.YNc(5,rt,1,0,void 0,9),w.qZA(),w.qZA()}if(2&e){const e=t.$implicit,n=w.oxw(3);w.xp6(2),w.Q6J("ngIf",!0===n.isSpecificInput(e.field)),w.xp6(1),w.Q6J("ngIf",!0===n.isSpecificInput(e.field)),w.xp6(1),w.Q6J("ngIf",!0!==n.isSpecificInput(e.field)),w.xp6(1),w.Q6J("ngIf",!0!==n.isSpecificInput(e.field))}}function ct(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"tr",19),w.NdJ("focusout",function(){return w.CHM(e),w.oxw(2).onFocusout()})("keyup.enter",function(){return w.CHM(e),w.oxw(2).initEditableRow(null)})("keyup.escape",function(){return w.CHM(e),w.oxw(2).cancel()}),w.YNc(1,Ae,3,2,"td",9),w.YNc(2,lt,6,4,"td",20),w.qZA()}if(2&e){const e=t.$implicit,n=t.columns,o=w.oxw(2);w.Q6J("pSelectableRow",!0!==o.isFooter(e)?e:null)("pEditableRow",e),w.xp6(1),w.Q6J("ngIf",o.canSelectElement),w.xp6(1),w.Q6J("ngForOf",n)}}function ut(e,t){if(1&e&&(w.TgZ(0,"tr"),w.TgZ(1,"td",48),w._uU(2),w.ALo(3,"translate"),w.qZA(),w.qZA()),2&e){const e=t.$implicit;w.xp6(1),w.uIk("colspan",e.length+1),w.xp6(1),w.hij(" ",w.lcZ(3,2,"bia.NoRecordsFound")," ")}}function dt(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"p-table",2,3),w.NdJ("onFilter",function(){return w.CHM(e),w.oxw().onFilter()})("onLazyLoad",function(t){return w.CHM(e),w.oxw().onLoadLazy(t)})("onStateSave",function(t){return w.CHM(e),w.oxw().onStateSave(t)})("selectionChange",function(){return w.CHM(e),w.oxw().onSelectionChange()}),w.ALo(2,"async"),w.YNc(3,Ce,4,3,"ng-template",4),w.YNc(4,ct,3,4,"ng-template",5),w.YNc(5,ut,4,4,"ng-template",6),w.qZA()}if(2&e){const e=w.oxw();w.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",e.displayedColumns)("value",e.elements)("paginator",e.paginator)("rows",e.pageSize)("totalRecords",e.totalRecord)("lazy",!0)("loading",e.loading&&null!==w.lcZ(2,14,e.showLoading$))("stateStorage","session")("stateKey",e.tableStateKey)("lazyLoadOnInit",e.getLazyLoadOnInit())("sortField",e.sortFieldValue)("sortOrder",e.sortOrderValue)}}let pt=(()=>{class e extends X.l{constructor(e,t,n,o){super(e,t,n,o),this.formBuilder=e,this.authService=t,this.biaMessageService=n,this.translateService=o}initForm(){this.form=this.formBuilder.group({id:[this.element.id],firstName:[this.element.firstName,V.kI.required],lastName:[this.element.lastName,V.kI.required],login:[this.element.login,V.kI.required],roles:[this.element.roles]})}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,t.roles=W.P.Differential(t.roles,null===(e=this.element)||void 0===e?void 0:e.roles),this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(w.Y36(V.qu),w.Y36(E.e),w.Y36(I.X),w.Y36(ee.sK))},e.\u0275cmp=w.Xpm({type:e,selectors:[["bia-user-table"]],features:[w.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(e,t){1&e&&(w.TgZ(0,"form",0),w.YNc(1,dt,6,16,"p-table",1),w.qZA()),2&e&&(w.Q6J("formGroup",t.form),w.xp6(1),w.Q6J("ngIf",t.configuration))},directives:[V._Y,V.JL,V.sg,te.O5,ne.iA,oe.jx,te.sg,ne.Mo,ne.lQ,ne.fz,te.RF,ie.o,te.mk,se.oO,ne.Ei,ne.D$,ne.UA,ne.YL,te.ED,V.Fj,V.JJ,V.u,te.n9,ae.Lt,re.NU,le.XZ,V.wV,ce.f,ue.D,V.nD],pipes:[te.Ov,ee.X$,de.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),e})();var ht=n(13653),ft=n(23913),gt=n(35618),mt=n(81606),yt=n(76743),bt=n(65224),wt=n(4207);function St(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",9),w.NdJ("click",function(){return w.CHM(e),w.oxw(2).onSynchronize()}),w.ALo(1,"translate"),w.qZA()}2&e&&w.s9C("label",w.lcZ(1,1,"bia.synchronize"))}function Ct(e,t){if(1&e&&w.YNc(0,St,2,3,"button",8),2&e){const e=w.oxw();w.Q6J("ngIf",e.canSync)}}function xt(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"bia-table",10),w.NdJ("clickRow",function(t){return w.CHM(e),w.oxw().onEdit(t)})("loadLazy",function(t){return w.CHM(e),w.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return w.CHM(e),w.oxw().onSelectedElementsChanged(t)}),w.ALo(1,"async"),w.ALo(2,"async"),w.ALo(3,"async"),w.qZA()}if(2&e){const e=w.oxw();w.Q6J("elements",w.lcZ(1,12,e.users$))("totalRecord",w.lcZ(2,14,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canClickRow",e.canEdit)("canSelectElement",e.canDelete)("loading",w.lcZ(3,16,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}function vt(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"bia-user-table",11),w.NdJ("loadLazy",function(t){return w.CHM(e),w.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return w.CHM(e),w.oxw().onSelectedElementsChanged(t)})("save",function(t){return w.CHM(e),w.oxw().onSave(t)}),w.ALo(1,"async"),w.ALo(2,"async"),w.ALo(3,"async"),w.ALo(4,"async"),w.qZA()}if(2&e){const e=w.oxw();w.Q6J("elements",w.lcZ(1,14,e.users$))("dictOptionDtos",w.lcZ(2,16,e.userOptionsService.dictOptionDtos$))("totalRecord",w.lcZ(3,18,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canEdit",e.canEdit)("canAdd",e.canAdd)("canSelectElement",e.canDelete)("loading",w.lcZ(4,20,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}let At=(()=>{class e{constructor(e,t,n,o,i,s,a,r,l){this.store=e,this.router=t,this.activatedRoute=n,this.authService=o,this.userDas=i,this.translateService=s,this.biaTranslationService=a,this.usersSignalRService=r,this.userOptionsService=l,this.useCalcMode=!1,this.useSignalR=false,this.useView=!1,this.useRefreshAtLanguageChange=!1,this.flex=!0,this.sub=new Y.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=h.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.canSync=!1,this.tableStateKey=this.useView?"usersGrid":void 0,this.useViewTeamWithTypeId=this.useView?g:null,this.displayUserAddFromDirectoryDialog=!1}get userListComponent(){return void 0!==this.biaTableComponent?this.biaTableComponent:this.userTableComponent}ngOnInit(){this.parentIds=[],this.sub=new Y.w,this.initTableConfiguration(),this.setPermissions(),this.users$=this.store.select(Q),this.totalCount$=this.store.select(N),this.loading$=this.store.select(J),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(e=>{this.userOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange&&this.sub.add(this.biaTranslationService.currentCulture$.pipe((0,ht.T)(1)).subscribe(e=>{this.onLoadLazy(this.userListComponent.getLazyLoadMetadata())})),this.sub.add(this.store.select(ft.nC).pipe((0,ht.T)(1)).subscribe(e=>{setTimeout(()=>this.onLoadLazy(this.userListComponent.getLazyLoadMetadata()))}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.OnHide()}OnDisplay(){this.useView&&this.store.dispatch((0,z.Tx)()),this.useSignalR&&this.usersSignalRService.initialize()}OnHide(){this.useSignalR&&this.usersSignalRService.destroy()}onCreate(){this.displayUserAddFromDirectoryDialog=!0}onEdit(e){this.useCalcMode||this.router.navigate([e,"edit"],{relativeTo:this.activatedRoute})}onSave(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(m.update({user:e})):this.canAdd&&this.store.dispatch(m.create({user:e})))}onDelete(){this.selectedUsers&&this.canDelete&&this.store.dispatch(m.multiRemove({ids:this.selectedUsers.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedUsers=e}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){const t=Object.assign({parentIds:this.parentIds},e);this.store.dispatch(m.loadAllByPost({event:t}))}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(e){this.viewPreference=e}onExportCSV(){const e={};this.columns.map(t=>e[t.value.split(".")[1]]=this.translateService.instant(t.value));const t=Object.assign({parentIds:this.parentIds,columns:e},this.userListComponent.getLazyLoadMetadata());this.userDas.getFile(t).subscribe(e=>{B.saveAs(e,this.translateService.instant("app.users")+".csv")})}onSynchronize(){this.store.dispatch(m.synchronize())}setPermissions(){this.canSync=this.authService.hasPermission(D.y.User_Sync),this.canEdit=this.authService.hasPermission(D.y.User_UpdateRoles),this.canDelete=this.authService.hasPermission(D.y.User_Delete),this.canAdd=this.authService.hasPermission(D.y.User_Add)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(e=>{this.tableConfiguration={columns:[new k.ML("lastName","user.lastName"),new k.ML("firstName","user.firstName"),new k.ML("login","user.login"),Object.assign(new k.ML("roles","member.roles"),{type:k.d5.ManyToMany})]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=[...this.columns]})}}return e.\u0275fac=function(t){return new(t||e)(w.Y36(i.yh),w.Y36(o.F0),w.Y36(o.gz),w.Y36(E.e),w.Y36(S),w.Y36(ee.sK),w.Y36(q.P6),w.Y36(R),w.Y36(K))},e.\u0275cmp=w.Xpm({type:e,selectors:[["bia-users-index"]],viewQuery:function(e,t){if(1&e&&(w.Gf(U.$,5),w.Gf(pt,5)),2&e){let e;w.iGM(e=w.CRH())&&(t.biaTableComponent=e.first),w.iGM(e=w.CRH())&&(t.userTableComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&w.ekj("bia-flex",t.flex)},decls:10,vars:18,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],["pTemplate","actionOnList"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","useViewTeamWithTypeId","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"display","displayChange"],["pButton","","class","p-button-outlined",3,"label","click",4,"ngIf"],["pButton","",1,"p-button-outlined",3,"label","click"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"bia-table-header",2),w.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),w.ALo(3,"translate"),w.YNc(4,Ct,1,1,"ng-template",3),w.qZA(),w.TgZ(5,"bia-table-controller",4),w.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),w.ALo(6,"async"),w.qZA(),w.YNc(7,xt,4,18,"bia-table",5),w.YNc(8,vt,5,22,"bia-user-table",6),w.qZA(),w.qZA(),w.TgZ(9,"bia-user-add-from-directory-dialog",7),w.NdJ("displayChange",function(e){return t.displayUserAddFromDirectoryDialog=e}),w.qZA()),2&e&&(w.xp6(2),w.Q6J("headerTitle",w.lcZ(3,14,"user.listOf"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedUsers),w.xp6(3),w.Q6J("defaultPageSize",t.defaultPageSize)("length",w.lcZ(6,16,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey)("useViewTeamWithTypeId",t.useViewTeamWithTypeId),w.xp6(2),w.Q6J("ngIf",!t.useCalcMode),w.xp6(1),w.Q6J("ngIf",t.useCalcMode),w.xp6(1),w.Q6J("display",t.displayUserAddFromDirectoryDialog))},directives:[gt.xw,gt.yH,mt.l,oe.jx,yt.B,te.O5,bt.C,wt.Hq,U.$,pt],pipes:[ee.X$,te.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})();var Zt=n(61028);const Tt=function(){return{width:"100%"}};let Nt=(()=>{class e{constructor(e){this.formBuilder=e,this.user={},this.save=new w.vpe,this.cancel=new w.vpe,this.initForm()}ngOnChanges(e){this.user&&(this.form.reset(),this.user&&this.form.patchValue(Object.assign({},this.user)))}initForm(){this.form=this.formBuilder.group({id:[this.user.id],firstName:[this.user.firstName,V.kI.required],lastName:[this.user.lastName,V.kI.required],login:[this.user.login,V.kI.required],roles:[this.user.roles]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,t.roles=W.P.Differential(t.roles,null===(e=this.user)||void 0===e?void 0:e.roles),this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(w.Y36(V.qu))},e.\u0275cmp=w.Xpm({type:e,selectors:[["bia-user-form"]],inputs:{user:"user",roleOptions:"roleOptions"},outputs:{save:"save",cancel:"cancel"},features:[w.TTD],decls:40,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["formControlName","firstName","type","text","pInputText","","maxlength","64","disabled","true",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","lastName","type","text","pInputText","","maxlength","64","disabled","true",2,"width","100%"],["formControlName","login","type","text","pInputText","","maxlength","64","disabled","true",2,"width","100%"],["defaultLabel","\xa0","formControlName","roles","optionLabel","display","datakey","id","appendTo","body",3,"options","virtualScroll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(w.TgZ(0,"form",0),w.NdJ("submit",function(){return t.onSubmit()}),w.TgZ(1,"div",1),w.TgZ(2,"div",2),w.TgZ(3,"span",3),w._UZ(4,"input",4),w.TgZ(5,"label"),w.TgZ(6,"span",5),w._uU(7,"*"),w.qZA(),w._uU(8),w.ALo(9,"translate"),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(10,"div",1),w.TgZ(11,"div",2),w.TgZ(12,"span",3),w._UZ(13,"input",6),w.TgZ(14,"label"),w.TgZ(15,"span",5),w._uU(16,"*"),w.qZA(),w._uU(17),w.ALo(18,"translate"),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(19,"div",1),w.TgZ(20,"div",2),w.TgZ(21,"span",3),w._UZ(22,"input",7),w.TgZ(23,"label"),w.TgZ(24,"span",5),w._uU(25,"*"),w.qZA(),w._uU(26),w.ALo(27,"translate"),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(28,"div",1),w.TgZ(29,"div",2),w.TgZ(30,"span",3),w._UZ(31,"p-multiSelect",8),w.TgZ(32,"label"),w._uU(33),w.ALo(34,"translate"),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(35,"div",9),w._UZ(36,"button",10),w.ALo(37,"translate"),w.TgZ(38,"button",11),w.NdJ("click",function(){return t.onCancel()}),w.ALo(39,"translate"),w.qZA(),w.qZA(),w.qZA()),2&e&&(w.Q6J("formGroup",t.form),w.xp6(8),w.Oqu(w.lcZ(9,12,"user.firstName")),w.xp6(9),w.Oqu(w.lcZ(18,14,"user.lastName")),w.xp6(9),w.Oqu(w.lcZ(27,16,"user.login")),w.xp6(5),w.Akn(w.DdM(24,Tt)),w.Q6J("options",t.roleOptions)("virtualScroll",!0),w.xp6(2),w.Oqu(w.lcZ(34,18,"member.roles")),w.xp6(3),w.s9C("label",w.lcZ(37,20,"bia.save")),w.Q6J("disabled",!t.form.valid),w.xp6(2),w.s9C("label",w.lcZ(39,22,"bia.cancel")))},directives:[V._Y,V.JL,gt.xw,V.sg,gt.Wh,gt.yH,V.Fj,V.JJ,V.u,ie.o,V.nD,re.NU,gt.SQ,wt.Hq],pipes:[ee.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e})(),Lt=(()=>{class e{constructor(e,t,n,o,i){this.store=e,this.router=t,this.activatedRoute=n,this.userOptionsService=o,this.biaTranslationService=i,this.sub=new Y.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(e=>{this.userOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(m.create({user:e})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(w.Y36(i.yh),w.Y36(o.F0),w.Y36(o.gz),w.Y36(K),w.Y36(q.P6))},e.\u0275cmp=w.Xpm({type:e,selectors:[["bia-user-new"]],decls:2,vars:3,consts:[[3,"roleOptions","cancel","save"]],template:function(e,t){1&e&&(w.TgZ(0,"bia-user-form",0),w.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),w.ALo(1,"async"),w.qZA()),2&e&&w.Q6J("roleOptions",w.lcZ(1,1,t.userOptionsService.roleOptions$))},directives:[Nt],pipes:[te.Ov],styles:[""]}),e})(),Mt=(()=>{class e{constructor(e){this.store=e,this.sub=new Y.w,this.InitSub(),this.loading$=this.store.select(O),this.user$=this.store.select(L)}get currentUser(){var e;return(null===(e=this._currentUser)||void 0===e?void 0:e.id)===this._currentUserId?this._currentUser:null}get currentUserId(){return this._currentUserId}set currentUserId(e){this._currentUserId=Number(e),this.store.dispatch(m.load({id:e}))}InitSub(){this.sub=new Y.w,this.sub.add(this.store.select(L).subscribe(e=>{e&&(this._currentUser=e)}))}}return e.\u0275fac=function(t){return new(t||e)(w.LFG(i.yh))},e.\u0275prov=w.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ot=n(79373);function Jt(e,t){1&e&&w._UZ(0,"bia-spinner",2),2&e&&w.Q6J("overlay",!0)}let Qt=(()=>{class e{constructor(e,t,n,o,i,s){this.store=e,this.router=t,this.activatedRoute=n,this.userOptionsService=o,this.userService=i,this.biaTranslationService=s,this.displayChange=new w.vpe,this.sub=new Y.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(e=>{this.userOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(m.update({user:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(w.Y36(i.yh),w.Y36(o.F0),w.Y36(o.gz),w.Y36(K),w.Y36(Mt),w.Y36(q.P6))},e.\u0275cmp=w.Xpm({type:e,selectors:[["bia-user-edit"]],outputs:{displayChange:"displayChange"},decls:5,vars:9,consts:[[3,"user","roleOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(w.TgZ(0,"bia-user-form",0),w.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),w.ALo(1,"async"),w.ALo(2,"async"),w.qZA(),w.YNc(3,Jt,1,1,"bia-spinner",1),w.ALo(4,"async")),2&e&&(w.Q6J("user",w.lcZ(1,3,t.userService.user$))("roleOptions",w.lcZ(2,5,t.userOptionsService.roleOptions$)),w.xp6(3),w.Q6J("ngIf",w.lcZ(4,7,t.userService.loading$)))},directives:[Nt,te.O5,Ot.O],pipes:[te.Ov],styles:[""]}),e})();var It=n(16249),$t=n(30466);function Yt(e,t){1&e&&w._UZ(0,"bia-spinner",1),2&e&&w.Q6J("overlay",!0)}let Ut=(()=>{class e{constructor(e,t,n,o){this.store=e,this.route=t,this.userService=n,this.layoutService=o,this.sub=new Y.w}ngOnInit(){this.userService.currentUserId=this.route.snapshot.params.userId,this.sub.add(this.store.select(L).subscribe(e=>{(null==e?void 0:e.displayName)&&(this.route.data.pipe((0,F.P)()).subscribe(t=>{t.breadcrumb=e.displayName}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(w.Y36(i.yh),w.Y36(o.gz),w.Y36(Mt),w.Y36($t.N))},e.\u0275cmp=w.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(w._UZ(0,"router-outlet"),w.YNc(1,Yt,1,1,"bia-spinner",0),w.ALo(2,"async")),2&e&&(w.xp6(1),w.Q6J("ngIf",w.lcZ(2,1,t.userService.loading$)))},directives:[o.lC,te.O5,Ot.O],pipes:[te.Ov],styles:[""]}),e})();var kt=n(98832),Et=n(53460),Bt=n(11936),qt=n(95546);const Dt=[{path:"",data:{breadcrumb:null,permission:D.y.User_List_Access,InjectComponent:At},component:Et.e,canActivate:[It.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:D.y.User_Add,title:"user.add",InjectComponent:Lt},component:kt._,canActivate:[It.n]},{path:":userId",data:{breadcrumb:"",canNavigate:!0},component:Ut,canActivate:[It.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:D.y.User_UpdateRoles,title:"user.edit",InjectComponent:Qt},component:kt._,canActivate:[It.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}];let Ft=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=w.oAB({type:e}),e.\u0275inj=w.cJS({imports:[[Zt.m,o.Bz.forChild(Dt),i.Aw.forFeature(f,A),s.sQ.forFeature([$]),Bt.p,qt.q]]}),e})()}}]);