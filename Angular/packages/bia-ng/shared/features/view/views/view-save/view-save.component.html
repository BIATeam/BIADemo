@if (crudItemService.crudItem$ | async; as crudItem) {
  <bia-view-save-form
    [crudItem]="crudItem"
    [fields]="crudConfiguration.fieldsConfig.columns"
    [formLayoutConfig]="crudConfiguration.formLayoutConfig"
    [formReadOnlyMode]="formReadOnlyMode"
    [dictOptionDtos]="
      (viewService.optionsService.dictOptionDtos$ | async) ?? []
    "
    [isCrudItemOutdated]="isCrudItemOutdated"
    [showFixableState]="crudConfiguration.isFixable"
    [canFix]="canFix"
    (cancelled)="onCancelled()"
    (save)="onSubmitted($event)"
    (fixedChanged)="crudItemService.updateFixedStatus(crudItem.id, $event)"
    [showPopupButton]="showPopupButton"
    [showSplitButton]="showSplitButton"
    [showFullPageButton]="showFullPageButton"
    (layoutChanged)="notifyLayoutChange($event)"
    [displayHistorical]="crudConfiguration.displayHistorical"
    [historicalEntries]="
      (viewService.crudItemHistorical$ | async) ?? []
    "></bia-view-save-form>
}
@if (viewService.loadingGet$ | async) {
  <bia-spinner [overlay]="true"></bia-spinner>
}

<bia-view-state-recap [tableState]="viewPreference"></bia-view-state-recap>
