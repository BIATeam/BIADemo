<div
  class="flex flex-row gap-2 align-items-center align-content-center align-self-stretch">
  @if (canDelete === true) {
    <button
      pButton
      [disabled]="viewSelected?.viewType !== 2"
      icon="pi pi-trash"
      pTooltip="{{ 'bia.delete' | translate }}"
      tooltipPosition="top"
    (click)="onDeleteView(viewSelected?.id)"></button>
  }
  @if (showDefineDefault()) {
    <button
      pButton
      [disabled]="viewSelected?.viewType !== 2 && viewSelected?.viewType !== 1"
      label="{{ 'bia.views.defineDefault' | translate }}"
    (click)="onSetDefaultView(viewSelected?.id, true)"></button>
  }
  @if (!showDefineDefault()) {
    <button
      pButton
      label="{{ 'bia.views.removeDefault' | translate }}"
    (click)="onSetDefaultView(viewSelected?.id, false)"></button>
  }
</div>
<p-table
  #viewUserTable
  [value]="views"
  [sortField]="'name'"
  [scrollable]="true"
  scrollHeight="40vh"
  dataKey="id"
  (selectionChange)="onSelectionChange()">
  <ng-template pTemplate="header">
    <tr>
      @if (canUpdate) {
        <th class="app-action-col">
          {{ 'bia.select' | translate }}
        </th>
      }
      <th>{{ 'bia.views.name' | translate }}</th>
      <th>{{ 'bia.views.description' | translate }}</th>
      <th>{{ 'bia.views.viewType' | translate }}</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-view>
    <tr [pSelectableRow]="view">
      @if (canUpdate) {
        <td class="app-action-col">
          @if (view.viewType === 2 || view.viewType === 1) {
            <p-tableRadioButton
            [value]="view"></p-tableRadioButton>
          }
        </td>
      }
      <td>
        {{ view.name }}
        @if (view.isUserDefault === true) {
          <i
          class="pi pi-star-fill-border"></i>
        }
      </td>
      <td>{{ view.description }}</td>
      <td>
        {{
        (view.viewType === 1 ? 'bia.views.typeTeam' : 'bia.views.typeUser')
        | translate
        }}
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage" let-view>
    <tr>
      <td class="app-empty-message" [attr.colspan]="3">
        {{ 'bia.NoRecordsFound' | translate }}
      </td>
    </tr>
  </ng-template>
</p-table>
<p-confirmDialog key="view-user-confirm"></p-confirmDialog>
