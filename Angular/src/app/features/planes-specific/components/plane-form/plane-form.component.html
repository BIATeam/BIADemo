<bia-form
  [element]="crudItem"
  [fields]="fields"
  [formValidators]="formValidators"
  [dictOptionDtos]="dictOptionDtos"
  [disableSubmitButton]="isEditingEngines"
  [showSubmitButton]="showSubmitButton"
  [formReadOnlyMode]="formReadOnlyMode"
  (save)="onSave($event)"
  (cancelled)="onCancel()"
  (readOnlyChanged)="onReadOnlyChanged($event)">
  <ng-template pTemplate="specificInput" let-field="field" let-form="form">
    <div [formGroup]="form">
      <ng-container [ngSwitch]="field.field">
        <div *ngSwitchCase="'isActive'" class="flex items-center">
          <p-checkbox binary="true"></p-checkbox>
          <label class="ml-2">{{ field.header | translate }}</label>
        </div>
        <!-- isActive -->
        <ng-container *ngSwitchCase="'capacity'">
          <p-floatlabel variant="in">
            <input
              [formControlName]="field.field"
              type="number"
              pInputText
              style="width: 100%" />
            <label
              ><span class="bia-star-mandatory" *ngIf="field.isRequired">*</span
              >{{ field.header | translate }}</label
            >
          </p-floatlabel>
        </ng-container>

        <!-- capacity -->
      </ng-container>
    </div>
    <ng-container *ngIf="field.field === 'engines'">
      <bia-table-header
        [headerTitle]="field.header | translate"
        [canAdd]="false"
        [canDelete]="true"
        (delete)="onDeleteEngines()"
        [selectedElements]="selectedEngines"></bia-table-header>
      <p-floatlabel variant="in">
        <app-engine-specific-table
          [elements]="displayedEngines()"
          [configuration]="engineCrudConfig"
          [columnToDisplays]="engineColumnsToDisplay"
          [dictOptionDtos]="[]"
          [totalRecord]="crudItem?.engines?.length ?? 0"
          [paginator]="false"
          [showColSearch]="false"
          [canEdit]="true"
          [canAdd]="true"
          [canSelectElement]="true"
          [loading]="false"
          [readOnly]="isEngineTableReadOnly"
          (selectedElementsChanged)="onSelectedEnginesChanged($event)"
          (save)="onEngineSave($event)"
          (isEditing)="onIsEditingChange($event)" />
      </p-floatlabel>
    </ng-container>
  </ng-template>
</bia-form>
