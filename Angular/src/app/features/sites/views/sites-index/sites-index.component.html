<div>
  <div fxLayout fxLayout.xs="column" fxLayoutWrap="wrap">
    <app-site-filter
      [hidden]="!showFilter"
      [fxFlexValue]="25"
      [userOptions]="userOptions$ | async"
      (searchUsers)="onSearchUsers($event)"
      (filter)="onFilter($event)"
      (closeFilter)="onCloseFilter()"
    ></app-site-filter>
    <div fxFlex="100">
      <bia-table-header
      [headerTitle]="'site.listOf' | translate"
      [canAdd]="canAdd"
      [canDelete]="canDelete"
      [canExportCSV]="false"
      [showBtnFilter]="true"
      [showFilter]="showFilter"
      [haveFilter]="haveFilter"
      (openFilter)="onOpenFilter()"
      (create)="onCreate()"
      (delete)="onDelete()"
      [selectedElements]="selectedSites">
        <ng-template pTemplate="actionOnSelected">
          <button
          pButton
          [disabled]="selectedSites?.length !== 1"
          *ngIf="canEdit"
          class="p-button-outlined"
          label="{{ 'site.edit' | translate }}"
          (click)="onEdit()"></button>
        </ng-template>
      </bia-table-header>
      <bia-table-controller
        [defaultPageSize]="defaultPageSize"
        [length]="totalCount$ | async"
        [columns]="columns"
        [columnToDisplays]="displayedColumns"
        (displayedColumnsChange)="displayedColumnsChanged($event)"
        (filter)="searchGlobalChanged($event)"
        (pageSizeChange)="onPageSizeChange($event)"
        (toggleSearch)="onToggleSearch()"
        (viewChange)="onViewChange($event)"
      ></bia-table-controller>
      <bia-table
        [elements]="sites$ | async"
        [totalRecord]="totalCount$ | async"
        [columnToDisplays]="displayedColumns"
        [pageSize]="pageSize"
        [configuration]="tableConfiguration"
        [showColSearch]="showColSearch"
        [globalSearchValue]="globalSearchValue"
        [canClickRow]="canManageMembers"
        [canSelectElement]="canDelete"
        [loading]="loading$ | async"
        (clickRow)="onManageMember($event)"
        (loadLazy)="onLoadLazy($event)"
        [viewPreference]="viewPreference"
        [advancedFilter]="advancedFilter"
        (selectedElementsChanged)="onSelectedElementsChanged($event)"
      ></bia-table>
    </div>
  </div>
  <!-- begin popup mode -->
  <app-site-edit-dialog></app-site-edit-dialog>
  <app-site-new-dialog></app-site-new-dialog>
  <!-- end popup mode -->
</div>