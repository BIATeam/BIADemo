<div class="layout-menu-profile">
  <button
    (click)="toggleMenu()"
    pTooltip="Profile"
    [tooltipDisabled]="isTooltipDisabled">
    <img
      *ngIf="layoutService.config().showAvatar"
      [src]="avatarUrl"
      (error)="onImgError()"
      alt="avatar"
      class="avatar" />
    <span class="text-start">
      <strong>{{ displayName }}</strong>
    </span>
    <span [innerHTML]="menuProfileHtml"></span>
    <i class="layout-menu-profile-toggler pi pi-fw pi-angle-down"></i>
  </button>

  <div
    *ngIf="menuProfileActive"
    class="overflow-y"
    [@menu]="
      isHorizontal && !layoutService.state.isSmallScreen ? 'overlay' : 'inline'
    ">
    @if (
      !layoutService.state.isSmallScreen &&
      (layoutService.isHorizontal() ||
        layoutService.isSlim() ||
        layoutService.isSlimPlus() ||
        layoutService.isDrawer())
    ) {
      <p-dialog
        header="{{ 'bia.settings' | translate }}"
        [focusOnShow]="false"
        [(visible)]="menuProfileActive"
        [modal]="true"
        [closable]="true"
        [responsive]="true"
        [maximizable]="false"
        [closeOnEscape]="true"
        [contentStyle]="{ overflow: 'auto' }">
        <bia-ultima-config
          [supportedLangs]="supportedLangs"></bia-ultima-config>
      </p-dialog>
    } @else {
      <bia-ultima-config [supportedLangs]="supportedLangs"></bia-ultima-config>
    }
  </div>
</div>
