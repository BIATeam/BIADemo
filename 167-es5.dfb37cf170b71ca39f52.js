!function(){function t(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var i,o,a=[],r=!0,c=!1;try{for(e=e.call(t);!(r=(i=e.next()).done)&&(a.push(i.value),!n||a.length!==n);r=!0);}catch(l){c=!0,o=l}finally{try{r||null==e.return||e.return()}finally{if(c)throw o}}return a}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function c(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var e,i=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return l(this,e)}}function l(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function f(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,n,e){return n&&f(t.prototype,n),e&&f(t,e),t}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[167],{49457:function(t,n){var e,i;void 0!==(i="function"==typeof(e=function(){"use strict";function n(t,n,e){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){r(i.response,n,e)},i.onerror=function(){console.error("could not download file")},i.send()}function e(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch(e){}return 200<=n.status&&299>=n.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,r){var c=o.URL||o.webkitURL,l=document.createElement("a");l.download=a=a||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):e(l.href)?n(t,a,r):i(l,l.target="_blank")):(l.href=c.createObjectURL(t),setTimeout(function(){c.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,a){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,n){return void 0===n?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),o);else if(e(t))n(t,o,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){i(r)})}}:function(t,e,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var c="application/octet-stream"===t.type,l=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||c&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var f=o.URL||o.webkitURL,d=f.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?e.apply(n,[]):e)&&(t.exports=i)},16249:function(t,n,e){"use strict";e.d(n,{n:function(){return l}});var i,o=e(39083),a=e(92340),r=e(68307),c=e(37716),l=((i=function(){function t(n){u(this,t),this.authService=n}return d(t,[{key:"canActivate",value:function(t,n){return this.authService.hasPermissionObs(t.data.permission).pipe((0,r.b)(function(t){!0!==t&&(window.location.href=a.N.urlErrorPage+"?num=403")}))}}]),t}()).\u0275fac=function(t){return new(t||i)(c.LFG(o.e))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},11466:function(t,n,e){"use strict";e.d(n,{P:function(){return o}});var i=e(16244),o=function(){function t(){u(this,t)}return d(t,null,[{key:"Clone",value:function(t){return t?Object.assign({},t):null}},{key:"Differential",value:function(t,n){var e=[];if(n&&Array.isArray(n)){var o=n.filter(function(n){return!t||!t.map(function(t){return t.id}).includes(n.id)}).map(function(t){return Object.assign(Object.assign({},t),{dtoState:i.e.Deleted})});o&&(e=e.concat(o))}if(t){var a=null==t?void 0:t.filter(function(t){return!n||!n.map(function(t){return t.id}).includes(t.id)}).map(function(t){return Object.assign(Object.assign({},t),{dtoState:i.e.Added})});a&&(e=e.concat(a))}return e}}]),t}()},82762:function(t,n,e){"use strict";e.d(n,{b:function(){return i}});var i=(0,e(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},11936:function(t,n,e){"use strict";e.d(n,{p:function(){return x}});var i,o=e(91601),r=e(86710),l=e(65448),s=e(25917),f=e(92996),d=e(43190),p=e(88002),h=e(5304),g=e(74147),v=e(37716),y=((i=function(t){a(e,t);var n=c(e);function e(t){return u(this,e),n.call(this,t,"Roles")}return e}(g.Z)).\u0275fac=function(t){return new(t||i)(v.LFG(v.zs3))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i),m=e(96875),b=e(42),w=function(){var t=function t(n,e,i){var a=this;u(this,t),this.actions$=n,this.roleDas=e,this.biaMessageService=i,this.loadAll$=(0,o.GW)(function(){return a.actions$.pipe((0,o.l4)(m.E.loadAll),(0,f.j)("teamTypeId"),(0,d.w)(function(t){return a.roleDas.getList({endpoint:"allOptions?teamTypeId="+t}).pipe((0,p.U)(function(t){return m.E.loadAllSuccess({roles:t})}),(0,h.K)(function(t){return a.biaMessageService.showError(),(0,s.of)(m.E.failure({error:t}))}))}))})};return t.\u0275fac=function(n){return new(n||t)(v.LFG(o.eX),v.LFG(y),v.LFG(b.X))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac}),t}(),x=function(){var t=function t(){u(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=v.oAB({type:t}),t.\u0275inj=v.cJS({providers:[],imports:[[r.Aw.forFeature("domain-role-options",l.ll),o.sQ.forFeature([w])]]}),t}()},65448:function(t,n,e){"use strict";e.d(n,{wA:function(){return d},ll:function(){return s}});var i=e(80273),o=e(86710),a=e(96875),r=(0,i.H)({selectId:function(t){return t.id},sortComparer:!1}),c=r.getInitialState({}),l=(0,o.Lq)(c,(0,o.on)(a.E.loadAllSuccess,function(t,n){var e=n.roles;return r.setAll(e,t)}));function s(t,n){return(0,o.UY)({roleOptions:l})(t,n)}var u=(0,o.ZF)("domain-role-options"),f=(0,o.P1)(u,function(t){return t.roleOptions}),d=r.getSelectors(f).selectAll},96875:function(t,n,e){"use strict";e.d(n,{E:function(){return i}});var i,o,a=e(86710);(o=i||(i={})).loadAll=(0,a.PH)("[Domain Role Options] Load all",(0,a.Ky)()),o.loadAllSuccess=(0,a.PH)("[Domain Role Options] Load all success",(0,a.Ky)()),o.failure=(0,a.PH)("[Domain Role Options] Failure",(0,a.Ky)())},67167:function(e,i,r){"use strict";r.r(i),r.d(i,{NotificationModule:function(){return qe}});var l,s,f=r(94666),p=r(86710),h=r(91601),g=r(25917),v=r(92996),y=r(43190),m=r(88002),b=r(5304),w=r(94612),x=r(57057);(s=l||(l={})).loadAllByPost=(0,p.PH)("[Notifications] Load all by post",(0,p.Ky)()),s.load=(0,p.PH)("[Notifications] Load",(0,p.Ky)()),s.create=(0,p.PH)("[Notifications] Create",(0,p.Ky)()),s.update=(0,p.PH)("[Notifications] Update",(0,p.Ky)()),s.remove=(0,p.PH)("[Notifications] Remove",(0,p.Ky)()),s.multiRemove=(0,p.PH)("[Notifications] Multi Remove",(0,p.Ky)()),s.loadAllByPostSuccess=(0,p.PH)("[Notifications] Load all by post success",(0,p.Ky)()),s.loadSuccess=(0,p.PH)("[Notifications] Load success",(0,p.Ky)()),s.failure=(0,p.PH)("[Notifications] Failure",(0,p.Ky)());var S=r(74147),A=r(37716),Z=function(){var t=function(t){a(e,t);var n=c(e);function e(t){return u(this,e),n.call(this,t,"Notifications")}return e}(S.Z);return t.\u0275fac=function(n){return new(n||t)(A.LFG(A.zs3))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),C=r(80273),T=(0,C.H)({selectId:function(t){return t.id},sortComparer:!1}),O=T.getInitialState({totalCount:0,currentNotification:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),L=(0,p.Lq)(O,(0,p.on)(l.loadAllByPost,function(t,n){return o(n),Object.assign(Object.assign({},t),{loadingGetAll:!0})}),(0,p.on)(l.load,function(t){return Object.assign(Object.assign({},t),{loadingGet:!0})}),(0,p.on)(l.loadAllByPostSuccess,function(t,n){var e=n.result,i=n.event,o=T.setAll(e.data,t);return o.totalCount=e.totalCount,o.lastLazyLoadEvent=i,o.loadingGetAll=!1,o}),(0,p.on)(l.loadSuccess,function(t,n){var e=n.notification;return e.data=JSON.parse(e.jData),Object.assign(Object.assign({},t),{currentNotification:e,loadingGet:!1})}),(0,p.on)(l.failure,function(t,n){return o(n),Object.assign(Object.assign({},t),{loadingGetAll:!1,loadingGet:!1})}));function N(t,n){return(0,p.UY)({notifications:L})(t,n)}var k,M=(0,p.ZF)("notifications"),q=(0,p.P1)(M,function(t){return t.notifications}),I=(0,p.P1)(q,function(t){return t.totalCount}),J=(0,p.P1)(q,function(t){return t.currentNotification}),D=(0,p.P1)(q,function(t){return t.lastLazyLoadEvent}),Q=(0,p.P1)(q,function(t){return t.loadingGet}),$=(0,p.P1)(q,function(t){return t.loadingGetAll}),U=T.getSelectors(q).selectAll,Y=r(82762),B=r(42),F=function(){var t=function t(e,i,o,a){var r=this;u(this,t),this.actions$=e,this.notificationDas=i,this.biaMessageService=o,this.store=a,this.loadAllByPost$=(0,h.GW)(function(){return r.actions$.pipe((0,h.l4)(l.loadAllByPost),(0,v.j)("event"),(0,y.w)(function(t){return r.notificationDas.getListByPost({event:t}).pipe((0,m.U)(function(n){return l.loadAllByPostSuccess({result:n,event:t})}),(0,b.K)(function(t){return r.biaMessageService.showError(),(0,g.of)(l.failure({error:t}))}))}))}),this.load$=(0,h.GW)(function(){return r.actions$.pipe((0,h.l4)(l.load),(0,v.j)("id"),(0,y.w)(function(t){return r.notificationDas.get({id:t}).pipe((0,m.U)(function(t){return l.loadSuccess({notification:t})}),(0,b.K)(function(t){return r.biaMessageService.showError(),(0,g.of)(l.failure({error:t}))}))}))}),this.create$=(0,h.GW)(function(){return r.actions$.pipe((0,h.l4)(l.create),(0,v.j)("notification"),(0,w.b)(function(t){return(0,g.of)(t).pipe((0,x.M)(r.store.select(D)))}),(0,y.w)(function(e){var i=n(e,2),o=i[0],a=i[1];return r.notificationDas.post({item:o}).pipe((0,m.U)(function(){return r.biaMessageService.showAddSuccess(),t.useSignalR?(0,Y.b)():l.loadAllByPost({event:a})}),(0,b.K)(function(t){return r.biaMessageService.showError(),(0,g.of)(l.failure({error:t}))}))}))}),this.update$=(0,h.GW)(function(){return r.actions$.pipe((0,h.l4)(l.update),(0,v.j)("notification"),(0,w.b)(function(t){return(0,g.of)(t).pipe((0,x.M)(r.store.select(D)))}),(0,y.w)(function(e){var i=n(e,2),o=i[0],a=i[1];return r.notificationDas.put({item:o,id:o.id}).pipe((0,m.U)(function(){return r.biaMessageService.showUpdateSuccess(),t.useSignalR?(0,Y.b)():l.loadAllByPost({event:a})}),(0,b.K)(function(t){return r.biaMessageService.showError(),(0,g.of)(l.failure({error:t}))}))}))}),this.destroy$=(0,h.GW)(function(){return r.actions$.pipe((0,h.l4)(l.remove),(0,v.j)("id"),(0,w.b)(function(t){return(0,g.of)(t).pipe((0,x.M)(r.store.select(D)))}),(0,y.w)(function(e){var i=n(e,2),o=i[0],a=i[1];return r.notificationDas.delete({id:o}).pipe((0,m.U)(function(){return r.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,Y.b)():l.loadAllByPost({event:a})}),(0,b.K)(function(t){return r.biaMessageService.showError(),(0,g.of)(l.failure({error:t}))}))}))}),this.multiDestroy$=(0,h.GW)(function(){return r.actions$.pipe((0,h.l4)(l.multiRemove),(0,v.j)("ids"),(0,w.b)(function(t){return(0,g.of)(t).pipe((0,x.M)(r.store.select(D)))}),(0,y.w)(function(e){var i=n(e,2),o=i[0],a=i[1];return r.notificationDas.deletes({ids:o}).pipe((0,m.U)(function(){return r.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,Y.b)():l.loadAllByPost({event:a})}),(0,b.K)(function(t){return r.biaMessageService.showError(),(0,g.of)(l.failure({error:t}))}))}))})};return t.useSignalR=!1,t.\u0275fac=function(n){return new(n||t)(A.LFG(h.eX),A.LFG(Z),A.LFG(B.X),A.LFG(p.yh))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac}),t}(),E=r(75319),P=r(88385),_=r(79090),R=r(40136),j=r(39083),H=r(49457),z=r(38042),G=r(29206),K=r(28049),V=r(59142),X=r(28731),W=function(){var t=function(){function t(n,e,i){u(this,t),this.store=n,this.signalRService=e,this.authService=i}return d(t,[{key:"initialize",value:function(){var t=this;this.store.select(X.qX).subscribe(function(n){t.myTeams=n}),console.log("%c [Notifications] Register SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-notifications",function(n){var e=JSON.parse(n);t.IsInMyDisplay(e)&&t.store.select(D).pipe((0,K.P)()).subscribe(function(n){console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),t.store.dispatch(l.loadAllByPost({event:n}))})}),this.signalRService.addMethod("refresh-notifications-several",function(n){JSON.parse(n).some(function(n){return t.IsInMyDisplay(n)})&&t.store.select(D).pipe((0,K.P)()).subscribe(function(n){console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),t.store.dispatch(l.loadAllByPost({event:n}))})}),this.targetedFeature={featureName:"notifications"},this.signalRService.joinGroup(this.targetedFeature)}},{key:"IsInMyDisplay",value:function(t){var n=this,e=this.authService.getAdditionalInfos(),i=!t.notifiedUsers||0===t.notifiedUsers.length||t.notifiedUsers.some(function(t){return t.id===e.userInfo.id}),o=!t.notifiedTeams||0===t.notifiedTeams.length||t.notifiedTeams.some(function(t){return n.myTeams.some(function(n){return n.id===t.id&&(!(t.roles&&t.roles.length>0)||t.roles.some(function(t){return n.roles.some(function(n){return n.id===t.id})}))})});return i&&o}},{key:"destroy",value:function(){console.log("%c [Notifications] Unregister SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-notifications"),this.signalRService.leaveGroup(this.targetedFeature)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.LFG(p.yh),A.LFG(V.Y),A.LFG(j.e))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),tt=r(46468),nt=r(9112);!function(t){t.loadAll=(0,p.PH)("[Domain Language Options] Load all"),t.loadAllSuccess=(0,p.PH)("[Domain Language Options] Load all success",(0,p.Ky)()),t.failure=(0,p.PH)("[Domain Language Options] Failure",(0,p.Ky)())}(k||(k={}));var et=(0,C.H)({selectId:function(t){return t.id},sortComparer:!1}),it=et.getInitialState({}),ot=(0,p.Lq)(it,(0,p.on)(k.loadAllSuccess,function(t,n){var e=n.languages;return et.setAll(e,t)}));function at(t,n){return(0,p.UY)({languageOptions:ot})(t,n)}var rt,ct=(0,p.ZF)("domain-language-options"),lt=(0,p.P1)(ct,function(t){return t.languageOptions}),st=et.getSelectors(lt).selectAll;!function(t){t.loadAll=(0,p.PH)("[Domain Notification Type Options] Load all"),t.loadAllSuccess=(0,p.PH)("[Domain Notification Type Options] Load all success",(0,p.Ky)()),t.failure=(0,p.PH)("[Domain Notification Type Options] Failure",(0,p.Ky)())}(rt||(rt={}));var ut=(0,C.H)({selectId:function(t){return t.id},sortComparer:!1}),ft=ut.getInitialState({}),dt=(0,p.Lq)(ft,(0,p.on)(rt.loadAllSuccess,function(t,n){var e=n.notificationTypes;return ut.setAll(e,t)}));function pt(t,n){return(0,p.UY)({notificationTypeOptions:dt})(t,n)}var ht=(0,p.ZF)("domain-notification-type-options"),gt=(0,p.P1)(ht,function(t){return t.notificationTypeOptions}),vt=ut.getSelectors(gt).selectAll,yt=r(65448),mt=r(96875),bt=r(23913),wt=r(76048),xt=r(94529),St=function(){var t=function(){function t(n){u(this,t),this.store=n,this.notificationTypeOptions$=this.store.select(vt),this.roleOptions$=this.store.select(yt.wA),this.userOptions$=this.store.select(bt.yp),this.languageOptions$=this.store.select(st),this.dictOptionDtos$=(0,nt.aj)([this.notificationTypeOptions$,this.roleOptions$,this.userOptions$]).pipe((0,m.U)(function(t){return[new xt.b("type",t[0]),new xt.b("notifiedRoles",t[1]),new xt.b("notifiedUsers",t[2]),new xt.b("createdBy",t[2])]}))}return d(t,[{key:"loadAllOptions",value:function(){this.store.dispatch(rt.loadAll()),this.store.dispatch(mt.E.loadAll({teamTypeId:R.k0.Site})),this.store.dispatch(wt.d.loadAll()),this.store.dispatch(k.loadAll())}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.LFG(p.yh))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),At=r(13653),Zt=r(81780),Ct=r(35618),Tt=r(81606),Ot=r(76743),Lt=r(38583),Nt=r(3679),kt=r(11466),Mt=r(86320),qt=r(70667),It=r(33013),Jt=r(13928),Dt=r(88030),Qt=r(50103),$t=r(36949),Ut=r(12332),Yt=r(88598),Bt=r(45862),Ft=r(49067);function Et(t,n){1&t&&(A.TgZ(0,"th",10),A._UZ(1,"p-tableHeaderCheckbox"),A.qZA())}function Pt(t,n){if(1&t&&(A.TgZ(0,"th",12),A._uU(1),A.ALo(2,"translate"),A._UZ(3,"p-sortIcon",13),A.qZA()),2&t){var e=A.oxw().$implicit;A.Q6J("pSortableColumn",e.field),A.xp6(1),A.hij(" ",A.lcZ(2,3,null==e?null:e.header)," "),A.xp6(2),A.Q6J("field",e.field)}}function _t(t,n){if(1&t&&(A.TgZ(0,"th"),A._uU(1),A.ALo(2,"translate"),A.qZA()),2&t){var e=A.oxw().$implicit;A.xp6(1),A.hij(" ",A.lcZ(2,1,null==e?null:e.header)," ")}}function Rt(t,n){if(1&t&&(A.ynx(0),A.YNc(1,Pt,4,5,"th",11),A.YNc(2,_t,3,3,"th",9),A.BQk()),2&t){var e=n.$implicit;A.xp6(1),A.Q6J("ngIf",!0===(null==e?null:e.isSortable)),A.xp6(1),A.Q6J("ngIf",!0!==(null==e?null:e.isSortable))}}function jt(t,n){1&t&&A._UZ(0,"th")}var Ht=function(t){return{"p-state-filled":t}};function zt(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"span",17),A.TgZ(1,"input",18),A.NdJ("input",function(t){A.CHM(e);var n=A.oxw().$implicit;return A.oxw(3),A.MAs(1).filter(t.target.value,n.field,n.filterMode)}),A.ALo(2,"translate"),A.qZA(),A.qZA()}if(2&t){var i=A.oxw().$implicit;A.oxw(3);var o=A.MAs(1);A.xp6(1),A.s9C("type","Number"===i.type?"number":"text"),A.s9C("placeholder",void 0!==i.searchPlaceholder?i.searchPlaceholder:!0===i.isDate?A.lcZ(2,4,"bia.dateIso8601"):""),A.Q6J("value",null==o.filters[i.field]?null:o.filters[i.field].value)("ngClass",A.VKq(6,Ht,""!==(null==o.filters[i.field]?null:o.filters[i.field].value)))}}function Gt(t,n){if(1&t&&(A.TgZ(0,"th",15),A.YNc(1,zt,3,8,"span",16),A.qZA()),2&t){var e=n.$implicit;A.Q6J("ngSwitch",e.field),A.xp6(1),A.Q6J("ngIf",!0===e.isSearchable)}}function Kt(t,n){if(1&t&&(A.TgZ(0,"tr"),A.YNc(1,jt,1,0,"th",9),A.YNc(2,Gt,2,2,"th",14),A.qZA()),2&t){var e=A.oxw().$implicit,i=A.oxw(2);A.xp6(1),A.Q6J("ngIf",i.canSelectElement),A.xp6(1),A.Q6J("ngForOf",e)}}function Vt(t,n){if(1&t&&(A.TgZ(0,"tr"),A.YNc(1,Et,2,0,"th",7),A.YNc(2,Rt,3,2,"ng-container",8),A.qZA(),A.YNc(3,Kt,3,2,"tr",9)),2&t){var e=n.$implicit,i=A.oxw(2);A.xp6(1),A.Q6J("ngIf",i.canSelectElement),A.xp6(1),A.Q6J("ngForOf",e),A.xp6(1),A.Q6J("ngIf",i.showColSearch)}}function Xt(t,n){if(1&t&&A._UZ(0,"p-tableCheckbox",23),2&t){var e=A.oxw(2).$implicit;A.Q6J("value",e)}}function Wt(t,n){1&t&&A._UZ(0,"i",24)}function tn(t,n){if(1&t&&(A.TgZ(0,"td"),A.YNc(1,Xt,1,1,"p-tableCheckbox",21),A.YNc(2,Wt,1,0,"i",22),A.qZA()),2&t){var e=A.oxw().$implicit,i=A.oxw(2);A.xp6(1),A.Q6J("ngIf",!0!==i.isFooter(e)&&e.id>0),A.xp6(1),A.Q6J("ngIf",!0===i.isFooter(e))}}function nn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"input",29),A.NdJ("change",function(){return A.CHM(e),A.oxw(6).onChange()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(3).$implicit;A.xp6(1),A.Q6J("formControlName",i.field)}}function en(t,n){1&t&&(A.TgZ(0,"span",30),A._uU(1,"*"),A.qZA())}function on(t,n){if(1&t&&(A.ynx(0,15),A.YNc(1,nn,2,1,"ng-container",27),A.BQk(),A.YNc(2,en,2,0,"span",28)),2&t){var e=A.oxw(2).$implicit,i=A.oxw(3);A.Q6J("ngSwitch",e.field),A.xp6(2),A.Q6J("ngIf",!0===i.isRequired(e.field))}}function an(t,n){1&t&&A.YNc(0,on,3,2,"ng-template",26)}function rn(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.BQk()),2&t){var e=A.oxw(3).$implicit,i=A.oxw().$implicit;A.xp6(1),A.hij(" ",i[e.field]," ")}}function cn(t,n){if(1&t&&(A.ynx(0,15),A.YNc(1,rn,2,1,"ng-container",27),A.BQk()),2&t){var e=A.oxw(2).$implicit;A.Q6J("ngSwitch",e.field)}}function ln(t,n){1&t&&A.YNc(0,cn,2,1,"ng-template",31)}var sn=function(){return{width:"100%"}};function un(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-dropdown",35),A.NdJ("onChange",function(){return A.CHM(e),A.oxw(7).onChange()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit,o=A.oxw(3);A.xp6(1),A.Akn(A.DdM(4,sn)),A.Q6J("formControlName",i.field)("options",o.getOptionDto(i.field))}}function fn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-multiSelect",36),A.NdJ("onChange",function(){return A.CHM(e),A.oxw(7).onChange()})("onPanelShow",function(){return A.CHM(e),A.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return A.CHM(e),A.oxw(7).onPanelHideMultiSelect()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit,o=A.oxw(3);A.xp6(1),A.Akn(A.DdM(4,sn)),A.Q6J("formControlName",i.field)("options",o.getOptionDto(i.field))}}function dn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-checkbox",37),A.NdJ("onChange",function(){return A.CHM(e),A.oxw(7).onChange()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Q6J("binary",!0)("formControlName",i.field)}}function pn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"input",38),A.NdJ("change",function(){return A.CHM(e),A.oxw(7).onChange()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Q6J("formControlName",i.field)}}function hn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-calendar",39),A.NdJ("onShow",function(){return A.CHM(e),A.oxw(7).onShowCalendar()})("onSelect",function(){return A.CHM(e),A.oxw(7).onChange()})("onBlur",function(){return A.CHM(e),A.oxw(7).onBlurCalendar()})("onClose",function(){return A.CHM(e),A.oxw(7).onCloseCalendar()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Akn(A.DdM(5,sn)),A.Q6J("formControlName",i.field)("showButtonBar",!0)("inputStyle",A.DdM(6,sn))}}function gn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-calendar",40),A.NdJ("onShow",function(){return A.CHM(e),A.oxw(7).onShowCalendar()})("onSelect",function(){return A.CHM(e),A.oxw(7).onChange()})("onBlur",function(){return A.CHM(e),A.oxw(7).onBlurCalendar()})("onClose",function(){return A.CHM(e),A.oxw(7).onCloseCalendar()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Akn(A.DdM(5,sn)),A.Q6J("formControlName",i.field)("inputStyle",A.DdM(6,sn))("timeOnly",!0)}}function vn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-calendar",41),A.NdJ("onShow",function(){return A.CHM(e),A.oxw(7).onShowCalendar()})("onSelect",function(){return A.CHM(e),A.oxw(7).onChange()})("onBlur",function(){return A.CHM(e),A.oxw(7).onBlurCalendar()})("onClose",function(){return A.CHM(e),A.oxw(7).onCloseCalendar()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Akn(A.DdM(5,sn)),A.Q6J("formControlName",i.field)("inputStyle",A.DdM(6,sn))("timeOnly",!0)}}function yn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-calendar",42),A.NdJ("onShow",function(){return A.CHM(e),A.oxw(7).onShowCalendar()})("onSelect",function(){return A.CHM(e),A.oxw(7).onChange()})("onBlur",function(){return A.CHM(e),A.oxw(7).onBlurCalendar()})("onClose",function(){return A.CHM(e),A.oxw(7).onCloseCalendar()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Akn(A.DdM(5,sn)),A.Q6J("formControlName",i.field)("inputStyle",A.DdM(6,sn))("timeOnly",!0)}}function mn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"p-calendar",43),A.NdJ("onShow",function(){return A.CHM(e),A.oxw(7).onShowCalendar()})("onSelect",function(){return A.CHM(e),A.oxw(7).onChange()})("onBlur",function(){return A.CHM(e),A.oxw(7).onBlurCalendar()})("onClose",function(){return A.CHM(e),A.oxw(7).onCloseCalendar()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Akn(A.DdM(5,sn)),A.Q6J("formControlName",i.field)("showButtonBar",!0)("inputStyle",A.DdM(6,sn))}}function bn(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.TgZ(1,"input",44),A.NdJ("change",function(){return A.CHM(e),A.oxw(7).onChange()}),A.qZA(),A.BQk()}if(2&t){var i=A.oxw(4).$implicit;A.xp6(1),A.Q6J("maxlength",i.maxlength)("formControlName",i.field)}}function wn(t,n){1&t&&(A.TgZ(0,"span",30),A._uU(1,"*"),A.qZA())}function xn(t,n){if(1&t&&(A.ynx(0,15),A.YNc(1,un,2,5,"ng-container",34),A.YNc(2,fn,2,5,"ng-container",34),A.YNc(3,dn,2,2,"ng-container",34),A.YNc(4,pn,2,1,"ng-container",34),A.YNc(5,hn,2,7,"ng-container",34),A.YNc(6,gn,2,7,"ng-container",34),A.YNc(7,vn,2,7,"ng-container",34),A.YNc(8,yn,2,7,"ng-container",34),A.YNc(9,mn,2,7,"ng-container",34),A.YNc(10,bn,2,2,"ng-container",27),A.BQk(),A.YNc(11,wn,2,0,"span",28)),2&t){var e=A.oxw(3).$implicit,i=A.oxw(3);A.Q6J("ngSwitch",e.type),A.xp6(1),A.Q6J("ngSwitchCase","OneToMany"),A.xp6(1),A.Q6J("ngSwitchCase","ManyToMany"),A.xp6(1),A.Q6J("ngSwitchCase","Boolean"),A.xp6(1),A.Q6J("ngSwitchCase","Number"),A.xp6(1),A.Q6J("ngSwitchCase","Date"),A.xp6(1),A.Q6J("ngSwitchCase","Time"),A.xp6(1),A.Q6J("ngSwitchCase","TimeOnly"),A.xp6(1),A.Q6J("ngSwitchCase","TimeSecOnly"),A.xp6(1),A.Q6J("ngSwitchCase","DateTime"),A.xp6(2),A.Q6J("ngIf",!0===i.isRequired(e.field))}}function Sn(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.BQk()),2&t){var e=A.oxw(5).$implicit,i=A.oxw().$implicit;A.xp6(1),A.hij(" ",null==i[e.field]?null:i[e.field].display," ")}}function An(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.BQk()),2&t){var e=A.oxw(5).$implicit,i=A.oxw().$implicit,o=A.oxw(2);A.xp6(1),A.hij(" ",o.formatDisplayName(i[e.field])," ")}}function Zn(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.ALo(2,"formatValue"),A.BQk()),2&t){var e=A.oxw(5).$implicit,i=A.oxw().$implicit;A.xp6(1),A.hij(" ",A.xi3(2,1,i[e.field],e)," ")}}function Cn(t,n){if(1&t&&(A.ynx(0),A.ynx(1,15),A.YNc(2,Sn,2,1,"ng-container",34),A.YNc(3,An,2,1,"ng-container",34),A.YNc(4,Zn,3,4,"ng-container",27),A.BQk(),A.BQk()),2&t){var e=A.oxw(4).$implicit;A.xp6(1),A.Q6J("ngSwitch",e.type),A.xp6(1),A.Q6J("ngSwitchCase","OneToMany"),A.xp6(1),A.Q6J("ngSwitchCase","ManyToMany")}}function Tn(t,n){if(1&t&&A.YNc(0,Cn,5,3,"ng-container",9),2&t){var e=A.oxw(4).$implicit,i=A.oxw(2);A.Q6J("ngIf",!0!==i.isFooter(e))}}function On(t,n){if(1&t&&(A.YNc(0,xn,12,11,"ng-template",32),A.YNc(1,Tn,1,1,"ng-template",null,33,A.W1O)),2&t){var e=A.MAs(2),i=A.oxw(2).$implicit;A.Q6J("ngIf",!0===i.isEditable)("ngIfElse",e)}}function Ln(t,n){1&t&&A.YNc(0,On,3,2,"ng-template",26)}function Nn(t,n){1&t&&(A.TgZ(0,"label"),A._uU(1,"-"),A.qZA())}function kn(t,n){if(1&t&&A.YNc(0,Nn,2,0,"label",9),2&t){var e=A.oxw(3).$implicit;A.Q6J("ngIf",!0===e.isEditable)}}function Mn(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.BQk()),2&t){var e=A.oxw(4).$implicit,i=A.oxw().$implicit;A.xp6(1),A.hij(" ",null==i[e.field]?null:i[e.field].display," ")}}function qn(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.BQk()),2&t){var e=A.oxw(4).$implicit,i=A.oxw().$implicit,o=A.oxw(2);A.xp6(1),A.hij(" ",o.formatDisplayName(i[e.field])," ")}}function In(t,n){1&t&&A._UZ(0,"i",47)}function Jn(t,n){if(1&t&&(A.ynx(0),A.YNc(1,In,1,0,"i",46),A.BQk()),2&t){var e=A.oxw(4).$implicit,i=A.oxw().$implicit;A.xp6(1),A.Q6J("ngIf",!0===i[e.field])}}function Dn(t,n){if(1&t&&(A.ynx(0),A._uU(1),A.ALo(2,"formatValue"),A.BQk()),2&t){var e=A.oxw(4).$implicit,i=A.oxw().$implicit;A.xp6(1),A.hij(" ",A.xi3(2,1,i[e.field],e)," ")}}function Qn(t,n){if(1&t&&(A.ynx(0,15),A.YNc(1,Mn,2,1,"ng-container",34),A.YNc(2,qn,2,1,"ng-container",34),A.YNc(3,Jn,2,1,"ng-container",34),A.YNc(4,Dn,3,4,"ng-container",27),A.BQk()),2&t){var e=A.oxw(3).$implicit;A.Q6J("ngSwitch",e.type),A.xp6(1),A.Q6J("ngSwitchCase","OneToMany"),A.xp6(1),A.Q6J("ngSwitchCase","ManyToMany"),A.xp6(1),A.Q6J("ngSwitchCase","Boolean")}}function $n(t,n){if(1&t&&(A.YNc(0,kn,1,1,"ng-template",32),A.YNc(1,Qn,5,4,"ng-template",null,45,A.W1O)),2&t){var e=A.MAs(2),i=A.oxw(3).$implicit,o=A.oxw(2);A.Q6J("ngIf",!0===o.isFooter(i))("ngIfElse",e)}}function Un(t,n){1&t&&A.YNc(0,$n,3,2,"ng-template",31)}function Yn(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"td",25),A.NdJ("click",function(){A.CHM(e);var t=A.oxw().$implicit;return A.oxw(2).initEditableRow(t)}),A.TgZ(1,"p-cellEditor"),A.YNc(2,an,1,0,void 0,9),A.YNc(3,ln,1,0,void 0,9),A.YNc(4,Ln,1,0,void 0,9),A.YNc(5,Un,1,0,void 0,9),A.qZA(),A.qZA()}if(2&t){var i=n.$implicit,o=A.oxw(3);A.xp6(2),A.Q6J("ngIf",!0===o.isSpecificInput(i.field)),A.xp6(1),A.Q6J("ngIf",!0===o.isSpecificInput(i.field)),A.xp6(1),A.Q6J("ngIf",!0!==o.isSpecificInput(i.field)),A.xp6(1),A.Q6J("ngIf",!0!==o.isSpecificInput(i.field))}}function Bn(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"tr",19),A.NdJ("focusout",function(){return A.CHM(e),A.oxw(2).onFocusout()})("keyup.enter",function(){return A.CHM(e),A.oxw(2).initEditableRow(null)})("keyup.escape",function(){return A.CHM(e),A.oxw(2).cancel()}),A.YNc(1,tn,3,2,"td",9),A.YNc(2,Yn,6,4,"td",20),A.qZA()}if(2&t){var i=n.$implicit,o=n.columns,a=A.oxw(2);A.Q6J("pSelectableRow",!0!==a.isFooter(i)?i:null)("pEditableRow",i),A.xp6(1),A.Q6J("ngIf",a.canSelectElement),A.xp6(1),A.Q6J("ngForOf",o)}}function Fn(t,n){if(1&t&&(A.TgZ(0,"tr"),A.TgZ(1,"td",48),A._uU(2),A.ALo(3,"translate"),A.qZA(),A.qZA()),2&t){var e=n.$implicit;A.xp6(1),A.uIk("colspan",e.length+1),A.xp6(1),A.hij(" ",A.lcZ(3,2,"bia.NoRecordsFound")," ")}}function En(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"p-table",2,3),A.NdJ("onFilter",function(){return A.CHM(e),A.oxw().onFilter()})("onLazyLoad",function(t){return A.CHM(e),A.oxw().onLoadLazy(t)})("onStateSave",function(t){return A.CHM(e),A.oxw().onStateSave(t)})("selectionChange",function(){return A.CHM(e),A.oxw().onSelectionChange()}),A.ALo(2,"async"),A.YNc(3,Vt,4,3,"ng-template",4),A.YNc(4,Bn,3,4,"ng-template",5),A.YNc(5,Fn,4,4,"ng-template",6),A.qZA()}if(2&t){var i=A.oxw();A.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",i.displayedColumns)("value",i.elements)("paginator",i.paginator)("rows",i.pageSize)("totalRecords",i.totalRecord)("lazy",!0)("loading",i.loading&&null!==A.lcZ(2,14,i.showLoading$))("stateStorage","session")("stateKey",i.tableStateKey)("lazyLoadOnInit",i.getLazyLoadOnInit())("sortField",i.sortFieldValue)("sortOrder",i.sortOrderValue)}}var Pn=function(){var t=function(t){a(e,t);var n=c(e);function e(t,i,o,a){var r;return u(this,e),(r=n.call(this,t,i,o,a)).formBuilder=t,r.authService=i,r.biaMessageService=o,r.translateService=a,r.initForm(),r}return d(e,[{key:"initForm",value:function(){var t,n;this.form=this.formBuilder.group({id:[this.element.id],title:[this.element.title,Nt.kI.required],description:[this.element.description,Nt.kI.required],type:[null===(t=this.element.type)||void 0===t?void 0:t.id,Nt.kI.required],read:[this.element.read],createdDate:[this.element.createdDate,Nt.kI.required],createdBy:[null===(n=this.element.createdBy)||void 0===n?void 0:n.id],notifiedUsers:[this.element.notifiedUsers],jData:[this.element.jData]})}},{key:"onSubmit",value:function(){var t;if(this.form.valid){var n=this.form.value;n.id=n.id>0?n.id:0,n.read=!!n.read&&n.read,n.createdBy=kt.P.Clone(n.createdBy),n.notifiedUsers=kt.P.Differential(n.notifiedUsers,null===(t=this.element)||void 0===t?void 0:t.notifiedUsers),n.type=Object.assign({},n.type),this.save.emit(n),this.form.reset()}}}]),e}(Mt.l);return t.\u0275fac=function(n){return new(n||t)(A.Y36(Nt.qu),A.Y36(j.e),A.Y36(B.X),A.Y36(Zt.sK))},t.\u0275cmp=A.Xpm({type:t,selectors:[["bia-notification-table"]],features:[A.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(t,n){1&t&&(A.TgZ(0,"form",0),A.YNc(1,En,6,16,"p-table",1),A.qZA()),2&t&&(A.Q6J("formGroup",n.form),A.xp6(1),A.Q6J("ngIf",n.configuration))},directives:[Nt._Y,Nt.JL,Nt.sg,Lt.O5,qt.iA,It.jx,Lt.sg,qt.Mo,qt.lQ,qt.fz,Lt.RF,Jt.o,Lt.mk,Dt.oO,qt.Ei,qt.D$,qt.UA,qt.YL,Lt.ED,Nt.Fj,Nt.JJ,Nt.u,Lt.n9,Qt.Lt,$t.NU,Ut.XZ,Nt.wV,Yt.f,Bt.D,Nt.nD],pipes:[Lt.Ov,Zt.X$,Ft.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),t}();function _n(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"bia-table",6),A.NdJ("clickRow",function(t){return A.CHM(e),A.oxw().onDetail(t)})("loadLazy",function(t){return A.CHM(e),A.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return A.CHM(e),A.oxw().onSelectedElementsChanged(t)}),A.ALo(1,"async"),A.ALo(2,"async"),A.ALo(3,"async"),A.qZA()}if(2&t){var i=A.oxw();A.Q6J("elements",A.lcZ(1,12,i.notifications$))("totalRecord",A.lcZ(2,14,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canClickRow",i.canEdit)("canSelectElement",i.canDelete)("loading",A.lcZ(3,16,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}function Rn(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"bia-notification-table",7),A.NdJ("loadLazy",function(t){return A.CHM(e),A.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return A.CHM(e),A.oxw().onSelectedElementsChanged(t)})("save",function(t){return A.CHM(e),A.oxw().onSave(t)}),A.ALo(1,"async"),A.ALo(2,"async"),A.ALo(3,"async"),A.ALo(4,"async"),A.qZA()}if(2&t){var i=A.oxw();A.Q6J("elements",A.lcZ(1,14,i.notifications$))("dictOptionDtos",A.lcZ(2,16,i.notificationOptionsService.dictOptionDtos$))("totalRecord",A.lcZ(3,18,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canEdit",i.canEdit)("canAdd",i.canAdd)("canSelectElement",i.canDelete)("loading",A.lcZ(4,20,i.loading$))("viewPreference",i.viewPreference)("tableStateKey",i.tableStateKey)}}var jn=function(){var n=function(){function n(t,e,i,o,a,r,c,l,s){u(this,n),this.store=t,this.router=e,this.activatedRoute=i,this.authService=o,this.notificationDas=a,this.translateService=r,this.biaTranslationService=c,this.notificationsSignalRService=l,this.notificationOptionsService=s,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!0,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new E.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=R.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"notificationsGrid":void 0}return d(n,[{key:"ngOnInit",value:function(){var t=this;this.parentIds=[],this.sub=new E.w,this.initTableConfiguration(),this.setPermissions(),this.notifications$=this.store.select(U),this.totalCount$=this.store.select(I),this.loading$=this.store.select($),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange&&this.sub.add(this.biaTranslationService.currentCulture$.pipe((0,At.T)(1)).subscribe(function(n){t.onLoadLazy(t.notificationListComponent.getLazyLoadMetadata())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe(),this.OnHide()}},{key:"OnDisplay",value:function(){this.useView&&this.store.dispatch((0,tt.Tx)()),this.useSignalR&&(this.notificationsSignalRService.initialize(),F.useSignalR=!0)}},{key:"OnHide",value:function(){this.useSignalR&&(F.useSignalR=!1,this.notificationsSignalRService.destroy())}},{key:"onCreate",value:function(){this.useCalcMode||this.router.navigate(["./create"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(t){this.useCalcMode||this.router.navigate(["./"+t+"/edit"],{relativeTo:this.activatedRoute})}},{key:"onDetail",value:function(t){this.useCalcMode||this.router.navigate(["./"+t+"/detail"],{relativeTo:this.activatedRoute})}},{key:"onSave",value:function(t){this.useCalcMode&&((null==t?void 0:t.id)>0?this.canEdit&&this.store.dispatch(l.update({notification:t})):this.canAdd&&this.store.dispatch(l.create({notification:t})))}},{key:"onDelete",value:function(){this.selectedNotifications&&this.canDelete&&this.store.dispatch(l.multiRemove({ids:this.selectedNotifications.map(function(t){return t.id})}))}},{key:"onSelectedElementsChanged",value:function(t){this.selectedNotifications=t}},{key:"onPageSizeChange",value:function(t){this.pageSize=t}},{key:"onLoadLazy",value:function(t){var n=Object.assign({parentIds:this.parentIds},t);this.store.dispatch(l.loadAllByPost({event:n}))}},{key:"searchGlobalChanged",value:function(t){this.globalSearchValue=t}},{key:"displayedColumnsChanged",value:function(t){this.displayedColumns=t}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(t){this.viewPreference=t}},{key:"onExportCSV",value:function(){var t=this,n={};this.columns.map(function(e){return n[e.value.split(".")[1]]=t.translateService.instant(e.value)});var e=Object.assign({parentIds:this.parentIds,columns:n},this.notificationListComponent.getLazyLoadMetadata());this.notificationDas.getFile(e).subscribe(function(n){H.saveAs(n,t.translateService.instant("app.notifications")+".csv")})}},{key:"setPermissions",value:function(){this.canEdit=this.authService.hasPermission(G.y.Notification_Update),this.canDelete=this.authService.hasPermission(G.y.Notification_Delete),this.canAdd=this.authService.hasPermission(G.y.Notification_Create)}},{key:"initTableConfiguration",value:function(){var n=this;this.biaTranslationService.currentCultureDateFormat$.subscribe(function(e){n.tableConfiguration={columns:[new _.ML("titleTranslated","notification.title"),new _.ML("descriptionTranslated","notification.description"),Object.assign(new _.ML("type","notification.type.title"),{type:_.d5.OneToMany}),Object.assign(new _.ML("read","notification.read"),{isSearchable:!1,type:_.d5.Boolean}),Object.assign(new _.ML("createdDate","notification.createdDate"),{type:_.d5.Date,formatDate:e.dateFormat}),Object.assign(new _.ML("createdBy","notification.createdBy"),{type:_.d5.OneToMany}),Object.assign(new _.ML("notifiedUsers","notification.notifiedUsers"),{type:_.d5.ManyToMany}),new _.ML("jData","notification.jData")]},n.columns=n.tableConfiguration.columns.map(function(t){return{key:t.field,value:t.header}}),n.displayedColumns=t(n.columns)})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(A.Y36(p.yh),A.Y36(f.F0),A.Y36(f.gz),A.Y36(j.e),A.Y36(Z),A.Y36(Zt.sK),A.Y36(z.P6),A.Y36(W),A.Y36(St))},n.\u0275cmp=A.Xpm({type:n,selectors:[["bia-notifications-index"]],viewQuery:function(t,n){var e;(1&t&&A.Gf(P.$,5),2&t)&&(A.iGM(e=A.CRH())&&(n.notificationListComponent=e.first))},hostVars:2,hostBindings:function(t,n){2&t&&A.ekj("bia-flex",n.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(t,n){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"bia-table-header",2),A.NdJ("create",function(){return n.onCreate()})("exportCSV",function(){return n.onExportCSV()})("delete",function(){return n.onDelete()}),A.ALo(3,"translate"),A.qZA(),A.TgZ(4,"bia-table-controller",3),A.NdJ("displayedColumnsChange",function(t){return n.displayedColumnsChanged(t)})("filter",function(t){return n.searchGlobalChanged(t)})("pageSizeChange",function(t){return n.onPageSizeChange(t)})("toggleSearch",function(){return n.onToggleSearch()})("viewChange",function(t){return n.onViewChange(t)}),A.ALo(5,"async"),A.qZA(),A.YNc(6,_n,4,18,"bia-table",4),A.YNc(7,Rn,5,22,"bia-notification-table",5),A.qZA(),A.qZA()),2&t&&(A.xp6(2),A.Q6J("headerTitle",A.lcZ(3,12,"notification.listOf"))("canAdd",n.canAdd&&!n.useCalcMode)("canDelete",n.canDelete)("canExportCSV",!0)("selectedElements",n.selectedNotifications),A.xp6(2),A.Q6J("defaultPageSize",n.defaultPageSize)("length",A.lcZ(5,14,n.totalCount$))("columns",n.columns)("columnToDisplays",n.displayedColumns)("tableStateKey",n.tableStateKey),A.xp6(2),A.Q6J("ngIf",!n.useCalcMode),A.xp6(1),A.Q6J("ngIf",n.useCalcMode))},directives:[Ct.xw,Ct.yH,Tt.l,Ot.B,Lt.O5,P.$,Pn],pipes:[Zt.X$,Lt.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),n}(),Hn=r(61028),zn=r(16244),Gn=r(80014),Kn=r(44748),Vn=r(4207),Xn=r(46543);function Wn(t,n){if(1&t){var e=A.EpF();A.ynx(0,26),A.TgZ(1,"p-tabPanel",4),A.TgZ(2,"div",27),A._UZ(3,"input",28),A.TgZ(4,"div",5),A.TgZ(5,"div",6),A.TgZ(6,"span",7),A.TgZ(7,"input",29),A.NdJ("change",function(){var t=A.CHM(e).index;return A.oxw().changeTranslation(t)}),A.qZA(),A.TgZ(8,"label"),A.TgZ(9,"span",9),A._uU(10,"*"),A.qZA(),A._uU(11),A.ALo(12,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(13,"div",5),A.TgZ(14,"div",6),A.TgZ(15,"span",7),A.TgZ(16,"input",30),A.NdJ("change",function(){var t=A.CHM(e).index;return A.oxw().changeTranslation(t)}),A.qZA(),A.TgZ(17,"label"),A.TgZ(18,"span",9),A._uU(19,"*"),A.qZA(),A._uU(20),A.ALo(21,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(22,"div",11),A.TgZ(23,"button",31),A.NdJ("click",function(){var t=A.CHM(e).index;return A.oxw().removeTranslation(t)}),A.ALo(24,"translate"),A.qZA(),A.qZA(),A.qZA(),A.BQk()}if(2&t){var i=n.$implicit,o=n.index,a=A.oxw();A.xp6(1),A.Q6J("header",a.labelTranslation(i.value.languageId)),A.xp6(1),A.Q6J("formGroupName",o),A.xp6(9),A.Oqu(A.lcZ(12,5,"notification.title")),A.xp6(9),A.Oqu(A.lcZ(21,7,"notification.description")),A.xp6(3),A.s9C("label",A.lcZ(24,9,"bia.translation.delete"))}}function te(t,n){1&t&&A._UZ(0,"i",36)}var ne=function(){return{width:"100%"}};function ee(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"p-tabPanel",32),A.YNc(1,te,1,0,"ng-template",33),A.TgZ(2,"div",5),A.TgZ(3,"div",6),A.TgZ(4,"span",7),A.TgZ(5,"p-dropdown",34),A.NdJ("onChange",function(){return A.CHM(e),A.oxw().onSelectionLanguage()}),A.qZA(),A.TgZ(6,"label"),A.TgZ(7,"span",9),A._uU(8,"*"),A.qZA(),A._uU(9),A.ALo(10,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(11,"div",11),A.TgZ(12,"button",35),A.NdJ("click",function(){return A.CHM(e),A.oxw().addTranslation()}),A.ALo(13,"translate"),A.qZA(),A.qZA(),A.qZA()}if(2&t){var i=A.oxw();A.xp6(5),A.Akn(A.DdM(10,ne)),A.Q6J("options",i.missingLanguageOptions),A.xp6(4),A.Oqu(A.lcZ(10,6,"bia.translation.language")),A.xp6(3),A.s9C("label",A.lcZ(13,8,"bia.translation.add")),A.Q6J("disabled",!i.selectionLanguage)}}var ie=function(){return{width:"100%"}},oe=function(){var t=function(){function t(n){u(this,t),this.formBuilder=n,this.notification={},this.save=new A.vpe,this.cancel=new A.vpe,this.missingTranslation=!1,this.selectionLanguage=!1,this.initForm()}return d(t,[{key:"ngOnChanges",value:function(t){var n=this;this.notification&&(this.form.reset(),this.notification&&(this.form.patchValue(Object.assign({},this.notification)),this.notificationTranslations.clear(),this.notification.notificationTranslations&&(this.notification.notificationTranslations.forEach(function(t){n.notificationTranslations.push(n.createTranslation(t))}),this.computeMissingTranslation())))}},{key:"initForm",value:function(){var t={id:[this.notification.id],title:[this.notification.title,Nt.kI.required],description:[this.notification.description,Nt.kI.required],type:[this.notification.type,Nt.kI.required],read:[this.notification.read],createdDate:[this.notification.createdDate,Nt.kI.required],createdBy:[this.notification.createdBy],notifiedUsers:[this.notification.notifiedUsers],jData:[this.notification.jData],notificationTranslations:this.formBuilder.array([]),languageToAdd:[]};this.form=this.formBuilder.group(t),this.notificationTranslations=this.form.get("notificationTranslations")}},{key:"onSelectionLanguage",value:function(){this.selectionLanguage=!0}},{key:"createTranslation",value:function(t){return this.formBuilder.group({id:t.id,dtoState:t.dtoState,languageId:t.languageId,description:[t.description,Nt.kI.required],title:[t.title,Nt.kI.required]})}},{key:"addTranslation",value:function(){this.notificationTranslations.push(this.createTranslation({id:0,languageId:this.form.value.languageToAdd.id,title:"",description:"",dtoState:zn.e.Added})),this.computeMissingTranslation()}},{key:"addAllTranslation",value:function(){var t=this;this.missingLanguageOptions.forEach(function(n){return t.notificationTranslations.push(t.createTranslation({id:0,languageId:n.id,title:"",description:"",dtoState:zn.e.Added}))}),this.computeMissingTranslation()}},{key:"removeTranslation",value:function(t){this.notificationTranslations.removeAt(t),this.computeMissingTranslation()}},{key:"changeTranslation",value:function(t){this.notificationTranslations.at(t).value.dtoState===zn.e.Unchanged&&(this.notificationTranslations.at(t).value.dtoState=zn.e.Modified),this.computeMissingTranslation()}},{key:"computeMissingTranslation",value:function(){var t=this;this.missingLanguageOptions=this.languageOptions.filter(function(n){return!t.notificationTranslations.value.find(function(t){return t.languageId===n.id})&&!R.Nf.find(function(t){return t===n.id})}),this.missingTranslation=this.missingLanguageOptions.length>0}},{key:"labelTranslation",value:function(t){var n;return null===(n=this.languageOptions.find(function(n){return n.id===t}))||void 0===n?void 0:n.display}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var n,e;if(this.form.valid){var i=this.form.value;i.id=i.id>0?i.id:0,i.read=!!i.read&&i.read,i.createdBy=kt.P.Clone(i.createdBy),i.notifiedUsers=kt.P.Differential(i.notifiedUsers,null===(n=this.notification)||void 0===n?void 0:n.notifiedUsers),i.type=Object.assign({},i.type),i.notificationTranslations=t.Differential(i.notificationTranslations,null===(e=this.notification)||void 0===e?void 0:e.notificationTranslations),this.save.emit(i),this.form.reset()}}},{key:"lang",value:function(t){console.log(t)}}],[{key:"Differential",value:function(t,n){var e=[];if(n&&Array.isArray(n)){var i=n.filter(function(n){return!t||!t.map(function(t){return t.id}).includes(n.id)}).map(function(t){return Object.assign(Object.assign({},t),{dtoState:zn.e.Deleted})});i&&(e=e.concat(i))}if(t&&Array.isArray(t)){var o=null==t?void 0:t.filter(function(t){return t.dtoState===zn.e.Added||t.dtoState===zn.e.Modified});o&&(e=e.concat(o))}return e}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.Y36(Nt.qu))},t.\u0275cmp=A.Xpm({type:t,selectors:[["bia-notification-form"]],inputs:{notification:"notification",userOptions:"userOptions",roleOptions:"roleOptions",notificationTypeOptions:"notificationTypeOptions",languageOptions:"languageOptions"},outputs:{save:"save",cancel:"cancel"},features:[A.TTD],decls:79,vars:65,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center","fxFlex","100"],["fxLayout","column","fxLayoutAlign","top","fxFlex","50"],[3,"legend"],[3,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button",3,"label","disabled","click"],["formArrayName","notificationTranslations",4,"ngFor","ngForOf"],["header","+",4,"ngIf"],["placeholder","\xa0","formControlName","type","optionLabel","display","datakey","id",3,"options"],["binary","true","formControlName","read",3,"label"],["biaLocale","","formControlName","createdDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["placeholder","\xa0","formControlName","createdBy","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","notifiedUsers","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxFlex","90"],[2,"left","5px","top","-20px","font-size","12px","color","#00839b"],[1,"p-float-label"],["formControlName","jData","rows","5","autoResize","autoResize","pInputTextarea","",2,"width","100%",3,"cols"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],["formArrayName","notificationTranslations"],[3,"formGroupName"],["formControlName","languageId","type","hidden"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%",3,"change"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%",3,"change"],["pButton","","type","button",3,"label","click"],["header","+"],["pTemplate","header"],["placeholder","\xa0","formControlName","languageToAdd","optionLabel","display","datakey","id",3,"options","onChange"],["pButton","","type","button",1,"ui-button-secondary",3,"label","disabled","click"],[1,"pi","pi-plus"]],template:function(t,n){1&t&&(A.TgZ(0,"form",0),A.NdJ("submit",function(){return n.onSubmit()}),A.TgZ(1,"div",1),A.TgZ(2,"div",2),A.TgZ(3,"p-fieldset",3),A.ALo(4,"translate"),A.TgZ(5,"p-tabView"),A.TgZ(6,"p-tabPanel",4),A.ALo(7,"translate"),A.TgZ(8,"div",5),A.TgZ(9,"div",6),A.TgZ(10,"span",7),A._UZ(11,"input",8),A.TgZ(12,"label"),A.TgZ(13,"span",9),A._uU(14,"*"),A.qZA(),A._uU(15),A.ALo(16,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(17,"div",5),A.TgZ(18,"div",6),A.TgZ(19,"span",7),A._UZ(20,"input",10),A.TgZ(21,"label"),A.TgZ(22,"span",9),A._uU(23,"*"),A.qZA(),A._uU(24),A.ALo(25,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(26,"div",11),A.TgZ(27,"button",12),A.NdJ("click",function(){return n.addAllTranslation()}),A.ALo(28,"translate"),A.qZA(),A.qZA(),A.qZA(),A.YNc(29,Wn,25,11,"ng-container",13),A.YNc(30,ee,14,11,"p-tabPanel",14),A.qZA(),A.qZA(),A.TgZ(31,"div",5),A.TgZ(32,"div",6),A.TgZ(33,"span",7),A._UZ(34,"p-dropdown",15),A.TgZ(35,"label"),A.TgZ(36,"span",9),A._uU(37,"*"),A.qZA(),A._uU(38),A.ALo(39,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(40,"div",5),A.TgZ(41,"div",6),A._UZ(42,"p-checkbox",16),A.ALo(43,"translate"),A.qZA(),A.qZA(),A.TgZ(44,"div",5),A.TgZ(45,"div",6),A.TgZ(46,"span",7),A._UZ(47,"p-calendar",17),A.TgZ(48,"label"),A.TgZ(49,"span",9),A._uU(50,"*"),A.qZA(),A._uU(51),A.ALo(52,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(53,"div",5),A.TgZ(54,"div",6),A.TgZ(55,"span",7),A._UZ(56,"p-dropdown",18),A.TgZ(57,"label"),A._uU(58),A.ALo(59,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(60,"div",5),A.TgZ(61,"div",6),A.TgZ(62,"span",7),A._UZ(63,"p-multiSelect",19),A.TgZ(64,"label"),A._uU(65),A.ALo(66,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(67,"div",5),A.TgZ(68,"div",20),A.TgZ(69,"span",21),A._uU(70),A.ALo(71,"translate"),A.qZA(),A.TgZ(72,"span",22),A._UZ(73,"textarea",23),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(74,"div",11),A._UZ(75,"button",24),A.ALo(76,"translate"),A.TgZ(77,"button",25),A.NdJ("click",function(){return n.onCancel()}),A.ALo(78,"translate"),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.Q6J("formGroup",n.form),A.xp6(3),A.s9C("legend",A.lcZ(4,34,"bia.translation.translatedFields")),A.xp6(3),A.s9C("header",A.lcZ(7,36,"translation.defaultLanguage")),A.xp6(9),A.Oqu(A.lcZ(16,38,"notification.title")),A.xp6(9),A.Oqu(A.lcZ(25,40,"notification.description")),A.xp6(3),A.s9C("label",A.lcZ(28,42,"bia.translation.addAll")),A.Q6J("disabled",!n.missingTranslation),A.xp6(2),A.Q6J("ngForOf",n.notificationTranslations.controls),A.xp6(1),A.Q6J("ngIf",(null==n.missingLanguageOptions?null:n.missingLanguageOptions.length)>0),A.xp6(4),A.Akn(A.DdM(60,ne)),A.Q6J("options",n.notificationTypeOptions),A.xp6(4),A.Oqu(A.lcZ(39,44,"notification.type.title")),A.xp6(4),A.s9C("label",A.lcZ(43,46,"notification.read")),A.xp6(5),A.Akn(A.DdM(61,ie)),A.Q6J("showButtonBar",!0)("inputStyle",A.DdM(62,ie)),A.xp6(4),A.Oqu(A.lcZ(52,48,"notification.createdDate")),A.xp6(5),A.Akn(A.DdM(63,ne)),A.Q6J("options",n.userOptions)("showClear",!0),A.xp6(2),A.Oqu(A.lcZ(59,50,"notification.createdBy")),A.xp6(5),A.Akn(A.DdM(64,ne)),A.Q6J("options",n.userOptions)("virtualScroll",!0),A.xp6(2),A.Oqu(A.lcZ(66,52,"notification.notifiedUsers")),A.xp6(5),A.Oqu(A.lcZ(71,54,"notification.jData")),A.xp6(3),A.Q6J("cols",60),A.xp6(2),A.s9C("label",A.lcZ(76,56,"bia.save")),A.Q6J("disabled",!n.form.valid),A.xp6(2),A.s9C("label",A.lcZ(78,58,"bia.cancel")))},directives:[Nt._Y,Nt.JL,Ct.xw,Nt.sg,Ct.Wh,Ct.yH,Gn.p,Kn.xf,Kn.x4,Nt.Fj,Nt.JJ,Nt.u,Jt.o,Nt.nD,Ct.SQ,Vn.Hq,Lt.sg,Lt.O5,Qt.Lt,Ut.XZ,Yt.f,Bt.D,$t.NU,Xn.g,Nt.CE,Nt.x0,It.jx],pipes:[Zt.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t}(),ae=function(){var t=function(){function t(n,e,i,o,a){u(this,t),this.store=n,this.router=e,this.activatedRoute=i,this.notificationOptionsService=o,this.biaTranslationService=a,this.sub=new E.w}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(t){this.store.dispatch(l.create({notification:t})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.Y36(p.yh),A.Y36(f.F0),A.Y36(f.gz),A.Y36(St),A.Y36(z.P6))},t.\u0275cmp=A.Xpm({type:t,selectors:[["bia-notification-new"]],decls:5,vars:12,consts:[[3,"notificationTypeOptions","roleOptions","userOptions","languageOptions","cancel","save"]],template:function(t,n){1&t&&(A.TgZ(0,"bia-notification-form",0),A.NdJ("cancel",function(){return n.onCancelled()})("save",function(t){return n.onSubmitted(t)}),A.ALo(1,"async"),A.ALo(2,"async"),A.ALo(3,"async"),A.ALo(4,"async"),A.qZA()),2&t&&A.Q6J("notificationTypeOptions",A.lcZ(1,4,n.notificationOptionsService.notificationTypeOptions$))("roleOptions",A.lcZ(2,6,n.notificationOptionsService.roleOptions$))("userOptions",A.lcZ(3,8,n.notificationOptionsService.userOptions$))("languageOptions",A.lcZ(4,10,n.notificationOptionsService.languageOptions$))},directives:[oe],pipes:[Lt.Ov],styles:[""]}),t}(),re=function(){var t=function(){function t(n){u(this,t),this.store=n,this.sub=new E.w,this.InitSub(),this.loading$=this.store.select(Q),this.notification$=this.store.select(J)}return d(t,[{key:"currentNotification",get:function(){var t;return(null===(t=this._currentNotification)||void 0===t?void 0:t.id)===this._currentNotificationId?this._currentNotification:null}},{key:"currentNotificationId",get:function(){return this._currentNotificationId},set:function(t){this._currentNotificationId=Number(t),this.store.dispatch(l.load({id:t}))}},{key:"currentNotificationData",get:function(){return this._currentNotification.jData}},{key:"InitSub",value:function(){var t=this;this.sub=new E.w,this.sub.add(this.store.select(J).subscribe(function(n){n&&(t._currentNotification=n)}))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.LFG(p.yh))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),ce=r(79373);function le(t,n){1&t&&A._UZ(0,"bia-spinner",2),2&t&&A.Q6J("overlay",!0)}var se=function(){var t=function(){function t(n,e,i,o,a,r){u(this,t),this.store=n,this.router=e,this.activatedRoute=i,this.notificationOptionsService=o,this.notificationService=a,this.biaTranslationService=r,this.displayChange=new A.vpe,this.sub=new E.w}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(t){this.store.dispatch(l.update({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.Y36(p.yh),A.Y36(f.F0),A.Y36(f.gz),A.Y36(St),A.Y36(re),A.Y36(z.P6))},t.\u0275cmp=A.Xpm({type:t,selectors:[["bia-notification-edit"]],outputs:{displayChange:"displayChange"},decls:8,vars:18,consts:[[3,"notification","notificationTypeOptions","roleOptions","userOptions","languageOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,n){1&t&&(A.TgZ(0,"bia-notification-form",0),A.NdJ("cancel",function(){return n.onCancelled()})("save",function(t){return n.onSubmitted(t)}),A.ALo(1,"async"),A.ALo(2,"async"),A.ALo(3,"async"),A.ALo(4,"async"),A.ALo(5,"async"),A.qZA(),A.YNc(6,le,1,1,"bia-spinner",1),A.ALo(7,"async")),2&t&&(A.Q6J("notification",A.lcZ(1,6,n.notificationService.notification$))("notificationTypeOptions",A.lcZ(2,8,n.notificationOptionsService.notificationTypeOptions$))("roleOptions",A.lcZ(3,10,n.notificationOptionsService.roleOptions$))("userOptions",A.lcZ(4,12,n.notificationOptionsService.userOptions$))("languageOptions",A.lcZ(5,14,n.notificationOptionsService.languageOptions$)),A.xp6(6),A.Q6J("ngIf",A.lcZ(7,16,n.notificationService.loading$)))},directives:[oe,Lt.O5,ce.O],pipes:[Lt.Ov],styles:[""]}),t}(),ue=r(16249),fe=r(30466);function de(t,n){1&t&&A._UZ(0,"bia-spinner",1),2&t&&A.Q6J("overlay",!0)}var pe=function(){var t=function(){function t(n,e,i,o,a){u(this,t),this.store=n,this.route=e,this.notificationService=i,this.layoutService=o,this.biaTranslationService=a,this.sub=new E.w}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationService.currentNotificationId=t.route.snapshot.params.notificationId})),this.sub.add(this.store.select(J).subscribe(function(n){(null==n?void 0:n.title)&&(t.route.data.pipe((0,K.P)()).subscribe(function(t){t.breadcrumb=n.title}),t.layoutService.refreshBreadcrumb())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.Y36(p.yh),A.Y36(f.gz),A.Y36(re),A.Y36(fe.N),A.Y36(z.P6))},t.\u0275cmp=A.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,n){1&t&&(A._UZ(0,"router-outlet"),A.YNc(1,de,1,1,"bia-spinner",0),A.ALo(2,"async")),2&t&&(A.xp6(1),A.Q6J("ngIf",A.lcZ(2,1,n.notificationService.loading$)))},directives:[f.lC,Lt.O5,ce.O],pipes:[Lt.Ov],styles:[""]}),t}(),he=r(98832),ge=r(53460),ve=r(39682),ye=function(){var t=function(t){a(e,t);var n=c(e);function e(t){return u(this,e),n.call(this,t,"NotificationTypes")}return e}(S.Z);return t.\u0275fac=function(n){return new(n||t)(A.LFG(A.zs3))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),me=function(){var t=function t(n,e,i){var o=this;u(this,t),this.actions$=n,this.notificationTypeDas=e,this.biaMessageService=i,this.loadAll$=(0,h.GW)(function(){return o.actions$.pipe((0,h.l4)(rt.loadAll),(0,y.w)(function(){return o.notificationTypeDas.getList({endpoint:"allOptions"}).pipe((0,m.U)(function(t){return rt.loadAllSuccess({notificationTypes:t})}),(0,b.K)(function(t){return o.biaMessageService.showError(),(0,g.of)(rt.failure({error:t}))}))}))})};return t.\u0275fac=function(n){return new(n||t)(A.LFG(h.eX),A.LFG(ye),A.LFG(B.X))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac}),t}(),be=function(){var t=function t(){u(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=A.oAB({type:t}),t.\u0275inj=A.cJS({imports:[[p.Aw.forFeature("domain-notification-type-options",pt),h.sQ.forFeature([me])]]}),t}(),we=r(83836);function xe(t,n){if(1&t&&(A.TgZ(0,"div",8),A.TgZ(1,"div"),A.TgZ(2,"b"),A._uU(3),A.ALo(4,"translate"),A.qZA(),A._UZ(5,"br"),A._uU(6),A.ALo(7,"translate"),A.qZA(),A.TgZ(8,"div"),A.TgZ(9,"b"),A._uU(10),A.ALo(11,"translate"),A.qZA(),A._UZ(12,"br"),A._uU(13),A.ALo(14,"translate"),A.qZA(),A.TgZ(15,"div"),A.TgZ(16,"b"),A._uU(17),A.ALo(18,"translate"),A.qZA(),A._UZ(19,"br"),A._uU(20),A.ALo(21,"date"),A.qZA(),A.TgZ(22,"div"),A.TgZ(23,"b"),A._uU(24),A.ALo(25,"translate"),A.qZA(),A._UZ(26,"br"),A._uU(27),A.qZA(),A.qZA()),2&t){var e=A.oxw().ngIf;A.xp6(3),A.Oqu(A.lcZ(4,8,"notification.title")),A.xp6(3),A.Oqu(A.lcZ(7,10,e.titleTranslated)),A.xp6(4),A.Oqu(A.lcZ(11,12,"notification.description")),A.xp6(3),A.hij("",A.lcZ(14,14,e.descriptionTranslated)," "),A.xp6(4),A.Oqu(A.lcZ(18,16,"notification.createdDate")),A.xp6(3),A.Oqu(A.xi3(21,18,e.createdDate,"short")),A.xp6(4),A.Oqu(A.lcZ(25,21,"notification.type.title")),A.xp6(3),A.Oqu(e.type.display)}}function Se(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"button",9),A.NdJ("click",function(){A.CHM(e);var t=A.oxw().ngIf;return A.oxw().onAction(t)}),A.ALo(1,"translate"),A.qZA()}if(2&t){var i,o=A.oxw().ngIf;A.Q6J("label",A.lcZ(1,1,null!==(i=null==o.data?null:o.data.display)&&void 0!==i?i:"notification.action"))}}function Ae(t,n){if(1&t){var e=A.EpF();A.TgZ(0,"button",7),A.NdJ("click",function(){return A.CHM(e),A.oxw(2).onEdit()}),A.ALo(1,"translate"),A.qZA()}2&t&&A.s9C("label",A.lcZ(1,1,"bia.edit"))}function Ze(t,n){if(1&t){var e=A.EpF();A.ynx(0),A.YNc(1,xe,28,23,"div",2),A.TgZ(2,"div",3),A._UZ(3,"bia-notification-team-warning",4),A.YNc(4,Se,2,3,"button",5),A.YNc(5,Ae,2,3,"button",6),A.TgZ(6,"button",7),A.NdJ("click",function(){return A.CHM(e),A.oxw().onCancelled()}),A.ALo(7,"translate"),A.qZA(),A.qZA(),A.BQk()}if(2&t){var i=n.ngIf,o=A.oxw();A.xp6(1),A.Q6J("ngIf",i&&i.id),A.xp6(2),A.Q6J("notification",i),A.xp6(1),A.Q6J("ngIf",o.canAction(i)),A.xp6(1),A.Q6J("ngIf",o.canEdit),A.xp6(1),A.s9C("label",A.lcZ(7,5,"bia.cancel"))}}function Ce(t,n){1&t&&A._UZ(0,"bia-spinner",10),2&t&&A.Q6J("overlay",!0)}var Te=function(){var t=function(){function t(n,e,i,o,a){u(this,t),this.store=n,this.router=e,this.activatedRoute=i,this.authService=o,this.notificationService=a,this.displayChange=new A.vpe,this.sub=new E.w}return d(t,[{key:"ngOnInit",value:function(){this.notification$=this.notificationService.notification$,this.canEdit=this.authService.hasPermission(G.y.Notification_Update)}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(t){this.store.dispatch(l.update({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(){this.router.navigate(["../edit"],{relativeTo:this.activatedRoute})}},{key:"canAction",value:function(t){return!(!t.data||!t.data.route)}},{key:"onAction",value:function(t){var n=this;if(t.data){var e=t.data;e.route&&((null==e?void 0:e.teams)&&e.teams.forEach(function(t){n.authService.changeCurrentTeamId(t.typeId,t.id),t.roles&&n.authService.changeCurrentRoleIds(t.typeId,t.id,t.roles.map(function(t){return t.id}))}),this.router.navigate(t.data.route))}}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.Y36(p.yh),A.Y36(f.F0),A.Y36(f.gz),A.Y36(j.e),A.Y36(re))},t.\u0275cmp=A.Xpm({type:t,selectors:[["bia-notification-detail"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[4,"ngIf"],[3,"overlay",4,"ngIf"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly",4,"ngIf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],[3,"notification"],["pButton","","type","button","class","p-button-primary",3,"label","click",4,"ngIf"],["pButton","","type","button","class","p-button-secondary",3,"label","click",4,"ngIf"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly"],["pButton","","type","button",1,"p-button-primary",3,"label","click"],[3,"overlay"]],template:function(t,n){1&t&&(A.YNc(0,Ze,8,7,"ng-container",0),A.ALo(1,"async"),A.YNc(2,Ce,1,1,"bia-spinner",1),A.ALo(3,"async")),2&t&&(A.Q6J("ngIf",A.lcZ(1,2,n.notification$)),A.xp6(2),A.Q6J("ngIf",A.lcZ(3,4,n.loading$)))},directives:[Lt.O5,Ct.xw,Ct.SQ,Ct.Wh,we.t,Vn.Hq,ce.O],pipes:[Lt.Ov,Zt.X$,Lt.uU],styles:[""]}),t}(),Oe=function(){var t=function(t){a(e,t);var n=c(e);function e(t){return u(this,e),n.call(this,t,"Languages")}return e}(S.Z);return t.\u0275fac=function(n){return new(n||t)(A.LFG(A.zs3))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Le=function(){var t=function t(n,e,i){var o=this;u(this,t),this.actions$=n,this.languageDas=e,this.biaMessageService=i,this.loadAll$=(0,h.GW)(function(){return o.actions$.pipe((0,h.l4)(k.loadAll),(0,y.w)(function(){return o.languageDas.getList({endpoint:"allOptions"}).pipe((0,m.U)(function(t){return k.loadAllSuccess({languages:t})}),(0,b.K)(function(t){return o.biaMessageService.showError(),(0,g.of)(k.failure({error:t}))}))}))})};return t.\u0275fac=function(n){return new(n||t)(A.LFG(h.eX),A.LFG(Oe),A.LFG(B.X))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac}),t}(),Ne=function(){var t=function t(){u(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=A.oAB({type:t}),t.\u0275inj=A.cJS({imports:[[p.Aw.forFeature("domain-language-options",at),h.sQ.forFeature([Le])]]}),t}(),ke=r(11936),Me=[{path:"",data:{breadcrumb:null,permission:G.y.Notification_List_Access,InjectComponent:jn},component:ge.e,canActivate:[ue.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:G.y.Notification_Create,title:"notification.add",InjectComponent:ae},component:he._,canActivate:[ue.n]},{path:":notificationId",data:{breadcrumb:"",canNavigate:!0},component:pe,canActivate:[ue.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:G.y.Notification_Update,title:"notification.edit",InjectComponent:se},component:ge.e,canActivate:[ue.n]},{path:"detail",data:{breadcrumb:"bia.detail",canNavigate:!0,permission:G.y.Notification_Read,title:"notification.detail",InjectComponent:Te},component:he._,canActivate:[ue.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],qe=function(){var t=function t(){u(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=A.oAB({type:t}),t.\u0275inj=A.cJS({imports:[[Hn.m,Nt.UX,f.Bz.forChild(Me),p.Aw.forFeature("notifications",N),h.sQ.forFeature([F]),be,ve.U,Ne,ke.p]]}),t}()},94529:function(t,n,e){"use strict";e.d(n,{b:function(){return i}});var i=function t(n,e){u(this,t),this.key=n,this.value=e}},16244:function(t,n,e){"use strict";e.d(n,{e:function(){return o}});var i,o=((i=o||(o={}))[i.Unchanged=0]="Unchanged",i[i.Added=1]="Added",i[i.Modified=2]="Modified",i[i.Deleted=3]="Deleted",o)}}])}();