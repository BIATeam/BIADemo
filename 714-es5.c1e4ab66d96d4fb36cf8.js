!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[714],{49457:function(e,t){var n,r;void 0!==(r="function"==typeof(n=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,a){var s=o.URL||o.webkitURL,c=document.createElement("a");c.download=i=i||e.name||"download",c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?r(c):n(c.href)?t(e,i,a):r(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){r(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,i){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),o);else if(n(e))t(e,o,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){r(a)})}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&c||i)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var f=o.URL||o.webkitURL,p=f.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,[]):n)&&(e.exports=r)},16249:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var r,o=n(8340),i=n(92340),a=n(68307),c=n(37716),l=((r=function(){function e(t){s(this,e),this.authService=t}return u(e,[{key:"canActivate",value:function(e,t){return this.authService.hasPermissionObs(e.data.permission).pipe((0,a.b)(function(e){!0!==e&&(window.location.href=i.N.urlErrorPage+"?num=403")}))}}]),e}()).\u0275fac=function(e){return new(e||r)(c.LFG(o.e))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},71714:function(t,r,i){"use strict";i.r(r),i.d(r,{UserModule:function(){return Ye}});var a,c=i(2694),l=i(86710),f=i(91601),p=i(25917),d=i(92996),h=i(43190),y=i(88002),m=i(5304),v=i(94612),g=i(57057),b=(0,l.PH)("[Users] Load all by post",(0,l.Ky)()),w=(0,l.PH)("[Users] Load",(0,l.Ky)()),S=(0,l.PH)("[Users] Create",(0,l.Ky)()),C=(0,l.PH)("[Users] Update",(0,l.Ky)()),A=(0,l.PH)("[Users] Remove",(0,l.Ky)()),L=(0,l.PH)("[Users] Multi Remove",(0,l.Ky)()),D=(0,l.PH)("[Users] Save",(0,l.Ky)()),x=(0,l.PH)("[Users] Synchronize"),k=((0,l.PH)("[Users] Load all success",(0,l.Ky)()),(0,l.PH)("[Users] Load all by post success",(0,l.Ky)())),Z=(0,l.PH)("[Users] Load success",(0,l.Ky)()),U=((0,l.PH)("[Users] Create success",(0,l.Ky)()),(0,l.PH)("[Users] Update success",(0,l.Ky)()),(0,l.PH)("[Users] Remove success",(0,l.Ky)()),(0,l.PH)("[Users] Failure",(0,l.Ky)())),E=i(74147),T=i(37716),M=((a=function(){function e(){s(this,e)}return u(e,[{key:"formatDisplayNameObs",value:function(e){var t=this;return e.pipe((0,y.U)(function(e){return t.formatDisplayNames(e)}))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach(function(e){e=t.formatDisplayName(e)}),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")"),e}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=T.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a),N=function(){var e=function(e){n(r,e);var t=o(r);function r(e,n){var o;return s(this,r),(o=t.call(this,e,"users")).userService=n,o}return u(r,[{key:"getAllByFilter",value:function(e){return this.userService.formatDisplayNameObs(this.http.get("".concat(this.route,"?filter=").concat(e)))}},{key:"synchronize",value:function(){return this.http.get("".concat(this.route,"synchronize"))}}]),r}(E.Z);return e.\u0275fac=function(t){return new(t||e)(T.LFG(T.zs3),T.LFG(M))},e.\u0275prov=T.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),P=i(80273),F=(0,P.H)({selectId:function(e){return e.id},sortComparer:!1}),z=F.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{}}),O=(0,l.Lq)(z,(0,l.on)(k,function(e,t){var n=t.result,r=t.event,o=F.setAll(n.data,e);return o.currentUser={},o.totalCount=n.totalCount,o.lastLazyLoadEvent=r,o}),(0,l.on)(Z,function(e,t){var n=t.user;return Object.assign(Object.assign({},e),{currentUser:n})}));function q(e,t){return(0,l.UY)({users:O})(e,t)}var J=(0,l.ZF)("users"),B=(0,l.P1)(J,function(e){return e.users}),$=(0,l.P1)(B,function(e){return e.totalCount}),_=((0,l.P1)(B,function(e){return e.currentUser}),(0,l.P1)(B,function(e){return e.lastLazyLoadEvent})),j=F.getSelectors(B).selectAll,H=i(38165),R=i(42),G=i(81780),I=function(){var t=function t(n,r,o,i,a,c){var u=this;s(this,t),this.actions$=n,this.userDas=r,this.userFromADDas=o,this.biaMessageService=i,this.translateService=a,this.store=c,this.loadAllByPost$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(b),(0,d.j)("event"),(0,h.w)(function(e){return u.userDas.getListByPost(e).pipe((0,y.U)(function(t){return k({result:t,event:e})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.load$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(w),(0,d.j)("id"),(0,h.w)(function(e){return u.userDas.get(e).pipe((0,y.U)(function(e){return Z({user:e})}))}))}),this.synchronize$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(x),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(_)))}),(0,h.w)(function(t){var n=e(t,2),r=(n[0],n[1]);return u.userDas.synchronize().pipe((0,y.U)(function(){return u.biaMessageService.showSyncSuccess(),b({event:r})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.create$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(S),(0,d.j)("user"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(_)))}),(0,h.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.post(r).pipe((0,y.U)(function(){return u.biaMessageService.showAddSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.update$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(C),(0,d.j)("user"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(_)))}),(0,h.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.put(r,r.id).pipe((0,y.U)(function(){return u.biaMessageService.showUpdateSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.destroy$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(A),(0,d.j)("id"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(_)))}),(0,h.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.delete(r).pipe((0,y.U)(function(){return u.biaMessageService.showDeleteSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.multiDestroy$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(L),(0,d.j)("ids"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(_)))}),(0,h.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userDas.deletes(r).pipe((0,y.U)(function(){return u.biaMessageService.showDeleteSuccess(),b({event:o})}),(0,m.K)(function(e){return u.biaMessageService.showError(),(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))}),this.save$=(0,f.GW)(function(){return u.actions$.pipe((0,f.l4)(D),(0,d.j)("usersFromAD"),(0,v.b)(function(e){return(0,p.of)(e).pipe((0,g.M)(u.store.select(_)))}),(0,h.w)(function(t){var n=e(t,2),r=n[0],o=n[1];return u.userFromADDas.save(r,"").pipe((0,y.U)(function(){return u.biaMessageService.showAddSuccess(),b({event:o})}),(0,m.K)(function(e){if(303===e.status){var t="";e.error&&e.error.forEach(function(e){var n="".concat(u.translateService.instant("user.cannotAddMember")).replace("${login}",e);""!==t&&(t+="\n"),t+=n}),u.biaMessageService.showErrorDetail(t)}else u.biaMessageService.showError();return(0,p.of)(U({err:{concern:"CREATE",error:e}}))}))}))})};return t.\u0275fac=function(e){return new(e||t)(T.LFG(f.eX),T.LFG(N),T.LFG(H.L),T.LFG(R.X),T.LFG(G.sK),T.LFG(l.yh))},t.\u0275prov=T.Yz7({token:t,factory:t.\u0275fac}),t}(),K=i(88385),Q=i(79090),Y=i(40136),V=i(8340),W=i(29206),X=i(49457),ee=i.n(X),te=i(35618),ne=i(33013),re=i(81606),oe=i(38583),ie=i(83473),ae=i(4207),se=i(99287);function ce(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",9),T.NdJ("click",function(){return T.CHM(n),T.oxw(2).toggleFilter()}),T.ALo(1,"translate"),T.qZA()}2&e&&T.s9C("pTooltip",T.lcZ(1,1,"msg.showFilters"))}function ue(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",10),T.NdJ("click",function(){return T.CHM(n),T.oxw(2).toggleFilter()}),T.ALo(1,"translate"),T.qZA()}2&e&&T.s9C("pTooltip",T.lcZ(1,1,"msg.showFilters"))}function le(e,t){if(1&e&&(T.ynx(0),T.YNc(1,ce,2,3,"button",7),T.YNc(2,ue,2,3,"button",8),T.BQk()),2&e){var n=T.oxw();T.xp6(1),T.Q6J("ngIf",!1===n.showFilter&&!1===n.haveFilter),T.xp6(1),T.Q6J("ngIf",!1===n.showFilter&&!0===n.haveFilter)}}function fe(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",11),T.NdJ("click",function(){return T.CHM(n),T.oxw().onDelete()}),T.ALo(1,"translate"),T.qZA()}if(2&e){var r=T.oxw();T.s9C("label",T.lcZ(1,2,"bia.delete")),T.Q6J("disabled",0===r.nbSelectedElements)}}function pe(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",12),T.NdJ("click",function(){return T.CHM(n),T.oxw().onBack()}),T.ALo(1,"translate"),T.qZA()}2&e&&T.s9C("label",T.lcZ(1,1,"bia.back"))}function de(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",13),T.NdJ("click",function(){return T.CHM(n),T.oxw().exportCSV.emit()}),T.qZA()}}function he(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",12),T.NdJ("click",function(){return T.CHM(n),T.oxw().synchronize.emit()}),T.ALo(1,"translate"),T.qZA()}2&e&&T.s9C("label",T.lcZ(1,1,"bia.synchronize"))}function ye(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"button",14),T.NdJ("click",function(){return T.CHM(n),T.oxw().onCreate()}),T.ALo(1,"translate"),T.qZA()}2&e&&T.s9C("label",T.lcZ(1,1,"bia.add"))}var me=function(){var e,t=function(e){n(r,e);var t=o(r);function r(){var e;return s(this,r),(e=t.apply(this,arguments)).canSync=!1,e.synchronize=new T.vpe,e}return r}(re.l);return t.\u0275fac=function(n){return(e||(e=T.n5z(t)))(n||t)},t.\u0275cmp=T.Xpm({type:t,selectors:[["app-user-table-header"]],inputs:{canSync:"canSync"},outputs:{synchronize:"synchronize"},features:[T._Bn([ne.YP]),T.qOj],decls:13,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],[4,"ngIf"],["pButton","",3,"disabled","label","click",4,"ngIf"],["pButton","","class","p-button-outlined",3,"label","click",4,"ngIf"],["pButton","","class","p-button-outlined","label","CSV",3,"click",4,"ngIf"],["pButton","",3,"label","click",4,"ngIf"],["type","button","icon","pi pi-filter","class","p-button-outlined flat","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","pi pi-filter","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","pi pi-filter","pButton","",1,"p-button-outlined","flat",3,"pTooltip","click"],["type","button","icon","pi pi-filter","pButton","",3,"pTooltip","click"],["pButton","",3,"disabled","label","click"],["pButton","",1,"p-button-outlined",3,"label","click"],["pButton","","label","CSV",1,"p-button-outlined",3,"click"],["pButton","",3,"label","click"]],template:function(e,t){1&e&&(T.TgZ(0,"div",0),T.TgZ(1,"div",1),T.YNc(2,le,3,2,"ng-container",2),T.YNc(3,fe,2,4,"button",3),T.qZA(),T.TgZ(4,"div",1),T.TgZ(5,"h1"),T._uU(6),T.qZA(),T.qZA(),T.TgZ(7,"div",1),T.YNc(8,pe,2,3,"button",4),T.YNc(9,de,1,0,"button",5),T.YNc(10,he,2,3,"button",4),T.YNc(11,ye,2,3,"button",6),T.qZA(),T.qZA(),T._UZ(12,"p-confirmDialog")),2&e&&(T.xp6(2),T.Q6J("ngIf",t.showBtnFilter),T.xp6(1),T.Q6J("ngIf",t.canDelete),T.xp6(3),T.Oqu(t.headerTitle),T.xp6(2),T.Q6J("ngIf",t.canBack),T.xp6(1),T.Q6J("ngIf",t.canExportCSV),T.xp6(1),T.Q6J("ngIf",t.canSync),T.xp6(1),T.Q6J("ngIf",t.canAdd))},directives:[te.xw,te.Wh,te.SQ,oe.O5,ie.Q,ae.Hq,se.u],pipes:[G.X$],styles:['.header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:"raleway-thin",serif;font-size:36px;font-weight:200;margin:0;line-height:24px}',""]}),t}(),ve=i(76743),ge=i(64762),be=i(60881),we=i(39678),Se=(0,l.PH)("[Domain LDAP Domains] Load all"),Ce=(0,l.PH)("[Domain LDAP Domains] Load all success",(0,l.Ky)()),Ae=(0,l.PH)("[Domain LDAP Domains] Failure",(0,l.Ky)()),Le=(0,P.H)({selectId:function(e){return e.ldapName},sortComparer:!1}),De=Le.getInitialState({}),xe=(0,l.Lq)(De,(0,l.on)(Ce,function(e,t){var n=t.ldapDomains;return Le.setAll(n,e)}));function ke(e,t){return(0,l.UY)({ldapDomain:xe})(e,t)}var Ze=(0,l.ZF)("domain-ldap-domains"),Ue=(0,l.P1)(Ze,function(e){return e.ldapDomain}),Ee=Le.getSelectors(Ue).selectAll,Te=i(45121),Me=i(3679),Ne=i(50103),Pe=i(96516),Fe=function(){return{width:"50%"}},ze=function(){return{width:"100%"}},Oe=function(){var e=function(){function e(t){s(this,e),this.formBuilder=t,this.searchUsers=new T.vpe,this.save=new T.vpe,this.cancel=new T.vpe,this.initForm()}return u(e,[{key:"ngOnChanges",value:function(e){this.users&&e.users&&(this.users=this.users.sort(function(e,t){return e.firstName.localeCompare(t.firstName)}))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,Me.kI.required],domains:[this.domains]})}},{key:"onCancel",value:function(){this.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}},{key:"reset",value:function(){this.selectedDomain="",this.form.reset()}},{key:"onSearchUsers",value:function(e){this.searchUsers.emit({filter:e.query,ldapName:this.selectedDomain})}},{key:"onDomainChange",value:function(e){this.selectedDomain=e.value?e.value.ldapName:""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(T.Y36(Me.qu))},e.\u0275cmp=T.Xpm({type:e,selectors:[["app-user-form"]],inputs:{users:"users",domains:"domains"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[T.TTD],decls:14,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"p-fluid","app-field-container"],["placeholder","LDAP Domain","formControlName","domains","optionLabel","displayName","showClear","true",3,"options","onChange"],[1,"p-float-label"],["formControlName","selectedUsers","field","displayName",3,"multiple","suggestions","delay","size","minLength","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(T.TgZ(0,"form",0),T.NdJ("submit",function(){return t.onSubmit()}),T.TgZ(1,"div",1),T.TgZ(2,"p-dropdown",2),T.NdJ("onChange",function(e){return t.onDomainChange(e)}),T.qZA(),T._UZ(3,"br"),T.TgZ(4,"span",3),T.TgZ(5,"p-autoComplete",4),T.NdJ("completeMethod",function(e){return t.onSearchUsers(e)}),T.qZA(),T.TgZ(6,"label"),T._uU(7),T.ALo(8,"translate"),T.qZA(),T.qZA(),T.qZA(),T.TgZ(9,"div",5),T._UZ(10,"button",6),T.ALo(11,"translate"),T.TgZ(12,"button",7),T.NdJ("click",function(){return t.onCancel()}),T.ALo(13,"translate"),T.qZA(),T.qZA(),T.qZA()),2&e&&(T.Q6J("formGroup",t.form),T.xp6(2),T.Akn(T.DdM(22,Fe)),T.Q6J("options",t.domains),T.xp6(3),T.Akn(T.DdM(23,Fe)),T.Q6J("multiple",!0)("suggestions",t.users)("delay",700)("size",30)("minLength",3)("inputStyle",T.DdM(24,ze)),T.xp6(2),T.Oqu(T.lcZ(8,16,"bia.select")),T.xp6(3),T.s9C("label",T.lcZ(11,18,"bia.save")),T.Q6J("disabled",!t.form.valid),T.xp6(2),T.s9C("label",T.lcZ(13,20,"bia.cancel")))},directives:[Me._Y,Me.JL,te.xw,Me.sg,te.Wh,Ne.Lt,Me.JJ,Me.u,Pe.Qc,te.SQ,ae.Hq],pipes:[G.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),e}(),qe=function(){return{minWidth:"50vw"}},Je=function(){return{overflow:"auto"}},Be=function(){var e=function(){function e(t){s(this,e),this.store=t,this._display=!1,this.displayChange=new T.vpe}return u(e,[{key:"display",set:function(e){this._display=e,this.displayChange.emit(this._display)}},{key:"ngOnInit",value:function(){return(0,ge.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.usersFromAD$=this.store.select(we.mo),this.ldapDomains$=this.store.select(Ee),this.store.dispatch(Se());case 1:case"end":return e.stop()}},e,this)}))}},{key:"onSubmitted",value:function(e){this.store.dispatch(D({usersFromAD:e})),this.close()}},{key:"onCancelled",value:function(){this.close()}},{key:"close",value:function(){this.display=!1}},{key:"onSearchUsers",value:function(e){this.store.dispatch((0,be.Cq)({userFilter:e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(T.Y36(l.yh))},e.\u0275cmp=T.Xpm({type:e,selectors:[["app-user-new-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:20,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(e,t){1&e&&(T.TgZ(0,"p-dialog",0),T.NdJ("visibleChange",function(e){return t._display=e}),T.TgZ(1,"p-header"),T._uU(2),T.ALo(3,"translate"),T.qZA(),T.TgZ(4,"app-user-form",1),T.NdJ("searchUsers",function(e){return t.onSearchUsers(e)})("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),T.ALo(5,"async"),T.ALo(6,"async"),T.qZA(),T.qZA()),2&e&&(T.Akn(T.DdM(18,qe)),T.Q6J("focusOnShow",!1)("visible",t._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",T.DdM(19,Je)),T.xp6(2),T.hij(" ",T.lcZ(3,12,"user.add")," "),T.xp6(2),T.Q6J("users",T.lcZ(5,14,t.usersFromAD$))("domains",T.lcZ(6,16,t.ldapDomains$)))},directives:[Te.V,ne.h4,Oe],pipes:[G.X$,oe.Ov],styles:[""]}),e}(),$e=function(){var e=function(){function e(t,n,r,o){s(this,e),this.store=t,this.authService=n,this.userDas=r,this.translateService=o,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.pageSize=Y.L8,this.displayEditUserDialog=!1,this.displayNewUserDialog=!1,this.canSync=!1,this.canDelete=!1,this.canAdd=!1,this.canExport=!1,this.tableConfiguration={columns:[new Q.ML("lastName","user.lastName"),new Q.ML("firstName","user.firstName"),new Q.ML("login","user.login")]},this.columns=this.tableConfiguration.columns.map(function(e){return{key:e.field,value:e.header}}),this.displayedColumns=this.columns}return u(e,[{key:"ngOnInit",value:function(){this.setPermissions(),this.users$=this.store.select(j),this.totalCount$=this.store.select($)}},{key:"onCreate",value:function(){this.displayNewUserDialog=!0}},{key:"onDelete",value:function(){this.selectedUsers&&this.store.dispatch(L({ids:this.selectedUsers.map(function(e){return e.id})}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedUsers=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){this.lastLazyLoadEvent=e,this.store.dispatch(b({event:e}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onSynchronize",value:function(){this.store.dispatch(x())}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"onExportCSV",value:function(){var e=this,t={};this.columns.map(function(n){return t[n.value.split(".")[1]]=e.translateService.instant(n.value)});var n=Object.assign({columns:t},this.userListComponent.getLazyLoadMetadata());this.userDas.getFile(n).subscribe(function(t){ee().saveAs(t,e.translateService.instant("app.users")+".csv")})}},{key:"setPermissions",value:function(){this.canSync=this.authService.hasPermission(W.y.User_Sync),this.canDelete=this.authService.hasPermission(W.y.User_Delete),this.canAdd=this.authService.hasPermission(W.y.User_Add),this.canExport=this.authService.hasPermission(W.y.User_List_Access)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(T.Y36(l.yh),T.Y36(V.e),T.Y36(N),T.Y36(G.sK))},e.\u0275cmp=T.Xpm({type:e,selectors:[["app-users-index"]],viewQuery:function(e,t){var n;(1&e&&T.Gf(K.$,5),2&e)&&(T.iGM(n=T.CRH())&&(t.userListComponent=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&T.ekj("bia-flex",t.flex)},decls:10,vars:28,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canSync","canAdd","canExportCSV","selectedElements","create","exportCSV","synchronize","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","viewPreference","loadLazy","selectedElementsChanged"],[3,"display","displayChange"]],template:function(e,t){1&e&&(T.TgZ(0,"div",0),T.TgZ(1,"div",1),T.TgZ(2,"app-user-table-header",2),T.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("synchronize",function(){return t.onSynchronize()})("delete",function(){return t.onDelete()}),T.ALo(3,"translate"),T.qZA(),T.TgZ(4,"bia-table-controller",3),T.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),T.ALo(5,"async"),T.qZA(),T.TgZ(6,"bia-table",4),T.NdJ("loadLazy",function(e){return t.onLoadLazy(e)})("selectedElementsChanged",function(e){return t.onSelectedElementsChanged(e)}),T.ALo(7,"async"),T.ALo(8,"async"),T.qZA(),T.qZA(),T.qZA(),T.TgZ(9,"app-user-new-dialog",5),T.NdJ("displayChange",function(e){return t.displayNewUserDialog=e}),T.qZA()),2&e&&(T.xp6(2),T.Q6J("headerTitle",T.lcZ(3,20,"user.listOf"))("canSync",t.canSync)("canAdd",t.canAdd)("canExportCSV",t.canExport)("selectedElements",t.selectedUsers),T.xp6(2),T.Q6J("defaultPageSize",t.pageSize)("length",T.lcZ(5,22,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),T.xp6(2),T.Q6J("elements",T.lcZ(7,24,t.users$))("totalRecord",T.lcZ(8,26,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",!1)("canSelectElement",t.canDelete)("viewPreference",t.viewPreference),T.xp6(3),T.Q6J("display",t.displayNewUserDialog))},directives:[te.xw,te.yH,me,ve.B,K.$,Be],pipes:[G.X$,oe.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e}(),_e=i(84594),je=i(16249),He=function(){var e=function(){function e(){s(this,e)}return u(e,[{key:"formatDisplayNameFromObs",value:function(e){var t=this;return e.pipe((0,y.U)(function(e){return t.formatDisplayNames(e)}))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach(function(e){e=t.formatDisplayName(e)}),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.name," (").concat(e.ldapName,")"),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Re=function(){var e=function(e){n(r,e);var t=o(r);function r(e,n){var o;return s(this,r),(o=t.call(this,e,"ldapDomains")).ldapDomainService=n,o}return u(r,[{key:"getAll",value:function(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}]),r}(E.Z);return e.\u0275fac=function(t){return new(t||e)(T.LFG(T.zs3),T.LFG(He))},e.\u0275prov=T.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ge=function(){var e=function e(t,n,r){var o=this;s(this,e),this.actions$=t,this.ldapDomainDas=n,this.biaMessageService=r,this.loadAll$=(0,f.GW)(function(){return o.actions$.pipe((0,f.l4)(Se),(0,h.w)(function(e){return o.ldapDomainDas.getAll().pipe((0,y.U)(function(e){return Ce({ldapDomains:e})}),(0,m.K)(function(e){return o.biaMessageService.showError(),(0,p.of)(Ae({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(T.LFG(f.eX),T.LFG(Re),T.LFG(R.X))},e.\u0275prov=T.Yz7({token:e,factory:e.\u0275fac}),e}(),Ie=function(){var e=function e(){s(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T.oAB({type:e}),e.\u0275inj=T.cJS({imports:[[l.Aw.forFeature("domain-ldap-domains",ke),f.sQ.forFeature([Ge])]]}),e}(),Ke=i(49277),Qe=[{path:"",data:{breadcrumb:null,permission:W.y.User_List_Access},component:$e,canActivate:[je.n]},{path:"**",redirectTo:""}],Ye=function(){var e=function e(){s(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T.oAB({type:e}),e.\u0275inj=T.cJS({imports:[[_e.m,Ie,Ke.a,c.Bz.forChild(Qe),l.Aw.forFeature("users",q),f.sQ.forFeature([I])]]}),e}()}}])}();