"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[809],{40809:function(e,t,a){a.r(t),a.d(t,{PlaneModule:function(){return ve}});var n=a(2694),s=a(86710),i=a(91601),l=a(25917),o=a(92996),r=a(43190),c=a(88002),p=a(5304),u=a(94612),h=a(57057);const d=(0,s.PH)("[Planes ViewMode] Load all by post",(0,s.Ky)()),g=(0,s.PH)("[Planes ViewMode] Load",(0,s.Ky)()),m=(0,s.PH)("[Planes ViewMode] Create",(0,s.Ky)()),f=(0,s.PH)("[Planes ViewMode] Update",(0,s.Ky)()),b=(0,s.PH)("[Planes ViewMode] Remove",(0,s.Ky)()),v=(0,s.PH)("[Planes ViewMode] Multi Remove",(0,s.Ky)()),y=(0,s.PH)("[Planes ViewMode] Load all by post success",(0,s.Ky)()),Z=(0,s.PH)("[Planes ViewMode] Load success",(0,s.Ky)()),S=(0,s.PH)("[Planes ViewMode] Failure",(0,s.Ky)());var C=a(74147),A=a(37716);let w=(()=>{class e extends C.Z{constructor(e){super(e,"Planes")}}return e.\u0275fac=function(t){return new(t||e)(A.LFG(A.zs3))},e.\u0275prov=A.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const P=(0,a(80273).H)({selectId:e=>e.id,sortComparer:!1}),T=P.getInitialState({totalCount:0,currentPlane:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),L=(0,s.Lq)(T,(0,s.on)(d,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!0})),(0,s.on)(g,e=>Object.assign(Object.assign({},e),{loadingGet:!0})),(0,s.on)(y,(e,{result:t,event:a})=>{const n=P.setAll(t.data,e);return n.currentPlane={},n.totalCount=t.totalCount,n.lastLazyLoadEvent=a,n.loadingGetAll=!1,n}),(0,s.on)(Z,(e,{plane:t})=>Object.assign(Object.assign({},e),{currentPlane:t,loadingGet:!1})),(0,s.on)(S,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})));function x(e,t){return(0,s.UY)({planes:L})(e,t)}const q=(0,s.ZF)("planes-mode-view"),D=(0,s.P1)(q,e=>e.planes),F=(0,s.P1)(D,e=>e.totalCount),M=(0,s.P1)(D,e=>e.currentPlane),O=(0,s.P1)(D,e=>e.lastLazyLoadEvent),_=(0,s.P1)(D,e=>e.loadingGet),G=(0,s.P1)(D,e=>e.loadingGetAll),{selectAll:U}=P.getSelectors(D);var $=a(42);let E=(()=>{class e{constructor(e,t,a,n){this.actions$=e,this.planeDas=t,this.biaMessageService=a,this.store=n,this.loadAllByPost$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(d),(0,o.j)("event"),(0,r.w)(e=>this.planeDas.getListByPost(e).pipe((0,c.U)(t=>y({result:t,event:e})),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.load$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(g),(0,o.j)("id"),(0,r.w)(e=>this.planeDas.get(e).pipe((0,c.U)(e=>Z({plane:e})),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.create$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(m),(0,o.j)("plane"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.post(e).pipe((0,c.U)(()=>(this.biaMessageService.showAddSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.update$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(f),(0,o.j)("plane"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.put(e,e.id).pipe((0,c.U)(()=>(this.biaMessageService.showUpdateSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.destroy$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(b),(0,o.j)("id"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.delete(e).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.multiDestroy$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(v),(0,o.j)("ids"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.deletes(e).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(A.LFG(i.eX),A.LFG(w),A.LFG($.X),A.LFG(s.yh))},e.\u0275prov=A.Yz7({token:e,factory:e.\u0275fac}),e})();var z=a(88385),I=a(79090),V=a(40136),Y=a(8340),j=a(49457),J=a(38042),K=a(29206),N=a(46468),k=a(81780),B=a(35618),Q=a(81606),H=a(76743),X=a(38583);let R=(()=>{class e{constructor(e,t,a,n,s,i){this.store=e,this.router=t,this.authService=a,this.planeDas=n,this.translateService=s,this.biaTranslationService=i,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=V.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.createPlaneRoute="/examples/planes-view/create",this.indexPlaneRoute="/examples/planes-view/",this.tableStateKey="planesGrid"}ngOnInit(){this.initTableConfiguration(),this.setPermissions(),this.planes$=this.store.select(U),this.totalCount$=this.store.select(F),this.loading$=this.store.select(G),this.store.dispatch((0,N.Tx)())}onCreate(){this.router.navigate([this.createPlaneRoute])}onEdit(e){this.router.navigate([this.indexPlaneRoute+e+"/edit"])}onDelete(){this.selectedPlanes&&this.store.dispatch(v({ids:this.selectedPlanes.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedPlanes=e}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){this.store.dispatch(d({event:e}))}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(e){this.viewPreference=e}onExportCSV(){const e={};this.columns.map(t=>e[t.value.split(".")[1]]=this.translateService.instant(t.value));const t=Object.assign({columns:e},this.planeListComponent.getLazyLoadMetadata());this.planeDas.getFile(t).subscribe(e=>{j.saveAs(e,this.translateService.instant("app.planes")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(K.y.Plane_Update),this.canDelete=this.authService.hasPermission(K.y.Plane_Delete),this.canAdd=this.authService.hasPermission(K.y.Plane_Create)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(e=>{this.tableConfiguration={columns:[new I.ML("msn","plane.msn"),Object.assign(new I.ML("isActive","plane.isActive"),{isSearchable:!1,isSortable:!1,type:I.d5.Boolean}),Object.assign(new I.ML("firstFlightDate","plane.firstFlightDate"),{type:I.d5.Date,formatDate:e.dateFormat}),Object.assign(new I.ML("firstFlightTime","plane.firstFlightTime"),{isSearchable:!1,isSortable:!1,type:I.d5.Date,formatDate:e.timeFormat}),Object.assign(new I.ML("lastFlightDate","plane.lastFlightDate"),{type:I.d5.Date,formatDate:e.dateTimeFormat}),Object.assign(new I.ML("capacity","plane.capacity"),{type:I.d5.Number,filterMode:I.ZF.Equals})]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=[...this.columns]})}}return e.\u0275fac=function(t){return new(t||e)(A.Y36(s.yh),A.Y36(n.F0),A.Y36(Y.e),A.Y36(w),A.Y36(k.sK),A.Y36(J.P6))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-planes-index"]],viewQuery:function(e,t){if(1&e&&A.Gf(z.$,5),2&e){let e;A.iGM(e=A.CRH())&&(t.planeListComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&A.ekj("bia-flex",t.flex)},decls:10,vars:31,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"]],template:function(e,t){1&e&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"bia-table-header",2),A.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),A.ALo(3,"translate"),A.qZA(),A.TgZ(4,"bia-table-controller",3),A.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),A.ALo(5,"async"),A.qZA(),A.TgZ(6,"bia-table",4),A.NdJ("edit",function(e){return t.onEdit(e)})("loadLazy",function(e){return t.onLoadLazy(e)})("selectedElementsChanged",function(e){return t.onSelectedElementsChanged(e)}),A.ALo(7,"async"),A.ALo(8,"async"),A.ALo(9,"async"),A.qZA(),A.qZA(),A.qZA()),2&e&&(A.xp6(2),A.Q6J("headerTitle",A.lcZ(3,21,"plane.listOf"))("canAdd",t.canAdd)("canExportCSV",!0)("selectedElements",t.selectedPlanes),A.xp6(2),A.Q6J("defaultPageSize",t.defaultPageSize)("length",A.lcZ(5,23,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey),A.xp6(2),A.Q6J("elements",A.lcZ(7,25,t.planes$))("totalRecord",A.lcZ(8,27,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canSelectElement",t.canDelete)("loading",A.lcZ(9,29,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey))},directives:[B.xw,B.yH,Q.l,H.B,z.$],pipes:[k.X$,X.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})();var W=a(84594),ee=a(3679),te=a(13928),ae=a(12332),ne=a(88598),se=a(45862),ie=a(4207);let le=(()=>{class e{constructor(e){this.formBuilder=e,this.plane={},this.save=new A.vpe,this.cancel=new A.vpe,this.initForm()}ngOnChanges(e){e.plane&&(this.form.reset(),this.plane&&this.form.patchValue(Object.assign({},this.plane)))}initForm(){this.form=this.formBuilder.group({id:[this.plane.id],msn:[this.plane.msn,ee.kI.required],isActive:[this.plane.isActive],firstFlightDate:[this.plane.firstFlightDate,ee.kI.required],firstFlightTime:[this.plane.firstFlightTime,ee.kI.required],lastFlightDate:[this.plane.lastFlightDate],capacity:[this.plane.capacity,ee.kI.required]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){if(this.form.valid){const e=this.form.value;e.id=e.id>0?e.id:0,e.isActive=!!e.isActive&&e.isActive,this.save.emit(e),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(A.Y36(ee.qu))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-plane-form"]],inputs:{plane:"plane"},outputs:{save:"save",cancel:"cancel"},features:[A.TTD],decls:53,vars:28,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["formControlName","msn","type","text","pInputText","","maxlength","64"],[1,"bia-star-mandatory"],["binary","true","formControlName","isActive",3,"label"],["biaLocale","","formControlName","firstFlightDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar"],["formControlName","firstFlightTime","showTime","true","placeholder","\xa0",3,"timeOnly"],["biaLocale","","formControlName","lastFlightDate","showTime","true","placeholder","DateTime","dateFormat","yy-mm-dd","placeholder","\xa0"],["formControlName","capacity","type","number","pInputText",""],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(A.TgZ(0,"form",0),A.NdJ("submit",function(){return t.onSubmit()}),A.TgZ(1,"div",1),A.TgZ(2,"div",2),A.TgZ(3,"span",3),A._UZ(4,"input",4),A.TgZ(5,"label"),A.TgZ(6,"span",5),A._uU(7,"*"),A.qZA(),A._uU(8),A.ALo(9,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(10,"div",1),A.TgZ(11,"div",2),A._UZ(12,"p-checkbox",6),A.ALo(13,"translate"),A.qZA(),A.qZA(),A.TgZ(14,"div",1),A.TgZ(15,"div",2),A.TgZ(16,"span",3),A._UZ(17,"p-calendar",7),A.TgZ(18,"label"),A.TgZ(19,"span",5),A._uU(20,"*"),A.qZA(),A._uU(21),A.ALo(22,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(23,"div",1),A.TgZ(24,"div",2),A.TgZ(25,"span",3),A._UZ(26,"p-calendar",8),A.TgZ(27,"label"),A.TgZ(28,"span",5),A._uU(29,"*"),A.qZA(),A._uU(30),A.ALo(31,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(32,"div",1),A.TgZ(33,"div",2),A.TgZ(34,"span",3),A._UZ(35,"p-calendar",9),A.TgZ(36,"label"),A._uU(37),A.ALo(38,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(39,"div",1),A.TgZ(40,"div",2),A.TgZ(41,"span",3),A._UZ(42,"input",10),A.TgZ(43,"label"),A.TgZ(44,"span",5),A._uU(45,"*"),A.qZA(),A._uU(46),A.ALo(47,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(48,"div",11),A._UZ(49,"button",12),A.ALo(50,"translate"),A.TgZ(51,"button",13),A.NdJ("click",function(){return t.onCancel()}),A.ALo(52,"translate"),A.qZA(),A.qZA(),A.qZA()),2&e&&(A.Q6J("formGroup",t.form),A.xp6(8),A.Oqu(A.lcZ(9,12,"plane.msn")),A.xp6(4),A.s9C("label",A.lcZ(13,14,"plane.isActive")),A.xp6(5),A.Q6J("showButtonBar",!0),A.xp6(4),A.Oqu(A.lcZ(22,16,"plane.firstFlightDate")),A.xp6(5),A.Q6J("timeOnly",!0),A.xp6(4),A.Oqu(A.lcZ(31,18,"plane.firstFlightTime")),A.xp6(7),A.Oqu(A.lcZ(38,20,"plane.lastFlightDate")),A.xp6(9),A.Oqu(A.lcZ(47,22,"plane.capacity")),A.xp6(3),A.s9C("label",A.lcZ(50,24,"bia.save")),A.Q6J("disabled",!t.form.valid),A.xp6(2),A.s9C("label",A.lcZ(52,26,"bia.cancel")))},directives:[ee._Y,ee.JL,B.xw,ee.sg,B.Wh,B.yH,ee.Fj,ee.JJ,ee.u,te.o,ee.nD,ae.XZ,ne.f,se.D,ee.wV,B.SQ,ie.Hq],pipes:[k.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),e})(),oe=(()=>{class e{constructor(e,t){this.store=e,this.location=t}onSubmitted(e){this.store.dispatch(m({plane:e})),this.location.back()}onCancelled(){this.plane={},this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(A.Y36(s.yh),A.Y36(X.Ye))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-plane-new"]],decls:1,vars:1,consts:[[3,"plane","cancel","save"]],template:function(e,t){1&e&&(A.TgZ(0,"app-plane-form",0),A.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),A.qZA()),2&e&&A.Q6J("plane",t.plane)},directives:[le],styles:[""]}),e})();var re=a(75319);let ce=(()=>{class e{constructor(e){this.store=e,this.sub=new re.w,this.InitSub(),this.loading$=this.store.select(_),this.plane$=this.store.select(M)}get currentPlane(){var e;return(null===(e=this._currentPlane)||void 0===e?void 0:e.id)===this._currentPlaneId?this._currentPlane:null}get currentPlaneId(){return this._currentPlaneId}set currentPlaneId(e){this._currentPlaneId=Number(e),this.store.dispatch(g({id:e}))}InitSub(){this.sub=new re.w,this.sub.add(this.store.select(M).subscribe(e=>{e&&(this._currentPlane=e)}))}}return e.\u0275fac=function(t){return new(t||e)(A.LFG(s.yh))},e.\u0275prov=A.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var pe=a(79373);function ue(e,t){1&e&&A._UZ(0,"bia-spinner",2),2&e&&A.Q6J("overlay",!0)}let he=(()=>{class e{constructor(e,t,a){this.store=e,this.location=t,this.planeService=a,this.displayChange=new A.vpe,this.sub=new re.w}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(f({plane:e})),this.location.back()}onCancelled(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(A.Y36(s.yh),A.Y36(X.Ye),A.Y36(ce))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-plane-edit"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[3,"plane","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(A.TgZ(0,"app-plane-form",0),A.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),A.ALo(1,"async"),A.qZA(),A.YNc(2,ue,1,1,"bia-spinner",1),A.ALo(3,"async")),2&e&&(A.Q6J("plane",A.lcZ(1,2,t.planeService.plane$)),A.xp6(2),A.Q6J("ngIf",A.lcZ(3,4,t.planeService.loading$)))},directives:[le,X.O5,pe.O],pipes:[X.Ov],styles:[""]}),e})();var de=a(16249),ge=a(30466),me=a(28049);function fe(e,t){1&e&&A._UZ(0,"bia-spinner",1),2&e&&A.Q6J("overlay",!0)}const be=[{path:"",data:{breadcrumb:null,permission:K.y.Plane_List_Access},component:R,canActivate:[de.n]},{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:K.y.Plane_Create},component:oe,canActivate:[de.n]},{path:":planeId",data:{breadcrumb:"",canNavigate:!0},component:(()=>{class e{constructor(e,t,a,n){this.store=e,this.route=t,this.planeService=a,this.layoutService=n,this.sub=new re.w}ngOnInit(){this.planeService.currentPlaneId=this.route.snapshot.params.planeId,this.sub.add(this.store.select(M).subscribe(e=>{(null==e?void 0:e.msn)&&(this.route.data.pipe((0,me.P)()).subscribe(t=>{t.breadcrumb=e.msn}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(A.Y36(s.yh),A.Y36(n.gz),A.Y36(ce),A.Y36(ge.N))},e.\u0275cmp=A.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(A._UZ(0,"router-outlet"),A.YNc(1,fe,1,1,"bia-spinner",0),A.ALo(2,"async")),2&e&&(A.xp6(1),A.Q6J("ngIf",A.lcZ(2,1,t.planeService.loading$)))},directives:[n.lC,X.O5,pe.O],pipes:[X.Ov],styles:[""]}),e})(),canActivate:[de.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:K.y.Plane_Update},component:he,canActivate:[de.n]},{path:"",redirectTo:"edit"}]},{path:"**",redirectTo:""}];let ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[W.m,n.Bz.forChild(be),s.Aw.forFeature("planes-mode-view",x),i.sQ.forFeature([E])]]}),e})()}}]);