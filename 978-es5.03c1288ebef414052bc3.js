!function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}function e(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var e,o,a=[],r=!0,s=!1;try{for(i=i.call(t);!(r=(e=i.next()).done)&&(a.push(e.value),!n||a.length!==n);r=!0);}catch(c){s=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}return a}(t,n)||o(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n){if(t){if("string"==typeof t)return a(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,n):void 0}}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}function r(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&l(t,n)}function l(t,n){return(l=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,e=p(t);if(n){var o=p(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return f(this,i)}}function f(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[978],{33978:function(n,o,a){a.r(o),a.d(o,{NotificationModule:function(){return Vi}});var l,f=a(2694),p=a(86710),d=a(91601),h=a(25917),g=a(92996),v=a(43190),y=a(88002),m=a(5304),b=a(94612),x=a(57057),w=(0,p.PH)("[Notifications] Load all by post",(0,p.Ky)()),Z=(0,p.PH)("[Notifications] Load",(0,p.Ky)()),S=(0,p.PH)("[Notifications] Create",(0,p.Ky)()),C=(0,p.PH)("[Notifications] Update",(0,p.Ky)()),A=(0,p.PH)("[Notifications] Remove",(0,p.Ky)()),T=(0,p.PH)("[Notifications] Multi Remove",(0,p.Ky)()),O=(0,p.PH)("[Notifications] Load all by post success",(0,p.Ky)()),L=(0,p.PH)("[Notifications] Load success",(0,p.Ky)()),N=(0,p.PH)("[Notifications] Failure",(0,p.Ky)()),k=a(74147),q=a(37716),M=((l=function(t){c(i,t);var n=u(i);function i(t){return s(this,i),n.call(this,t,"Notifications")}return i}(k.Z)).\u0275fac=function(t){return new(t||l)(q.LFG(q.zs3))},l.\u0275prov=q.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l),I=a(80273),J=(0,I.H)({selectId:function(t){return t.id},sortComparer:!1}),D=J.getInitialState({totalCount:0,currentNotification:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),Q=(0,p.Lq)(D,(0,p.on)(w,function(t,n){return r(n),Object.assign(Object.assign({},t),{loadingGetAll:!0})}),(0,p.on)(Z,function(t){return Object.assign(Object.assign({},t),{loadingGet:!0})}),(0,p.on)(O,function(t,n){var i=n.result,e=n.event,o=J.setAll(i.data,t);return o.totalCount=i.totalCount,o.lastLazyLoadEvent=e,o.loadingGetAll=!1,o}),(0,p.on)(L,function(t,n){var i=n.notification;return Object.assign(Object.assign({},t),{currentNotification:i,loadingGet:!1})}),(0,p.on)(N,function(t,n){return r(n),Object.assign(Object.assign({},t),{loadingGetAll:!1,loadingGet:!1})}));function $(t,n){return(0,p.UY)({notifications:Q})(t,n)}var Y=(0,p.ZF)("notifications"),F=(0,p.P1)(Y,function(t){return t.notifications}),P=(0,p.P1)(F,function(t){return t.totalCount}),U=(0,p.P1)(F,function(t){return t.currentNotification}),_=(0,p.P1)(F,function(t){return t.lastLazyLoadEvent}),B=(0,p.P1)(F,function(t){return t.loadingGet}),E=(0,p.P1)(F,function(t){return t.loadingGetAll}),j=J.getSelectors(F).selectAll,H=a(82762),R=a(42),z=function(){var t=function t(n,i,o,a){var r=this;s(this,t),this.actions$=n,this.notificationDas=i,this.biaMessageService=o,this.store=a,this.loadAllByPost$=(0,d.GW)(function(){return r.actions$.pipe((0,d.l4)(w),(0,g.j)("event"),(0,v.w)(function(t){return r.notificationDas.getListByPost(t).pipe((0,y.U)(function(n){return O({result:n,event:t})}),(0,m.K)(function(t){return r.biaMessageService.showError(),(0,h.of)(N({error:t}))}))}))}),this.load$=(0,d.GW)(function(){return r.actions$.pipe((0,d.l4)(Z),(0,g.j)("id"),(0,v.w)(function(t){return r.notificationDas.get(t).pipe((0,y.U)(function(t){return L({notification:t})}),(0,m.K)(function(t){return r.biaMessageService.showError(),(0,h.of)(N({error:t}))}))}))}),this.create$=(0,d.GW)(function(){return r.actions$.pipe((0,d.l4)(S),(0,g.j)("notification"),(0,b.b)(function(t){return(0,h.of)(t).pipe((0,x.M)(r.store.select(_)))}),(0,v.w)(function(n){var i=e(n,2),o=i[0],a=i[1];return r.notificationDas.post(o).pipe((0,y.U)(function(){return r.biaMessageService.showAddSuccess(),t.useSignalR?(0,H.b)():w({event:a})}),(0,m.K)(function(t){return r.biaMessageService.showError(),(0,h.of)(N({error:t}))}))}))}),this.update$=(0,d.GW)(function(){return r.actions$.pipe((0,d.l4)(C),(0,g.j)("notification"),(0,b.b)(function(t){return(0,h.of)(t).pipe((0,x.M)(r.store.select(_)))}),(0,v.w)(function(n){var i=e(n,2),o=i[0],a=i[1];return r.notificationDas.put(o,o.id).pipe((0,y.U)(function(){return r.biaMessageService.showUpdateSuccess(),t.useSignalR?(0,H.b)():w({event:a})}),(0,m.K)(function(t){return r.biaMessageService.showError(),(0,h.of)(N({error:t}))}))}))}),this.destroy$=(0,d.GW)(function(){return r.actions$.pipe((0,d.l4)(A),(0,g.j)("id"),(0,b.b)(function(t){return(0,h.of)(t).pipe((0,x.M)(r.store.select(_)))}),(0,v.w)(function(n){var i=e(n,2),o=i[0],a=i[1];return r.notificationDas.delete(o).pipe((0,y.U)(function(){return r.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,H.b)():w({event:a})}),(0,m.K)(function(t){return r.biaMessageService.showError(),(0,h.of)(N({error:t}))}))}))}),this.multiDestroy$=(0,d.GW)(function(){return r.actions$.pipe((0,d.l4)(T),(0,g.j)("ids"),(0,b.b)(function(t){return(0,h.of)(t).pipe((0,x.M)(r.store.select(_)))}),(0,v.w)(function(n){var i=e(n,2),o=i[0],a=i[1];return r.notificationDas.deletes(o).pipe((0,y.U)(function(){return r.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,H.b)():w({event:a})}),(0,m.K)(function(t){return r.biaMessageService.showError(),(0,h.of)(N({error:t}))}))}))})};return t.useSignalR=!1,t.\u0275fac=function(n){return new(n||t)(q.LFG(d.eX),q.LFG(M),q.LFG(R.X),q.LFG(p.yh))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac}),t}(),G=a(75319),K=a(88385),V=a(79090),X=a(40136),W=a(8340),tt=a(49457),nt=a(38042),it=a(29206),et=a(28049),ot=a(59142),at=function(){var t=function(){function t(n,i,e){s(this,t),this.store=n,this.signalRService=i,this.authService=e}return i(t,[{key:"initialize",value:function(){var t=this;console.log("%c [Notifications] Register SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-notifications",function(n){var i=JSON.parse(n);t.IsInMyDisplay(i)&&t.store.select(_).pipe((0,et.P)()).subscribe(function(n){console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),t.store.dispatch(w({event:n}))})}),this.signalRService.addMethod("refresh-notifications-several",function(n){JSON.parse(n).some(function(n){return t.IsInMyDisplay(n)})&&t.store.select(_).pipe((0,et.P)()).subscribe(function(n){console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),t.store.dispatch(w({event:n}))})}),this.targetedFeature={parentKey:this.authService.getAdditionalInfos().userData.currentSiteId.toString(),featureName:"notifications"},this.signalRService.joinGroup(this.targetedFeature)}},{key:"IsInMyDisplay",value:function(t){var n=this,i=this.authService.getAdditionalInfos(),e=t.siteId===i.userData.currentSiteId,o=null==t.notifiedUsers||0===t.notifiedUsers.length||t.notifiedUsers.some(function(t){return t.id===i.userInfo.id}),a=null==t.notifiedPermissions||0===t.notifiedPermissions.length||t.notifiedPermissions.some(function(t){return n.authService.hasPermission(t.id.toString())});return e&&o&&a}},{key:"destroy",value:function(){console.log("%c [Notifications] Unregister SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-notifications"),this.signalRService.leaveGroup(this.targetedFeature)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.LFG(p.yh),q.LFG(ot.Y),q.LFG(W.e))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),rt=a(46468),st=a(9112),ct=(0,p.PH)("[Domain Language Options] Load all"),lt=(0,p.PH)("[Domain Language Options] Load all success",(0,p.Ky)()),ut=(0,p.PH)("[Domain Language Options] Failure",(0,p.Ky)()),ft=(0,I.H)({selectId:function(t){return t.id},sortComparer:!1}),pt=ft.getInitialState({}),dt=(0,p.Lq)(pt,(0,p.on)(lt,function(t,n){var i=n.languages;return ft.setAll(i,t)}));function ht(t,n){return(0,p.UY)({languageOptions:dt})(t,n)}var gt=(0,p.ZF)("domain-language-options"),vt=(0,p.P1)(gt,function(t){return t.languageOptions}),yt=ft.getSelectors(vt).selectAll,mt=(0,p.PH)("[Domain Notification Type Options] Load all"),bt=(0,p.PH)("[Domain Notification Type Options] Load all success",(0,p.Ky)()),xt=(0,p.PH)("[Domain Notification Type Options] Failure",(0,p.Ky)()),wt=(0,I.H)({selectId:function(t){return t.id},sortComparer:!1}),Zt=wt.getInitialState({}),St=(0,p.Lq)(Zt,(0,p.on)(bt,function(t,n){var i=n.notificationTypes;return wt.setAll(i,t)}));function Ct(t,n){return(0,p.UY)({notificationTypeOptions:St})(t,n)}var At=(0,p.ZF)("domain-notification-type-options"),Tt=(0,p.P1)(At,function(t){return t.notificationTypeOptions}),Ot=wt.getSelectors(Tt).selectAll,Lt=(0,p.PH)("[Domain Permission Options] Load all"),Nt=(0,p.PH)("[Domain Permission Options] Load all success",(0,p.Ky)()),kt=(0,p.PH)("[Domain Permission Options] Failure",(0,p.Ky)()),qt=(0,I.H)({selectId:function(t){return t.id},sortComparer:!1}),Mt=qt.getInitialState({}),It=(0,p.Lq)(Mt,(0,p.on)(Nt,function(t,n){var i=n.permissions;return qt.setAll(i,t)}));function Jt(t,n){return(0,p.UY)({permissionOptions:It})(t,n)}var Dt=(0,p.ZF)("domain-permission-options"),Qt=(0,p.P1)(Dt,function(t){return t.permissionOptions}),$t=qt.getSelectors(Qt).selectAll,Yt=a(43590),Ft=a(71585),Pt=a(94529),Ut=function(){var t=function(){function t(n){s(this,t),this.store=n,this.notificationTypeOptions$=this.store.select(Ot),this.permissionOptions$=this.store.select($t),this.userOptions$=this.store.select(Yt.yp),this.languageOptions$=this.store.select(yt),this.dictOptionDtos$=(0,st.aj)([this.notificationTypeOptions$,this.permissionOptions$,this.userOptions$]).pipe((0,y.U)(function(t){return[new Pt.b("type",t[0]),new Pt.b("notifiedPermissions",t[1]),new Pt.b("notifiedUsers",t[2]),new Pt.b("createdBy",t[2])]}))}return i(t,[{key:"loadAllOptions",value:function(){this.store.dispatch(mt()),this.store.dispatch(Lt()),this.store.dispatch((0,Ft.Ae)()),this.store.dispatch(ct())}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.LFG(p.yh))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),_t=a(81780),Bt=a(35618),Et=a(81606),jt=a(76743),Ht=a(38583),Rt=a(3679),zt=a(11466),Gt=a(86320),Kt=a(70667),Vt=a(33013),Xt=a(13928),Wt=a(88030),tn=a(50103),nn=a(36949),en=a(12332),on=a(88598),an=a(45862),rn=a(49067);function sn(t,n){1&t&&(q.TgZ(0,"th",10),q._UZ(1,"p-tableHeaderCheckbox"),q.qZA())}function cn(t,n){if(1&t&&(q.TgZ(0,"th",12),q._uU(1),q.ALo(2,"translate"),q._UZ(3,"p-sortIcon",13),q.qZA()),2&t){var i=q.oxw().$implicit;q.Q6J("pSortableColumn",i.field),q.xp6(1),q.hij(" ",q.lcZ(2,3,null==i?null:i.header)," "),q.xp6(2),q.Q6J("field",i.field)}}function ln(t,n){if(1&t&&(q.TgZ(0,"th"),q._uU(1),q.ALo(2,"translate"),q.qZA()),2&t){var i=q.oxw().$implicit;q.xp6(1),q.hij(" ",q.lcZ(2,1,null==i?null:i.header)," ")}}function un(t,n){if(1&t&&(q.ynx(0),q.YNc(1,cn,4,5,"th",11),q.YNc(2,ln,3,3,"th",9),q.BQk()),2&t){var i=n.$implicit;q.xp6(1),q.Q6J("ngIf",!0===(null==i?null:i.isSortable)),q.xp6(1),q.Q6J("ngIf",!0!==(null==i?null:i.isSortable))}}function fn(t,n){1&t&&q._UZ(0,"th")}var pn=function(t){return{"p-state-filled":t}};function dn(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"span",17),q.TgZ(1,"input",18),q.NdJ("input",function(t){q.CHM(i);var n=q.oxw().$implicit;return q.oxw(3),q.MAs(1).filter(t.target.value,n.field,n.filterMode)}),q.ALo(2,"translate"),q.qZA(),q.qZA()}if(2&t){var e=q.oxw().$implicit;q.oxw(3);var o=q.MAs(1);q.xp6(1),q.s9C("type","Number"===e.type?"number":"text"),q.s9C("placeholder",void 0!==e.searchPlaceholder?e.searchPlaceholder:!0===e.isDate?q.lcZ(2,4,"bia.dateIso8601"):""),q.Q6J("value",null==o.filters[e.field]?null:o.filters[e.field].value)("ngClass",q.VKq(6,pn,""!==(null==o.filters[e.field]?null:o.filters[e.field].value)))}}function hn(t,n){if(1&t&&(q.TgZ(0,"th",15),q.YNc(1,dn,3,8,"span",16),q.qZA()),2&t){var i=n.$implicit;q.Q6J("ngSwitch",i.field),q.xp6(1),q.Q6J("ngIf",!0===i.isSearchable)}}function gn(t,n){if(1&t&&(q.TgZ(0,"tr"),q.YNc(1,fn,1,0,"th",9),q.YNc(2,hn,2,2,"th",14),q.qZA()),2&t){var i=q.oxw().$implicit,e=q.oxw(2);q.xp6(1),q.Q6J("ngIf",e.canSelectElement),q.xp6(1),q.Q6J("ngForOf",i)}}function vn(t,n){if(1&t&&(q.TgZ(0,"tr"),q.YNc(1,sn,2,0,"th",7),q.YNc(2,un,3,2,"ng-container",8),q.qZA(),q.YNc(3,gn,3,2,"tr",9)),2&t){var i=n.$implicit,e=q.oxw(2);q.xp6(1),q.Q6J("ngIf",e.canSelectElement),q.xp6(1),q.Q6J("ngForOf",i),q.xp6(1),q.Q6J("ngIf",e.showColSearch)}}function yn(t,n){if(1&t&&q._UZ(0,"p-tableCheckbox",23),2&t){var i=q.oxw(2).$implicit;q.Q6J("value",i)}}function mn(t,n){1&t&&q._UZ(0,"i",24)}function bn(t,n){if(1&t&&(q.TgZ(0,"td"),q.YNc(1,yn,1,1,"p-tableCheckbox",21),q.YNc(2,mn,1,0,"i",22),q.qZA()),2&t){var i=q.oxw().$implicit,e=q.oxw(2);q.xp6(1),q.Q6J("ngIf",!0!==e.isFooter(i)&&i.id>0),q.xp6(1),q.Q6J("ngIf",!0===e.isFooter(i))}}function xn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"input",29),q.NdJ("change",function(){return q.CHM(i),q.oxw(6).onChange()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(3).$implicit;q.xp6(1),q.Q6J("formControlName",e.field)}}function wn(t,n){1&t&&(q.TgZ(0,"span",30),q._uU(1,"*"),q.qZA())}function Zn(t,n){if(1&t&&(q.ynx(0,15),q.YNc(1,xn,2,1,"ng-container",27),q.BQk(),q.YNc(2,wn,2,0,"span",28)),2&t){var i=q.oxw(2).$implicit,e=q.oxw(3);q.Q6J("ngSwitch",i.field),q.xp6(2),q.Q6J("ngIf",!0===e.isRequired(i.field))}}function Sn(t,n){1&t&&q.YNc(0,Zn,3,2,"ng-template",26)}function Cn(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.BQk()),2&t){var i=q.oxw(3).$implicit,e=q.oxw().$implicit;q.xp6(1),q.hij(" ",e[i.field]," ")}}function An(t,n){if(1&t&&(q.ynx(0,15),q.YNc(1,Cn,2,1,"ng-container",27),q.BQk()),2&t){var i=q.oxw(2).$implicit;q.Q6J("ngSwitch",i.field)}}function Tn(t,n){1&t&&q.YNc(0,An,2,1,"ng-template",31)}var On=function(){return{width:"100%"}};function Ln(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-dropdown",35),q.NdJ("onChange",function(){return q.CHM(i),q.oxw(7).onChange()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit,o=q.oxw(3);q.xp6(1),q.Akn(q.DdM(4,On)),q.Q6J("formControlName",e.field)("options",o.getOptionDto(e.field))}}function Nn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-multiSelect",36),q.NdJ("onChange",function(){return q.CHM(i),q.oxw(7).onChange()})("onPanelShow",function(){return q.CHM(i),q.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return q.CHM(i),q.oxw(7).onPanelHideMultiSelect()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit,o=q.oxw(3);q.xp6(1),q.Akn(q.DdM(4,On)),q.Q6J("formControlName",e.field)("options",o.getOptionDto(e.field))}}function kn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-checkbox",37),q.NdJ("onChange",function(){return q.CHM(i),q.oxw(7).onChange()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Q6J("binary",!0)("formControlName",e.field)}}function qn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"input",38),q.NdJ("change",function(){return q.CHM(i),q.oxw(7).onChange()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Q6J("formControlName",e.field)}}function Mn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-calendar",39),q.NdJ("onShow",function(){return q.CHM(i),q.oxw(7).onShowCalendar()})("onSelect",function(){return q.CHM(i),q.oxw(7).onChange()})("onBlur",function(){return q.CHM(i),q.oxw(7).onBlurCalendar()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Akn(q.DdM(5,On)),q.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",q.DdM(6,On))}}function In(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-calendar",40),q.NdJ("onShow",function(){return q.CHM(i),q.oxw(7).onShowCalendar()})("onSelect",function(){return q.CHM(i),q.oxw(7).onChange()})("onBlur",function(){return q.CHM(i),q.oxw(7).onBlurCalendar()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Akn(q.DdM(5,On)),q.Q6J("formControlName",e.field)("inputStyle",q.DdM(6,On))("timeOnly",!0)}}function Jn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-calendar",41),q.NdJ("onShow",function(){return q.CHM(i),q.oxw(7).onShowCalendar()})("onSelect",function(){return q.CHM(i),q.oxw(7).onChange()})("onBlur",function(){return q.CHM(i),q.oxw(7).onBlurCalendar()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Akn(q.DdM(5,On)),q.Q6J("formControlName",e.field)("inputStyle",q.DdM(6,On))("timeOnly",!0)}}function Dn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-calendar",42),q.NdJ("onShow",function(){return q.CHM(i),q.oxw(7).onShowCalendar()})("onSelect",function(){return q.CHM(i),q.oxw(7).onChange()})("onBlur",function(){return q.CHM(i),q.oxw(7).onBlurCalendar()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Akn(q.DdM(5,On)),q.Q6J("formControlName",e.field)("inputStyle",q.DdM(6,On))("timeOnly",!0)}}function Qn(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"p-calendar",43),q.NdJ("onShow",function(){return q.CHM(i),q.oxw(7).onShowCalendar()})("onSelect",function(){return q.CHM(i),q.oxw(7).onChange()})("onBlur",function(){return q.CHM(i),q.oxw(7).onBlurCalendar()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Akn(q.DdM(5,On)),q.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",q.DdM(6,On))}}function $n(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.TgZ(1,"input",44),q.NdJ("change",function(){return q.CHM(i),q.oxw(7).onChange()}),q.qZA(),q.BQk()}if(2&t){var e=q.oxw(4).$implicit;q.xp6(1),q.Q6J("maxlength",e.maxlength)("formControlName",e.field)}}function Yn(t,n){1&t&&(q.TgZ(0,"span",30),q._uU(1,"*"),q.qZA())}function Fn(t,n){if(1&t&&(q.ynx(0,15),q.YNc(1,Ln,2,5,"ng-container",34),q.YNc(2,Nn,2,5,"ng-container",34),q.YNc(3,kn,2,2,"ng-container",34),q.YNc(4,qn,2,1,"ng-container",34),q.YNc(5,Mn,2,7,"ng-container",34),q.YNc(6,In,2,7,"ng-container",34),q.YNc(7,Jn,2,7,"ng-container",34),q.YNc(8,Dn,2,7,"ng-container",34),q.YNc(9,Qn,2,7,"ng-container",34),q.YNc(10,$n,2,2,"ng-container",27),q.BQk(),q.YNc(11,Yn,2,0,"span",28)),2&t){var i=q.oxw(3).$implicit,e=q.oxw(3);q.Q6J("ngSwitch",i.type),q.xp6(1),q.Q6J("ngSwitchCase","OneToMany"),q.xp6(1),q.Q6J("ngSwitchCase","ManyToMany"),q.xp6(1),q.Q6J("ngSwitchCase","Boolean"),q.xp6(1),q.Q6J("ngSwitchCase","Number"),q.xp6(1),q.Q6J("ngSwitchCase","Date"),q.xp6(1),q.Q6J("ngSwitchCase","Time"),q.xp6(1),q.Q6J("ngSwitchCase","TimeOnly"),q.xp6(1),q.Q6J("ngSwitchCase","TimeSecOnly"),q.xp6(1),q.Q6J("ngSwitchCase","DateTime"),q.xp6(2),q.Q6J("ngIf",!0===e.isRequired(i.field))}}function Pn(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.BQk()),2&t){var i=q.oxw(5).$implicit,e=q.oxw().$implicit;q.xp6(1),q.hij(" ",null==e[i.field]?null:e[i.field].display," ")}}function Un(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.BQk()),2&t){var i=q.oxw(5).$implicit,e=q.oxw().$implicit,o=q.oxw(2);q.xp6(1),q.hij(" ",o.formatDisplayName(e[i.field])," ")}}function _n(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.ALo(2,"formatValue"),q.BQk()),2&t){var i=q.oxw(5).$implicit,e=q.oxw().$implicit;q.xp6(1),q.hij(" ",q.xi3(2,1,e[i.field],i)," ")}}function Bn(t,n){if(1&t&&(q.ynx(0),q.ynx(1,15),q.YNc(2,Pn,2,1,"ng-container",34),q.YNc(3,Un,2,1,"ng-container",34),q.YNc(4,_n,3,4,"ng-container",27),q.BQk(),q.BQk()),2&t){var i=q.oxw(4).$implicit;q.xp6(1),q.Q6J("ngSwitch",i.type),q.xp6(1),q.Q6J("ngSwitchCase","OneToMany"),q.xp6(1),q.Q6J("ngSwitchCase","ManyToMany")}}function En(t,n){if(1&t&&q.YNc(0,Bn,5,3,"ng-container",9),2&t){var i=q.oxw(4).$implicit,e=q.oxw(2);q.Q6J("ngIf",!0!==e.isFooter(i))}}function jn(t,n){if(1&t&&(q.YNc(0,Fn,12,11,"ng-template",32),q.YNc(1,En,1,1,"ng-template",null,33,q.W1O)),2&t){var i=q.MAs(2),e=q.oxw(2).$implicit;q.Q6J("ngIf",!0===e.isEditable)("ngIfElse",i)}}function Hn(t,n){1&t&&q.YNc(0,jn,3,2,"ng-template",26)}function Rn(t,n){1&t&&(q.TgZ(0,"label"),q._uU(1,"-"),q.qZA())}function zn(t,n){if(1&t&&q.YNc(0,Rn,2,0,"label",9),2&t){var i=q.oxw(3).$implicit;q.Q6J("ngIf",!0===i.isEditable)}}function Gn(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.BQk()),2&t){var i=q.oxw(4).$implicit,e=q.oxw().$implicit;q.xp6(1),q.hij(" ",null==e[i.field]?null:e[i.field].display," ")}}function Kn(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.BQk()),2&t){var i=q.oxw(4).$implicit,e=q.oxw().$implicit,o=q.oxw(2);q.xp6(1),q.hij(" ",o.formatDisplayName(e[i.field])," ")}}function Vn(t,n){1&t&&q._UZ(0,"i",47)}function Xn(t,n){if(1&t&&(q.ynx(0),q.YNc(1,Vn,1,0,"i",46),q.BQk()),2&t){var i=q.oxw(4).$implicit,e=q.oxw().$implicit;q.xp6(1),q.Q6J("ngIf",!0===e[i.field])}}function Wn(t,n){if(1&t&&(q.ynx(0),q._uU(1),q.ALo(2,"formatValue"),q.BQk()),2&t){var i=q.oxw(4).$implicit,e=q.oxw().$implicit;q.xp6(1),q.hij(" ",q.xi3(2,1,e[i.field],i)," ")}}function ti(t,n){if(1&t&&(q.ynx(0,15),q.YNc(1,Gn,2,1,"ng-container",34),q.YNc(2,Kn,2,1,"ng-container",34),q.YNc(3,Xn,2,1,"ng-container",34),q.YNc(4,Wn,3,4,"ng-container",27),q.BQk()),2&t){var i=q.oxw(3).$implicit;q.Q6J("ngSwitch",i.type),q.xp6(1),q.Q6J("ngSwitchCase","OneToMany"),q.xp6(1),q.Q6J("ngSwitchCase","ManyToMany"),q.xp6(1),q.Q6J("ngSwitchCase","Boolean")}}function ni(t,n){if(1&t&&(q.YNc(0,zn,1,1,"ng-template",32),q.YNc(1,ti,5,4,"ng-template",null,45,q.W1O)),2&t){var i=q.MAs(2),e=q.oxw(3).$implicit,o=q.oxw(2);q.Q6J("ngIf",!0===o.isFooter(e))("ngIfElse",i)}}function ii(t,n){1&t&&q.YNc(0,ni,3,2,"ng-template",31)}function ei(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"td",25),q.NdJ("click",function(){q.CHM(i);var t=q.oxw().$implicit;return q.oxw(2).initEditableRow(t)}),q.TgZ(1,"p-cellEditor"),q.YNc(2,Sn,1,0,void 0,9),q.YNc(3,Tn,1,0,void 0,9),q.YNc(4,Hn,1,0,void 0,9),q.YNc(5,ii,1,0,void 0,9),q.qZA(),q.qZA()}if(2&t){var e=n.$implicit,o=q.oxw(3);q.xp6(2),q.Q6J("ngIf",!0===o.isSpecificInput(e.field)),q.xp6(1),q.Q6J("ngIf",!0===o.isSpecificInput(e.field)),q.xp6(1),q.Q6J("ngIf",!0!==o.isSpecificInput(e.field)),q.xp6(1),q.Q6J("ngIf",!0!==o.isSpecificInput(e.field))}}function oi(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"tr",19),q.NdJ("focusout",function(){return q.CHM(i),q.oxw(2).onFocusout()})("keyup.enter",function(){return q.CHM(i),q.oxw(2).initEditableRow(null)})("keyup.escape",function(){return q.CHM(i),q.oxw(2).cancel()}),q.YNc(1,bn,3,2,"td",9),q.YNc(2,ei,6,4,"td",20),q.qZA()}if(2&t){var e=n.$implicit,o=n.columns,a=q.oxw(2);q.Q6J("pSelectableRow",!0!==a.isFooter(e)?e:null)("pEditableRow",e),q.xp6(1),q.Q6J("ngIf",a.canSelectElement),q.xp6(1),q.Q6J("ngForOf",o)}}function ai(t,n){if(1&t&&(q.TgZ(0,"tr"),q.TgZ(1,"td",48),q._uU(2),q.ALo(3,"translate"),q.qZA(),q.qZA()),2&t){var i=n.$implicit;q.xp6(1),q.uIk("colspan",i.length+1),q.xp6(1),q.hij(" ",q.lcZ(3,2,"bia.NoRecordsFound")," ")}}function ri(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"p-table",2,3),q.NdJ("onFilter",function(){return q.CHM(i),q.oxw().onFilter()})("onLazyLoad",function(t){return q.CHM(i),q.oxw().onLoadLazy(t)})("onStateSave",function(t){return q.CHM(i),q.oxw().onStateSave(t)})("selectionChange",function(){return q.CHM(i),q.oxw().onSelectionChange()}),q.ALo(2,"async"),q.YNc(3,vn,4,3,"ng-template",4),q.YNc(4,oi,3,4,"ng-template",5),q.YNc(5,ai,4,4,"ng-template",6),q.qZA()}if(2&t){var e=q.oxw();q.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",e.displayedColumns)("value",e.elements)("paginator",e.paginator)("rows",e.pageSize)("totalRecords",e.totalRecord)("lazy",!0)("loading",e.loading&&null!==q.lcZ(2,14,e.showLoading$))("stateStorage","session")("stateKey",e.tableStateKey)("lazyLoadOnInit",e.getLazyLoadOnInit())("sortField",e.sortFieldValue)("sortOrder",e.sortOrderValue)}}var si=function(){var t=function(t){c(e,t);var n=u(e);function e(t,i,o,a){var r;return s(this,e),(r=n.call(this,t,i,o,a)).formBuilder=t,r.authService=i,r.biaMessageService=o,r.translateService=a,r.initForm(),r}return i(e,[{key:"initForm",value:function(){var t,n;this.form=this.formBuilder.group({id:[this.element.id],title:[this.element.title,Rt.kI.required],description:[this.element.description,Rt.kI.required],type:[null===(t=this.element.type)||void 0===t?void 0:t.id,Rt.kI.required],read:[this.element.read],createdDate:[this.element.createdDate,Rt.kI.required],createdBy:[null===(n=this.element.createdBy)||void 0===n?void 0:n.id],notifiedPermissions:[this.element.notifiedPermissions],notifiedUsers:[this.element.notifiedUsers],jData:[this.element.jData]})}},{key:"onSubmit",value:function(){var t,n;if(this.form.valid){var i=this.form.value;i.id=i.id>0?i.id:0,i.read=!!i.read&&i.read,i.createdBy=zt.P.Clone(i.createdBy),i.notifiedPermissions=zt.P.Differential(i.notifiedPermissions,null===(t=this.element)||void 0===t?void 0:t.notifiedPermissions),i.notifiedUsers=zt.P.Differential(i.notifiedUsers,null===(n=this.element)||void 0===n?void 0:n.notifiedUsers),i.type=Object.assign({},i.type),this.save.emit(i),this.form.reset()}}}]),e}(Gt.l);return t.\u0275fac=function(n){return new(n||t)(q.Y36(Rt.qu),q.Y36(W.e),q.Y36(R.X),q.Y36(_t.sK))},t.\u0275cmp=q.Xpm({type:t,selectors:[["app-notification-table"]],features:[q.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(t,n){1&t&&(q.TgZ(0,"form",0),q.YNc(1,ri,6,16,"p-table",1),q.qZA()),2&t&&(q.Q6J("formGroup",n.form),q.xp6(1),q.Q6J("ngIf",n.configuration))},directives:[Rt._Y,Rt.JL,Rt.sg,Ht.O5,Kt.iA,Vt.jx,Ht.sg,Kt.Mo,Kt.lQ,Kt.fz,Ht.RF,Xt.o,Ht.mk,Wt.oO,Kt.Ei,Kt.D$,Kt.UA,Kt.YL,Ht.ED,Rt.Fj,Rt.JJ,Rt.u,Ht.n9,tn.Lt,nn.NU,en.XZ,Rt.wV,on.f,an.D,Rt.nD],pipes:[Ht.Ov,_t.X$,rn.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),t}();function ci(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"bia-table",6),q.NdJ("edit",function(t){return q.CHM(i),q.oxw().onDetail(t)})("loadLazy",function(t){return q.CHM(i),q.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return q.CHM(i),q.oxw().onSelectedElementsChanged(t)}),q.ALo(1,"async"),q.ALo(2,"async"),q.ALo(3,"async"),q.qZA()}if(2&t){var e=q.oxw();q.Q6J("elements",q.lcZ(1,12,e.notifications$))("totalRecord",q.lcZ(2,14,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canEdit",e.canEdit)("canSelectElement",e.canDelete)("loading",q.lcZ(3,16,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}function li(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"app-notification-table",7),q.NdJ("loadLazy",function(t){return q.CHM(i),q.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return q.CHM(i),q.oxw().onSelectedElementsChanged(t)})("save",function(t){return q.CHM(i),q.oxw().onSave(t)}),q.ALo(1,"async"),q.ALo(2,"async"),q.ALo(3,"async"),q.ALo(4,"async"),q.qZA()}if(2&t){var e=q.oxw();q.Q6J("elements",q.lcZ(1,14,e.notifications$))("dictOptionDtos",q.lcZ(2,16,e.notificationOptionsService.dictOptionDtos$))("totalRecord",q.lcZ(3,18,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canEdit",e.canEdit)("canAdd",e.canAdd)("canSelectElement",e.canDelete)("loading",q.lcZ(4,20,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}var ui=function(){var n=function(){function n(t,i,e,o,a,r,c,l,u){s(this,n),this.store=t,this.router=i,this.activatedRoute=e,this.authService=o,this.notificationDas=a,this.translateService=r,this.biaTranslationService=c,this.notificationsSignalRService=l,this.notificationOptionsService=u,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!0,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new G.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=X.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"notificationsGrid":void 0}return i(n,[{key:"ngOnInit",value:function(){var t=this;if(this.parentIds=[],this.sub=new G.w,this.initTableConfiguration(),this.setPermissions(),this.notifications$=this.store.select(j),this.totalCount$=this.store.select(P),this.loading$=this.store.select(E),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange){var n=!0;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(i){n?n=!1:t.onLoadLazy(t.notificationListComponent.getLazyLoadMetadata())}))}}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe(),this.OnHide()}},{key:"OnDisplay",value:function(){this.useView&&this.store.dispatch((0,rt.Tx)()),this.useSignalR&&(this.notificationsSignalRService.initialize(),z.useSignalR=!0)}},{key:"OnHide",value:function(){this.useSignalR&&(z.useSignalR=!1,this.notificationsSignalRService.destroy())}},{key:"onCreate",value:function(){this.useCalcMode||this.router.navigate(["./create"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(t){this.useCalcMode||this.router.navigate(["./"+t+"/edit"],{relativeTo:this.activatedRoute})}},{key:"onDetail",value:function(t){this.useCalcMode||this.router.navigate(["./"+t+"/detail"],{relativeTo:this.activatedRoute})}},{key:"onSave",value:function(t){this.useCalcMode&&((null==t?void 0:t.id)>0?this.canEdit&&this.store.dispatch(C({notification:t})):this.canAdd&&this.store.dispatch(S({notification:t})))}},{key:"onDelete",value:function(){this.selectedNotifications&&this.canDelete&&this.store.dispatch(T({ids:this.selectedNotifications.map(function(t){return t.id})}))}},{key:"onSelectedElementsChanged",value:function(t){this.selectedNotifications=t}},{key:"onPageSizeChange",value:function(t){this.pageSize=t}},{key:"onLoadLazy",value:function(t){var n=Object.assign({parentIds:this.parentIds},t);this.store.dispatch(w({event:n}))}},{key:"searchGlobalChanged",value:function(t){this.globalSearchValue=t}},{key:"displayedColumnsChanged",value:function(t){this.displayedColumns=t}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onViewChange",value:function(t){this.viewPreference=t}},{key:"onExportCSV",value:function(){var t=this,n={};this.columns.map(function(i){return n[i.value.split(".")[1]]=t.translateService.instant(i.value)});var i=Object.assign({parentIds:this.parentIds,columns:n},this.notificationListComponent.getLazyLoadMetadata());this.notificationDas.getFile(i).subscribe(function(n){tt.saveAs(n,t.translateService.instant("app.notifications")+".csv")})}},{key:"setPermissions",value:function(){this.canEdit=this.authService.hasPermission(it.y.Notification_Update),this.canDelete=this.authService.hasPermission(it.y.Notification_Delete),this.canAdd=this.authService.hasPermission(it.y.Notification_Create)}},{key:"initTableConfiguration",value:function(){var n=this;this.biaTranslationService.currentCultureDateFormat$.subscribe(function(i){n.tableConfiguration={columns:[new V.ML("titleTranslated","notification.title"),new V.ML("descriptionTranslated","notification.description"),Object.assign(new V.ML("type","notification.type.title"),{type:V.d5.OneToMany}),Object.assign(new V.ML("read","notification.read"),{isSearchable:!1,type:V.d5.Boolean}),Object.assign(new V.ML("createdDate","notification.createdDate"),{type:V.d5.Date,formatDate:i.dateFormat}),Object.assign(new V.ML("createdBy","notification.createdBy"),{type:V.d5.OneToMany}),Object.assign(new V.ML("notifiedPermissions","notification.notifiedPermissions"),{type:V.d5.ManyToMany}),Object.assign(new V.ML("notifiedUsers","notification.notifiedUsers"),{type:V.d5.ManyToMany}),new V.ML("jData","notification.jData")]},n.columns=n.tableConfiguration.columns.map(function(t){return{key:t.field,value:t.header}}),n.displayedColumns=t(n.columns)})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(q.Y36(p.yh),q.Y36(f.F0),q.Y36(f.gz),q.Y36(W.e),q.Y36(M),q.Y36(_t.sK),q.Y36(nt.P6),q.Y36(at),q.Y36(Ut))},n.\u0275cmp=q.Xpm({type:n,selectors:[["app-notifications-index"]],viewQuery:function(t,n){var i;(1&t&&q.Gf(K.$,5),2&t)&&(q.iGM(i=q.CRH())&&(n.notificationListComponent=i.first))},hostVars:2,hostBindings:function(t,n){2&t&&q.ekj("bia-flex",n.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(t,n){1&t&&(q.TgZ(0,"div",0),q.TgZ(1,"div",1),q.TgZ(2,"bia-table-header",2),q.NdJ("create",function(){return n.onCreate()})("exportCSV",function(){return n.onExportCSV()})("delete",function(){return n.onDelete()}),q.ALo(3,"translate"),q.qZA(),q.TgZ(4,"bia-table-controller",3),q.NdJ("displayedColumnsChange",function(t){return n.displayedColumnsChanged(t)})("filter",function(t){return n.searchGlobalChanged(t)})("pageSizeChange",function(t){return n.onPageSizeChange(t)})("toggleSearch",function(){return n.onToggleSearch()})("viewChange",function(t){return n.onViewChange(t)}),q.ALo(5,"async"),q.qZA(),q.YNc(6,ci,4,18,"bia-table",4),q.YNc(7,li,5,22,"app-notification-table",5),q.qZA(),q.qZA()),2&t&&(q.xp6(2),q.Q6J("headerTitle",q.lcZ(3,12,"notification.listOf"))("canAdd",n.canAdd&&!n.useCalcMode)("canDelete",n.canDelete)("canExportCSV",!0)("selectedElements",n.selectedNotifications),q.xp6(2),q.Q6J("defaultPageSize",n.defaultPageSize)("length",q.lcZ(5,14,n.totalCount$))("columns",n.columns)("columnToDisplays",n.displayedColumns)("tableStateKey",n.tableStateKey),q.xp6(2),q.Q6J("ngIf",!n.useCalcMode),q.xp6(1),q.Q6J("ngIf",n.useCalcMode))},directives:[Bt.xw,Bt.yH,Et.l,jt.B,Ht.O5,K.$,si],pipes:[_t.X$,Ht.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),n}(),fi=a(84594),pi=a(16244),di=a(80014),hi=a(44748),gi=a(4207),vi=a(46543);function yi(t,n){if(1&t){var i=q.EpF();q.ynx(0,27),q.TgZ(1,"p-tabPanel",4),q.TgZ(2,"div",28),q._UZ(3,"input",29),q.TgZ(4,"div",5),q.TgZ(5,"div",6),q.TgZ(6,"span",7),q.TgZ(7,"input",30),q.NdJ("change",function(){var t=q.CHM(i).index;return q.oxw().changeTranslation(t)}),q.qZA(),q.TgZ(8,"label"),q.TgZ(9,"span",9),q._uU(10,"*"),q.qZA(),q._uU(11),q.ALo(12,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(13,"div",5),q.TgZ(14,"div",6),q.TgZ(15,"span",7),q.TgZ(16,"input",31),q.NdJ("change",function(){var t=q.CHM(i).index;return q.oxw().changeTranslation(t)}),q.qZA(),q.TgZ(17,"label"),q.TgZ(18,"span",9),q._uU(19,"*"),q.qZA(),q._uU(20),q.ALo(21,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(22,"div",11),q.TgZ(23,"button",32),q.NdJ("click",function(){var t=q.CHM(i).index;return q.oxw().removeTranslation(t)}),q.ALo(24,"translate"),q.qZA(),q.qZA(),q.qZA(),q.BQk()}if(2&t){var e=n.$implicit,o=n.index,a=q.oxw();q.xp6(1),q.Q6J("header",a.labelTranslation(e.value.languageId)),q.xp6(1),q.Q6J("formGroupName",o),q.xp6(9),q.Oqu(q.lcZ(12,5,"notification.title")),q.xp6(9),q.Oqu(q.lcZ(21,7,"notification.description")),q.xp6(3),q.s9C("label",q.lcZ(24,9,"bia.translation.delete"))}}function mi(t,n){1&t&&q._UZ(0,"i",37)}var bi=function(){return{width:"100%"}};function xi(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"p-tabPanel",33),q.YNc(1,mi,1,0,"ng-template",34),q.TgZ(2,"div",5),q.TgZ(3,"div",6),q.TgZ(4,"span",7),q.TgZ(5,"p-dropdown",35),q.NdJ("onChange",function(){return q.CHM(i),q.oxw().onSelectionLanguage()}),q.qZA(),q.TgZ(6,"label"),q.TgZ(7,"span",9),q._uU(8,"*"),q.qZA(),q._uU(9),q.ALo(10,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(11,"div",11),q.TgZ(12,"button",36),q.NdJ("click",function(){return q.CHM(i),q.oxw().addTranslation()}),q.ALo(13,"translate"),q.qZA(),q.qZA(),q.qZA()}if(2&t){var e=q.oxw();q.xp6(5),q.Akn(q.DdM(10,bi)),q.Q6J("options",e.missingLanguageOptions),q.xp6(4),q.Oqu(q.lcZ(10,6,"bia.translation.language")),q.xp6(3),q.s9C("label",q.lcZ(13,8,"bia.translation.add")),q.Q6J("disabled",!e.selectionLanguage)}}var wi=function(){return{width:"100%"}},Zi=function(){var t=function(){function t(n){s(this,t),this.formBuilder=n,this.notification={},this.save=new q.vpe,this.cancel=new q.vpe,this.missingTranslation=!1,this.selectionLanguage=!1,this.initForm()}return i(t,[{key:"ngOnChanges",value:function(t){var n=this;this.notification&&(this.form.reset(),this.notification&&(this.form.patchValue(Object.assign({},this.notification)),this.notificationTranslations.clear(),this.notification.notificationTranslations&&(this.notification.notificationTranslations.forEach(function(t){n.notificationTranslations.push(n.createTranslation(t))}),this.computeMissingTranslation())))}},{key:"initForm",value:function(){var t={id:[this.notification.id],title:[this.notification.title,Rt.kI.required],description:[this.notification.description,Rt.kI.required],type:[this.notification.type,Rt.kI.required],read:[this.notification.read],createdDate:[this.notification.createdDate,Rt.kI.required],createdBy:[this.notification.createdBy],notifiedPermissions:[this.notification.notifiedPermissions],notifiedUsers:[this.notification.notifiedUsers],jData:[this.notification.jData],notificationTranslations:this.formBuilder.array([]),languageToAdd:[]};this.form=this.formBuilder.group(t),this.notificationTranslations=this.form.get("notificationTranslations")}},{key:"onSelectionLanguage",value:function(){this.selectionLanguage=!0}},{key:"createTranslation",value:function(t){return this.formBuilder.group({id:t.id,dtoState:t.dtoState,languageId:t.languageId,description:[t.description,Rt.kI.required],title:[t.title,Rt.kI.required]})}},{key:"addTranslation",value:function(){this.notificationTranslations.push(this.createTranslation({id:0,languageId:this.form.value.languageToAdd.id,title:"",description:"",dtoState:pi.e.Added})),this.computeMissingTranslation()}},{key:"addAllTranslation",value:function(){var t=this;this.missingLanguageOptions.forEach(function(n){return t.notificationTranslations.push(t.createTranslation({id:0,languageId:n.id,title:"",description:"",dtoState:pi.e.Added}))}),this.computeMissingTranslation()}},{key:"removeTranslation",value:function(t){this.notificationTranslations.removeAt(t),this.computeMissingTranslation()}},{key:"changeTranslation",value:function(t){this.notificationTranslations.at(t).value.dtoState===pi.e.Unchanged&&(this.notificationTranslations.at(t).value.dtoState=pi.e.Modified),this.computeMissingTranslation()}},{key:"computeMissingTranslation",value:function(){var t=this;this.missingLanguageOptions=this.languageOptions.filter(function(n){return!t.notificationTranslations.value.find(function(t){return t.languageId===n.id})&&!X.Nf.find(function(t){return t===n.id})}),this.missingTranslation=this.missingLanguageOptions.length>0}},{key:"labelTranslation",value:function(t){var n;return null===(n=this.languageOptions.find(function(n){return n.id===t}))||void 0===n?void 0:n.display}},{key:"onCancel",value:function(){this.form.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){var n,i,e;if(this.form.valid){var o=this.form.value;o.id=o.id>0?o.id:0,o.read=!!o.read&&o.read,o.createdBy=zt.P.Clone(o.createdBy),o.notifiedPermissions=zt.P.Differential(o.notifiedPermissions,null===(n=this.notification)||void 0===n?void 0:n.notifiedPermissions),o.notifiedUsers=zt.P.Differential(o.notifiedUsers,null===(i=this.notification)||void 0===i?void 0:i.notifiedUsers),o.type=Object.assign({},o.type),o.notificationTranslations=t.Differential(o.notificationTranslations,null===(e=this.notification)||void 0===e?void 0:e.notificationTranslations),this.save.emit(o),this.form.reset()}}},{key:"lang",value:function(t){console.log(t)}}],[{key:"Differential",value:function(t,n){var i=[];if(n&&Array.isArray(n)){var e=n.filter(function(n){return!t||!t.map(function(t){return t.id}).includes(n.id)}).map(function(t){return Object.assign(Object.assign({},t),{dtoState:pi.e.Deleted})});e&&(i=i.concat(e))}if(t&&Array.isArray(t)){var o=null==t?void 0:t.filter(function(t){return t.dtoState===pi.e.Added||t.dtoState===pi.e.Modified});o&&(i=i.concat(o))}return i}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(Rt.qu))},t.\u0275cmp=q.Xpm({type:t,selectors:[["app-notification-form"]],inputs:{notification:"notification",userOptions:"userOptions",permissionOptions:"permissionOptions",notificationTypeOptions:"notificationTypeOptions",languageOptions:"languageOptions"},outputs:{save:"save",cancel:"cancel"},features:[q.TTD],decls:86,vars:73,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center","fxFlex","100"],["fxLayout","column","fxLayoutAlign","top","fxFlex","50"],[3,"legend"],[3,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button",3,"label","disabled","click"],["formArrayName","notificationTranslations",4,"ngFor","ngForOf"],["header","+",4,"ngIf"],["placeholder","\xa0","formControlName","type","optionLabel","display","datakey","id",3,"options"],["binary","true","formControlName","read",3,"label"],["biaLocale","","formControlName","createdDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["placeholder","\xa0","formControlName","createdBy","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","notifiedPermissions","optionLabel","display","datakey","id",3,"options","virtualScroll"],["defaultLabel","\xa0","formControlName","notifiedUsers","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxFlex","90"],[2,"left","5px","top","-20px","font-size","12px","color","#00839b"],[1,"p-float-label"],["formControlName","jData","rows","5","autoResize","autoResize","pInputTextarea","",2,"width","100%",3,"cols"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],["formArrayName","notificationTranslations"],[3,"formGroupName"],["formControlName","languageId","type","hidden"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%",3,"change"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%",3,"change"],["pButton","","type","button",3,"label","click"],["header","+"],["pTemplate","header"],["placeholder","\xa0","formControlName","languageToAdd","optionLabel","display","datakey","id",3,"options","onChange"],["pButton","","type","button",1,"ui-button-secondary",3,"label","disabled","click"],[1,"pi","pi-plus"]],template:function(t,n){1&t&&(q.TgZ(0,"form",0),q.NdJ("submit",function(){return n.onSubmit()}),q.TgZ(1,"div",1),q.TgZ(2,"div",2),q.TgZ(3,"p-fieldset",3),q.ALo(4,"translate"),q.TgZ(5,"p-tabView"),q.TgZ(6,"p-tabPanel",4),q.ALo(7,"translate"),q.TgZ(8,"div",5),q.TgZ(9,"div",6),q.TgZ(10,"span",7),q._UZ(11,"input",8),q.TgZ(12,"label"),q.TgZ(13,"span",9),q._uU(14,"*"),q.qZA(),q._uU(15),q.ALo(16,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(17,"div",5),q.TgZ(18,"div",6),q.TgZ(19,"span",7),q._UZ(20,"input",10),q.TgZ(21,"label"),q.TgZ(22,"span",9),q._uU(23,"*"),q.qZA(),q._uU(24),q.ALo(25,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(26,"div",11),q.TgZ(27,"button",12),q.NdJ("click",function(){return n.addAllTranslation()}),q.ALo(28,"translate"),q.qZA(),q.qZA(),q.qZA(),q.YNc(29,yi,25,11,"ng-container",13),q.YNc(30,xi,14,11,"p-tabPanel",14),q.qZA(),q.qZA(),q.TgZ(31,"div",5),q.TgZ(32,"div",6),q.TgZ(33,"span",7),q._UZ(34,"p-dropdown",15),q.TgZ(35,"label"),q.TgZ(36,"span",9),q._uU(37,"*"),q.qZA(),q._uU(38),q.ALo(39,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(40,"div",5),q.TgZ(41,"div",6),q._UZ(42,"p-checkbox",16),q.ALo(43,"translate"),q.qZA(),q.qZA(),q.TgZ(44,"div",5),q.TgZ(45,"div",6),q.TgZ(46,"span",7),q._UZ(47,"p-calendar",17),q.TgZ(48,"label"),q.TgZ(49,"span",9),q._uU(50,"*"),q.qZA(),q._uU(51),q.ALo(52,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(53,"div",5),q.TgZ(54,"div",6),q.TgZ(55,"span",7),q._UZ(56,"p-dropdown",18),q.TgZ(57,"label"),q._uU(58),q.ALo(59,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(60,"div",5),q.TgZ(61,"div",6),q.TgZ(62,"span",7),q._UZ(63,"p-multiSelect",19),q.TgZ(64,"label"),q._uU(65),q.ALo(66,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(67,"div",5),q.TgZ(68,"div",6),q.TgZ(69,"span",7),q._UZ(70,"p-multiSelect",20),q.TgZ(71,"label"),q._uU(72),q.ALo(73,"translate"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(74,"div",5),q.TgZ(75,"div",21),q.TgZ(76,"span",22),q._uU(77),q.ALo(78,"translate"),q.qZA(),q.TgZ(79,"span",23),q._UZ(80,"textarea",24),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(81,"div",11),q._UZ(82,"button",25),q.ALo(83,"translate"),q.TgZ(84,"button",26),q.NdJ("click",function(){return n.onCancel()}),q.ALo(85,"translate"),q.qZA(),q.qZA(),q.qZA()),2&t&&(q.Q6J("formGroup",n.form),q.xp6(3),q.s9C("legend",q.lcZ(4,39,"bia.translation.translatedFields")),q.xp6(3),q.s9C("header",q.lcZ(7,41,"translation.defaultLanguage")),q.xp6(9),q.Oqu(q.lcZ(16,43,"notification.title")),q.xp6(9),q.Oqu(q.lcZ(25,45,"notification.description")),q.xp6(3),q.s9C("label",q.lcZ(28,47,"bia.translation.addAll")),q.Q6J("disabled",!n.missingTranslation),q.xp6(2),q.Q6J("ngForOf",n.notificationTranslations.controls),q.xp6(1),q.Q6J("ngIf",(null==n.missingLanguageOptions?null:n.missingLanguageOptions.length)>0),q.xp6(4),q.Akn(q.DdM(67,bi)),q.Q6J("options",n.notificationTypeOptions),q.xp6(4),q.Oqu(q.lcZ(39,49,"notification.type.title")),q.xp6(4),q.s9C("label",q.lcZ(43,51,"notification.read")),q.xp6(5),q.Akn(q.DdM(68,wi)),q.Q6J("showButtonBar",!0)("inputStyle",q.DdM(69,wi)),q.xp6(4),q.Oqu(q.lcZ(52,53,"notification.createdDate")),q.xp6(5),q.Akn(q.DdM(70,bi)),q.Q6J("options",n.userOptions)("showClear",!0),q.xp6(2),q.Oqu(q.lcZ(59,55,"notification.createdBy")),q.xp6(5),q.Akn(q.DdM(71,bi)),q.Q6J("options",n.permissionOptions)("virtualScroll",!0),q.xp6(2),q.Oqu(q.lcZ(66,57,"notification.notifiedPermissions")),q.xp6(5),q.Akn(q.DdM(72,bi)),q.Q6J("options",n.userOptions)("virtualScroll",!0),q.xp6(2),q.Oqu(q.lcZ(73,59,"notification.notifiedUsers")),q.xp6(5),q.Oqu(q.lcZ(78,61,"notification.jData")),q.xp6(3),q.Q6J("cols",60),q.xp6(2),q.s9C("label",q.lcZ(83,63,"bia.save")),q.Q6J("disabled",!n.form.valid),q.xp6(2),q.s9C("label",q.lcZ(85,65,"bia.cancel")))},directives:[Rt._Y,Rt.JL,Bt.xw,Rt.sg,Bt.Wh,Bt.yH,di.p,hi.xf,hi.x4,Rt.Fj,Rt.JJ,Rt.u,Xt.o,Rt.nD,Bt.SQ,gi.Hq,Ht.sg,Ht.O5,tn.Lt,en.XZ,on.f,an.D,nn.NU,vi.g,Rt.CE,Rt.x0,Vt.jx],pipes:[_t.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t}(),Si=function(){var t=function(){function t(n,i,e,o,a){s(this,t),this.store=n,this.router=i,this.activatedRoute=e,this.notificationOptionsService=o,this.biaTranslationService=a,this.sub=new G.w}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(t){this.store.dispatch(S({notification:t})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(p.yh),q.Y36(f.F0),q.Y36(f.gz),q.Y36(Ut),q.Y36(nt.P6))},t.\u0275cmp=q.Xpm({type:t,selectors:[["app-notification-new"]],decls:5,vars:12,consts:[[3,"notificationTypeOptions","permissionOptions","userOptions","languageOptions","cancel","save"]],template:function(t,n){1&t&&(q.TgZ(0,"app-notification-form",0),q.NdJ("cancel",function(){return n.onCancelled()})("save",function(t){return n.onSubmitted(t)}),q.ALo(1,"async"),q.ALo(2,"async"),q.ALo(3,"async"),q.ALo(4,"async"),q.qZA()),2&t&&q.Q6J("notificationTypeOptions",q.lcZ(1,4,n.notificationOptionsService.notificationTypeOptions$))("permissionOptions",q.lcZ(2,6,n.notificationOptionsService.permissionOptions$))("userOptions",q.lcZ(3,8,n.notificationOptionsService.userOptions$))("languageOptions",q.lcZ(4,10,n.notificationOptionsService.languageOptions$))},directives:[Zi],pipes:[Ht.Ov],styles:[""]}),t}(),Ci=function(){var t=function(){function t(n){s(this,t),this.store=n,this.sub=new G.w,this.InitSub(),this.loading$=this.store.select(B),this.notification$=this.store.select(U)}return i(t,[{key:"currentNotification",get:function(){var t;return(null===(t=this._currentNotification)||void 0===t?void 0:t.id)===this._currentNotificationId?this._currentNotification:null}},{key:"currentNotificationId",get:function(){return this._currentNotificationId},set:function(t){this._currentNotificationId=Number(t),this.store.dispatch(Z({id:t}))}},{key:"currentNotificationData",get:function(){return this._currentNotification.jData}},{key:"InitSub",value:function(){var t=this;this.sub=new G.w,this.sub.add(this.store.select(U).subscribe(function(n){n&&(t._currentNotification=n)}))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.LFG(p.yh))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ai=a(79373);function Ti(t,n){1&t&&q._UZ(0,"bia-spinner",2),2&t&&q.Q6J("overlay",!0)}var Oi=function(){var t=function(){function t(n,i,e,o,a,r){s(this,t),this.store=n,this.router=i,this.activatedRoute=e,this.notificationOptionsService=o,this.notificationService=a,this.biaTranslationService=r,this.displayChange=new q.vpe,this.sub=new G.w}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationOptionsService.loadAllOptions()}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(t){this.store.dispatch(C({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(p.yh),q.Y36(f.F0),q.Y36(f.gz),q.Y36(Ut),q.Y36(Ci),q.Y36(nt.P6))},t.\u0275cmp=q.Xpm({type:t,selectors:[["app-notification-edit"]],outputs:{displayChange:"displayChange"},decls:8,vars:18,consts:[[3,"notification","notificationTypeOptions","permissionOptions","userOptions","languageOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,n){1&t&&(q.TgZ(0,"app-notification-form",0),q.NdJ("cancel",function(){return n.onCancelled()})("save",function(t){return n.onSubmitted(t)}),q.ALo(1,"async"),q.ALo(2,"async"),q.ALo(3,"async"),q.ALo(4,"async"),q.ALo(5,"async"),q.qZA(),q.YNc(6,Ti,1,1,"bia-spinner",1),q.ALo(7,"async")),2&t&&(q.Q6J("notification",q.lcZ(1,6,n.notificationService.notification$))("notificationTypeOptions",q.lcZ(2,8,n.notificationOptionsService.notificationTypeOptions$))("permissionOptions",q.lcZ(3,10,n.notificationOptionsService.permissionOptions$))("userOptions",q.lcZ(4,12,n.notificationOptionsService.userOptions$))("languageOptions",q.lcZ(5,14,n.notificationOptionsService.languageOptions$)),q.xp6(6),q.Q6J("ngIf",q.lcZ(7,16,n.notificationService.loading$)))},directives:[Zi,Ht.O5,Ai.O],pipes:[Ht.Ov],styles:[""]}),t}(),Li=a(16249),Ni=a(30466);function ki(t,n){1&t&&q._UZ(0,"bia-spinner",1),2&t&&q.Q6J("overlay",!0)}var qi=function(){var t=function(){function t(n,i,e,o,a){s(this,t),this.store=n,this.route=i,this.notificationService=e,this.layoutService=o,this.biaTranslationService=a,this.sub=new G.w}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(function(n){t.notificationService.currentNotificationId=t.route.snapshot.params.notificationId})),this.sub.add(this.store.select(U).subscribe(function(n){(null==n?void 0:n.title)&&(t.route.data.pipe((0,et.P)()).subscribe(function(t){t.breadcrumb=n.title}),t.layoutService.refreshBreadcrumb())}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(p.yh),q.Y36(f.gz),q.Y36(Ci),q.Y36(Ni.N),q.Y36(nt.P6))},t.\u0275cmp=q.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,n){1&t&&(q._UZ(0,"router-outlet"),q.YNc(1,ki,1,1,"bia-spinner",0),q.ALo(2,"async")),2&t&&(q.xp6(1),q.Q6J("ngIf",q.lcZ(2,1,n.notificationService.loading$)))},directives:[f.lC,Ht.O5,Ai.O],pipes:[Ht.Ov],styles:[""]}),t}(),Mi=a(98832),Ii=a(53460),Ji=function(){var t=function(t){c(i,t);var n=u(i);function i(t){return s(this,i),n.call(this,t,"Permissions")}return i}(k.Z);return t.\u0275fac=function(n){return new(n||t)(q.LFG(q.zs3))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Di=function(){var t=function t(n,i,e){var o=this;s(this,t),this.actions$=n,this.permissionDas=i,this.biaMessageService=e,this.loadAll$=(0,d.GW)(function(){return o.actions$.pipe((0,d.l4)(Lt),(0,v.w)(function(){return o.permissionDas.getList("allOptions").pipe((0,y.U)(function(t){return Nt({permissions:t})}),(0,m.K)(function(t){return o.biaMessageService.showError(),(0,h.of)(kt({error:t}))}))}))})};return t.\u0275fac=function(n){return new(n||t)(q.LFG(d.eX),q.LFG(Ji),q.LFG(R.X))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac}),t}(),Qi=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({providers:[],imports:[[p.Aw.forFeature("domain-permission-options",Jt),d.sQ.forFeature([Di])]]}),t}(),$i=a(62439),Yi=function(){var t=function(t){c(i,t);var n=u(i);function i(t){return s(this,i),n.call(this,t,"NotificationTypes")}return i}(k.Z);return t.\u0275fac=function(n){return new(n||t)(q.LFG(q.zs3))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Fi=function(){var t=function t(n,i,e){var o=this;s(this,t),this.actions$=n,this.notificationTypeDas=i,this.biaMessageService=e,this.loadAll$=(0,d.GW)(function(){return o.actions$.pipe((0,d.l4)(mt),(0,v.w)(function(){return o.notificationTypeDas.getList("allOptions").pipe((0,y.U)(function(t){return bt({notificationTypes:t})}),(0,m.K)(function(t){return o.biaMessageService.showError(),(0,h.of)(xt({error:t}))}))}))})};return t.\u0275fac=function(n){return new(n||t)(q.LFG(d.eX),q.LFG(Yi),q.LFG(R.X))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac}),t}(),Pi=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({imports:[[p.Aw.forFeature("domain-notification-type-options",Ct),d.sQ.forFeature([Fi])]]}),t}();function Ui(t,n){if(1&t&&(q.TgZ(0,"div",7),q.TgZ(1,"div"),q.TgZ(2,"b"),q._uU(3),q.ALo(4,"translate"),q.qZA(),q._UZ(5,"br"),q._uU(6),q.ALo(7,"translate"),q.qZA(),q.TgZ(8,"div"),q.TgZ(9,"b"),q._uU(10),q.ALo(11,"translate"),q.qZA(),q._UZ(12,"br"),q._uU(13),q.ALo(14,"translate"),q.qZA(),q.TgZ(15,"div"),q.TgZ(16,"b"),q._uU(17),q.ALo(18,"translate"),q.qZA(),q._UZ(19,"br"),q._uU(20),q.ALo(21,"date"),q.qZA(),q.TgZ(22,"div"),q.TgZ(23,"b"),q._uU(24),q.ALo(25,"translate"),q.qZA(),q._UZ(26,"br"),q._uU(27),q.qZA(),q.qZA()),2&t){var i=q.oxw().ngIf;q.xp6(3),q.Oqu(q.lcZ(4,8,"notification.title")),q.xp6(3),q.Oqu(q.lcZ(7,10,i.titleTranslated)),q.xp6(4),q.Oqu(q.lcZ(11,12,"notification.description")),q.xp6(3),q.hij("",q.lcZ(14,14,i.descriptionTranslated)," "),q.xp6(4),q.Oqu(q.lcZ(18,16,"notification.createdDate")),q.xp6(3),q.Oqu(q.xi3(21,18,i.createdDate,"short")),q.xp6(4),q.Oqu(q.lcZ(25,21,"notification.type.title")),q.xp6(3),q.Oqu(i.type.display)}}function _i(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"button",8),q.NdJ("click",function(){q.CHM(i);var t=q.oxw().ngIf;return q.oxw().onAction(t)}),q.ALo(1,"translate"),q.qZA()}2&t&&q.s9C("label",q.lcZ(1,1,"notification.action"))}function Bi(t,n){if(1&t){var i=q.EpF();q.TgZ(0,"button",6),q.NdJ("click",function(){return q.CHM(i),q.oxw(2).onEdit()}),q.ALo(1,"translate"),q.qZA()}2&t&&q.s9C("label",q.lcZ(1,1,"bia.edit"))}function Ei(t,n){if(1&t){var i=q.EpF();q.ynx(0),q.YNc(1,Ui,28,23,"div",2),q.TgZ(2,"div",3),q.YNc(3,_i,2,3,"button",4),q.YNc(4,Bi,2,3,"button",5),q.TgZ(5,"button",6),q.NdJ("click",function(){return q.CHM(i),q.oxw().onCancelled()}),q.ALo(6,"translate"),q.qZA(),q.qZA(),q.BQk()}if(2&t){var e=n.ngIf,o=q.oxw();q.xp6(1),q.Q6J("ngIf",e&&e.id),q.xp6(2),q.Q6J("ngIf",o.canAction(e)),q.xp6(1),q.Q6J("ngIf",o.canEdit),q.xp6(1),q.s9C("label",q.lcZ(6,4,"bia.cancel"))}}function ji(t,n){1&t&&q._UZ(0,"bia-spinner",9),2&t&&q.Q6J("overlay",!0)}var Hi=function(){var t=function(){function t(n,i,e,o,a){s(this,t),this.store=n,this.router=i,this.activatedRoute=e,this.authService=o,this.notificationService=a,this.displayChange=new q.vpe,this.sub=new G.w}return i(t,[{key:"ngOnInit",value:function(){this.notification$=this.notificationService.notification$,this.canEdit=this.authService.hasPermission(it.y.Notification_Update)}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"onSubmitted",value:function(t){this.store.dispatch(C({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onCancelled",value:function(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}},{key:"onEdit",value:function(){this.router.navigate(["../edit"],{relativeTo:this.activatedRoute})}},{key:"canAction",value:function(t){if(t.jData){var n=JSON.parse(t.jData);if(null==n?void 0:n.route)return!0}return!1}},{key:"onAction",value:function(t){if(t.jData){var n=JSON.parse(t.jData);(null==n?void 0:n.route)&&this.router.navigate(n.route)}}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(p.yh),q.Y36(f.F0),q.Y36(f.gz),q.Y36(W.e),q.Y36(Ci))},t.\u0275cmp=q.Xpm({type:t,selectors:[["app-notification-detail"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[4,"ngIf"],[3,"overlay",4,"ngIf"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly",4,"ngIf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button","class","p-button-primary",3,"label","click",4,"ngIf"],["pButton","","type","button","class","p-button-secondary",3,"label","click",4,"ngIf"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly"],["pButton","","type","button",1,"p-button-primary",3,"label","click"],[3,"overlay"]],template:function(t,n){1&t&&(q.YNc(0,Ei,7,6,"ng-container",0),q.ALo(1,"async"),q.YNc(2,ji,1,1,"bia-spinner",1),q.ALo(3,"async")),2&t&&(q.Q6J("ngIf",q.lcZ(1,2,n.notification$)),q.xp6(2),q.Q6J("ngIf",q.lcZ(3,4,n.loading$)))},directives:[Ht.O5,Bt.xw,Bt.SQ,Bt.Wh,gi.Hq,Ai.O],pipes:[Ht.Ov,_t.X$,Ht.uU],styles:[""]}),t}(),Ri=function(){var t=function(t){c(i,t);var n=u(i);function i(t){return s(this,i),n.call(this,t,"Languages")}return i}(k.Z);return t.\u0275fac=function(n){return new(n||t)(q.LFG(q.zs3))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),zi=function(){var t=function t(n,i,e){var o=this;s(this,t),this.actions$=n,this.languageDas=i,this.biaMessageService=e,this.loadAll$=(0,d.GW)(function(){return o.actions$.pipe((0,d.l4)(ct),(0,v.w)(function(){return o.languageDas.getList("allOptions").pipe((0,y.U)(function(t){return lt({languages:t})}),(0,m.K)(function(t){return o.biaMessageService.showError(),(0,h.of)(ut({error:t}))}))}))})};return t.\u0275fac=function(n){return new(n||t)(q.LFG(d.eX),q.LFG(Ri),q.LFG(R.X))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac}),t}(),Gi=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({imports:[[p.Aw.forFeature("domain-language-options",ht),d.sQ.forFeature([zi])]]}),t}(),Ki=[{path:"",data:{breadcrumb:null,permission:it.y.Notification_List_Access,InjectComponent:ui},component:Ii.e,canActivate:[Li.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:it.y.Notification_Create,title:"notification.add",InjectComponent:Si},component:Mi._,canActivate:[Li.n]},{path:":notificationId",data:{breadcrumb:"",canNavigate:!0},component:qi,canActivate:[Li.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:it.y.Notification_Update,title:"notification.edit",InjectComponent:Oi},component:Ii.e,canActivate:[Li.n]},{path:"detail",data:{breadcrumb:"bia.detail",canNavigate:!0,permission:it.y.Notification_Read,title:"notification.detail",InjectComponent:Hi},component:Mi._,canActivate:[Li.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}],Vi=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({imports:[[fi.m,Rt.UX,f.Bz.forChild(Ki),p.Aw.forFeature("notifications",$),d.sQ.forFeature([z]),Qi,Pi,$i.U,Gi]]}),t}()}}])}();