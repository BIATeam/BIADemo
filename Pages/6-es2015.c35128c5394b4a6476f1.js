(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"5l0L":function(e,t,i){"use strict";i.r(t),i.d(t,"SiteModule",(function(){return je}));var s=i("tyNb"),n=i("kt0X"),c=i("snw9"),a=i("LRne"),r=i("wO+i"),o=i("eIep"),l=i("lJxs"),b=i("JIr8"),u=i("bOdf"),d=i("zp1y"),h=i("scl0"),p=i("dlt+"),f=i("fXoL");let g=(()=>{class e extends p.a{constructor(e){super(e,"sites")}}return e.\u0275fac=function(t){return new(t||e)(f.Xb(f.r))},e.\u0275prov=f.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),m=(()=>{class e extends p.a{constructor(e){super(e,"sites")}}return e.\u0275fac=function(t){return new(t||e)(f.Xb(f.r))},e.\u0275prov=f.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=i("xz6w"),O=i("Fx2S");let v=(()=>{class e{constructor(e,t,i,s,n){this.actions$=e,this.siteDas=t,this.siteInfoDas=i,this.biaMessageService=s,this.store=n,this.loadAllByPost$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h.f),Object(r.a)("event"),Object(o.a)(e=>this.siteInfoDas.getListByPost(e).pipe(Object(l.a)(t=>Object(h.g)({result:t,event:e})),Object(b.a)(e=>(this.biaMessageService.showError(),Object(a.a)(Object(h.d)({error:e})))))))),this.load$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h.e),Object(r.a)("id"),Object(o.a)(e=>this.siteDas.get(e).pipe(Object(l.a)(e=>Object(h.h)({site:e})),Object(b.a)(e=>(this.biaMessageService.showError(),Object(a.a)(Object(h.d)({error:e})))))))),this.create$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h.c),Object(r.a)("site"),Object(u.a)(e=>Object(a.a)(e).pipe(Object(d.a)(this.store.select(S.e)))),Object(o.a)(([e,t])=>this.siteDas.post(e).pipe(Object(l.a)(()=>(this.biaMessageService.showAddSuccess(),Object(h.f)({event:t}))),Object(b.a)(e=>(this.biaMessageService.showError(),Object(a.a)(Object(h.d)({error:e})))))))),this.update$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h.m),Object(r.a)("site"),Object(u.a)(e=>Object(a.a)(e).pipe(Object(d.a)(this.store.select(S.e)))),Object(o.a)(([e,t])=>this.siteDas.put(e,e.id).pipe(Object(l.a)(()=>(this.biaMessageService.showUpdateSuccess(),Object(h.f)({event:t}))),Object(b.a)(e=>(this.biaMessageService.showError(),Object(a.a)(Object(h.d)({error:e})))))))),this.destroy$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h.l),Object(r.a)("id"),Object(u.a)(e=>Object(a.a)(e).pipe(Object(d.a)(this.store.select(S.e)))),Object(o.a)(([e,t])=>this.siteDas.delete(e).pipe(Object(l.a)(()=>(this.biaMessageService.showDeleteSuccess(),Object(h.f)({event:t}))),Object(b.a)(e=>(this.biaMessageService.showError(),Object(a.a)(Object(h.d)({error:e})))))))),this.multiDestroy$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h.i),Object(r.a)("ids"),Object(u.a)(e=>Object(a.a)(e).pipe(Object(d.a)(this.store.select(S.e)))),Object(o.a)(([e,t])=>this.siteDas.deletes(e).pipe(Object(l.a)(()=>(this.biaMessageService.showDeleteSuccess(),Object(h.f)({event:t}))),Object(b.a)(e=>(this.biaMessageService.showError(),Object(a.a)(Object(h.d)({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(f.Xb(c.a),f.Xb(g),f.Xb(m),f.Xb(O.a),f.Xb(n.b))},e.\u0275prov=f.Jb({token:e,factory:e.\u0275fac}),e})();var y=i("VfrA"),j=i("FNYi"),w=i("mCVk"),C=i("s0Cq"),F=i("E6Oa"),x=i("RdrV"),k=i("XiUz"),T=i("xlun"),L=i("V5BG"),B=i("3Pt+"),I=i("jIHw"),M=i("sYmb");const E=["template"],D=function(){return{width:"100%"}};function z(e,t){if(1&e){const e=f.Ub();f.Tb(0,"div",1),f.Tb(1,"div",2),f.Tb(2,"i",3),f.bc("click",(function(){return f.yc(e),f.dc().onClose()})),f.ec(3,"translate"),f.Sb(),f.Tb(4,"h3"),f.Hc(5),f.ec(6,"translate"),f.Sb(),f.Sb(),f.Tb(7,"div",4),f.Tb(8,"div",5),f.Tb(9,"p-autoComplete",6),f.bc("ngModelChange",(function(t){return f.yc(e),f.dc().userSelected=t}))("completeMethod",(function(t){return f.yc(e),f.dc().onSearchUsers(t)})),f.ec(10,"translate"),f.Sb(),f.Sb(),f.Sb(),f.Tb(11,"div",7),f.Tb(12,"button",8),f.bc("click",(function(){return f.yc(e),f.dc().onReset()})),f.ec(13,"translate"),f.Sb(),f.Tb(14,"button",9),f.bc("click",(function(){return f.yc(e),f.dc().onFilter()})),f.ec(15,"translate"),f.Sb(),f.Sb(),f.Sb()}if(2&e){const e=f.dc();f.lc("fxFlex",e.fxFlexValue),f.kc("hidden",e.hidden),f.Bb(2),f.lc("pTooltip",f.fc(3,15,"msg.hideFilters")),f.Bb(3),f.Ic(f.fc(6,17,"bia.filters")),f.Bb(4),f.Dc(f.nc(25,D)),f.lc("placeholder",f.fc(10,19,"site.selectUser")),f.kc("multiple",!1)("ngModel",e.userSelected)("suggestions",e.users)("size",30)("minLength",2)("inputStyle",f.nc(26,D)),f.Bb(3),f.lc("label",f.fc(13,21,"bia.reset")),f.Bb(2),f.lc("label",f.fc(15,23,"bia.filter"))}}let A=(()=>{class e{constructor(e){this.viewContainerRef=e,this.hidden=!1,this.close=new f.n,this.searchUsers=new f.n,this.filter=new f.n}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template)}onClose(){this.close.emit()}onReset(){this.userSelected={},this.onFilter()}onFilter(){this.filter.emit({userId:this.userSelected?this.userSelected.id:0})}onSearchUsers(e){this.searchUsers.emit(e.query)}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(f.O))},e.\u0275cmp=f.Hb({type:e,selectors:[["app-site-filter"]],viewQuery:function(e,t){var i;1&e&&f.Cc(E,!0),2&e&&f.wc(i=f.cc())&&(t.template=i.first)},inputs:{fxFlexValue:"fxFlexValue",users:"users",hidden:"hidden"},outputs:{close:"close",searchUsers:"searchUsers",filter:"filter"},decls:2,vars:0,consts:[["template",""],[1,"app-search-filter",3,"hidden","fxFlex"],["fxLayout","row","fxLayoutAlign","stretch center"],[1,"ui-icon-clear","bia-pointer",3,"pTooltip","click"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-filter-container"],["field","displayName",3,"multiple","ngModel","suggestions","size","minLength","placeholder","inputStyle","ngModelChange","completeMethod"],["fxLayout","row","fxLayoutAlign","space-around"],["pButton","","fxFlex","33",1,"ui-button-secondary",3,"label","click"],["pButton","","fxFlex","33",3,"label","click"]],template:function(e,t){1&e&&f.Fc(0,z,16,27,"ng-template",null,0,f.Gc)},directives:[k.b,k.d,k.c,T.a,L.a,B.j,B.l,I.b],pipes:[M.c],styles:["h3[_ngcontent-%COMP%]{margin-bottom:0}.app-filter-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.app-search-filter[_ngcontent-%COMP%]{margin:-15px 35px -15px -35px}.ui-icon-clear[_ngcontent-%COMP%]{margin-left:12px;margin-right:9px}"]}),e})();var V=i("7zfz"),P=i("jIms"),$=i("ofXK"),N=i("Nf9I");function U(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",10),f.bc("click",(function(){return f.yc(e),f.dc(2).toggleFilter()})),f.ec(1,"translate"),f.Sb()}2&e&&f.lc("pTooltip",f.fc(1,1,"msg.showFilters"))}function _(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",11),f.bc("click",(function(){return f.yc(e),f.dc(2).toggleFilter()})),f.ec(1,"translate"),f.Sb()}2&e&&f.lc("pTooltip",f.fc(1,1,"msg.showFilters"))}function G(e,t){if(1&e&&(f.Rb(0),f.Fc(1,U,2,3,"button",8),f.Fc(2,_,2,3,"button",9),f.Qb()),2&e){const e=f.dc();f.Bb(1),f.kc("ngIf",!1===e.showFilter&&!1===e.haveFilter),f.Bb(1),f.kc("ngIf",!1===e.showFilter&&!0===e.haveFilter)}}function X(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",12),f.bc("click",(function(){return f.yc(e),f.dc().onDelete()})),f.ec(1,"translate"),f.Sb()}if(2&e){const e=f.dc();f.lc("label",f.fc(1,2,"bia.delete")),f.kc("disabled",0===e.nbSelectedElements)}}function H(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",13),f.bc("click",(function(){return f.yc(e),f.dc().edit.emit()})),f.ec(1,"translate"),f.Sb()}if(2&e){const e=f.dc();f.lc("label",f.fc(1,2,"site.edit")),f.kc("disabled",1!==e.nbSelectedElements)}}function J(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",14),f.bc("click",(function(){return f.yc(e),f.dc().onBack()})),f.ec(1,"translate"),f.Sb()}2&e&&f.lc("label",f.fc(1,1,"bia.back"))}function R(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",15),f.bc("click",(function(){return f.yc(e),f.dc().exportCSV.emit()})),f.Sb()}}function q(e,t){if(1&e){const e=f.Ub();f.Tb(0,"button",16),f.bc("click",(function(){return f.yc(e),f.dc().onCreate()})),f.ec(1,"translate"),f.Sb()}2&e&&f.lc("label",f.fc(1,1,"bia.add"))}let K=(()=>{class e extends P.a{constructor(){super(...arguments),this.canEdit=!1,this.edit=new f.n}}return e.\u0275fac=function(t){return W(t||e)},e.\u0275cmp=f.Hb({type:e,selectors:[["app-site-table-header"]],inputs:{canEdit:"canEdit"},outputs:{edit:"edit"},features:[f.Ab([V.a]),f.yb],decls:13,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],[4,"ngIf"],["pButton","",3,"disabled","label","click",4,"ngIf"],["pButton","","class","ui-button-secondary",3,"disabled","label","click",4,"ngIf"],["pButton","","class","ui-button-secondary",3,"label","click",4,"ngIf"],["pButton","","class","ui-button-secondary","label","CSV",3,"click",4,"ngIf"],["pButton","",3,"label","click",4,"ngIf"],["type","button","icon","ui-icon-filter-list","class","ui-button-secondary flat","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","ui-icon-filter-list","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","ui-icon-filter-list","pButton","",1,"ui-button-secondary","flat",3,"pTooltip","click"],["type","button","icon","ui-icon-filter-list","pButton","",3,"pTooltip","click"],["pButton","",3,"disabled","label","click"],["pButton","",1,"ui-button-secondary",3,"disabled","label","click"],["pButton","",1,"ui-button-secondary",3,"label","click"],["pButton","","label","CSV",1,"ui-button-secondary",3,"click"],["pButton","",3,"label","click"]],template:function(e,t){1&e&&(f.Tb(0,"div",0),f.Tb(1,"div",1),f.Fc(2,G,3,2,"ng-container",2),f.Fc(3,X,2,4,"button",3),f.Fc(4,H,2,4,"button",4),f.Sb(),f.Tb(5,"div",1),f.Tb(6,"h1"),f.Hc(7),f.Sb(),f.Sb(),f.Tb(8,"div",1),f.Fc(9,J,2,3,"button",5),f.Fc(10,R,1,0,"button",6),f.Fc(11,q,2,3,"button",7),f.Sb(),f.Sb(),f.Ob(12,"p-confirmDialog")),2&e&&(f.Bb(2),f.kc("ngIf",t.showBtnFilter),f.Bb(1),f.kc("ngIf",t.canDelete),f.Bb(1),f.kc("ngIf",t.canEdit),f.Bb(3),f.Ic(t.headerTitle),f.Bb(2),f.kc("ngIf",t.canBack),f.Bb(1),f.kc("ngIf",t.canExportCSV),f.Bb(1),f.kc("ngIf",t.canAdd))},directives:[k.d,k.c,k.e,$.m,N.a,I.b,T.a],pipes:[M.c],styles:[".header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:raleway-thin,serif;font-size:36px;font-weight:200;margin:0}",""]}),e})();const W=f.Vb(K);var Y=i("v8MJ"),Q=i("Sa1B"),Z=i("quSY"),ee=i("/RsI"),te=i("7kUa");let ie=(()=>{class e{constructor(e){this.formBuilder=e,this.site={},this.save=new f.n,this.cancel=new f.n,this.initForm()}ngOnInit(){}ngOnChanges(e){e.site&&(this.form.reset(),this.site&&this.form.patchValue(Object.assign({},this.site)))}initForm(){this.form=this.formBuilder.group({id:[this.site.id],title:[this.site.title,B.o.required]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){if(this.form.valid){const e=this.form.value;e.id=e.id>0?e.id:0,this.save.emit(e),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(B.b))},e.\u0275cmp=f.Hb({type:e,selectors:[["app-site-form"]],inputs:{site:"site"},outputs:{save:"save",cancel:"cancel"},features:[f.zb],decls:15,vars:11,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","255"],[1,"bia-star-mandatory"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"]],template:function(e,t){1&e&&(f.Tb(0,"form",0),f.bc("submit",(function(){return t.onSubmit()})),f.Tb(1,"div",1),f.Tb(2,"div",2),f.Tb(3,"span",3),f.Ob(4,"input",4),f.Tb(5,"label"),f.Tb(6,"span",5),f.Hc(7,"*"),f.Sb(),f.Hc(8),f.ec(9,"translate"),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(10,"div",6),f.Ob(11,"button",7),f.ec(12,"translate"),f.Tb(13,"button",8),f.bc("click",(function(){return t.onCancel()})),f.ec(14,"translate"),f.Sb(),f.Sb(),f.Sb()),2&e&&(f.kc("formGroup",t.form),f.Bb(8),f.Ic(f.fc(9,5,"site.title")),f.Bb(3),f.lc("label",f.fc(12,7,"bia.save")),f.kc("disabled",!t.form.valid),f.Bb(2),f.lc("label",f.fc(14,9,"bia.cancel")))},directives:[B.p,B.k,k.d,B.f,k.c,k.b,B.a,B.j,B.e,te.a,B.h,k.e,I.b],pipes:[M.c],styles:[".app-field-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})();var se=i("y0gQ");function ne(e,t){1&e&&f.Ob(0,"bia-spinner",3),2&e&&f.kc("overlay",!0)}const ce=function(){return{minWidth:"50vw"}},ae=function(){return{overflow:"auto"}};let re=(()=>{class e{constructor(e){this.store=e,this.display=!1,this.sub=new Z.a,this.displayChange=new f.n}ngOnInit(){this.loading$=this.store.select(S.f).pipe(),this.site$=this.store.select(S.b).pipe(),this.sub.add(this.store.select(S.c).subscribe(e=>this.display=e))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(Object(h.m)({site:e})),this.close()}onCancelled(){this.close()}close(){this.store.dispatch(Object(h.a)())}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(n.b))},e.\u0275cmp=f.Hb({type:e,selectors:[["app-site-edit-dialog"]],outputs:{displayChange:"displayChange"},decls:8,vars:20,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"site","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(f.Tb(0,"p-dialog",0),f.bc("visibleChange",(function(e){return t.display=e})),f.Tb(1,"p-header"),f.Hc(2),f.ec(3,"translate"),f.Sb(),f.Tb(4,"app-site-form",1),f.bc("cancel",(function(){return t.onCancelled()}))("save",(function(e){return t.onSubmitted(e)})),f.ec(5,"async"),f.Sb(),f.Fc(6,ne,1,1,"bia-spinner",2),f.ec(7,"async"),f.Sb()),2&e&&(f.Dc(f.nc(18,ce)),f.kc("focusOnShow",!1)("visible",t.display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",f.nc(19,ae)),f.Bb(2),f.Jc(" ",f.fc(3,12,"site.edit")," "),f.Bb(2),f.kc("site",f.fc(5,14,t.site$)),f.Bb(2),f.kc("ngIf",f.fc(7,16,t.loading$)))},directives:[ee.a,V.c,ie,$.m,se.a],pipes:[M.c,$.b],styles:[""]}),e})();const oe=function(){return{minWidth:"50vw"}},le=function(){return{overflow:"auto"}};let be=(()=>{class e{constructor(e){this.store=e,this.display=!1,this.sub=new Z.a,this.displayChange=new f.n}ngOnInit(){this.sub.add(this.store.select(S.d).subscribe(e=>this.display=e))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(Object(h.c)({site:e})),this.close()}onCancelled(){this.site={},this.close()}close(){this.store.dispatch(Object(h.b)())}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(n.b))},e.\u0275cmp=f.Hb({type:e,selectors:[["app-site-new-dialog"]],outputs:{displayChange:"displayChange"},decls:5,vars:15,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"site","cancel","save"]],template:function(e,t){1&e&&(f.Tb(0,"p-dialog",0),f.bc("visibleChange",(function(e){return t.display=e})),f.Tb(1,"p-header"),f.Hc(2),f.ec(3,"translate"),f.Sb(),f.Tb(4,"app-site-form",1),f.bc("cancel",(function(){return t.onCancelled()}))("save",(function(e){return t.onSubmitted(e)})),f.Sb(),f.Sb()),2&e&&(f.Dc(f.nc(13,oe)),f.kc("focusOnShow",!1)("visible",t.display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",f.nc(14,le)),f.Bb(2),f.Jc(" ",f.fc(3,11,"site.add")," "),f.Bb(2),f.kc("site",t.site))},directives:[ee.a,V.c,ie],pipes:[M.c],styles:[""]}),e})(),ue=(()=>{class e{constructor(e,t,i,s){this.store=e,this.authService=t,this.router=i,this.route=s,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=C.b,this.pageSize=this.defaultPageSize,this.showFilter=!1,this.haveFilter=!1,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.canManageMembers=!1}ngOnInit(){this.initTableConfiguration(),this.setPermissions(),this.initUsers(),this.initSites(),this.initTotalCount(),this.initLoading()}onCreate(){this.store.dispatch(Object(h.k)())}onEdit(){this.selectedSites&&1===this.selectedSites.length&&(this.store.dispatch(Object(h.e)({id:this.selectedSites[0].id})),this.store.dispatch(Object(h.j)()))}onDelete(){this.selectedSites&&this.store.dispatch(Object(h.i)({ids:this.selectedSites.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedSites=e}onManageMember(e){e&&e>0&&this.router.navigate(["/sites",e,"members"])}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){this.lastLazyLoadEvent=e;const t=Object.assign({userId:this.advancedFilter&&this.advancedFilter.userId>0?this.advancedFilter.userId:0},e);this.store.dispatch(Object(h.f)({event:t}))}onSearchUsers(e){this.store.dispatch(Object(j.b)({filter:e}))}onFilter(e){this.advancedFilter=e,this.haveFilter=this.advancedFilter&&this.advancedFilter.userId>0,this.onLoadLazy(this.lastLazyLoadEvent)}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onCloseFilter(){this.showFilter=!1}onOpenFilter(){this.showFilter=!0}onToggleSearch(){this.showColSearch=!this.showColSearch}toSiteListVM(e){return{id:e.id,title:e.title,siteAdmin:e.siteAdmins?e.siteAdmins.map(e=>`${e.userLastName} ${e.userFirstName}`).join(", "):""}}onViewChange(e){this.updateAdvancedFilterByView(e),this.viewPreference=e}updateAdvancedFilterByView(e){let t={},i=!1;if(e&&e!==C.c){const s=JSON.parse(e);s&&s.advancedFilter&&(t=s.advancedFilter,i=this.advancedFilter&&this.advancedFilter.userId>0)}this.advancedFilter=t,this.haveFilter=i}setPermissions(){this.canEdit=this.authService.hasPermission(x.a.Site_Update),this.canDelete=this.authService.hasPermission(x.a.Site_Delete),this.canAdd=this.authService.hasPermission(x.a.Site_Create),this.canManageMembers=this.authService.hasPermission(x.a.Member_List_Access)}initTableConfiguration(){this.tableConfiguration={columns:[new y.b("title","site.title"),Object.assign(new y.b("siteAdmin","site.admins"),{isSortable:!1,isSearchable:!1})]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=this.columns}initLoading(){this.loading$=this.store.select(S.g).pipe()}initTotalCount(){this.totalCount$=this.store.select(S.h).pipe()}initSites(){this.sites$=this.store.select(S.a).pipe().pipe(Object(l.a)(e=>e.map(e=>this.toSiteListVM(e))))}initUsers(){this.users$=this.store.select(w.a)}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(n.b),f.Nb(F.a),f.Nb(s.c),f.Nb(s.a))},e.\u0275cmp=f.Hb({type:e,selectors:[["app-sites-index"]],hostVars:2,hostBindings:function(e,t){2&e&&f.Fb("bia-flex",t.flex)},decls:15,vars:38,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],[3,"hidden","fxFlexValue","users","searchUsers","filter","close"],["fxFlex","100"],[3,"headerTitle","haveFilter","showFilter","showBtnFilter","canAdd","canEdit","selectedElements","create","openFilter","delete","edit"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","advancedFilter","edit","loadLazy","selectedElementsChanged"]],template:function(e,t){1&e&&(f.Tb(0,"div"),f.Tb(1,"div",0),f.Tb(2,"app-site-filter",1),f.bc("searchUsers",(function(e){return t.onSearchUsers(e)}))("filter",(function(e){return t.onFilter(e)}))("close",(function(){return t.onCloseFilter()})),f.ec(3,"async"),f.Sb(),f.Tb(4,"div",2),f.Tb(5,"app-site-table-header",3),f.bc("create",(function(){return t.onCreate()}))("openFilter",(function(){return t.onOpenFilter()}))("delete",(function(){return t.onDelete()}))("edit",(function(){return t.onEdit()})),f.ec(6,"translate"),f.Sb(),f.Tb(7,"bia-table-controller",4),f.bc("displayedColumnsChange",(function(e){return t.displayedColumnsChanged(e)}))("filter",(function(e){return t.searchGlobalChanged(e)}))("pageSizeChange",(function(e){return t.onPageSizeChange(e)}))("toggleSearch",(function(){return t.onToggleSearch()}))("viewChange",(function(e){return t.onViewChange(e)})),f.ec(8,"async"),f.Sb(),f.Tb(9,"bia-table",5),f.bc("edit",(function(e){return t.onManageMember(e)}))("loadLazy",(function(e){return t.onLoadLazy(e)}))("selectedElementsChanged",(function(e){return t.onSelectedElementsChanged(e)})),f.ec(10,"async"),f.ec(11,"async"),f.ec(12,"async"),f.Sb(),f.Sb(),f.Sb(),f.Ob(13,"app-site-edit-dialog"),f.Ob(14,"app-site-new-dialog"),f.Sb()),2&e&&(f.Bb(2),f.kc("hidden",!t.showFilter)("fxFlexValue",25)("users",f.fc(3,26,t.users$)),f.Bb(3),f.kc("headerTitle",f.fc(6,28,"site.listOf"))("haveFilter",t.haveFilter)("showFilter",t.showFilter)("showBtnFilter",!0)("canAdd",t.canAdd)("canEdit",t.canEdit)("selectedElements",t.selectedSites),f.Bb(2),f.kc("defaultPageSize",t.defaultPageSize)("length",f.fc(8,30,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),f.Bb(2),f.kc("elements",f.fc(10,32,t.sites$))("totalRecord",f.fc(11,34,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canManageMembers)("canSelectElement",t.canDelete)("loading",f.fc(12,36,t.loading$))("viewPreference",t.viewPreference)("advancedFilter",t.advancedFilter))},directives:[k.d,A,k.b,K,Y.a,Q.a,re,be],pipes:[$.b,M.c],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})();var de=i("PCNd"),he=i("CaOr"),pe=i("oulN"),fe=i("+dww"),ge=i("vuVG"),me=i("Lnda"),Se=i("95+j"),Oe=i("SxV6");function ve(e,t){1&e&&f.Ob(0,"bia-spinner",1),2&e&&f.kc("overlay",!0)}const ye=[{path:"",data:{breadcrumb:null,permission:x.a.Site_List_Access},component:ue,canActivate:[fe.a]},{path:":siteId",data:{breadcrumb:"",canNavigate:!1},component:(()=>{class e{constructor(e,t,i,s){this.store=e,this.route=t,this.siteService=i,this.layoutService=s,this.sub=new Z.a}ngOnInit(){this.siteService.currentSiteId=this.route.snapshot.params.siteId,this.sub.add(this.store.select(S.b).subscribe(e=>{(null==e?void 0:e.title)&&(this.route.data.pipe(Object(Oe.a)()).subscribe(t=>{t.breadcrumb=e.title}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(n.b),f.Nb(s.a),f.Nb(me.a),f.Nb(Se.a))},e.\u0275cmp=f.Hb({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(f.Ob(0,"router-outlet"),f.Fc(1,ve,1,1,"bia-spinner",0),f.ec(2,"async")),2&e&&(f.Bb(1),f.kc("ngIf",f.fc(2,1,t.siteService.loading$)))},directives:[s.g,$.m,se.a],pipes:[$.b],styles:[""]}),e})(),canActivate:[fe.a],children:[{path:"members",data:{breadcrumb:"app.members",canNavigate:!0,permission:x.a.Member_List_Access},loadChildren:()=>Promise.all([i.e(0),i.e(15)]).then(i.bind(null,"DmGy")).then(e=>e.MemberModule)}]},{path:"**",redirectTo:""}];let je=(()=>{class e{}return e.\u0275mod=f.Lb({type:e}),e.\u0275inj=f.Kb({factory:function(t){return new(t||e)},imports:[[de.a,pe.a,he.a,ge.a,s.f.forChild(ye),n.d.forFeature("sites",S.i),c.b.forFeature([v])]]}),e})()},CaOr:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("snw9"),n=i("kt0X"),c=i("mCVk"),a=i("qq1s"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Lb({type:e}),e.\u0275inj=r.Kb({factory:function(t){return new(t||e)},imports:[[n.d.forFeature("domain-users",c.b),s.b.forFeature([a.a])]]}),e})()},Lnda:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("quSY"),n=i("xz6w"),c=i("scl0"),a=i("fXoL"),r=i("kt0X");let o=(()=>{class e{constructor(e){this.store=e,this.sub=new s.a,this.InitSub(),this.loading$=this.store.select(n.f)}get currentSite(){var e;return(null===(e=this._currentSite)||void 0===e?void 0:e.id)===this._currentSiteId?this._currentSite:null}get currentSiteId(){return this._currentSiteId}set currentSiteId(e){this._currentSiteId=Number(e),this.store.dispatch(Object(c.e)({id:e}))}InitSub(){this.sub=new s.a,this.sub.add(this.store.select(n.b).subscribe(e=>{e&&(this._currentSite=e)}))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(r.b))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},scl0:function(e,t,i){"use strict";i.d(t,"f",(function(){return n})),i.d(t,"e",(function(){return c})),i.d(t,"c",(function(){return a})),i.d(t,"m",(function(){return r})),i.d(t,"l",(function(){return o})),i.d(t,"i",(function(){return l})),i.d(t,"g",(function(){return b})),i.d(t,"h",(function(){return u})),i.d(t,"d",(function(){return d})),i.d(t,"j",(function(){return h})),i.d(t,"a",(function(){return p})),i.d(t,"k",(function(){return f})),i.d(t,"b",(function(){return g}));var s=i("kt0X");const n=Object(s.h)("[Sites] Load all by post",Object(s.m)()),c=Object(s.h)("[Sites] Load",Object(s.m)()),a=Object(s.h)("[Sites] Create",Object(s.m)()),r=Object(s.h)("[Sites] Update",Object(s.m)()),o=Object(s.h)("[Sites] Remove",Object(s.m)()),l=Object(s.h)("[Sites] Multi Remove",Object(s.m)()),b=Object(s.h)("[Sites] Load all by post success",Object(s.m)()),u=Object(s.h)("[Sites] Load success",Object(s.m)()),d=Object(s.h)("[Sites] Failure",Object(s.m)()),h=Object(s.h)("[Sites] Open dialog edit"),p=Object(s.h)("[Sites] Close dialog edit"),f=Object(s.h)("[Sites] Open dialog new"),g=Object(s.h)("[Sites] Close dialog new")},vuVG:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("snw9"),n=i("kt0X"),c=i("ylIW"),a=i("mijV"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Lb({type:e}),e.\u0275inj=r.Kb({factory:function(t){return new(t||e)},imports:[[n.d.forFeature("domain-users-from-AD",c.b),s.b.forFeature([a.a])]]}),e})()},xz6w:function(e,t,i){"use strict";i.d(t,"i",(function(){return l})),i.d(t,"h",(function(){return d})),i.d(t,"b",(function(){return h})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return f})),i.d(t,"g",(function(){return g})),i.d(t,"c",(function(){return m})),i.d(t,"d",(function(){return S})),i.d(t,"a",(function(){return O}));var s=i("EVqC"),n=i("kt0X"),c=i("scl0");const a=Object(s.a)({selectId:e=>e.id,sortComparer:!1}),r=a.getInitialState({totalCount:0,currentSite:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1,displayEditDialog:!1,displayNewDialog:!1}),o=Object(n.j)(r,Object(n.l)(c.k,e=>Object.assign(Object.assign({},e),{displayNewDialog:!0})),Object(n.l)(c.b,e=>Object.assign(Object.assign({},e),{displayNewDialog:!1})),Object(n.l)(c.j,e=>Object.assign(Object.assign({},e),{displayEditDialog:!0})),Object(n.l)(c.a,e=>Object.assign(Object.assign({},e),{displayEditDialog:!1})),Object(n.l)(c.f,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!0})),Object(n.l)(c.e,e=>Object.assign(Object.assign({},e),{loadingGet:!0})),Object(n.l)(c.g,(e,{result:t,event:i})=>{const s=a.setAll(t.data,e);return s.currentSite={},s.totalCount=t.totalCount,s.lastLazyLoadEvent=i,s.loadingGetAll=!1,s}),Object(n.l)(c.h,(e,{site:t})=>Object.assign(Object.assign({},e),{currentSite:t,loadingGet:!1})),Object(n.l)(c.d,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})));function l(e,t){return Object(n.f)({sites:o})(e,t)}const b=Object(n.i)("sites"),u=Object(n.k)(b,e=>e.sites),d=Object(n.k)(u,e=>e.totalCount),h=Object(n.k)(u,e=>e.currentSite),p=Object(n.k)(u,e=>e.lastLazyLoadEvent),f=Object(n.k)(u,e=>e.loadingGet),g=Object(n.k)(u,e=>e.loadingGetAll),m=Object(n.k)(u,e=>e.displayEditDialog),S=Object(n.k)(u,e=>e.displayNewDialog),{selectAll:O}=a.getSelectors(u)}}]);