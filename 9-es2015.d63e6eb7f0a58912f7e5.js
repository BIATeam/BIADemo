(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"138v":function(t,e,i){"use strict";i.r(e),i.d(e,"NotificationModule",(function(){return $i}));var n=i("tyNb"),o=i("kt0X"),c=i("snw9"),a=i("LRne"),s=i("wO+i"),r=i("eIep"),l=i("lJxs"),b=i("JIr8"),d=i("bOdf"),f=i("zp1y");const u=Object(o.h)("[Notifications] Load all by post",Object(o.m)()),p=Object(o.h)("[Notifications] Load",Object(o.m)()),h=Object(o.h)("[Notifications] Create",Object(o.m)()),m=Object(o.h)("[Notifications] Update",Object(o.m)()),g=Object(o.h)("[Notifications] Remove",Object(o.m)()),S=Object(o.h)("[Notifications] Multi Remove",Object(o.m)()),y=Object(o.h)("[Notifications] Load all by post success",Object(o.m)()),v=Object(o.h)("[Notifications] Load success",Object(o.m)()),O=Object(o.h)("[Notifications] Failure",Object(o.m)());var C=i("dlt+"),T=i("fXoL");let j=(()=>{class t extends C.a{constructor(t){super(t,"Notifications")}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(T.r))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=i("EVqC");const I=Object(w.a)({selectId:t=>t.id,sortComparer:!1}),B=I.getInitialState({totalCount:0,currentNotification:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),N=Object(o.j)(B,Object(o.l)(u,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!0})),Object(o.l)(p,t=>Object.assign(Object.assign({},t),{loadingGet:!0})),Object(o.l)(y,(t,{result:e,event:i})=>{const n=I.setAll(e.data,t);return n.totalCount=e.totalCount,n.lastLazyLoadEvent=i,n.loadingGetAll=!1,n}),Object(o.l)(v,(t,{notification:e})=>Object.assign(Object.assign({},t),{currentNotification:e,loadingGet:!1})),Object(o.l)(O,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!1,loadingGet:!1})));function $(t,e){return Object(o.f)({notifications:N})(t,e)}const D=Object(o.i)("notifications"),L=Object(o.k)(D,t=>t.notifications),z=Object(o.k)(L,t=>t.totalCount),R=Object(o.k)(L,t=>t.currentNotification),G=Object(o.k)(L,t=>t.lastLazyLoadEvent),x=Object(o.k)(L,t=>t.loadingGet),E=Object(o.k)(L,t=>t.loadingGetAll),{selectAll:P}=I.getSelectors(L);var M=i("Fx2S"),F=i("basH");let k=(()=>{class t{constructor(e,i,n,o){this.actions$=e,this.notificationDas=i,this.biaMessageService=n,this.store=o,this.loadAllByPost$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(u),Object(s.a)("event"),Object(r.a)(t=>this.notificationDas.getListByPost(t).pipe(Object(l.a)(e=>y({result:e,event:t})),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(O({error:t})))))))),this.load$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(p),Object(s.a)("id"),Object(r.a)(t=>this.notificationDas.get(t).pipe(Object(l.a)(t=>v({notification:t})),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(O({error:t})))))))),this.create$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(h),Object(s.a)("notification"),Object(d.a)(t=>Object(a.a)(t).pipe(Object(f.a)(this.store.select(G)))),Object(r.a)(([e,i])=>this.notificationDas.post(e).pipe(Object(l.a)(()=>(this.biaMessageService.showAddSuccess(),t.useSignalR?Object(F.a)():u({event:i}))),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(O({error:t})))))))),this.update$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(m),Object(s.a)("notification"),Object(d.a)(t=>Object(a.a)(t).pipe(Object(f.a)(this.store.select(G)))),Object(r.a)(([e,i])=>this.notificationDas.put(e,e.id).pipe(Object(l.a)(()=>(this.biaMessageService.showUpdateSuccess(),t.useSignalR?Object(F.a)():u({event:i}))),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(O({error:t})))))))),this.destroy$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(g),Object(s.a)("id"),Object(d.a)(t=>Object(a.a)(t).pipe(Object(f.a)(this.store.select(G)))),Object(r.a)(([e,i])=>this.notificationDas.delete(e).pipe(Object(l.a)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?Object(F.a)():u({event:i}))),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(O({error:t})))))))),this.multiDestroy$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(S),Object(s.a)("ids"),Object(d.a)(t=>Object(a.a)(t).pipe(Object(f.a)(this.store.select(G)))),Object(r.a)(([e,i])=>this.notificationDas.deletes(e).pipe(Object(l.a)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?Object(F.a)():u({event:i}))),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(O({error:t}))))))))}}return t.useSignalR=!1,t.\u0275fac=function(e){return new(e||t)(T.Xb(c.a),T.Xb(j),T.Xb(M.a),T.Xb(o.b))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac}),t})();var A=i("Sa1B"),U=i("VfrA"),K=i("s0Cq"),J=i("E6Oa"),V=i("Iab2"),Q=i("RoCi"),_=i("RdrV"),X=i("SxV6"),H=i("yOL8");let q=(()=>{class t{constructor(t,e,i){this.store=t,this.signalRService=e,this.authService=i}initialize(){console.log("%c [Notifications] Register SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-notifications",t=>{const e=JSON.parse(t);this.IsInMyDisplay(e)&&this.store.select(G).pipe(Object(X.a)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(u({event:t}))})}),this.signalRService.addMethod("refresh-notifications-several",t=>{JSON.parse(t).some(t=>this.IsInMyDisplay(t))&&this.store.select(G).pipe(Object(X.a)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(u({event:t}))})}),this.targetedFeature={parentKey:this.authService.getAdditionalInfos().userData.currentSiteId.toString(),featureName:"notifications"},this.signalRService.joinGroup(this.targetedFeature)}IsInMyDisplay(t){var e=this.authService.getAdditionalInfos(),i=t.siteId==e.userData.currentSiteId,n=null==t.notifiedUsers||0==t.notifiedUsers.length||t.notifiedUsers.some(t=>t.id==e.userInfo.id),o=null==t.notifiedPermissions||0==t.notifiedPermissions.length||t.notifiedPermissions.some(t=>this.authService.hasPermission(t.id.toString()));return i&&n&&o}destroy(){console.log("%c [Notifications] Unregister SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-notifications"),this.signalRService.leaveGroup(this.targetedFeature)}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(o.b),T.Xb(H.a),T.Xb(J.a))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var W=i("P5II"),Y=i("itXk");const Z=Object(o.h)("[Domain Notification Type Options] Load all"),tt=Object(o.h)("[Domain Notification Type Options] Load all success",Object(o.m)()),et=Object(o.h)("[Domain Notification Type Options] Failure",Object(o.m)()),it=Object(w.a)({selectId:t=>t.id,sortComparer:!1}),nt=it.getInitialState({}),ot=Object(o.j)(nt,Object(o.l)(tt,(t,{notificationTypes:e})=>it.setAll(e,t)));function ct(t,e){return Object(o.f)({notificationTypeOptions:ot})(t,e)}const at=Object(o.i)("domain-notification-type-options"),st=Object(o.k)(at,t=>t.notificationTypeOptions),{selectAll:rt}=it.getSelectors(st),lt=Object(o.h)("[Domain Permission Options] Load all"),bt=Object(o.h)("[Domain Permission Options] Load all success",Object(o.m)()),dt=Object(o.h)("[Domain Permission Options] Failure",Object(o.m)()),ft=Object(w.a)({selectId:t=>t.id,sortComparer:!1}),ut=ft.getInitialState({}),pt=Object(o.j)(ut,Object(o.l)(bt,(t,{permissions:e})=>ft.setAll(e,t)));function ht(t,e){return Object(o.f)({permissionOptions:pt})(t,e)}const mt=Object(o.i)("domain-permission-options"),gt=Object(o.k)(mt,t=>t.permissionOptions),{selectAll:St}=ft.getSelectors(gt);var yt=i("4tvz"),vt=i("B67f"),Ot=i("dnD0");let Ct=(()=>{class t{constructor(t){this.store=t,this.notificationTypeOptions$=this.store.select(rt),this.permissionOptions$=this.store.select(St),this.userOptions$=this.store.select(yt.a),this.dictOptionDtos$=Object(Y.a)([this.notificationTypeOptions$,this.permissionOptions$,this.userOptions$]).pipe(Object(l.a)(t=>[new Ot.a("type",t[0]),new Ot.a("notifiedPermissions",t[1]),new Ot.a("notifiedUsers",t[2]),new Ot.a("createdBy",t[2])]))}loadAllOptions(){this.store.dispatch(Z()),this.store.dispatch(lt()),this.store.dispatch(Object(vt.d)())}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(o.b))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Tt=i("sYmb"),jt=i("XiUz"),wt=i("jIms"),It=i("v8MJ"),Bt=i("ofXK"),Nt=i("3Pt+"),$t=i("gT8a"),Dt=i("/ZTc"),Lt=i("rEr+"),zt=i("7zfz"),Rt=i("7kUa"),Gt=i("znSr"),xt=i("arFO"),Et=i("lVkt"),Pt=i("Ji6n"),Mt=i("eO1q"),Ft=i("PjIi");function kt(t,e){1&t&&(T.Tb(0,"th",10),T.Ob(1,"p-tableHeaderCheckbox"),T.Sb())}function At(t,e){if(1&t&&(T.Tb(0,"th",12),T.Ic(1),T.ec(2,"translate"),T.Ob(3,"p-sortIcon",13),T.Sb()),2&t){const t=T.dc().$implicit;T.lc("pSortableColumn",t.field),T.Bb(1),T.Kc(" ",T.fc(2,3,null==t?null:t.header)," "),T.Bb(2),T.lc("field",t.field)}}function Ut(t,e){if(1&t&&(T.Tb(0,"th"),T.Ic(1),T.ec(2,"translate"),T.Sb()),2&t){const t=T.dc().$implicit;T.Bb(1),T.Kc(" ",T.fc(2,1,null==t?null:t.header)," ")}}function Kt(t,e){if(1&t&&(T.Rb(0),T.Gc(1,At,4,5,"th",11),T.Gc(2,Ut,3,3,"th",9),T.Qb()),2&t){const t=e.$implicit;T.Bb(1),T.lc("ngIf",!0===(null==t?null:t.isSortable)),T.Bb(1),T.lc("ngIf",!0!==(null==t?null:t.isSortable))}}function Jt(t,e){1&t&&T.Ob(0,"th")}const Vt=function(t){return{"ui-state-filled":t}};function Qt(t,e){if(1&t){const t=T.Ub();T.Tb(0,"span",17),T.Tb(1,"input",18),T.bc("input",(function(e){T.zc(t);const i=T.dc().$implicit;return T.dc(3),T.yc(1).filter(e.target.value,i.field,i.filterMode)})),T.ec(2,"translate"),T.Sb(),T.Sb()}if(2&t){const t=T.dc().$implicit;T.dc(3);const e=T.yc(1);T.Bb(1),T.mc("type","Number"===t.type?"number":"text"),T.mc("placeholder",null!=t.searchPlaceholder?t.searchPlaceholder:!0===t.isDate?T.fc(2,4,"bia.dateIso8601"):""),T.lc("value",null==e.filters[t.field]?null:e.filters[t.field].value)("ngClass",T.pc(6,Vt,""!=(null==e.filters[t.field]?null:e.filters[t.field].value)))}}function _t(t,e){if(1&t&&(T.Tb(0,"th",15),T.Gc(1,Qt,3,8,"span",16),T.Sb()),2&t){const t=e.$implicit;T.lc("ngSwitch",t.field),T.Bb(1),T.lc("ngIf",!0===t.isSearchable)}}function Xt(t,e){if(1&t&&(T.Tb(0,"tr"),T.Gc(1,Jt,1,0,"th",9),T.Gc(2,_t,2,2,"th",14),T.Sb()),2&t){const t=T.dc().$implicit,e=T.dc(2);T.Bb(1),T.lc("ngIf",e.canSelectElement),T.Bb(1),T.lc("ngForOf",t)}}function Ht(t,e){if(1&t&&(T.Tb(0,"tr"),T.Gc(1,kt,2,0,"th",7),T.Gc(2,Kt,3,2,"ng-container",8),T.Sb(),T.Gc(3,Xt,3,2,"tr",9)),2&t){const t=e.$implicit,i=T.dc(2);T.Bb(1),T.lc("ngIf",i.canSelectElement),T.Bb(1),T.lc("ngForOf",t),T.Bb(1),T.lc("ngIf",i.showColSearch)}}function qt(t,e){if(1&t&&T.Ob(0,"p-tableCheckbox",23),2&t){const t=T.dc(2).$implicit;T.lc("value",t)}}function Wt(t,e){1&t&&T.Ob(0,"i",24)}function Yt(t,e){if(1&t&&(T.Tb(0,"td"),T.Gc(1,qt,1,1,"p-tableCheckbox",21),T.Gc(2,Wt,1,0,"i",22),T.Sb()),2&t){const t=T.dc().$implicit,e=T.dc(2);T.Bb(1),T.lc("ngIf",!0!==e.isFooter(t)&&t.id>0),T.Bb(1),T.lc("ngIf",!0===e.isFooter(t))}}function Zt(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"input",29),T.bc("change",(function(){return T.zc(t),T.dc(6).onChange()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(3).$implicit;T.Bb(1),T.lc("formControlName",t.field)}}function te(t,e){1&t&&(T.Tb(0,"span",30),T.Ic(1,"*"),T.Sb())}function ee(t,e){if(1&t&&(T.Rb(0,15),T.Gc(1,Zt,2,1,"ng-container",27),T.Qb(),T.Gc(2,te,2,0,"span",28)),2&t){const t=T.dc(2).$implicit,e=T.dc(3);T.lc("ngSwitch",t.field),T.Bb(2),T.lc("ngIf",!0===e.isRequired(t.field))}}function ie(t,e){1&t&&T.Gc(0,ee,3,2,"ng-template",26)}function ne(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.Qb()),2&t){const t=T.dc(3).$implicit,e=T.dc().$implicit;T.Bb(1),T.Kc(" ",e[t.field]," ")}}function oe(t,e){if(1&t&&(T.Rb(0,15),T.Gc(1,ne,2,1,"ng-container",27),T.Qb()),2&t){const t=T.dc(2).$implicit;T.lc("ngSwitch",t.field)}}function ce(t,e){1&t&&T.Gc(0,oe,2,1,"ng-template",31)}const ae=function(){return{width:"100%"}};function se(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"p-dropdown",35),T.bc("onChange",(function(){return T.zc(t),T.dc(7).onChange()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit,e=T.dc(3);T.Bb(1),T.Ec(T.oc(4,ae)),T.lc("formControlName",t.field)("options",e.getOptionDto(t.field))}}function re(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"p-multiSelect",36),T.bc("onChange",(function(){return T.zc(t),T.dc(7).onChange()}))("onPanelShow",(function(){return T.zc(t),T.dc(7).onPanelShowMultiSelect()}))("onPanelHide",(function(){return T.zc(t),T.dc(7).onPanelHideMultiSelect()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit,e=T.dc(3);T.Bb(1),T.Ec(T.oc(4,ae)),T.lc("formControlName",t.field)("options",e.getOptionDto(t.field))}}function le(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"p-checkbox",37),T.bc("onChange",(function(){return T.zc(t),T.dc(7).onChange()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit;T.Bb(1),T.lc("binary",!0)("formControlName",t.field)}}function be(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"input",38),T.bc("change",(function(){return T.zc(t),T.dc(7).onChange()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit;T.Bb(1),T.lc("formControlName",t.field)}}function de(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"p-calendar",39),T.bc("onShow",(function(){return T.zc(t),T.dc(7).onShowCalendar()}))("onSelect",(function(){return T.zc(t),T.dc(7).onChange()}))("onBlur",(function(){return T.zc(t),T.dc(7).onBlurCalendar()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit;T.Bb(1),T.Ec(T.oc(5,ae)),T.lc("formControlName",t.field)("showButtonBar",!0)("inputStyle",T.oc(6,ae))}}function fe(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"p-calendar",40),T.bc("onShow",(function(){return T.zc(t),T.dc(7).onShowCalendar()}))("onSelect",(function(){return T.zc(t),T.dc(7).onChange()}))("onBlur",(function(){return T.zc(t),T.dc(7).onBlurCalendar()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit;T.Bb(1),T.Ec(T.oc(5,ae)),T.lc("formControlName",t.field)("inputStyle",T.oc(6,ae))("timeOnly",!0)}}function ue(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"p-calendar",41),T.bc("onShow",(function(){return T.zc(t),T.dc(7).onShowCalendar()}))("onSelect",(function(){return T.zc(t),T.dc(7).onChange()}))("onBlur",(function(){return T.zc(t),T.dc(7).onBlurCalendar()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit;T.Bb(1),T.Ec(T.oc(5,ae)),T.lc("formControlName",t.field)("showButtonBar",!0)("inputStyle",T.oc(6,ae))}}function pe(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Tb(1,"input",42),T.bc("change",(function(){return T.zc(t),T.dc(7).onChange()})),T.Sb(),T.Qb()}if(2&t){const t=T.dc(4).$implicit;T.Bb(1),T.lc("maxlength",t.maxlength)("formControlName",t.field)}}function he(t,e){1&t&&(T.Tb(0,"span",30),T.Ic(1,"*"),T.Sb())}function me(t,e){if(1&t&&(T.Rb(0,15),T.Gc(1,se,2,5,"ng-container",34),T.Gc(2,re,2,5,"ng-container",34),T.Gc(3,le,2,2,"ng-container",34),T.Gc(4,be,2,1,"ng-container",34),T.Gc(5,de,2,7,"ng-container",34),T.Gc(6,fe,2,7,"ng-container",34),T.Gc(7,ue,2,7,"ng-container",34),T.Gc(8,pe,2,2,"ng-container",27),T.Qb(),T.Gc(9,he,2,0,"span",28)),2&t){const t=T.dc(3).$implicit,e=T.dc(3);T.lc("ngSwitch",t.type),T.Bb(1),T.lc("ngSwitchCase","OneToMany"),T.Bb(1),T.lc("ngSwitchCase","ManyToMany"),T.Bb(1),T.lc("ngSwitchCase","Boolean"),T.Bb(1),T.lc("ngSwitchCase","Number"),T.Bb(1),T.lc("ngSwitchCase","Date"),T.Bb(1),T.lc("ngSwitchCase","Time"),T.Bb(1),T.lc("ngSwitchCase","DateTime"),T.Bb(2),T.lc("ngIf",!0===e.isRequired(t.field))}}function ge(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.Qb()),2&t){const t=T.dc(5).$implicit,e=T.dc().$implicit;T.Bb(1),T.Kc(" ",null==e[t.field]?null:e[t.field].display," ")}}function Se(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.Qb()),2&t){const t=T.dc(5).$implicit,e=T.dc().$implicit,i=T.dc(2);T.Bb(1),T.Kc(" ",i.formatDisplayName(e[t.field])," ")}}function ye(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.ec(2,"date"),T.Qb()),2&t){const t=T.dc(5).$implicit,e=T.dc().$implicit;T.Bb(1),T.Kc(" ",!0===t.isDate?T.gc(2,1,e[t.field],t.formatDate):e[t.field]," ")}}function ve(t,e){if(1&t&&(T.Rb(0),T.Rb(1,15),T.Gc(2,ge,2,1,"ng-container",34),T.Gc(3,Se,2,1,"ng-container",34),T.Gc(4,ye,3,4,"ng-container",27),T.Qb(),T.Qb()),2&t){const t=T.dc(4).$implicit;T.Bb(1),T.lc("ngSwitch",t.type),T.Bb(1),T.lc("ngSwitchCase","OneToMany"),T.Bb(1),T.lc("ngSwitchCase","ManyToMany")}}function Oe(t,e){if(1&t&&T.Gc(0,ve,5,3,"ng-container",9),2&t){const t=T.dc(4).$implicit,e=T.dc(2);T.lc("ngIf",!0!==e.isFooter(t))}}function Ce(t,e){if(1&t&&(T.Gc(0,me,10,9,"ng-template",32),T.Gc(1,Oe,1,1,"ng-template",null,33,T.Hc)),2&t){const t=T.yc(2),e=T.dc(2).$implicit;T.lc("ngIf",!0===e.isEditable)("ngIfElse",t)}}function Te(t,e){1&t&&T.Gc(0,Ce,3,2,"ng-template",26)}function je(t,e){1&t&&(T.Tb(0,"label"),T.Ic(1,"-"),T.Sb())}function we(t,e){if(1&t&&T.Gc(0,je,2,0,"label",9),2&t){const t=T.dc(3).$implicit;T.lc("ngIf",!0===t.isEditable)}}function Ie(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.Qb()),2&t){const t=T.dc(4).$implicit,e=T.dc().$implicit;T.Bb(1),T.Kc(" ",null==e[t.field]?null:e[t.field].display," ")}}function Be(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.Qb()),2&t){const t=T.dc(4).$implicit,e=T.dc().$implicit,i=T.dc(2);T.Bb(1),T.Kc(" ",i.formatDisplayName(e[t.field])," ")}}function Ne(t,e){1&t&&T.Ob(0,"i",45)}function $e(t,e){if(1&t&&(T.Rb(0),T.Gc(1,Ne,1,0,"i",44),T.Qb()),2&t){const t=T.dc(4).$implicit,e=T.dc().$implicit;T.Bb(1),T.lc("ngIf",!0===e[t.field])}}function De(t,e){if(1&t&&(T.Rb(0),T.Ic(1),T.ec(2,"date"),T.Qb()),2&t){const t=T.dc(4).$implicit,e=T.dc().$implicit;T.Bb(1),T.Kc(" ",!0===t.isDate?T.gc(2,1,e[t.field],t.formatDate):e[t.field]," ")}}function Le(t,e){if(1&t&&(T.Rb(0,15),T.Gc(1,Ie,2,1,"ng-container",34),T.Gc(2,Be,2,1,"ng-container",34),T.Gc(3,$e,2,1,"ng-container",34),T.Gc(4,De,3,4,"ng-container",27),T.Qb()),2&t){const t=T.dc(3).$implicit;T.lc("ngSwitch",t.type),T.Bb(1),T.lc("ngSwitchCase","OneToMany"),T.Bb(1),T.lc("ngSwitchCase","ManyToMany"),T.Bb(1),T.lc("ngSwitchCase","Boolean")}}function ze(t,e){if(1&t&&(T.Gc(0,we,1,1,"ng-template",32),T.Gc(1,Le,5,4,"ng-template",null,43,T.Hc)),2&t){const t=T.yc(2),e=T.dc(3).$implicit,i=T.dc(2);T.lc("ngIf",!0===i.isFooter(e))("ngIfElse",t)}}function Re(t,e){1&t&&T.Gc(0,ze,3,2,"ng-template",31)}function Ge(t,e){if(1&t){const t=T.Ub();T.Tb(0,"td",25),T.bc("click",(function(){T.zc(t);const e=T.dc().$implicit;return T.dc(2).initEditableRow(e)})),T.Tb(1,"p-cellEditor"),T.Gc(2,ie,1,0,void 0,9),T.Gc(3,ce,1,0,void 0,9),T.Gc(4,Te,1,0,void 0,9),T.Gc(5,Re,1,0,void 0,9),T.Sb(),T.Sb()}if(2&t){const t=e.$implicit,i=T.dc(3);T.Bb(2),T.lc("ngIf",!0===i.isSpecificInput(t.field)),T.Bb(1),T.lc("ngIf",!0===i.isSpecificInput(t.field)),T.Bb(1),T.lc("ngIf",!0!==i.isSpecificInput(t.field)),T.Bb(1),T.lc("ngIf",!0!==i.isSpecificInput(t.field))}}function xe(t,e){if(1&t){const t=T.Ub();T.Tb(0,"tr",19),T.bc("focusout",(function(){return T.zc(t),T.dc(2).onFocusout()}))("keyup.enter",(function(){return T.zc(t),T.dc(2).initEditableRow(null)}))("keyup.escape",(function(){return T.zc(t),T.dc(2).cancel()})),T.Gc(1,Yt,3,2,"td",9),T.Gc(2,Ge,6,4,"td",20),T.Sb()}if(2&t){const t=e.$implicit,i=e.columns,n=T.dc(2);T.lc("pSelectableRow",!0!==n.isFooter(t)?t:null)("pEditableRow",t),T.Bb(1),T.lc("ngIf",n.canSelectElement),T.Bb(1),T.lc("ngForOf",i)}}function Ee(t,e){if(1&t&&(T.Tb(0,"tr"),T.Tb(1,"td",46),T.Ic(2),T.ec(3,"translate"),T.Sb(),T.Sb()),2&t){const t=e.$implicit;T.Bb(1),T.Cb("colspan",t.length+1),T.Bb(1),T.Kc(" ",T.fc(3,2,"bia.NoRecordsFound")," ")}}function Pe(t,e){if(1&t){const t=T.Ub();T.Tb(0,"p-table",2,3),T.bc("onFilter",(function(){return T.zc(t),T.dc().onFilter()}))("onLazyLoad",(function(e){return T.zc(t),T.dc().onLoadLazy(e)}))("onStateSave",(function(e){return T.zc(t),T.dc().onStateSave(e)}))("selectionChange",(function(){return T.zc(t),T.dc().onSelectionChange()})),T.ec(2,"async"),T.Gc(3,Ht,4,3,"ng-template",4),T.Gc(4,xe,3,4,"ng-template",5),T.Gc(5,Ee,4,4,"ng-template",6),T.Sb()}if(2&t){const t=T.dc();T.lc("autoLayout",!0)("reorderableColumns",!0)("columns",t.displayedColumns)("value",t.elements)("paginator",t.paginator)("rows",t.pageSize)("totalRecords",t.totalRecord)("lazy",!0)("loading",t.loading&&null!==T.fc(2,14,t.showLoading$))("stateStorage","session")("stateKey",t.tableStateKey)("lazyLoadOnInit",t.getLazyLoadOnInit())("sortField",t.sortFieldValue)("sortOrder",t.sortOrderValue)}}let Me=(()=>{class t extends Dt.a{constructor(t,e,i,n){super(t,e,i,n),this.formBuilder=t,this.authService=e,this.biaMessageService=i,this.translateService=n,this.initForm()}initForm(){var t,e;this.form=this.formBuilder.group({id:[this.element.id],title:[this.element.title,Nt.o.required],description:[this.element.description,Nt.o.required],type:[null===(t=this.element.type)||void 0===t?void 0:t.id,Nt.o.required],read:[this.element.read],createdDate:[this.element.createdDate,Nt.o.required],createdBy:[null===(e=this.element.createdBy)||void 0===e?void 0:e.id],notifiedPermissions:[this.element.notifiedPermissions],notifiedUsers:[this.element.notifiedUsers],jData:[this.element.jData]})}onSubmit(){var t,e;if(this.form.valid){const i=this.form.value;i.id=i.id>0?i.id:0,i.read=!!i.read&&i.read,i.createdBy=$t.a.Clone(i.createdBy),i.notifiedPermissions=$t.a.Differential(i.notifiedPermissions,null===(t=this.element)||void 0===t?void 0:t.notifiedPermissions),i.notifiedUsers=$t.a.Differential(i.notifiedUsers,null===(e=this.element)||void 0===e?void 0:e.notifiedUsers),i.type=Object.assign({},i.type),this.save.emit(i),this.form.reset()}}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(Nt.b),T.Nb(J.a),T.Nb(M.a),T.Nb(Tt.d))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-notification-table"]],features:[T.yb],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","md-inputfield",4,"ngIf"],[1,"md-inputfield"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","ui-icon-check",4,"ngIf"],[1,"ui-icon-check"],[1,"app-empty-message"]],template:function(t,e){1&t&&(T.Tb(0,"form",0),T.Gc(1,Pe,6,16,"p-table",1),T.Sb()),2&t&&(T.lc("formGroup",e.form),T.Bb(1),T.lc("ngIf",e.configuration))},directives:[Nt.p,Nt.k,Nt.f,Bt.m,Lt.f,zt.e,Bt.l,Lt.h,Lt.e,Lt.d,Bt.o,Rt.a,Bt.k,Gt.a,Lt.c,Lt.b,Lt.g,Lt.a,Bt.q,Nt.a,Nt.j,Nt.e,Bt.p,xt.a,Et.a,Pt.a,Nt.m,Mt.a,Ft.a,Nt.h],pipes:[Bt.b,Tt.c,Bt.e],styles:["[_nghost-%COMP%]{flex-direction:column}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),t})();function Fe(t,e){if(1&t){const t=T.Ub();T.Tb(0,"bia-table",6),T.bc("edit",(function(e){return T.zc(t),T.dc().onDetail(e)}))("loadLazy",(function(e){return T.zc(t),T.dc().onLoadLazy(e)}))("selectedElementsChanged",(function(e){return T.zc(t),T.dc().onSelectedElementsChanged(e)})),T.ec(1,"async"),T.ec(2,"async"),T.ec(3,"async"),T.Sb()}if(2&t){const t=T.dc();T.lc("elements",T.fc(1,12,t.notifications$))("totalRecord",T.fc(2,14,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canSelectElement",t.canDelete)("loading",T.fc(3,16,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}function ke(t,e){if(1&t){const t=T.Ub();T.Tb(0,"app-notification-table",7),T.bc("loadLazy",(function(e){return T.zc(t),T.dc().onLoadLazy(e)}))("selectedElementsChanged",(function(e){return T.zc(t),T.dc().onSelectedElementsChanged(e)}))("save",(function(e){return T.zc(t),T.dc().onSave(e)})),T.ec(1,"async"),T.ec(2,"async"),T.ec(3,"async"),T.ec(4,"async"),T.Sb()}if(2&t){const t=T.dc();T.lc("elements",T.fc(1,14,t.notifications$))("dictOptionDtos",T.fc(2,16,t.notificationOptionsService.dictOptionDtos$))("totalRecord",T.fc(3,18,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canAdd",t.canAdd)("canSelectElement",t.canDelete)("loading",T.fc(4,20,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}let Ae=(()=>{class t{constructor(t,e,i,n,o,c,a,s,r){this.store=t,this.router=e,this.activatedRoute=i,this.authService=n,this.notificationDas=o,this.translateService=c,this.biaTranslationService=a,this.notificationsSignalRService=s,this.notificationOptionsService=r,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!0,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=K.b,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"notificationsGrid":void 0}ngOnInit(){this.initTableConfiguration(),this.setPermissions(),this.notifications$=this.store.select(P).pipe(Object(l.a)(t=>t.map(t=>(t.title=this.translateService.instant(t.title),t.description=this.translateService.instant(t.description),t)))),this.totalCount$=this.store.select(z),this.loading$=this.store.select(E),this.OnDisplay(),this.useCalcMode&&this.notificationOptionsService.loadAllOptions()}ngOnDestroy(){this.OnHide()}OnDisplay(){void 0!==this.notificationListComponent&&this.store.dispatch(u({event:this.notificationListComponent.getLazyLoadMetadata()})),this.useView&&this.store.dispatch(Object(W.g)()),this.useSignalR&&(this.notificationsSignalRService.initialize(),k.useSignalR=!0)}OnHide(){this.useSignalR&&(k.useSignalR=!1,this.notificationsSignalRService.destroy())}onCreate(){this.useCalcMode||this.router.navigate(["./create"],{relativeTo:this.activatedRoute})}onEdit(t){this.useCalcMode||this.router.navigate(["./"+t+"/edit"],{relativeTo:this.activatedRoute})}onDetail(t){this.useCalcMode||this.router.navigate(["./"+t+"/detail"],{relativeTo:this.activatedRoute})}onSave(t){this.useCalcMode&&((null==t?void 0:t.id)>0?this.canEdit&&this.store.dispatch(m({notification:t})):this.canAdd&&this.store.dispatch(h({notification:t})))}onDelete(){this.selectedNotifications&&this.canDelete&&this.store.dispatch(S({ids:this.selectedNotifications.map(t=>t.id)}))}onSelectedElementsChanged(t){this.selectedNotifications=t}onPageSizeChange(t){this.pageSize=t}onLoadLazy(t){this.store.dispatch(u({event:t}))}searchGlobalChanged(t){this.globalSearchValue=t}displayedColumnsChanged(t){this.displayedColumns=t}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(t){this.viewPreference=t}onExportCSV(){const t={};this.columns.map(e=>t[e.value.split(".")[1]]=this.translateService.instant(e.value));const e=Object.assign({columns:t},this.notificationListComponent.getLazyLoadMetadata());this.notificationDas.getFile(e).subscribe(t=>{V.saveAs(t,this.translateService.instant("app.notifications")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(_.a.Notification_Update),this.canDelete=this.authService.hasPermission(_.a.Notification_Delete),this.canAdd=this.authService.hasPermission(_.a.Notification_Create)}initTableConfiguration(){this.biaTranslationService.culture$.subscribe(t=>{this.tableConfiguration={columns:[new U.b("title","notification.title"),new U.b("description","notification.description"),Object.assign(new U.b("type","notification.type.title"),{type:U.c.OneToMany,translateKey:"notification.type.",searchPlaceholder:"task|info|success|warn|error"}),Object.assign(new U.b("read","notification.read"),{isSearchable:!1,type:U.c.Boolean}),Object.assign(new U.b("createdDate","notification.createdDate"),{type:U.c.Date,formatDate:t.dateFormat}),Object.assign(new U.b("createdBy","notification.createdBy"),{type:U.c.OneToMany}),Object.assign(new U.b("notifiedPermissions","notification.notifiedPermissions"),{type:U.c.ManyToMany,translateKey:"permission."}),Object.assign(new U.b("notifiedUsers","notification.notifiedUsers"),{type:U.c.ManyToMany}),new U.b("jData","notification.jData")]},this.columns=this.tableConfiguration.columns.map(t=>({key:t.field,value:t.header})),this.displayedColumns=[...this.columns]})}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(o.b),T.Nb(n.c),T.Nb(n.a),T.Nb(J.a),T.Nb(j),T.Nb(Tt.d),T.Nb(Q.a),T.Nb(q),T.Nb(Ct))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-notifications-index"]],viewQuery:function(t,e){var i;1&t&&T.Mc(A.a,!0),2&t&&T.xc(i=T.cc())&&(e.notificationListComponent=i.first)},hostVars:2,hostBindings:function(t,e){2&t&&T.Fb("bia-flex",e.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(t,e){1&t&&(T.Tb(0,"div",0),T.Tb(1,"div",1),T.Tb(2,"bia-table-header",2),T.bc("create",(function(){return e.onCreate()}))("exportCSV",(function(){return e.onExportCSV()}))("delete",(function(){return e.onDelete()})),T.ec(3,"translate"),T.Sb(),T.Tb(4,"bia-table-controller",3),T.bc("displayedColumnsChange",(function(t){return e.displayedColumnsChanged(t)}))("filter",(function(t){return e.searchGlobalChanged(t)}))("pageSizeChange",(function(t){return e.onPageSizeChange(t)}))("toggleSearch",(function(){return e.onToggleSearch()}))("viewChange",(function(t){return e.onViewChange(t)})),T.ec(5,"async"),T.Sb(),T.Gc(6,Fe,4,18,"bia-table",4),T.Gc(7,ke,5,22,"app-notification-table",5),T.Sb(),T.Sb()),2&t&&(T.Bb(2),T.lc("headerTitle",T.fc(3,12,"notification.listOf"))("canAdd",e.canAdd&&!e.useCalcMode)("canDelete",e.canDelete)("canExportCSV",!0)("selectedElements",e.selectedNotifications),T.Bb(2),T.lc("defaultPageSize",e.defaultPageSize)("length",T.fc(5,14,e.totalCount$))("columns",e.columns)("columnToDisplays",e.displayedColumns)("tableStateKey",e.tableStateKey),T.Bb(2),T.lc("ngIf",!e.useCalcMode),T.Bb(1),T.lc("ngIf",e.useCalcMode))},directives:[jt.d,jt.b,wt.a,It.a,Bt.m,A.a,Me],pipes:[Tt.c,Bt.b],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t})();var Ue=i("PCNd"),Ke=i("zFJ7"),Je=i("jIHw"),Ve=i("wItY"),Qe=i("S//O");function _e(t,e){if(1&t&&(T.Ic(0),T.ec(1,"translateField")),2&t){const t=e.$implicit,i=T.dc();T.Kc(" ",T.ic(1,1,null==t?null:t.value,"display","notification.type.",i.translateService.currentLang)," ")}}function Xe(t,e){if(1&t&&(T.Ic(0),T.ec(1,"translateField")),2&t){const t=e.$implicit,i=T.dc();T.Kc(" ",T.ic(1,1,null==t?null:t.value,"display","notification.type.",i.translateService.currentLang)," ")}}function He(t,e){1&t&&(T.Tb(0,"div"),T.Ic(1,"\xa0"),T.Sb())}function qe(t,e){if(1&t&&(T.Tb(0,"div"),T.Ic(1),T.ec(2,"translateFields"),T.Sb()),2&t){const t=T.dc(2).$implicit,e=T.dc();T.Bb(1),T.Kc(" ",T.ic(2,1,t,"display","permission.",e.translateService.currentLang)," ")}}function We(t,e){if(1&t&&(T.Tb(0,"div"),T.Ic(1),T.Sb()),2&t){const t=T.dc(2).$implicit;T.Bb(1),T.Kc(" ",t.length," items selected ")}}function Ye(t,e){if(1&t&&(T.Rb(0),T.Gc(1,He,2,0,"div",23),T.Gc(2,qe,3,6,"div",23),T.Gc(3,We,2,1,"div",23),T.Qb()),2&t){const t=T.dc().$implicit;T.Bb(1),T.lc("ngIf",t.length<=0),T.Bb(1),T.lc("ngIf",t.length<=3),T.Bb(1),T.lc("ngIf",t.length>3)}}function Ze(t,e){1&t&&T.Gc(0,Ye,4,3,"ng-container",23),2&t&&T.lc("ngIf",e.$implicit)}function ti(t,e){if(1&t&&(T.Ic(0),T.ec(1,"translateField")),2&t){const t=e.$implicit,i=T.dc();T.Kc(" ",T.ic(1,1,null==t?null:t.value,"display","permission.",i.translateService.currentLang)," ")}}const ei=function(){return{width:"100%"}},ii=function(){return{width:"100%"}};let ni=(()=>{class t{constructor(t,e){this.formBuilder=t,this.translateService=e,this.notification={},this.save=new T.n,this.cancel=new T.n,this.initForm()}ngOnInit(){}ngOnChanges(t){this.notification&&(this.form.reset(),this.notification&&this.form.patchValue(Object.assign({},this.notification)))}initForm(){this.form=this.formBuilder.group({id:[this.notification.id],title:[this.notification.title,Nt.o.required],description:[this.notification.description,Nt.o.required],type:[this.notification.type,Nt.o.required],read:[this.notification.read],createdDate:[this.notification.createdDate,Nt.o.required],createdBy:[this.notification.createdBy],notifiedPermissions:[this.notification.notifiedPermissions],notifiedUsers:[this.notification.notifiedUsers],jData:[this.notification.jData]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){var t,e;if(this.form.valid){const i=this.form.value;i.id=i.id>0?i.id:0,i.read=!!i.read&&i.read,i.createdBy=$t.a.Clone(i.createdBy),i.notifiedPermissions=$t.a.Differential(i.notifiedPermissions,null===(t=this.notification)||void 0===t?void 0:t.notifiedPermissions),i.notifiedUsers=$t.a.Differential(i.notifiedUsers,null===(e=this.notification)||void 0===e?void 0:e.notifiedUsers),i.type=Object.assign({},i.type),this.save.emit(i),this.form.reset()}}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(Nt.b),T.Nb(Tt.d))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-notification-form"]],inputs:{notification:"notification",userOptions:"userOptions",permissionOptions:"permissionOptions",notificationTypeOptions:"notificationTypeOptions"},outputs:{save:"save",cancel:"cancel"},features:[T.zb],decls:78,vars:61,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%"],["placeholder","\xa0","formControlName","type","optionLabel","display","datakey","id",3,"options"],["pTemplate","item"],["pTemplate","selectedItem"],["binary","true","formControlName","read",3,"label"],["biaLocale","","formControlName","createdDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["placeholder","\xa0","formControlName","createdBy","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","notifiedPermissions","optionLabel","display","datakey","id",3,"options","virtualScroll"],["pTemplate","selectedItems"],["defaultLabel","\xa0","formControlName","notifiedUsers","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxFlex","90"],[2,"left","5px","top","-20px","font-size","12px","color","#00839b"],[1,"p-float-label"],["formControlName","jData","rows","5","autoResize","autoResize","pInputTextarea","",2,"width","100%",3,"cols"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],[4,"ngIf"]],template:function(t,e){1&t&&(T.Tb(0,"form",0),T.bc("submit",(function(){return e.onSubmit()})),T.Tb(1,"div",1),T.Tb(2,"div",2),T.Tb(3,"span",3),T.Ob(4,"input",4),T.Tb(5,"label"),T.Tb(6,"span",5),T.Ic(7,"*"),T.Sb(),T.Ic(8),T.ec(9,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(10,"div",1),T.Tb(11,"div",2),T.Tb(12,"span",3),T.Ob(13,"input",6),T.Tb(14,"label"),T.Tb(15,"span",5),T.Ic(16,"*"),T.Sb(),T.Ic(17),T.ec(18,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(19,"div",1),T.Tb(20,"div",2),T.Tb(21,"span",3),T.Tb(22,"p-dropdown",7),T.Gc(23,_e,2,6,"ng-template",8),T.Gc(24,Xe,2,6,"ng-template",9),T.Sb(),T.Tb(25,"label"),T.Tb(26,"span",5),T.Ic(27,"*"),T.Sb(),T.Ic(28),T.ec(29,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(30,"div",1),T.Tb(31,"div",2),T.Ob(32,"p-checkbox",10),T.ec(33,"translate"),T.Sb(),T.Sb(),T.Tb(34,"div",1),T.Tb(35,"div",2),T.Tb(36,"span",3),T.Ob(37,"p-calendar",11),T.Tb(38,"label"),T.Tb(39,"span",5),T.Ic(40,"*"),T.Sb(),T.Ic(41),T.ec(42,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(43,"div",1),T.Tb(44,"div",2),T.Tb(45,"span",3),T.Ob(46,"p-dropdown",12),T.Tb(47,"label"),T.Ic(48),T.ec(49,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(50,"div",1),T.Tb(51,"div",2),T.Tb(52,"span",3),T.Tb(53,"p-multiSelect",13),T.Gc(54,Ze,1,1,"ng-template",14),T.Gc(55,ti,2,6,"ng-template",8),T.Sb(),T.Tb(56,"label"),T.Ic(57),T.ec(58,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(59,"div",1),T.Tb(60,"div",2),T.Tb(61,"span",3),T.Ob(62,"p-multiSelect",15),T.Tb(63,"label"),T.Ic(64),T.ec(65,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(66,"div",1),T.Tb(67,"div",16),T.Tb(68,"span",17),T.Ic(69),T.ec(70,"translate"),T.Sb(),T.Tb(71,"span",18),T.Ob(72,"textarea",19),T.Sb(),T.Sb(),T.Sb(),T.Tb(73,"div",20),T.Ob(74,"button",21),T.ec(75,"translate"),T.Tb(76,"button",22),T.bc("click",(function(){return e.onCancel()})),T.ec(77,"translate"),T.Sb(),T.Sb(),T.Sb()),2&t&&(T.lc("formGroup",e.form),T.Bb(8),T.Jc(T.fc(9,33,"notification.title")),T.Bb(9),T.Jc(T.fc(18,35,"notification.description")),T.Bb(5),T.Ec(T.oc(55,ei)),T.lc("options",e.notificationTypeOptions),T.Bb(6),T.Jc(T.fc(29,37,"notification.type.title")),T.Bb(4),T.mc("label",T.fc(33,39,"notification.read")),T.Bb(5),T.Ec(T.oc(56,ii)),T.lc("showButtonBar",!0)("inputStyle",T.oc(57,ii)),T.Bb(4),T.Jc(T.fc(42,41,"notification.createdDate")),T.Bb(5),T.Ec(T.oc(58,ei)),T.lc("options",e.userOptions)("showClear",!0),T.Bb(2),T.Jc(T.fc(49,43,"notification.createdBy")),T.Bb(5),T.Ec(T.oc(59,ei)),T.lc("options",e.permissionOptions)("virtualScroll",!0),T.Bb(4),T.Jc(T.fc(58,45,"notification.notifiedPermissions")),T.Bb(5),T.Ec(T.oc(60,ei)),T.lc("options",e.userOptions)("virtualScroll",!0),T.Bb(2),T.Jc(T.fc(65,47,"notification.notifiedUsers")),T.Bb(5),T.Jc(T.fc(70,49,"notification.jData")),T.Bb(3),T.lc("cols",60),T.Bb(2),T.mc("label",T.fc(75,51,"bia.save")),T.lc("disabled",!e.form.valid),T.Bb(2),T.mc("label",T.fc(77,53,"bia.cancel")))},directives:[Nt.p,Nt.k,jt.d,Nt.f,jt.c,jt.b,Nt.a,Nt.j,Nt.e,Rt.a,Nt.h,xt.a,zt.e,Pt.a,Mt.a,Ft.a,Et.a,Ke.a,jt.e,Je.b,Bt.m],pipes:[Tt.c,Ve.a,Qe.a],styles:[".app-field-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]}),t})(),oi=(()=>{class t{constructor(t,e,i,n){this.store=t,this.router=e,this.activatedRoute=i,this.notificationOptionsService=n}ngOnInit(){this.notificationOptionsService.loadAllOptions()}onSubmitted(t){this.store.dispatch(h({notification:t})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(o.b),T.Nb(n.c),T.Nb(n.a),T.Nb(Ct))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-notification-new"]],decls:4,vars:9,consts:[[3,"notificationTypeOptions","permissionOptions","userOptions","cancel","save"]],template:function(t,e){1&t&&(T.Tb(0,"app-notification-form",0),T.bc("cancel",(function(){return e.onCancelled()}))("save",(function(t){return e.onSubmitted(t)})),T.ec(1,"async"),T.ec(2,"async"),T.ec(3,"async"),T.Sb()),2&t&&T.lc("notificationTypeOptions",T.fc(1,3,e.notificationOptionsService.notificationTypeOptions$))("permissionOptions",T.fc(2,5,e.notificationOptionsService.permissionOptions$))("userOptions",T.fc(3,7,e.notificationOptionsService.userOptions$))},directives:[ni],pipes:[Bt.b],styles:[""]}),t})();var ci=i("quSY");let ai=(()=>{class t{constructor(t){this.store=t,this.sub=new ci.a,this.InitSub(),this.loading$=this.store.select(x),this.notification$=this.store.select(R)}get currentNotification(){var t;return(null===(t=this._currentNotification)||void 0===t?void 0:t.id)===this._currentNotificationId?this._currentNotification:null}get currentNotificationId(){return this._currentNotificationId}set currentNotificationId(t){this._currentNotificationId=Number(t),this.store.dispatch(p({id:t}))}get currentNotificationData(){return this._currentNotification.jData}InitSub(){this.sub=new ci.a,this.sub.add(this.store.select(R).subscribe(t=>{t&&(this._currentNotification=t)}))}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(o.b))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var si=i("y0gQ");function ri(t,e){1&t&&T.Ob(0,"bia-spinner",2),2&t&&T.lc("overlay",!0)}let li=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.router=e,this.activatedRoute=i,this.notificationOptionsService=n,this.notificationService=o,this.displayChange=new T.n,this.sub=new ci.a}ngOnInit(){this.notificationOptionsService.loadAllOptions()}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(m({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(o.b),T.Nb(n.c),T.Nb(n.a),T.Nb(Ct),T.Nb(ai))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-notification-edit"]],outputs:{displayChange:"displayChange"},decls:8,vars:18,consts:[[3,"notification","notificationTypeOptions","permissionOptions","userOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,e){1&t&&(T.Tb(0,"app-notification-form",0),T.bc("cancel",(function(){return e.onCancelled()}))("save",(function(t){return e.onSubmitted(t)})),T.ec(1,"async"),T.ec(2,"async"),T.ec(3,"async"),T.ec(4,"async"),T.ec(5,"async"),T.Sb(),T.Gc(6,ri,1,1,"bia-spinner",1),T.ec(7,"async")),2&t&&(T.lc("notification",T.fc(1,6,e.notificationService.notification$))("notificationTypeOptions",T.fc(2,8,e.notificationOptionsService.notificationTypeOptions$))("permissionOptions",T.fc(3,10,e.notificationOptionsService.permissionOptions$))("userOptions",T.fc(4,12,e.notificationOptionsService.userOptions$))("notificationTypeOptions",T.fc(5,14,e.notificationOptionsService.notificationTypeOptions$)),T.Bb(6),T.lc("ngIf",T.fc(7,16,e.notificationService.loading$)))},directives:[ni,Bt.m,si.a],pipes:[Bt.b],styles:[""]}),t})();var bi=i("+dww"),di=i("95+j");function fi(t,e){1&t&&T.Ob(0,"bia-spinner",1),2&t&&T.lc("overlay",!0)}let ui=(()=>{class t{constructor(t,e,i,n){this.store=t,this.route=e,this.notificationService=i,this.layoutService=n,this.sub=new ci.a}ngOnInit(){this.notificationService.currentNotificationId=this.route.snapshot.params.notificationId,this.sub.add(this.store.select(R).subscribe(t=>{(null==t?void 0:t.title)&&(this.route.data.pipe(Object(X.a)()).subscribe(e=>{e.breadcrumb=t.title}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(o.b),T.Nb(n.a),T.Nb(ai),T.Nb(di.a))},t.\u0275cmp=T.Hb({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,e){1&t&&(T.Ob(0,"router-outlet"),T.Gc(1,fi,1,1,"bia-spinner",0),T.ec(2,"async")),2&t&&(T.Bb(1),T.lc("ngIf",T.fc(2,1,e.notificationService.loading$)))},directives:[n.h,Bt.m,si.a],pipes:[Bt.b],styles:[""]}),t})();var pi=i("PW2p"),hi=i("iW9+");let mi=(()=>{class t extends C.a{constructor(t){super(t,"Permissions")}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(T.r))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gi=(()=>{class t{constructor(t,e,i){this.actions$=t,this.permissionDas=e,this.biaMessageService=i,this.loadAll$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(lt),Object(r.a)(()=>this.permissionDas.getList("allOptions").pipe(Object(l.a)(t=>bt({permissions:t})),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(dt({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(c.a),T.Xb(mi),T.Xb(M.a))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac}),t})(),Si=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[o.d.forFeature("domain-permission-options",ht),c.b.forFeature([gi])]]}),t})();var yi=i("smYE");let vi=(()=>{class t extends C.a{constructor(t){super(t,"NotificationTypes")}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(T.r))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Oi=(()=>{class t{constructor(t,e,i){this.actions$=t,this.notificationTypeDas=e,this.biaMessageService=i,this.loadAll$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(Z),Object(r.a)(()=>this.notificationTypeDas.getList("allOptions").pipe(Object(l.a)(t=>tt({notificationTypes:t})),Object(b.a)(t=>(this.biaMessageService.showError(),Object(a.a)(et({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(T.Xb(c.a),T.Xb(vi),T.Xb(M.a))},t.\u0275prov=T.Jb({token:t,factory:t.\u0275fac}),t})(),Ci=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},imports:[[o.d.forFeature("domain-notification-type-options",ct),c.b.forFeature([Oi])]]}),t})();function Ti(t,e){if(1&t&&(T.Tb(0,"div",7),T.Tb(1,"div"),T.Tb(2,"b"),T.Ic(3),T.ec(4,"translate"),T.Sb(),T.Ob(5,"br"),T.Ic(6),T.ec(7,"translate"),T.Sb(),T.Tb(8,"div"),T.Tb(9,"b"),T.Ic(10),T.ec(11,"translate"),T.Sb(),T.Ob(12,"br"),T.Ic(13),T.ec(14,"translate"),T.Sb(),T.Tb(15,"div"),T.Tb(16,"b"),T.Ic(17),T.ec(18,"translate"),T.Sb(),T.Ob(19,"br"),T.Ic(20),T.ec(21,"date"),T.Sb(),T.Tb(22,"div"),T.Tb(23,"b"),T.Ic(24),T.ec(25,"translate"),T.Sb(),T.Ob(26,"br"),T.Ic(27),T.ec(28,"translate"),T.Sb(),T.Sb()),2&t){const t=T.dc().ngIf;T.Bb(3),T.Jc(T.fc(4,8,"notification.title")),T.Bb(3),T.Jc(T.fc(7,10,t.title)),T.Bb(4),T.Jc(T.fc(11,12,"notification.description")),T.Bb(3),T.Kc("",T.fc(14,14,t.description)," "),T.Bb(4),T.Jc(T.fc(18,16,"notification.createdDate")),T.Bb(3),T.Jc(T.gc(21,18,t.createdDate,"short")),T.Bb(4),T.Jc(T.fc(25,21,"notification.type.title")),T.Bb(3),T.Jc(T.fc(28,23,"notification.type."+t.type.display))}}function ji(t,e){if(1&t){const t=T.Ub();T.Tb(0,"button",8),T.bc("click",(function(){T.zc(t);const e=T.dc().ngIf;return T.dc().onAction(e)})),T.ec(1,"translate"),T.Sb()}2&t&&T.mc("label",T.fc(1,1,"notification.action"))}function wi(t,e){if(1&t){const t=T.Ub();T.Tb(0,"button",6),T.bc("click",(function(){return T.zc(t),T.dc(2).onEdit()})),T.ec(1,"translate"),T.Sb()}2&t&&T.mc("label",T.fc(1,1,"bia.edit"))}function Ii(t,e){if(1&t){const t=T.Ub();T.Rb(0),T.Gc(1,Ti,29,25,"div",2),T.Tb(2,"div",3),T.Gc(3,ji,2,3,"button",4),T.Gc(4,wi,2,3,"button",5),T.Tb(5,"button",6),T.bc("click",(function(){return T.zc(t),T.dc().onCancelled()})),T.ec(6,"translate"),T.Sb(),T.Sb(),T.Qb()}if(2&t){const t=e.ngIf,i=T.dc();T.Bb(1),T.lc("ngIf",t&&t.id),T.Bb(2),T.lc("ngIf",i.canAction(t)),T.Bb(1),T.lc("ngIf",i.canEdit),T.Bb(1),T.mc("label",T.fc(6,4,"bia.cancel"))}}function Bi(t,e){1&t&&T.Ob(0,"bia-spinner",9),2&t&&T.lc("overlay",!0)}const Ni=[{path:"",data:{breadcrumb:null,permission:_.a.Notification_List_Access,InjectComponent:Ae},component:hi.a,canActivate:[bi.a],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:_.a.Notification_Create,title:"notification.add",InjectComponent:oi},component:pi.a,canActivate:[bi.a]},{path:":notificationId",data:{breadcrumb:"",canNavigate:!0},component:ui,canActivate:[bi.a],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:_.a.Notification_Update,title:"notification.edit",InjectComponent:li},component:hi.a,canActivate:[bi.a]},{path:"detail",data:{breadcrumb:"bia.detail",canNavigate:!0,permission:_.a.Notification_Read,title:"notification.detail",InjectComponent:(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.router=e,this.activatedRoute=i,this.authService=n,this.notificationService=o,this.displayChange=new T.n,this.sub=new ci.a}ngOnInit(){this.notification$=this.notificationService.notification$,this.canEdit=this.authService.hasPermission(_.a.Notification_Update)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(m({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onEdit(){this.router.navigate(["../edit"],{relativeTo:this.activatedRoute})}canAction(t){if(t.jData){let e=JSON.parse(t.jData);if(null==e?void 0:e.route)return!0}return!1}onAction(t){if(t.jData){let e=JSON.parse(t.jData);(null==e?void 0:e.route)&&this.router.navigate(e.route)}}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(o.b),T.Nb(n.c),T.Nb(n.a),T.Nb(J.a),T.Nb(ai))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-notification-detail"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[4,"ngIf"],[3,"overlay",4,"ngIf"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly",4,"ngIf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button","class","ui-button-primary",3,"label","click",4,"ngIf"],["pButton","","type","button","class","ui-button-secondary",3,"label","click",4,"ngIf"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly"],["pButton","","type","button",1,"ui-button-primary",3,"label","click"],[3,"overlay"]],template:function(t,e){1&t&&(T.Gc(0,Ii,7,6,"ng-container",0),T.ec(1,"async"),T.Gc(2,Bi,1,1,"bia-spinner",1),T.ec(3,"async")),2&t&&(T.lc("ngIf",T.fc(1,2,e.notification$)),T.Bb(2),T.lc("ngIf",T.fc(3,4,e.loading$)))},directives:[Bt.m,jt.d,jt.e,jt.c,Je.b,si.a],pipes:[Bt.b,Tt.c,Bt.e],styles:[""]}),t})()},component:pi.a,canActivate:[bi.a]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}];let $i=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},imports:[[Ue.a,n.g.forChild(Ni),o.d.forFeature("notifications",$),c.b.forFeature([k]),Si,Ci,yi.a]]}),t})()}}]);