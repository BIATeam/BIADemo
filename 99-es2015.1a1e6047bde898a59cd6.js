"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[99],{51099:function(e,t,a){a.r(t),a.d(t,{PlaneModule:function(){return be}});var n=a(2694),s=a(86710),i=a(91601),l=a(25917),o=a(92996),r=a(43190),c=a(88002),p=a(5304),u=a(94612),h=a(57057);const d=(0,s.PH)("[Planes] Load all by post (PageMode)",(0,s.Ky)()),g=(0,s.PH)("[Planes] Load (PageMode)",(0,s.Ky)()),m=(0,s.PH)("[Planes] Create (PageMode)",(0,s.Ky)()),f=(0,s.PH)("[Planes] Update (PageMode)",(0,s.Ky)()),b=(0,s.PH)("[Planes] Remove (PageMode)",(0,s.Ky)()),v=(0,s.PH)("[Planes] Multi Remove (PageMode)",(0,s.Ky)()),y=(0,s.PH)("[Planes] Load all by post success (PageMode)",(0,s.Ky)()),Z=(0,s.PH)("[Planes] Load success (PageMode)",(0,s.Ky)()),S=(0,s.PH)("[Planes] Failure (PageMode)",(0,s.Ky)());var C=a(74147),P=a(37716);let A=(()=>{class e extends C.Z{constructor(e){super(e,"Planes")}}return e.\u0275fac=function(t){return new(t||e)(P.LFG(P.zs3))},e.\u0275prov=P.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const w=(0,a(80273).H)({selectId:e=>e.id,sortComparer:!1}),L=w.getInitialState({totalCount:0,currentPlane:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),T=(0,s.Lq)(L,(0,s.on)(d,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!0})),(0,s.on)(g,e=>Object.assign(Object.assign({},e),{loadingGet:!0})),(0,s.on)(y,(e,{result:t,event:a})=>{const n=w.setAll(t.data,e);return n.currentPlane={},n.totalCount=t.totalCount,n.lastLazyLoadEvent=a,n.loadingGetAll=!1,n}),(0,s.on)(Z,(e,{plane:t})=>Object.assign(Object.assign({},e),{currentPlane:t,loadingGet:!1})),(0,s.on)(S,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})));function x(e,t){return(0,s.UY)({planes:T})(e,t)}const q=(0,s.ZF)("planes-mode-page"),D=(0,s.P1)(q,e=>e.planes),F=(0,s.P1)(D,e=>e.totalCount),M=(0,s.P1)(D,e=>e.currentPlane),O=(0,s.P1)(D,e=>e.lastLazyLoadEvent),_=(0,s.P1)(D,e=>e.loadingGet),U=(0,s.P1)(D,e=>e.loadingGetAll),{selectAll:$}=w.getSelectors(D);var E=a(42);let G=(()=>{class e{constructor(e,t,a,n){this.actions$=e,this.planeDas=t,this.biaMessageService=a,this.store=n,this.loadAllByPost$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(d),(0,o.j)("event"),(0,r.w)(e=>this.planeDas.getListByPost(e).pipe((0,c.U)(t=>y({result:t,event:e})),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.load$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(g),(0,o.j)("id"),(0,r.w)(e=>this.planeDas.get(e).pipe((0,c.U)(e=>Z({plane:e})),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.create$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(m),(0,o.j)("plane"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.post(e).pipe((0,c.U)(()=>(this.biaMessageService.showAddSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.update$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(f),(0,o.j)("plane"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.put(e,e.id).pipe((0,c.U)(()=>(this.biaMessageService.showUpdateSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.destroy$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(b),(0,o.j)("id"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.delete(e).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e})))))))),this.multiDestroy$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(v),(0,o.j)("ids"),(0,u.b)(e=>(0,l.of)(e).pipe((0,h.M)(this.store.select(O)))),(0,r.w)(([e,t])=>this.planeDas.deletes(e).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),d({event:t}))),(0,p.K)(e=>(this.biaMessageService.showError(),(0,l.of)(S({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(P.LFG(i.eX),P.LFG(A),P.LFG(E.X),P.LFG(s.yh))},e.\u0275prov=P.Yz7({token:e,factory:e.\u0275fac}),e})();var z=a(88385),I=a(79090),Y=a(40136),j=a(8340),J=a(49457),N=a(38042),k=a(29206),B=a(81780),K=a(35618),Q=a(81606),V=a(76743),H=a(38583);let X=(()=>{class e{constructor(e,t,a,n,s,i){this.store=e,this.router=t,this.authService=a,this.planeDas=n,this.translateService=s,this.biaTranslationService=i,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=Y.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.createPlaneRoute="/examples/planes-page/create",this.indexPlaneRoute="/examples/planes-page/"}ngOnInit(){this.initTableConfiguration(),this.setPermissions(),this.planes$=this.store.select($),this.totalCount$=this.store.select(F),this.loading$=this.store.select(U)}onCreate(){this.router.navigate([this.createPlaneRoute])}onEdit(e){this.router.navigate([this.indexPlaneRoute+e+"/edit"])}onDelete(){this.selectedPlanes&&this.store.dispatch(v({ids:this.selectedPlanes.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedPlanes=e}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){this.store.dispatch(d({event:e}))}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(e){this.viewPreference=e}onExportCSV(){const e={};this.columns.map(t=>e[t.value.split(".")[1]]=this.translateService.instant(t.value));const t=Object.assign({columns:e},this.planeListComponent.getLazyLoadMetadata());this.planeDas.getFile(t).subscribe(e=>{J.saveAs(e,this.translateService.instant("app.planes")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(k.y.Plane_Update),this.canDelete=this.authService.hasPermission(k.y.Plane_Delete),this.canAdd=this.authService.hasPermission(k.y.Plane_Create)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(e=>{this.tableConfiguration={columns:[new I.ML("msn","plane.msn"),Object.assign(new I.ML("isActive","plane.isActive"),{isSearchable:!1,isSortable:!1,type:I.d5.Boolean}),Object.assign(new I.ML("firstFlightDate","plane.firstFlightDate"),{type:I.d5.Date,formatDate:e.dateFormat}),Object.assign(new I.ML("firstFlightTime","plane.firstFlightTime"),{isSearchable:!1,isSortable:!1,type:I.d5.Date,formatDate:e.timeFormat}),Object.assign(new I.ML("lastFlightDate","plane.lastFlightDate"),{type:I.d5.Date,formatDate:e.dateTimeFormat}),Object.assign(new I.ML("capacity","plane.capacity"),{type:I.d5.Number,filterMode:I.ZF.Equals})]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=[...this.columns]})}}return e.\u0275fac=function(t){return new(t||e)(P.Y36(s.yh),P.Y36(n.F0),P.Y36(j.e),P.Y36(A),P.Y36(B.sK),P.Y36(N.P6))},e.\u0275cmp=P.Xpm({type:e,selectors:[["app-planes-index"]],viewQuery:function(e,t){if(1&e&&P.Gf(z.$,5),2&e){let e;P.iGM(e=P.CRH())&&(t.planeListComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&P.ekj("bia-flex",t.flex)},decls:10,vars:29,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","edit","loadLazy","selectedElementsChanged"]],template:function(e,t){1&e&&(P.TgZ(0,"div",0),P.TgZ(1,"div",1),P.TgZ(2,"bia-table-header",2),P.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),P.ALo(3,"translate"),P.qZA(),P.TgZ(4,"bia-table-controller",3),P.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),P.ALo(5,"async"),P.qZA(),P.TgZ(6,"bia-table",4),P.NdJ("edit",function(e){return t.onEdit(e)})("loadLazy",function(e){return t.onLoadLazy(e)})("selectedElementsChanged",function(e){return t.onSelectedElementsChanged(e)}),P.ALo(7,"async"),P.ALo(8,"async"),P.ALo(9,"async"),P.qZA(),P.qZA(),P.qZA()),2&e&&(P.xp6(2),P.Q6J("headerTitle",P.lcZ(3,19,"plane.listOf"))("canAdd",t.canAdd)("canExportCSV",!0)("selectedElements",t.selectedPlanes),P.xp6(2),P.Q6J("defaultPageSize",t.defaultPageSize)("length",P.lcZ(5,21,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),P.xp6(2),P.Q6J("elements",P.lcZ(7,23,t.planes$))("totalRecord",P.lcZ(8,25,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canSelectElement",t.canDelete)("loading",P.lcZ(9,27,t.loading$))("viewPreference",t.viewPreference))},directives:[K.xw,K.yH,Q.l,V.B,z.$],pipes:[B.X$,H.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})();var R=a(84594),W=a(3679),ee=a(13928),te=a(12332),ae=a(88598),ne=a(45862),se=a(4207);let ie=(()=>{class e{constructor(e){this.formBuilder=e,this.plane={},this.save=new P.vpe,this.cancel=new P.vpe,this.initForm()}ngOnChanges(e){e.plane&&(this.form.reset(),this.plane&&this.form.patchValue(Object.assign({},this.plane)))}initForm(){this.form=this.formBuilder.group({id:[this.plane.id],msn:[this.plane.msn,W.kI.required],isActive:[this.plane.isActive],firstFlightDate:[this.plane.firstFlightDate,W.kI.required],firstFlightTime:[this.plane.firstFlightTime,W.kI.required],lastFlightDate:[this.plane.lastFlightDate],capacity:[this.plane.capacity,W.kI.required]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){if(this.form.valid){const e=this.form.value;e.id=e.id>0?e.id:0,e.isActive=!!e.isActive&&e.isActive,this.save.emit(e),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(P.Y36(W.qu))},e.\u0275cmp=P.Xpm({type:e,selectors:[["app-plane-form"]],inputs:{plane:"plane"},outputs:{save:"save",cancel:"cancel"},features:[P.TTD],decls:53,vars:28,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["formControlName","msn","type","text","pInputText","","maxlength","64"],[1,"bia-star-mandatory"],["binary","true","formControlName","isActive",3,"label"],["biaLocale","","formControlName","firstFlightDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar"],["formControlName","firstFlightTime","showTime","true","placeholder","\xa0",3,"timeOnly"],["biaLocale","","formControlName","lastFlightDate","showTime","true","placeholder","DateTime","dateFormat","yy-mm-dd","placeholder","\xa0"],["formControlName","capacity","type","number","pInputText",""],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(P.TgZ(0,"form",0),P.NdJ("submit",function(){return t.onSubmit()}),P.TgZ(1,"div",1),P.TgZ(2,"div",2),P.TgZ(3,"span",3),P._UZ(4,"input",4),P.TgZ(5,"label"),P.TgZ(6,"span",5),P._uU(7,"*"),P.qZA(),P._uU(8),P.ALo(9,"translate"),P.qZA(),P.qZA(),P.qZA(),P.qZA(),P.TgZ(10,"div",1),P.TgZ(11,"div",2),P._UZ(12,"p-checkbox",6),P.ALo(13,"translate"),P.qZA(),P.qZA(),P.TgZ(14,"div",1),P.TgZ(15,"div",2),P.TgZ(16,"span",3),P._UZ(17,"p-calendar",7),P.TgZ(18,"label"),P.TgZ(19,"span",5),P._uU(20,"*"),P.qZA(),P._uU(21),P.ALo(22,"translate"),P.qZA(),P.qZA(),P.qZA(),P.qZA(),P.TgZ(23,"div",1),P.TgZ(24,"div",2),P.TgZ(25,"span",3),P._UZ(26,"p-calendar",8),P.TgZ(27,"label"),P.TgZ(28,"span",5),P._uU(29,"*"),P.qZA(),P._uU(30),P.ALo(31,"translate"),P.qZA(),P.qZA(),P.qZA(),P.qZA(),P.TgZ(32,"div",1),P.TgZ(33,"div",2),P.TgZ(34,"span",3),P._UZ(35,"p-calendar",9),P.TgZ(36,"label"),P._uU(37),P.ALo(38,"translate"),P.qZA(),P.qZA(),P.qZA(),P.qZA(),P.TgZ(39,"div",1),P.TgZ(40,"div",2),P.TgZ(41,"span",3),P._UZ(42,"input",10),P.TgZ(43,"label"),P.TgZ(44,"span",5),P._uU(45,"*"),P.qZA(),P._uU(46),P.ALo(47,"translate"),P.qZA(),P.qZA(),P.qZA(),P.qZA(),P.TgZ(48,"div",11),P._UZ(49,"button",12),P.ALo(50,"translate"),P.TgZ(51,"button",13),P.NdJ("click",function(){return t.onCancel()}),P.ALo(52,"translate"),P.qZA(),P.qZA(),P.qZA()),2&e&&(P.Q6J("formGroup",t.form),P.xp6(8),P.Oqu(P.lcZ(9,12,"plane.msn")),P.xp6(4),P.s9C("label",P.lcZ(13,14,"plane.isActive")),P.xp6(5),P.Q6J("showButtonBar",!0),P.xp6(4),P.Oqu(P.lcZ(22,16,"plane.firstFlightDate")),P.xp6(5),P.Q6J("timeOnly",!0),P.xp6(4),P.Oqu(P.lcZ(31,18,"plane.firstFlightTime")),P.xp6(7),P.Oqu(P.lcZ(38,20,"plane.lastFlightDate")),P.xp6(9),P.Oqu(P.lcZ(47,22,"plane.capacity")),P.xp6(3),P.s9C("label",P.lcZ(50,24,"bia.save")),P.Q6J("disabled",!t.form.valid),P.xp6(2),P.s9C("label",P.lcZ(52,26,"bia.cancel")))},directives:[W._Y,W.JL,K.xw,W.sg,K.Wh,K.yH,W.Fj,W.JJ,W.u,ee.o,W.nD,te.XZ,ae.f,ne.D,W.wV,K.SQ,se.Hq],pipes:[B.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),e})(),le=(()=>{class e{constructor(e,t){this.store=e,this.location=t}onSubmitted(e){this.store.dispatch(m({plane:e})),this.location.back()}onCancelled(){this.plane={},this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(P.Y36(s.yh),P.Y36(H.Ye))},e.\u0275cmp=P.Xpm({type:e,selectors:[["app-plane-new"]],decls:1,vars:1,consts:[[3,"plane","cancel","save"]],template:function(e,t){1&e&&(P.TgZ(0,"app-plane-form",0),P.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),P.qZA()),2&e&&P.Q6J("plane",t.plane)},directives:[ie],styles:[""]}),e})();var oe=a(75319);let re=(()=>{class e{constructor(e){this.store=e,this.sub=new oe.w,this.InitSub(),this.loading$=this.store.select(_),this.plane$=this.store.select(M)}get currentPlane(){var e;return(null===(e=this._currentPlane)||void 0===e?void 0:e.id)===this._currentPlaneId?this._currentPlane:null}get currentPlaneId(){return this._currentPlaneId}set currentPlaneId(e){this._currentPlaneId=Number(e),this.store.dispatch(g({id:e}))}InitSub(){this.sub=new oe.w,this.sub.add(this.store.select(M).subscribe(e=>{e&&(this._currentPlane=e)}))}}return e.\u0275fac=function(t){return new(t||e)(P.LFG(s.yh))},e.\u0275prov=P.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ce=a(79373);function pe(e,t){1&e&&P._UZ(0,"bia-spinner",2),2&e&&P.Q6J("overlay",!0)}let ue=(()=>{class e{constructor(e,t,a){this.store=e,this.location=t,this.planeService=a,this.displayChange=new P.vpe,this.sub=new oe.w}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(f({plane:e})),this.location.back()}onCancelled(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(P.Y36(s.yh),P.Y36(H.Ye),P.Y36(re))},e.\u0275cmp=P.Xpm({type:e,selectors:[["app-plane-edit"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[3,"plane","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(P.TgZ(0,"app-plane-form",0),P.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),P.ALo(1,"async"),P.qZA(),P.YNc(2,pe,1,1,"bia-spinner",1),P.ALo(3,"async")),2&e&&(P.Q6J("plane",P.lcZ(1,2,t.planeService.plane$)),P.xp6(2),P.Q6J("ngIf",P.lcZ(3,4,t.planeService.loading$)))},directives:[ie,H.O5,ce.O],pipes:[H.Ov],styles:[""]}),e})();var he=a(16249),de=a(30466),ge=a(28049);function me(e,t){1&e&&P._UZ(0,"bia-spinner",1),2&e&&P.Q6J("overlay",!0)}const fe=[{path:"",data:{breadcrumb:null,permission:k.y.Plane_List_Access},component:X,canActivate:[he.n]},{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:k.y.Plane_Create},component:le,canActivate:[he.n]},{path:":planeId",data:{breadcrumb:"",canNavigate:!0},component:(()=>{class e{constructor(e,t,a,n){this.store=e,this.route=t,this.planeService=a,this.layoutService=n,this.sub=new oe.w}ngOnInit(){this.planeService.currentPlaneId=this.route.snapshot.params.planeId,this.sub.add(this.store.select(M).subscribe(e=>{(null==e?void 0:e.msn)&&(this.route.data.pipe((0,ge.P)()).subscribe(t=>{t.breadcrumb=e.msn}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(P.Y36(s.yh),P.Y36(n.gz),P.Y36(re),P.Y36(de.N))},e.\u0275cmp=P.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(P._UZ(0,"router-outlet"),P.YNc(1,me,1,1,"bia-spinner",0),P.ALo(2,"async")),2&e&&(P.xp6(1),P.Q6J("ngIf",P.lcZ(2,1,t.planeService.loading$)))},directives:[n.lC,H.O5,ce.O],pipes:[H.Ov],styles:[""]}),e})(),canActivate:[he.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:k.y.Plane_Update},component:ue,canActivate:[he.n]},{path:"",redirectTo:"edit"}]},{path:"**",redirectTo:""}];let be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=P.oAB({type:e}),e.\u0275inj=P.cJS({imports:[[R.m,n.Bz.forChild(fe),s.Aw.forFeature("planes-mode-page",x),i.sQ.forFeature([G])]]}),e})()}}]);