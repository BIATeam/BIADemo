"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[272],{11466:function(e,t,r){r.d(t,{P:function(){return o}});var s=r(16244);class o{static Clone(e){return e?Object.assign({},e):null}static Differential(e,t){let r=[];if(t&&Array.isArray(t)){const o=t.filter(t=>!e||!e.map(e=>e.id).includes(t.id)).map(e=>Object.assign(Object.assign({},e),{dtoState:s.e.Deleted}));o&&(r=r.concat(o))}if(e){const o=null==e?void 0:e.filter(e=>!t||!t.map(e=>e.id).includes(e.id)).map(e=>Object.assign(Object.assign({},e),{dtoState:s.e.Added}));o&&(r=r.concat(o))}return r}}},98394:function(e,t,r){r.d(t,{y:function(){return s}});var s,o,i=r(86710);(o=s||(s={})).loadAll=(0,i.PH)("[Domain LDAP Domains] Load all"),o.loadAllSuccess=(0,i.PH)("[Domain LDAP Domains] Load all success",(0,i.Ky)()),o.failure=(0,i.PH)("[Domain LDAP Domains] Failure",(0,i.Ky)())},99887:function(e,t,r){r.d(t,{q2:function(){return p},ll:function(){return c}});var s=r(80273),o=r(86710),i=r(98394);const n=(0,s.H)({selectId:e=>e.ldapName,sortComparer:!1}),a=n.getInitialState({}),l=(0,o.Lq)(a,(0,o.on)(i.y.loadAllSuccess,(e,{ldapDomains:t})=>n.setAll(t,e)));function c(e,t){return(0,o.UY)({ldapDomain:l})(e,t)}const u=(0,o.ZF)("domain-ldap-domains"),d=(0,o.P1)(u,e=>e.ldapDomain),{selectAll:p}=n.getSelectors(d)},11936:function(e,t,r){r.d(t,{p:function(){return A}});var s=r(91601),o=r(86710),i=r(65448),n=r(25917),a=r(92996),l=r(43190),c=r(88002),u=r(5304),d=r(74147),p=r(37716);let m=(()=>{class e extends d.Z{constructor(e){super(e,"Roles")}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(p.zs3))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=r(96875),h=r(42);let y=(()=>{class e{constructor(e,t,r){this.actions$=e,this.roleDas=t,this.biaMessageService=r,this.loadAll$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(f.E.loadAll),(0,a.j)("teamTypeId"),(0,l.w)(e=>this.roleDas.getList({endpoint:"allOptions?teamTypeId="+e}).pipe((0,c.U)(e=>f.E.loadAllSuccess({roles:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,n.of)(f.E.failure({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(s.eX),p.LFG(m),p.LFG(h.X))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({providers:[],imports:[[o.Aw.forFeature("domain-role-options",i.ll),s.sQ.forFeature([y])]]}),e})()},65448:function(e,t,r){r.d(t,{wA:function(){return p},ll:function(){return c}});var s=r(80273),o=r(86710),i=r(96875);const n=(0,s.H)({selectId:e=>e.id,sortComparer:!1}),a=n.getInitialState({}),l=(0,o.Lq)(a,(0,o.on)(i.E.loadAllSuccess,(e,{roles:t})=>n.setAll(t,e)));function c(e,t){return(0,o.UY)({roleOptions:l})(e,t)}const u=(0,o.ZF)("domain-role-options"),d=(0,o.P1)(u,e=>e.roleOptions),{selectAll:p}=n.getSelectors(d)},96875:function(e,t,r){r.d(t,{E:function(){return s}});var s,o,i=r(86710);(o=s||(s={})).loadAll=(0,i.PH)("[Domain Role Options] Load all",(0,i.Ky)()),o.loadAllSuccess=(0,i.PH)("[Domain Role Options] Load all success",(0,i.Ky)()),o.failure=(0,i.PH)("[Domain Role Options] Failure",(0,i.Ky)())},38579:function(e,t,r){r.d(t,{_:function(){return d}});var s=r(37716),o=r(3679),i=r(35618),n=r(50103),a=r(96516),l=r(4207),c=r(81780);const u=function(){return{width:"100%"}};let d=(()=>{class e{constructor(e){this.formBuilder=e,this.searchUsers=new s.vpe,this.save=new s.vpe,this.cancel=new s.vpe,this.returnSizeOptions=[10,25,50,100],this.initForm()}ngOnChanges(e){this.users&&e.users&&(this.users=this.users.sort((e,t)=>e.displayName.localeCompare(t.displayName)))}initForm(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,o.kI.required],domains:[this.domains],returnSize:this.returnSizeOptions[0]})}onCancel(){this.reset(),this.cancel.next()}onSubmit(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}reset(){this.selectedDomain="",this.form.reset()}onSearchUsers(e){this.searchUsers.emit({filter:e.query,ldapName:this.selectedDomain,returnSize:this.form.value.returnSize})}onDomainChange(e){this.selectedDomain=e.value?e.value.ldapName:""}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(o.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["bia-user-from-directory-form"]],inputs:{users:"users",domains:"domains",returnSizeOptions:"returnSizeOptions"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[s.TTD],decls:27,vars:32,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"p-fluid","app-field-container"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","50",1,"app-field-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","domains","optionLabel","displayName","showClear","true","appendTo","body",3,"options","onChange"],["fxFlex","10",1,"app-field-container"],["fxFlex","30",1,"app-field-container"],["placeholder","\xa0","formControlName","returnSize","appendTo","body",3,"options"],["fxFlex","90",1,"app-field-container"],["formControlName","selectedUsers","field","displayName","appendTo","body",3,"multiple","suggestions","delay","size","minLength","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(s.TgZ(0,"form",0),s.NdJ("submit",function(){return t.onSubmit()}),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"p-dropdown",5),s.NdJ("onChange",function(e){return t.onDomainChange(e)}),s.qZA(),s.TgZ(6,"label"),s._uU(7,"LDAP Domain"),s.qZA(),s.qZA(),s.qZA(),s._UZ(8,"div",6),s.TgZ(9,"div",7),s.TgZ(10,"div",4),s._UZ(11,"p-dropdown",8),s.TgZ(12,"label"),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",2),s.TgZ(16,"div",9),s.TgZ(17,"div",4),s.TgZ(18,"p-autoComplete",10),s.NdJ("completeMethod",function(e){return t.onSearchUsers(e)}),s.qZA(),s.TgZ(19,"label"),s._uU(20),s.ALo(21,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"div",11),s._UZ(23,"button",12),s.ALo(24,"translate"),s.TgZ(25,"button",13),s.NdJ("click",function(){return t.onCancel()}),s.ALo(26,"translate"),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(5),s.Akn(s.DdM(28,u)),s.Q6J("options",t.domains),s.xp6(6),s.Akn(s.DdM(29,u)),s.Q6J("options",t.returnSizeOptions),s.xp6(2),s.Oqu(s.lcZ(14,20,"bia.itemsBySearch")),s.xp6(5),s.Akn(s.DdM(30,u)),s.Q6J("multiple",!0)("suggestions",t.users)("delay",700)("size",30)("minLength",3)("inputStyle",s.DdM(31,u)),s.xp6(2),s.Oqu(s.lcZ(21,22,"bia.select")),s.xp6(3),s.s9C("label",s.lcZ(24,24,"bia.save")),s.Q6J("disabled",!t.form.valid),s.xp6(2),s.s9C("label",s.lcZ(26,26,"bia.cancel")))},directives:[o._Y,o.JL,i.xw,o.sg,i.Wh,i.yH,n.Lt,o.JJ,o.u,a.Qc,i.SQ,l.Hq],pipes:[c.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),e})()},58882:function(e,t,r){r.d(t,{o1:function(){return p},ll:function(){return c}});var s=r(80273),o=r(86710),i=r(44354);const n=(0,s.H)({selectId:e=>e.domain+"\\"+e.login,sortComparer:!1}),a=n.getInitialState({}),l=(0,o.Lq)(a,(0,o.on)(i.$.loadAllSuccess,(e,{users:t})=>n.setAll(t,e)));function c(e,t){return(0,o.UY)({usersFromDirectory:l})(e,t)}const u=(0,o.ZF)("users-from-directory"),d=(0,o.P1)(u,e=>e.usersFromDirectory),{selectAll:p}=n.getSelectors(d)},44354:function(e,t,r){r.d(t,{$:function(){return s}});var s,o,i=r(86710);(o=s||(s={})).loadAllByFilter=(0,i.PH)("[Feature Users From AD] Load all in AD by filter",(0,i.Ky)()),o.loadAllSuccess=(0,i.PH)("[Feature Users From AD] Load all success",(0,i.Ky)()),o.failure=(0,i.PH)("[Feature Users From AD] Failure",(0,i.Ky)()),o.addFromDirectory=(0,i.PH)("[Feature Users From AD] CreateUserFromDirectory",(0,i.Ky)())},95546:function(e,t,r){r.d(t,{q:function(){return $}});var s=r(91601),o=r(86710),i=r(99887),n=r(25917),a=r(43190),l=r(88002),c=r(5304),u=r(98394),d=r(74147),p=r(37716);let m=(()=>{class e{constructor(){}formatDisplayNameFromObs(e){return e.pipe((0,l.U)(e=>this.formatDisplayNames(e)))}formatDisplayNames(e){return e.forEach(e=>{e=this.formatDisplayName(e)}),e}formatDisplayName(e){return e.displayName=`${e.name} (${e.ldapName})`,e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f=(()=>{class e extends d.Z{constructor(e,t){super(e,"ldapDomains"),this.ldapDomainService=t}getAll(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(p.zs3),p.LFG(m))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=r(42);let y=(()=>{class e{constructor(e,t,r){this.actions$=e,this.ldapDomainDas=t,this.biaMessageService=r,this.loadAll$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(u.y.loadAll),(0,a.w)(e=>this.ldapDomainDas.getAll().pipe((0,l.U)(e=>u.y.loadAllSuccess({ldapDomains:e})),(0,c.K)(e=>(this.biaMessageService.showError(),(0,n.of)(u.y.failure({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(s.eX),p.LFG(f),p.LFG(h.X))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.Aw.forFeature("domain-ldap-domains",i.ll),s.sQ.forFeature([y])]]}),e})();var v=r(39682),D=r(61028),g=(r(38579),r(58882)),F=r(92996),b=r(44354);let S=(()=>{class e{constructor(){}formatDisplayNameFromADObs(e){return e.pipe((0,l.U)(e=>this.formatDisplayNamesFromAD(e)))}formatDisplayNamesFromAD(e){return e.forEach(e=>{e=this.formatDisplayNameFromAD(e)}),e}formatDisplayNameFromAD(e){return e.displayName=`${e.lastName} ${e.firstName} (${e.domain}\\${e.login})`,e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Z=(()=>{class e extends d.Z{constructor(e,t){super(e,"users"),this.userService=t}getAllByFilter(e,t,r){return this.userService.formatDisplayNameFromADObs(this.http.get(`${this.route}fromAD?filter=${e}&ldapName=${t}&returnSize=${r}`))}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(p.zs3),p.LFG(S))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=r(76048),w=r(81780);let U=(()=>{class e{constructor(e,t,r,o){this.actions$=e,this.userFromDirectoryDas=t,this.biaMessageService=r,this.translateService=o,this.loadAllByFilter$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.$.loadAllByFilter),(0,a.w)(e=>this.userFromDirectoryDas.getAllByFilter(e.userFilter.filter,e.userFilter.ldapName,e.userFilter.returnSize).pipe((0,l.U)(e=>b.$.loadAllSuccess({users:e})),(0,c.K)(e=>(this.biaMessageService.showError(),(0,n.of)(b.$.failure({error:e})))))))),this.addFromDirectory$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.$.addFromDirectory),(0,F.j)("usersFromDirectory"),(0,a.w)(e=>this.userFromDirectoryDas.save({items:e,endpoint:"addFromDirectory"}).pipe((0,l.U)(e=>(this.biaMessageService.showAddSuccess(),L.d.userAddedInListSuccess({usersAdded:e}))),(0,c.K)(e=>{if(303===e.status){let t="";e.error&&e.error.forEach(e=>{const r=`${this.translateService.instant("user.cannotAddMember")}`.replace("${login}",e);""!==t&&(t+="\n"),t+=r}),this.biaMessageService.showErrorDetail(t)}else this.biaMessageService.showError();return(0,n.of)(b.$.failure({error:{concern:"CREATE",error:e}}))})))))}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(s.eX),p.LFG(Z),p.LFG(h.X),p.LFG(w.sK))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})();r(65224);let $=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[D.m,o.Aw.forFeature("users-from-directory",g.ll),s.sQ.forFeature([U]),v.U,A]]}),e})()},65224:function(e,t,r){r.d(t,{C:function(){return A}});var s=r(64762),o=r(37716),i=r(44354),n=r(58882),a=r(99887),l=r(98394),c=r(86710),u=r(45121),d=r(33013),p=r(38579),m=r(81780),f=r(38583);const h=function(){return{minWidth:"50vw"}},y=function(){return{overflow:"auto"}};let A=(()=>{class e{constructor(e){this.store=e,this._display=!1,this.displayChange=new o.vpe}set display(e){this._display=e,this.displayChange.emit(this._display)}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.usersFromDirectory$=this.store.select(n.o1),this.ldapDomains$=this.store.select(a.q2),this.store.dispatch(l.y.loadAll())})}onSubmitted(e){this.store.dispatch(i.$.addFromDirectory({usersFromDirectory:e})),this.close()}onCancelled(){this.close()}close(){this.display=!1}onSearchUsers(e){this.store.dispatch(i.$.loadAllByFilter({userFilter:e}))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.yh))},e.\u0275cmp=o.Xpm({type:e,selectors:[["bia-user-add-from-directory-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:21,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","draggable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(e,t){1&e&&(o.TgZ(0,"p-dialog",0),o.NdJ("visibleChange",function(e){return t._display=e}),o.TgZ(1,"p-header"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"bia-user-from-directory-form",1),o.NdJ("searchUsers",function(e){return t.onSearchUsers(e)})("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),o.ALo(5,"async"),o.ALo(6,"async"),o.qZA(),o.qZA()),2&e&&(o.Akn(o.DdM(19,h)),o.Q6J("focusOnShow",!1)("visible",t._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("draggable",!1)("contentStyle",o.DdM(20,y)),o.xp6(2),o.hij(" ",o.lcZ(3,13,"user.add")," "),o.xp6(2),o.Q6J("users",o.lcZ(5,15,t.usersFromDirectory$))("domains",o.lcZ(6,17,t.ldapDomains$)))},directives:[u.V,d.h4,p._],pipes:[m.X$,f.Ov],styles:[""]}),e})()},94529:function(e,t,r){r.d(t,{b:function(){return s}});class s{constructor(e,t){this.key=e,this.value=t}}},16244:function(e,t,r){r.d(t,{e:function(){return s}});var s=(()=>{return(e=s||(s={}))[e.Unchanged=0]="Unchanged",e[e.Added=1]="Added",e[e.Modified=2]="Modified",e[e.Deleted=3]="Deleted",s;var e})()}}]);