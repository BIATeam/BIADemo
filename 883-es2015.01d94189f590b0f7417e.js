"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[883],{79883:function(e,t,n){n.r(t),n.d(t,{MemberModule:function(){return an}});var i=n(2694),o=n(86710),s=n(91601),a=n(25917),r=n(92996),l=n(43190),c=n(88002),u=n(5304),p=n(94612),d=n(57057);const m=(0,o.PH)("[Members] Load all by post",(0,o.Ky)()),h=(0,o.PH)("[Members] Load",(0,o.Ky)()),f=(0,o.PH)("[Members] Create",(0,o.Ky)()),g=(0,o.PH)("[Members] Update",(0,o.Ky)()),b=(0,o.PH)("[Members] Remove",(0,o.Ky)()),y=(0,o.PH)("[Members] Multi Remove",(0,o.Ky)()),S=(0,o.PH)("[Members] Load all by post success",(0,o.Ky)()),w=(0,o.PH)("[Members] Load success",(0,o.Ky)()),x=(0,o.PH)("[Members] Failure",(0,o.Ky)());var C=n(74147),v=n(37716);let M=(()=>{class e extends C.Z{constructor(e){super(e,"Members")}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(v.zs3))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Z=n(80273);const A=(0,Z.H)({selectId:e=>e.id,sortComparer:!1}),O=A.getInitialState({totalCount:0,currentMember:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),L=(0,o.Lq)(O,(0,o.on)(m,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!0})),(0,o.on)(h,e=>Object.assign(Object.assign({},e),{loadingGet:!0})),(0,o.on)(S,(e,{result:t,event:n})=>{const i=A.setAll(t.data,e);return i.totalCount=t.totalCount,i.lastLazyLoadEvent=n,i.loadingGetAll=!1,i}),(0,o.on)(w,(e,{member:t})=>Object.assign(Object.assign({},e),{currentMember:t,loadingGet:!1})),(0,o.on)(x,(e,{})=>Object.assign(Object.assign({},e),{loadingGetAll:!1,loadingGet:!1})));function N(e,t){return(0,o.UY)({members:L})(e,t)}const T=(0,o.ZF)("members"),J=(0,o.P1)(T,e=>e.members),Q=(0,o.P1)(J,e=>e.totalCount),I=(0,o.P1)(J,e=>e.currentMember),Y=(0,o.P1)(J,e=>e.lastLazyLoadEvent),$=(0,o.P1)(J,e=>e.loadingGet),F=(0,o.P1)(J,e=>e.loadingGetAll),{selectAll:E}=A.getSelectors(J);var D=n(82762),k=n(42);let P=(()=>{class e{constructor(t,n,i,o){this.actions$=t,this.memberDas=n,this.biaMessageService=i,this.store=o,this.loadAllByPost$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(m),(0,r.j)("event"),(0,l.w)(e=>this.memberDas.getListByPost(e).pipe((0,c.U)(t=>S({result:t,event:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(x({error:e})))))))),this.load$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(h),(0,r.j)("id"),(0,l.w)(e=>this.memberDas.get(e).pipe((0,c.U)(e=>w({member:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(x({error:e})))))))),this.create$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(f),(0,r.j)("member"),(0,p.b)(e=>(0,a.of)(e).pipe((0,d.M)(this.store.select(Y)))),(0,l.w)(([t,n])=>this.memberDas.post(t).pipe((0,c.U)(()=>(this.biaMessageService.showAddSuccess(),e.useSignalR?(0,D.b)():m({event:n}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(x({error:e})))))))),this.update$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(g),(0,r.j)("member"),(0,p.b)(e=>(0,a.of)(e).pipe((0,d.M)(this.store.select(Y)))),(0,l.w)(([t,n])=>this.memberDas.put(t,t.id).pipe((0,c.U)(()=>(this.biaMessageService.showUpdateSuccess(),e.useSignalR?(0,D.b)():m({event:n}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(x({error:e})))))))),this.destroy$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b),(0,r.j)("id"),(0,p.b)(e=>(0,a.of)(e).pipe((0,d.M)(this.store.select(Y)))),(0,l.w)(([t,n])=>this.memberDas.delete(t).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),e.useSignalR?(0,D.b)():m({event:n}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(x({error:e})))))))),this.multiDestroy$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(y),(0,r.j)("ids"),(0,p.b)(e=>(0,a.of)(e).pipe((0,d.M)(this.store.select(Y)))),(0,l.w)(([t,n])=>this.memberDas.deletes(t).pipe((0,c.U)(()=>(this.biaMessageService.showDeleteSuccess(),e.useSignalR?(0,D.b)():m({event:n}))),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(x({error:e}))))))))}}return e.useSignalR=!1,e.\u0275fac=function(t){return new(t||e)(v.LFG(s.eX),v.LFG(M),v.LFG(k.X),v.LFG(o.yh))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac}),e})();var B=n(75319),H=n(88385),z=n(79090),R=n(40136),q=n(8340),_=n(49457),U=n(38042),j=n(29206),G=n(28049),K=n(59142),V=n(9716);let X=(()=>{class e{constructor(e,t,n){this.store=e,this.signalRService=t,this.siteService=n}initialize(){console.log("%c [Members] Register SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-members",()=>{this.store.select(Y).pipe((0,G.P)()).subscribe(e=>{console.log("%c [Members] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(m({event:e}))})}),this.targetedFeature={parentKey:this.siteService.currentSiteId.toString(),featureName:"members"},this.signalRService.joinGroup(this.targetedFeature)}destroy(){console.log("%c [Members] Unregister SignalR : refresh-members","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-members"),this.signalRService.leaveGroup(this.targetedFeature)}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(o.yh),v.LFG(K.Y),v.LFG(V.P))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var W=n(46468),ee=n(9112);const te=(0,o.PH)("[Domain Role Options] Load all"),ne=(0,o.PH)("[Domain Role Options] Load all success",(0,o.Ky)()),ie=(0,o.PH)("[Domain Role Options] Failure",(0,o.Ky)()),oe=(0,Z.H)({selectId:e=>e.id,sortComparer:!1}),se=oe.getInitialState({}),ae=(0,o.Lq)(se,(0,o.on)(ne,(e,{roles:t})=>oe.setAll(t,e)));function re(e,t){return(0,o.UY)({roleOptions:ae})(e,t)}const le=(0,o.ZF)("domain-role-options"),ce=(0,o.P1)(le,e=>e.roleOptions),{selectAll:ue}=oe.getSelectors(ce);var pe=n(43590),de=n(71585),me=n(94529);let he=(()=>{class e{constructor(e){this.store=e,this.userOptions$=this.store.select(pe.yp),this.roleOptions$=this.store.select(ue),this.dictOptionDtos$=(0,ee.aj)([this.userOptions$,this.roleOptions$]).pipe((0,c.U)(e=>[new me.b("user",e[0]),new me.b("roles",e[1])]))}loadAllOptions(){this.store.dispatch((0,de.Ae)()),this.store.dispatch(te())}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(o.yh))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var fe=n(81780),ge=n(35618),be=n(81606),ye=n(76743),Se=n(38583),we=n(3679),xe=n(11466),Ce=n(86320),ve=n(70667),Me=n(33013),Ze=n(13928),Ae=n(88030),Oe=n(50103),Le=n(36949),Ne=n(12332),Te=n(88598),Je=n(45862),Qe=n(49067);function Ie(e,t){1&e&&(v.TgZ(0,"th",10),v._UZ(1,"p-tableHeaderCheckbox"),v.qZA())}function Ye(e,t){if(1&e&&(v.TgZ(0,"th",12),v._uU(1),v.ALo(2,"translate"),v._UZ(3,"p-sortIcon",13),v.qZA()),2&e){const e=v.oxw().$implicit;v.Q6J("pSortableColumn",e.field),v.xp6(1),v.hij(" ",v.lcZ(2,3,null==e?null:e.header)," "),v.xp6(2),v.Q6J("field",e.field)}}function $e(e,t){if(1&e&&(v.TgZ(0,"th"),v._uU(1),v.ALo(2,"translate"),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.hij(" ",v.lcZ(2,1,null==e?null:e.header)," ")}}function Fe(e,t){if(1&e&&(v.ynx(0),v.YNc(1,Ye,4,5,"th",11),v.YNc(2,$e,3,3,"th",9),v.BQk()),2&e){const e=t.$implicit;v.xp6(1),v.Q6J("ngIf",!0===(null==e?null:e.isSortable)),v.xp6(1),v.Q6J("ngIf",!0!==(null==e?null:e.isSortable))}}function Ee(e,t){1&e&&v._UZ(0,"th")}const De=function(e){return{"p-state-filled":e}};function ke(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"span",17),v.TgZ(1,"input",18),v.NdJ("input",function(t){v.CHM(e);const n=v.oxw().$implicit;return v.oxw(3),v.MAs(1).filter(t.target.value,n.field,n.filterMode)}),v.ALo(2,"translate"),v.qZA(),v.qZA()}if(2&e){const e=v.oxw().$implicit;v.oxw(3);const t=v.MAs(1);v.xp6(1),v.s9C("type","Number"===e.type?"number":"text"),v.s9C("placeholder",void 0!==e.searchPlaceholder?e.searchPlaceholder:!0===e.isDate?v.lcZ(2,4,"bia.dateIso8601"):""),v.Q6J("value",null==t.filters[e.field]?null:t.filters[e.field].value)("ngClass",v.VKq(6,De,""!==(null==t.filters[e.field]?null:t.filters[e.field].value)))}}function Pe(e,t){if(1&e&&(v.TgZ(0,"th",15),v.YNc(1,ke,3,8,"span",16),v.qZA()),2&e){const e=t.$implicit;v.Q6J("ngSwitch",e.field),v.xp6(1),v.Q6J("ngIf",!0===e.isSearchable)}}function Be(e,t){if(1&e&&(v.TgZ(0,"tr"),v.YNc(1,Ee,1,0,"th",9),v.YNc(2,Pe,2,2,"th",14),v.qZA()),2&e){const e=v.oxw().$implicit,t=v.oxw(2);v.xp6(1),v.Q6J("ngIf",t.canSelectElement),v.xp6(1),v.Q6J("ngForOf",e)}}function He(e,t){if(1&e&&(v.TgZ(0,"tr"),v.YNc(1,Ie,2,0,"th",7),v.YNc(2,Fe,3,2,"ng-container",8),v.qZA(),v.YNc(3,Be,3,2,"tr",9)),2&e){const e=t.$implicit,n=v.oxw(2);v.xp6(1),v.Q6J("ngIf",n.canSelectElement),v.xp6(1),v.Q6J("ngForOf",e),v.xp6(1),v.Q6J("ngIf",n.showColSearch)}}function ze(e,t){if(1&e&&v._UZ(0,"p-tableCheckbox",23),2&e){const e=v.oxw(2).$implicit;v.Q6J("value",e)}}function Re(e,t){1&e&&v._UZ(0,"i",24)}function qe(e,t){if(1&e&&(v.TgZ(0,"td"),v.YNc(1,ze,1,1,"p-tableCheckbox",21),v.YNc(2,Re,1,0,"i",22),v.qZA()),2&e){const e=v.oxw().$implicit,t=v.oxw(2);v.xp6(1),v.Q6J("ngIf",!0!==t.isFooter(e)&&e.id>0),v.xp6(1),v.Q6J("ngIf",!0===t.isFooter(e))}}function _e(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"input",29),v.NdJ("change",function(){return v.CHM(e),v.oxw(6).onChange()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(3).$implicit;v.xp6(1),v.Q6J("formControlName",e.field)}}function Ue(e,t){1&e&&(v.TgZ(0,"span",30),v._uU(1,"*"),v.qZA())}function je(e,t){if(1&e&&(v.ynx(0,15),v.YNc(1,_e,2,1,"ng-container",27),v.BQk(),v.YNc(2,Ue,2,0,"span",28)),2&e){const e=v.oxw(2).$implicit,t=v.oxw(3);v.Q6J("ngSwitch",e.field),v.xp6(2),v.Q6J("ngIf",!0===t.isRequired(e.field))}}function Ge(e,t){1&e&&v.YNc(0,je,3,2,"ng-template",26)}function Ke(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.BQk()),2&e){const e=v.oxw(3).$implicit,t=v.oxw().$implicit;v.xp6(1),v.hij(" ",t[e.field]," ")}}function Ve(e,t){if(1&e&&(v.ynx(0,15),v.YNc(1,Ke,2,1,"ng-container",27),v.BQk()),2&e){const e=v.oxw(2).$implicit;v.Q6J("ngSwitch",e.field)}}function Xe(e,t){1&e&&v.YNc(0,Ve,2,1,"ng-template",31)}const We=function(){return{width:"100%"}};function et(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-dropdown",35),v.NdJ("onChange",function(){return v.CHM(e),v.oxw(7).onChange()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit,t=v.oxw(3);v.xp6(1),v.Akn(v.DdM(4,We)),v.Q6J("formControlName",e.field)("options",t.getOptionDto(e.field))}}function tt(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-multiSelect",36),v.NdJ("onChange",function(){return v.CHM(e),v.oxw(7).onChange()})("onPanelShow",function(){return v.CHM(e),v.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return v.CHM(e),v.oxw(7).onPanelHideMultiSelect()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit,t=v.oxw(3);v.xp6(1),v.Akn(v.DdM(4,We)),v.Q6J("formControlName",e.field)("options",t.getOptionDto(e.field))}}function nt(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-checkbox",37),v.NdJ("onChange",function(){return v.CHM(e),v.oxw(7).onChange()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Q6J("binary",!0)("formControlName",e.field)}}function it(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"input",38),v.NdJ("change",function(){return v.CHM(e),v.oxw(7).onChange()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Q6J("formControlName",e.field)}}function ot(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-calendar",39),v.NdJ("onShow",function(){return v.CHM(e),v.oxw(7).onShowCalendar()})("onSelect",function(){return v.CHM(e),v.oxw(7).onChange()})("onBlur",function(){return v.CHM(e),v.oxw(7).onBlurCalendar()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Akn(v.DdM(5,We)),v.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",v.DdM(6,We))}}function st(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-calendar",40),v.NdJ("onShow",function(){return v.CHM(e),v.oxw(7).onShowCalendar()})("onSelect",function(){return v.CHM(e),v.oxw(7).onChange()})("onBlur",function(){return v.CHM(e),v.oxw(7).onBlurCalendar()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Akn(v.DdM(5,We)),v.Q6J("formControlName",e.field)("inputStyle",v.DdM(6,We))("timeOnly",!0)}}function at(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-calendar",41),v.NdJ("onShow",function(){return v.CHM(e),v.oxw(7).onShowCalendar()})("onSelect",function(){return v.CHM(e),v.oxw(7).onChange()})("onBlur",function(){return v.CHM(e),v.oxw(7).onBlurCalendar()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Akn(v.DdM(5,We)),v.Q6J("formControlName",e.field)("inputStyle",v.DdM(6,We))("timeOnly",!0)}}function rt(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-calendar",42),v.NdJ("onShow",function(){return v.CHM(e),v.oxw(7).onShowCalendar()})("onSelect",function(){return v.CHM(e),v.oxw(7).onChange()})("onBlur",function(){return v.CHM(e),v.oxw(7).onBlurCalendar()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Akn(v.DdM(5,We)),v.Q6J("formControlName",e.field)("inputStyle",v.DdM(6,We))("timeOnly",!0)}}function lt(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"p-calendar",43),v.NdJ("onShow",function(){return v.CHM(e),v.oxw(7).onShowCalendar()})("onSelect",function(){return v.CHM(e),v.oxw(7).onChange()})("onBlur",function(){return v.CHM(e),v.oxw(7).onBlurCalendar()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Akn(v.DdM(5,We)),v.Q6J("formControlName",e.field)("showButtonBar",!0)("inputStyle",v.DdM(6,We))}}function ct(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"input",44),v.NdJ("change",function(){return v.CHM(e),v.oxw(7).onChange()}),v.qZA(),v.BQk()}if(2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Q6J("maxlength",e.maxlength)("formControlName",e.field)}}function ut(e,t){1&e&&(v.TgZ(0,"span",30),v._uU(1,"*"),v.qZA())}function pt(e,t){if(1&e&&(v.ynx(0,15),v.YNc(1,et,2,5,"ng-container",34),v.YNc(2,tt,2,5,"ng-container",34),v.YNc(3,nt,2,2,"ng-container",34),v.YNc(4,it,2,1,"ng-container",34),v.YNc(5,ot,2,7,"ng-container",34),v.YNc(6,st,2,7,"ng-container",34),v.YNc(7,at,2,7,"ng-container",34),v.YNc(8,rt,2,7,"ng-container",34),v.YNc(9,lt,2,7,"ng-container",34),v.YNc(10,ct,2,2,"ng-container",27),v.BQk(),v.YNc(11,ut,2,0,"span",28)),2&e){const e=v.oxw(3).$implicit,t=v.oxw(3);v.Q6J("ngSwitch",e.type),v.xp6(1),v.Q6J("ngSwitchCase","OneToMany"),v.xp6(1),v.Q6J("ngSwitchCase","ManyToMany"),v.xp6(1),v.Q6J("ngSwitchCase","Boolean"),v.xp6(1),v.Q6J("ngSwitchCase","Number"),v.xp6(1),v.Q6J("ngSwitchCase","Date"),v.xp6(1),v.Q6J("ngSwitchCase","Time"),v.xp6(1),v.Q6J("ngSwitchCase","TimeOnly"),v.xp6(1),v.Q6J("ngSwitchCase","TimeSecOnly"),v.xp6(1),v.Q6J("ngSwitchCase","DateTime"),v.xp6(2),v.Q6J("ngIf",!0===t.isRequired(e.field))}}function dt(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.BQk()),2&e){const e=v.oxw(5).$implicit,t=v.oxw().$implicit;v.xp6(1),v.hij(" ",null==t[e.field]?null:t[e.field].display," ")}}function mt(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.BQk()),2&e){const e=v.oxw(5).$implicit,t=v.oxw().$implicit,n=v.oxw(2);v.xp6(1),v.hij(" ",n.formatDisplayName(t[e.field])," ")}}function ht(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.ALo(2,"formatValue"),v.BQk()),2&e){const e=v.oxw(5).$implicit,t=v.oxw().$implicit;v.xp6(1),v.hij(" ",v.xi3(2,1,t[e.field],e)," ")}}function ft(e,t){if(1&e&&(v.ynx(0),v.ynx(1,15),v.YNc(2,dt,2,1,"ng-container",34),v.YNc(3,mt,2,1,"ng-container",34),v.YNc(4,ht,3,4,"ng-container",27),v.BQk(),v.BQk()),2&e){const e=v.oxw(4).$implicit;v.xp6(1),v.Q6J("ngSwitch",e.type),v.xp6(1),v.Q6J("ngSwitchCase","OneToMany"),v.xp6(1),v.Q6J("ngSwitchCase","ManyToMany")}}function gt(e,t){if(1&e&&v.YNc(0,ft,5,3,"ng-container",9),2&e){const e=v.oxw(4).$implicit,t=v.oxw(2);v.Q6J("ngIf",!0!==t.isFooter(e))}}function bt(e,t){if(1&e&&(v.YNc(0,pt,12,11,"ng-template",32),v.YNc(1,gt,1,1,"ng-template",null,33,v.W1O)),2&e){const e=v.MAs(2),t=v.oxw(2).$implicit;v.Q6J("ngIf",!0===t.isEditable)("ngIfElse",e)}}function yt(e,t){1&e&&v.YNc(0,bt,3,2,"ng-template",26)}function St(e,t){1&e&&(v.TgZ(0,"label"),v._uU(1,"-"),v.qZA())}function wt(e,t){if(1&e&&v.YNc(0,St,2,0,"label",9),2&e){const e=v.oxw(3).$implicit;v.Q6J("ngIf",!0===e.isEditable)}}function xt(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.BQk()),2&e){const e=v.oxw(4).$implicit,t=v.oxw().$implicit;v.xp6(1),v.hij(" ",null==t[e.field]?null:t[e.field].display," ")}}function Ct(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.BQk()),2&e){const e=v.oxw(4).$implicit,t=v.oxw().$implicit,n=v.oxw(2);v.xp6(1),v.hij(" ",n.formatDisplayName(t[e.field])," ")}}function vt(e,t){1&e&&v._UZ(0,"i",47)}function Mt(e,t){if(1&e&&(v.ynx(0),v.YNc(1,vt,1,0,"i",46),v.BQk()),2&e){const e=v.oxw(4).$implicit,t=v.oxw().$implicit;v.xp6(1),v.Q6J("ngIf",!0===t[e.field])}}function Zt(e,t){if(1&e&&(v.ynx(0),v._uU(1),v.ALo(2,"formatValue"),v.BQk()),2&e){const e=v.oxw(4).$implicit,t=v.oxw().$implicit;v.xp6(1),v.hij(" ",v.xi3(2,1,t[e.field],e)," ")}}function At(e,t){if(1&e&&(v.ynx(0,15),v.YNc(1,xt,2,1,"ng-container",34),v.YNc(2,Ct,2,1,"ng-container",34),v.YNc(3,Mt,2,1,"ng-container",34),v.YNc(4,Zt,3,4,"ng-container",27),v.BQk()),2&e){const e=v.oxw(3).$implicit;v.Q6J("ngSwitch",e.type),v.xp6(1),v.Q6J("ngSwitchCase","OneToMany"),v.xp6(1),v.Q6J("ngSwitchCase","ManyToMany"),v.xp6(1),v.Q6J("ngSwitchCase","Boolean")}}function Ot(e,t){if(1&e&&(v.YNc(0,wt,1,1,"ng-template",32),v.YNc(1,At,5,4,"ng-template",null,45,v.W1O)),2&e){const e=v.MAs(2),t=v.oxw(3).$implicit,n=v.oxw(2);v.Q6J("ngIf",!0===n.isFooter(t))("ngIfElse",e)}}function Lt(e,t){1&e&&v.YNc(0,Ot,3,2,"ng-template",31)}function Nt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"td",25),v.NdJ("click",function(){v.CHM(e);const t=v.oxw().$implicit;return v.oxw(2).initEditableRow(t)}),v.TgZ(1,"p-cellEditor"),v.YNc(2,Ge,1,0,void 0,9),v.YNc(3,Xe,1,0,void 0,9),v.YNc(4,yt,1,0,void 0,9),v.YNc(5,Lt,1,0,void 0,9),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit,n=v.oxw(3);v.xp6(2),v.Q6J("ngIf",!0===n.isSpecificInput(e.field)),v.xp6(1),v.Q6J("ngIf",!0===n.isSpecificInput(e.field)),v.xp6(1),v.Q6J("ngIf",!0!==n.isSpecificInput(e.field)),v.xp6(1),v.Q6J("ngIf",!0!==n.isSpecificInput(e.field))}}function Tt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",19),v.NdJ("focusout",function(){return v.CHM(e),v.oxw(2).onFocusout()})("keyup.enter",function(){return v.CHM(e),v.oxw(2).initEditableRow(null)})("keyup.escape",function(){return v.CHM(e),v.oxw(2).cancel()}),v.YNc(1,qe,3,2,"td",9),v.YNc(2,Nt,6,4,"td",20),v.qZA()}if(2&e){const e=t.$implicit,n=t.columns,i=v.oxw(2);v.Q6J("pSelectableRow",!0!==i.isFooter(e)?e:null)("pEditableRow",e),v.xp6(1),v.Q6J("ngIf",i.canSelectElement),v.xp6(1),v.Q6J("ngForOf",n)}}function Jt(e,t){if(1&e&&(v.TgZ(0,"tr"),v.TgZ(1,"td",48),v._uU(2),v.ALo(3,"translate"),v.qZA(),v.qZA()),2&e){const e=t.$implicit;v.xp6(1),v.uIk("colspan",e.length+1),v.xp6(1),v.hij(" ",v.lcZ(3,2,"bia.NoRecordsFound")," ")}}function Qt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"p-table",2,3),v.NdJ("onFilter",function(){return v.CHM(e),v.oxw().onFilter()})("onLazyLoad",function(t){return v.CHM(e),v.oxw().onLoadLazy(t)})("onStateSave",function(t){return v.CHM(e),v.oxw().onStateSave(t)})("selectionChange",function(){return v.CHM(e),v.oxw().onSelectionChange()}),v.ALo(2,"async"),v.YNc(3,He,4,3,"ng-template",4),v.YNc(4,Tt,3,4,"ng-template",5),v.YNc(5,Jt,4,4,"ng-template",6),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",e.displayedColumns)("value",e.elements)("paginator",e.paginator)("rows",e.pageSize)("totalRecords",e.totalRecord)("lazy",!0)("loading",e.loading&&null!==v.lcZ(2,14,e.showLoading$))("stateStorage","session")("stateKey",e.tableStateKey)("lazyLoadOnInit",e.getLazyLoadOnInit())("sortField",e.sortFieldValue)("sortOrder",e.sortOrderValue)}}let It=(()=>{class e extends Ce.l{constructor(e,t,n,i,o){super(e,t,n,i),this.formBuilder=e,this.authService=t,this.biaMessageService=n,this.translateService=i,this.siteService=o}initForm(){this.form=this.formBuilder.group({id:[this.element.id],user:[this.element.user,we.kI.required],roles:[this.element.roles]})}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,t.roles=xe.P.Differential(t.roles,null===(e=this.element)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.siteId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(we.qu),v.Y36(q.e),v.Y36(k.X),v.Y36(fe.sK),v.Y36(V.P))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-member-table"]],features:[v.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(e,t){1&e&&(v.TgZ(0,"form",0),v.YNc(1,Qt,6,16,"p-table",1),v.qZA()),2&e&&(v.Q6J("formGroup",t.form),v.xp6(1),v.Q6J("ngIf",t.configuration))},directives:[we._Y,we.JL,we.sg,Se.O5,ve.iA,Me.jx,Se.sg,ve.Mo,ve.lQ,ve.fz,Se.RF,Ze.o,Se.mk,Ae.oO,ve.Ei,ve.D$,ve.UA,ve.YL,Se.ED,we.Fj,we.JJ,we.u,Se.n9,Oe.Lt,Le.NU,Ne.XZ,we.wV,Te.f,Je.D,we.nD],pipes:[Se.Ov,fe.X$,Qe.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),e})();function Yt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"bia-table",6),v.NdJ("edit",function(t){return v.CHM(e),v.oxw().onEdit(t)})("loadLazy",function(t){return v.CHM(e),v.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return v.CHM(e),v.oxw().onSelectedElementsChanged(t)}),v.ALo(1,"async"),v.ALo(2,"async"),v.ALo(3,"async"),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("elements",v.lcZ(1,12,e.members$))("totalRecord",v.lcZ(2,14,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canEdit",e.canEdit)("canSelectElement",e.canDelete)("loading",v.lcZ(3,16,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}function $t(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"app-member-table",7),v.NdJ("loadLazy",function(t){return v.CHM(e),v.oxw().onLoadLazy(t)})("selectedElementsChanged",function(t){return v.CHM(e),v.oxw().onSelectedElementsChanged(t)})("save",function(t){return v.CHM(e),v.oxw().onSave(t)}),v.ALo(1,"async"),v.ALo(2,"async"),v.ALo(3,"async"),v.ALo(4,"async"),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("elements",v.lcZ(1,14,e.members$))("dictOptionDtos",v.lcZ(2,16,e.memberOptionsService.dictOptionDtos$))("totalRecord",v.lcZ(3,18,e.totalCount$))("columnToDisplays",e.displayedColumns)("pageSize",e.pageSize)("configuration",e.tableConfiguration)("showColSearch",e.showColSearch)("globalSearchValue",e.globalSearchValue)("canEdit",e.canEdit)("canAdd",e.canAdd)("canSelectElement",e.canDelete)("loading",v.lcZ(4,20,e.loading$))("viewPreference",e.viewPreference)("tableStateKey",e.tableStateKey)}}let Ft=(()=>{class e{constructor(e,t,n,i,o,s,a,r,l,c){this.store=e,this.router=t,this.activatedRoute=n,this.authService=i,this.memberDas=o,this.translateService=s,this.biaTranslationService=a,this.membersSignalRService=r,this.memberOptionsService=l,this.siteService=c,this.useCalcMode=!1,this.useSignalR=!1,this.useView=!1,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new B.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=R.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"membersGrid":void 0}ngOnInit(){if(this.sub=new B.w,this.initTableConfiguration(),this.setPermissions(),this.members$=this.store.select(E),this.totalCount$=this.store.select(Q),this.loading$=this.store.select(F),this.OnDisplay(),this.useCalcMode&&this.memberOptionsService.loadAllOptions(),this.useRefreshAtLanguageChange){let e=!0;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{e?e=!1:this.onLoadLazy(this.memberListComponent.getLazyLoadMetadata())}))}this.parentIds=[""+this.siteService.currentSiteId]}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.OnHide()}OnDisplay(){this.useView&&this.store.dispatch((0,W.Tx)()),this.useSignalR&&(this.membersSignalRService.initialize(),P.useSignalR=!0)}OnHide(){this.useSignalR&&(P.useSignalR=!1,this.membersSignalRService.destroy())}onCreate(){this.useCalcMode||this.router.navigate(["../create"],{relativeTo:this.activatedRoute})}onEdit(e){this.useCalcMode||this.router.navigate(["../"+e+"/edit"],{relativeTo:this.activatedRoute})}onSave(e){this.useCalcMode&&((null==e?void 0:e.id)>0?this.canEdit&&this.store.dispatch(g({member:e})):this.canAdd&&this.store.dispatch(f({member:e})))}onDelete(){this.selectedMembers&&this.canDelete&&this.store.dispatch(y({ids:this.selectedMembers.map(e=>e.id)}))}onSelectedElementsChanged(e){this.selectedMembers=e}onPageSizeChange(e){this.pageSize=e}onLoadLazy(e){const t=Object.assign({parentIds:this.parentIds},e);this.store.dispatch(m({event:t}))}searchGlobalChanged(e){this.globalSearchValue=e}displayedColumnsChanged(e){this.displayedColumns=e}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(e){this.viewPreference=e}onExportCSV(){const e={};this.columns.map(t=>e[t.value.split(".")[1]]=this.translateService.instant(t.value));const t=Object.assign({parentIds:this.parentIds,columns:e},this.memberListComponent.getLazyLoadMetadata());this.memberDas.getFile(t).subscribe(e=>{_.saveAs(e,this.translateService.instant("app.members")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(j.y.Member_Update),this.canDelete=this.authService.hasPermission(j.y.Member_Delete),this.canAdd=this.authService.hasPermission(j.y.Member_Create)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(e=>{this.tableConfiguration={columns:[Object.assign(new z.ML("user","member.user"),{type:z.d5.OneToMany}),Object.assign(new z.ML("roles","member.rolesForSite"),{type:z.d5.ManyToMany})]},this.columns=this.tableConfiguration.columns.map(e=>({key:e.field,value:e.header})),this.displayedColumns=[...this.columns]})}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(o.yh),v.Y36(i.F0),v.Y36(i.gz),v.Y36(q.e),v.Y36(M),v.Y36(fe.sK),v.Y36(U.P6),v.Y36(X),v.Y36(he),v.Y36(V.P))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-members-index"]],viewQuery:function(e,t){if(1&e&&v.Gf(H.$,5),2&e){let e;v.iGM(e=v.CRH())&&(t.memberListComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&v.ekj("bia-flex",t.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"bia-table-header",2),v.NdJ("create",function(){return t.onCreate()})("exportCSV",function(){return t.onExportCSV()})("delete",function(){return t.onDelete()}),v.ALo(3,"translate"),v.qZA(),v.TgZ(4,"bia-table-controller",3),v.NdJ("displayedColumnsChange",function(e){return t.displayedColumnsChanged(e)})("filter",function(e){return t.searchGlobalChanged(e)})("pageSizeChange",function(e){return t.onPageSizeChange(e)})("toggleSearch",function(){return t.onToggleSearch()})("viewChange",function(e){return t.onViewChange(e)}),v.ALo(5,"async"),v.qZA(),v.YNc(6,Yt,4,18,"bia-table",4),v.YNc(7,$t,5,22,"app-member-table",5),v.qZA(),v.qZA()),2&e&&(v.xp6(2),v.Q6J("headerTitle",v.lcZ(3,12,"member.listOfSiteMembers"))("canAdd",t.canAdd&&!t.useCalcMode)("canDelete",t.canDelete)("canExportCSV",!0)("selectedElements",t.selectedMembers),v.xp6(2),v.Q6J("defaultPageSize",t.defaultPageSize)("length",v.lcZ(5,14,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns)("tableStateKey",t.tableStateKey),v.xp6(2),v.Q6J("ngIf",!t.useCalcMode),v.xp6(1),v.Q6J("ngIf",t.useCalcMode))},directives:[ge.xw,ge.yH,be.l,ye.B,Se.O5,H.$,It],pipes:[fe.X$,Se.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),e})();var Et=n(84594),Dt=n(4714),kt=n(4207);const Pt=function(){return{width:"100%"}};let Bt=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.translateService=t,this.siteService=n,this.member={},this.save=new v.vpe,this.cancel=new v.vpe,this.initForm()}ngOnChanges(e){this.member&&(this.form.reset(),this.member&&this.form.patchValue(Object.assign({},this.member)))}initForm(){this.form=this.formBuilder.group({id:[this.member.id],user:[this.member.user,we.kI.required],roles:[this.member.roles]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){var e;if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,t.roles=xe.P.Differential(t.roles,null===(e=this.member)||void 0===e?void 0:e.roles),t.user=Object.assign({},t.user),t.siteId=this.siteService.currentSiteId,this.save.emit(t),this.form.reset()}}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(we.qu),v.Y36(fe.sK),v.Y36(V.P))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-member-form"]],inputs:{member:"member",roleOptions:"roleOptions",userOptions:"userOptions"},outputs:{save:"save",cancel:"cancel"},features:[v.TTD],decls:21,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","user","optionLabel","display","datakey","id",3,"options","filter","showClear"],[1,"bia-star-mandatory"],["formControlName","roles","multiple","multiple","checkbox","checkbox","optionLabel","display",3,"options","showToggleAll"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"]],template:function(e,t){1&e&&(v.TgZ(0,"form",0),v.NdJ("submit",function(){return t.onSubmit()}),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"span",3),v._UZ(4,"p-dropdown",4),v.TgZ(5,"label"),v.TgZ(6,"span",5),v._uU(7,"*"),v.qZA(),v._uU(8),v.ALo(9,"translate"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"div",1),v.TgZ(11,"div",2),v.TgZ(12,"label"),v._uU(13),v.ALo(14,"translate"),v.qZA(),v._UZ(15,"p-listbox",6),v.qZA(),v.qZA(),v.TgZ(16,"div",7),v._UZ(17,"button",8),v.ALo(18,"translate"),v.TgZ(19,"button",9),v.NdJ("click",function(){return t.onCancel()}),v.ALo(20,"translate"),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.Q6J("formGroup",t.form),v.xp6(4),v.Akn(v.DdM(23,Pt)),v.Q6J("options",t.userOptions)("filter",!0)("showClear",!0),v.xp6(4),v.Oqu(v.lcZ(9,15,"member.user")),v.xp6(5),v.hij("",v.lcZ(14,17,"member.roles"),":"),v.xp6(2),v.Akn(v.DdM(24,Pt)),v.Q6J("options",t.roleOptions)("showToggleAll",!1),v.xp6(2),v.s9C("label",v.lcZ(18,19,"bia.save")),v.Q6J("disabled",!t.form.valid),v.xp6(2),v.s9C("label",v.lcZ(20,21,"bia.cancel")))},directives:[we._Y,we.JL,ge.xw,we.sg,ge.Wh,ge.yH,Oe.Lt,we.JJ,we.u,Dt.Ri,ge.SQ,kt.Hq],pipes:[fe.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e})();function Ht(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"app-member-form",1),v.NdJ("cancel",function(){return v.CHM(e),v.oxw().onCancelled()})("save",function(t){return v.CHM(e),v.oxw().onSubmitted(t)}),v.ALo(1,"async"),v.ALo(2,"async"),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("roleOptions",v.lcZ(1,3,e.memberOptionsService.roleOptions$))("userOptions",v.lcZ(2,5,e.memberOptionsService.userOptions$))("siteId",null==e.siteService.currentSite?null:e.siteService.currentSite.id)}}let zt=(()=>{class e{constructor(e,t,n,i,o){this.store=e,this.router=t,this.activatedRoute=n,this.memberOptionsService=i,this.siteService=o}ngOnInit(){this.memberOptionsService.loadAllOptions()}onSubmitted(e){this.store.dispatch(f({member:e})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(o.yh),v.Y36(i.F0),v.Y36(i.gz),v.Y36(he),v.Y36(V.P))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-member-new"]],decls:2,vars:3,consts:[[3,"roleOptions","userOptions","siteId","cancel","save",4,"ngIf"],[3,"roleOptions","userOptions","siteId","cancel","save"]],template:function(e,t){1&e&&(v.YNc(0,Ht,3,7,"app-member-form",0),v.ALo(1,"async")),2&e&&v.Q6J("ngIf",!1===v.lcZ(1,1,t.siteService.loading$))},directives:[Se.O5,Bt],pipes:[Se.Ov],styles:[""]}),e})(),Rt=(()=>{class e{constructor(e){this.store=e,this.sub=new B.w,this.InitSub(),this.loading$=this.store.select($),this.member$=this.store.select(I)}get currentMember(){var e;return(null===(e=this._currentMember)||void 0===e?void 0:e.id)===this._currentMemberId?this._currentMember:null}get currentMemberId(){return this._currentMemberId}set currentMemberId(e){this._currentMemberId=Number(e),this.store.dispatch(h({id:e}))}InitSub(){this.sub=new B.w,this.sub.add(this.store.select(I).subscribe(e=>{e&&(this._currentMember=e)}))}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(o.yh))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var qt=n(79373);function _t(e,t){1&e&&v._UZ(0,"bia-spinner",2),2&e&&v.Q6J("overlay",!0)}let Ut=(()=>{class e{constructor(e,t,n,i,o,s){this.store=e,this.router=t,this.activatedRoute=n,this.memberOptionsService=i,this.memberService=o,this.siteService=s,this.displayChange=new v.vpe,this.sub=new B.w}ngOnInit(){this.memberOptionsService.loadAllOptions()}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(e){this.store.dispatch(g({member:e})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(o.yh),v.Y36(i.F0),v.Y36(i.gz),v.Y36(he),v.Y36(Rt),v.Y36(V.P))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-member-edit"]],outputs:{displayChange:"displayChange"},decls:6,vars:12,consts:[[3,"member","roleOptions","userOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(v.TgZ(0,"app-member-form",0),v.NdJ("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),v.ALo(1,"async"),v.ALo(2,"async"),v.ALo(3,"async"),v.qZA(),v.YNc(4,_t,1,1,"bia-spinner",1),v.ALo(5,"async")),2&e&&(v.Q6J("member",v.lcZ(1,4,t.memberService.member$))("roleOptions",v.lcZ(2,6,t.memberOptionsService.roleOptions$))("userOptions",v.lcZ(3,8,t.memberOptionsService.userOptions$)),v.xp6(4),v.Q6J("ngIf",v.lcZ(5,10,t.memberService.loading$)))},directives:[Bt,Se.O5,qt.O],pipes:[Se.Ov],styles:[""]}),e})();var jt=n(16249),Gt=n(30466);function Kt(e,t){1&e&&v._UZ(0,"bia-spinner",1),2&e&&v.Q6J("overlay",!0)}let Vt=(()=>{class e{constructor(e,t,n,i){this.store=e,this.route=t,this.memberService=n,this.layoutService=i,this.sub=new B.w}ngOnInit(){this.memberService.currentMemberId=this.route.snapshot.params.memberId,this.sub.add(this.store.select(I).subscribe(e=>{(null==e?void 0:e.user)&&(this.route.data.pipe((0,G.P)()).subscribe(t=>{t.breadcrumb=e.user.display}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(o.yh),v.Y36(i.gz),v.Y36(Rt),v.Y36(Gt.N))},e.\u0275cmp=v.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(v._UZ(0,"router-outlet"),v.YNc(1,Kt,1,1,"bia-spinner",0),v.ALo(2,"async")),2&e&&(v.xp6(1),v.Q6J("ngIf",v.lcZ(2,1,t.memberService.loading$)))},directives:[i.lC,Se.O5,qt.O],pipes:[Se.Ov],styles:[""]}),e})();var Xt=n(98832),Wt=n(53460);let en=(()=>{class e extends C.Z{constructor(e){super(e,"Roles")}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(v.zs3))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tn=(()=>{class e{constructor(e,t,n){this.actions$=e,this.roleDas=t,this.biaMessageService=n,this.loadAll$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(te),(0,l.w)(()=>this.roleDas.getList("allOptions").pipe((0,c.U)(e=>ne({roles:e})),(0,u.K)(e=>(this.biaMessageService.showError(),(0,a.of)(ie({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(s.eX),v.LFG(en),v.LFG(k.X))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac}),e})(),nn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({providers:[],imports:[[o.Aw.forFeature("domain-role-options",re),s.sQ.forFeature([tn])]]}),e})();var on=n(62439);const sn=[{path:"",data:{breadcrumb:null,permission:j.y.Member_List_Access,InjectComponent:Ft},component:Wt.e,canActivate:[jt.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:j.y.Member_Create,title:"member.add",InjectComponent:zt},component:Xt._,canActivate:[jt.n]},{path:":memberId",data:{breadcrumb:"",canNavigate:!0},component:Vt,canActivate:[jt.n],children:[{path:"edit",data:{breadcrumb:"member.manage",canNavigate:!0,permission:j.y.Member_Update,title:"member.manage",InjectComponent:Ut},component:Xt._,canActivate:[jt.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}];let an=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({imports:[[Et.m,i.Bz.forChild(sn),o.Aw.forFeature("members",N),s.sQ.forFeature([P]),on.U,nn]]}),e})()}}]);