function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,c=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){c=!0,a=o}finally{try{r||null==s.return||s.return()}finally{if(c)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var c=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{hPRj:function(e,t,n){"use strict";n.r(t),n.d(t,"UserModule",(function(){return tt}));var r,c,a=n("tyNb"),i=n("kt0X"),s=n("snw9"),o=n("LRne"),u=n("wO+i"),l=n("eIep"),b=n("lJxs"),f=n("JIr8"),p=n("bOdf"),h=n("zp1y"),d=Object(i.h)("[Users] Load all by post",Object(i.m)()),m=Object(i.h)("[Users] Load",Object(i.m)()),y=Object(i.h)("[Users] Create",Object(i.m)()),v=Object(i.h)("[Users] Update",Object(i.m)()),g=Object(i.h)("[Users] Remove",Object(i.m)()),O=Object(i.h)("[Users] Multi Remove",Object(i.m)()),j=Object(i.h)("[Users] Save",Object(i.m)()),S=Object(i.h)("[Users] Synchronize"),C=(Object(i.h)("[Users] Load all success",Object(i.m)()),Object(i.h)("[Users] Load all by post success",Object(i.m)())),w=Object(i.h)("[Users] Load success",Object(i.m)()),k=(Object(i.h)("[Users] Create success",Object(i.m)()),Object(i.h)("[Users] Update success",Object(i.m)()),Object(i.h)("[Users] Remove success",Object(i.m)()),Object(i.h)("[Users] Failure",Object(i.m)())),_=n("Fx2S"),D=n("dlt+"),T=n("fXoL"),A=((c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"formatDisplayNameObs",value:function(e){var t=this;return e.pipe(Object(b.a)((function(e){return t.formatDisplayNames(e)})))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach((function(e){e=t.formatDisplayName(e)})),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")"),e}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275prov=T.Jb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),U=((r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var c;return _classCallCheck(this,n),(c=t.call(this,e,"users")).userService=r,c}return _createClass(n,[{key:"getAllByFilter",value:function(e){return this.userService.formatDisplayNameObs(this.http.get("".concat(this.route,"?filter=").concat(e)))}},{key:"synchronize",value:function(){return this.http.get(this.route+"synchronize")}}]),n}(D.a)).\u0275fac=function(e){return new(e||r)(T.Xb(T.r),T.Xb(A))},r.\u0275prov=T.Jb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),L=n("EVqC"),z=Object(L.a)({selectId:function(e){return e.id},sortComparer:!1}),E=z.getInitialState({totalCount:0,currentUser:{},lastLazyLoadEvent:{}}),x=Object(i.j)(E,Object(i.l)(C,(function(e,t){var n=t.result,r=t.event,c=z.setAll(n.data,e);return c.currentUser={},c.totalCount=n.totalCount,c.lastLazyLoadEvent=r,c})),Object(i.l)(w,(function(e,t){var n=t.user;return Object.assign(Object.assign({},e),{currentUser:n})})));function B(e,t){return Object(i.f)({users:x})(e,t)}var I,P=Object(i.i)("users"),N=Object(i.k)(P,(function(e){return e.users})),F=Object(i.k)(N,(function(e){return e.totalCount})),M=(Object(i.k)(N,(function(e){return e.currentUser})),Object(i.k)(N,(function(e){return e.lastLazyLoadEvent}))),R=z.getSelectors(N).selectAll,$=n("qweb"),V=n("sYmb"),G=((I=function e(t,n,r,c,a,i){var _=this;_classCallCheck(this,e),this.actions$=t,this.userDas=n,this.userFromADDas=r,this.biaMessageService=c,this.translateService=a,this.store=i,this.loadAllByPost$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(d),Object(u.a)("event"),Object(l.a)((function(e){return _.userDas.getListByPost(e).pipe(Object(b.a)((function(t){return C({result:t,event:e})})),Object(f.a)((function(e){return _.biaMessageService.showError(),Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))})),this.load$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(m),Object(u.a)("id"),Object(l.a)((function(e){return _.userDas.get(e).pipe(Object(b.a)((function(e){return w({user:e})})))})))})),this.synchronize$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(S),Object(p.a)((function(e){return Object(o.a)(e).pipe(Object(h.a)(_.store.select(M)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=(t[0],t[1]);return _.userDas.synchronize().pipe(Object(b.a)((function(){return _.biaMessageService.showSyncSuccess(),d({event:n})})),Object(f.a)((function(e){return _.biaMessageService.showError(),Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))})),this.create$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(y),Object(u.a)("user"),Object(p.a)((function(e){return Object(o.a)(e).pipe(Object(h.a)(_.store.select(M)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return _.userDas.post(n).pipe(Object(b.a)((function(){return _.biaMessageService.showAddSuccess(),d({event:r})})),Object(f.a)((function(e){return _.biaMessageService.showError(),Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))})),this.update$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(v),Object(u.a)("user"),Object(p.a)((function(e){return Object(o.a)(e).pipe(Object(h.a)(_.store.select(M)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return _.userDas.put(n,n.id).pipe(Object(b.a)((function(){return _.biaMessageService.showUpdateSuccess(),d({event:r})})),Object(f.a)((function(e){return _.biaMessageService.showError(),Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))})),this.destroy$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(g),Object(u.a)("id"),Object(p.a)((function(e){return Object(o.a)(e).pipe(Object(h.a)(_.store.select(M)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return _.userDas.delete(n).pipe(Object(b.a)((function(){return _.biaMessageService.showDeleteSuccess(),d({event:r})})),Object(f.a)((function(e){return _.biaMessageService.showError(),Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))})),this.multiDestroy$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(O),Object(u.a)("ids"),Object(p.a)((function(e){return Object(o.a)(e).pipe(Object(h.a)(_.store.select(M)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return _.userDas.deletes(n).pipe(Object(b.a)((function(){return _.biaMessageService.showDeleteSuccess(),d({event:r})})),Object(f.a)((function(e){return _.biaMessageService.showError(),Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))})),this.save$=Object(s.c)((function(){return _.actions$.pipe(Object(s.d)(j),Object(u.a)("usersFromAD"),Object(p.a)((function(e){return Object(o.a)(e).pipe(Object(h.a)(_.store.select(M)))})),Object(l.a)((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return _.userFromADDas.save(n,"").pipe(Object(b.a)((function(){return _.biaMessageService.showAddSuccess(),d({event:r})})),Object(f.a)((function(e){if(303===e.status){var t="";e.error&&e.error.forEach((function(e){var n=(""+_.translateService.instant("user.cannotAddMember")).replace("${login}",e);""!==t&&(t+="\n"),t+=n})),_.biaMessageService.showErrorDetail(t)}else _.biaMessageService.showError();return Object(o.a)(k({err:{concern:"CREATE",error:e}}))})))})))}))}).\u0275fac=function(e){return new(e||I)(T.Xb(s.a),T.Xb(U),T.Xb($.a),T.Xb(_.a),T.Xb(V.d),T.Xb(i.b))},I.\u0275prov=T.Jb({token:I,factory:I.\u0275fac}),I),X=n("Sa1B"),J=n("VfrA"),H=n("s0Cq"),q=n("E6Oa"),W=n("RdrV"),K=n("XiUz"),Q=n("7zfz"),Y=n("jIms"),Z=n("ofXK"),ee=n("Nf9I"),te=n("jIHw"),ne=n("xlun");function re(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",9),T.bc("click",(function(){return T.zc(n),T.dc(2).toggleFilter()})),T.ec(1,"translate"),T.Sb()}2&e&&T.mc("pTooltip",T.fc(1,1,"msg.showFilters"))}function ce(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",10),T.bc("click",(function(){return T.zc(n),T.dc(2).toggleFilter()})),T.ec(1,"translate"),T.Sb()}2&e&&T.mc("pTooltip",T.fc(1,1,"msg.showFilters"))}function ae(e,t){if(1&e&&(T.Rb(0),T.Gc(1,re,2,3,"button",7),T.Gc(2,ce,2,3,"button",8),T.Qb()),2&e){var n=T.dc();T.Bb(1),T.lc("ngIf",!1===n.showFilter&&!1===n.haveFilter),T.Bb(1),T.lc("ngIf",!1===n.showFilter&&!0===n.haveFilter)}}function ie(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",11),T.bc("click",(function(){return T.zc(n),T.dc().onDelete()})),T.ec(1,"translate"),T.Sb()}if(2&e){var r=T.dc();T.mc("label",T.fc(1,2,"bia.delete")),T.lc("disabled",0===r.nbSelectedElements)}}function se(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",12),T.bc("click",(function(){return T.zc(n),T.dc().onBack()})),T.ec(1,"translate"),T.Sb()}2&e&&T.mc("label",T.fc(1,1,"bia.back"))}function oe(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",13),T.bc("click",(function(){return T.zc(n),T.dc().exportCSV.emit()})),T.Sb()}}function ue(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",12),T.bc("click",(function(){return T.zc(n),T.dc().synchronize.emit()})),T.ec(1,"translate"),T.Sb()}2&e&&T.mc("label",T.fc(1,1,"bia.synchronize"))}function le(e,t){if(1&e){var n=T.Ub();T.Tb(0,"button",14),T.bc("click",(function(){return T.zc(n),T.dc().onCreate()})),T.ec(1,"translate"),T.Sb()}2&e&&T.mc("label",T.fc(1,1,"bia.add"))}var be,fe=((be=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).canSync=!1,e.synchronize=new T.n,e}return n}(Y.a)).\u0275fac=function(e){return pe(e||be)},be.\u0275cmp=T.Hb({type:be,selectors:[["app-user-table-header"]],inputs:{canSync:"canSync"},outputs:{synchronize:"synchronize"},features:[T.Ab([Q.a]),T.yb],decls:13,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between",1,"header"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","stretch center"],[4,"ngIf"],["pButton","",3,"disabled","label","click",4,"ngIf"],["pButton","","class","ui-button-secondary",3,"label","click",4,"ngIf"],["pButton","","class","ui-button-secondary","label","CSV",3,"click",4,"ngIf"],["pButton","",3,"label","click",4,"ngIf"],["type","button","icon","ui-icon-filter-list","class","ui-button-secondary flat","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","ui-icon-filter-list","pButton","",3,"pTooltip","click",4,"ngIf"],["type","button","icon","ui-icon-filter-list","pButton","",1,"ui-button-secondary","flat",3,"pTooltip","click"],["type","button","icon","ui-icon-filter-list","pButton","",3,"pTooltip","click"],["pButton","",3,"disabled","label","click"],["pButton","",1,"ui-button-secondary",3,"label","click"],["pButton","","label","CSV",1,"ui-button-secondary",3,"click"],["pButton","",3,"label","click"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"div",1),T.Gc(2,ae,3,2,"ng-container",2),T.Gc(3,ie,2,4,"button",3),T.Sb(),T.Tb(4,"div",1),T.Tb(5,"h1"),T.Ic(6),T.Sb(),T.Sb(),T.Tb(7,"div",1),T.Gc(8,se,2,3,"button",4),T.Gc(9,oe,1,0,"button",5),T.Gc(10,ue,2,3,"button",4),T.Gc(11,le,2,3,"button",6),T.Sb(),T.Sb(),T.Ob(12,"p-confirmDialog")),2&e&&(T.Bb(2),T.lc("ngIf",t.showBtnFilter),T.Bb(1),T.lc("ngIf",t.canDelete),T.Bb(3),T.Jc(t.headerTitle),T.Bb(2),T.lc("ngIf",t.canBack),T.Bb(1),T.lc("ngIf",t.canExportCSV),T.Bb(1),T.lc("ngIf",t.canSync),T.Bb(1),T.lc("ngIf",t.canAdd))},directives:[K.d,K.c,K.e,Z.m,ee.a,te.b,ne.a],pipes:[V.c],styles:[".header[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:raleway-thin,serif;font-size:36px;font-weight:200;margin:0}",""]}),be),pe=T.Vb(fe),he=n("v8MJ"),de=n("mrSG"),me=n("l3C6"),ye=n("ylIW"),ve=Object(i.h)("[Domain LDAP Domains] Load all"),ge=Object(i.h)("[Domain LDAP Domains] Load all success",Object(i.m)()),Oe=Object(i.h)("[Domain LDAP Domains] Failure",Object(i.m)()),je=Object(L.a)({selectId:function(e){return e.ldapName},sortComparer:!1}),Se=je.getInitialState({}),Ce=Object(i.j)(Se,Object(i.l)(ge,(function(e,t){var n=t.ldapDomains;return je.setAll(n,e)})));function we(e,t){return Object(i.f)({ldapDomain:Ce})(e,t)}var ke,_e,De,Te,Ae,Ue,Le,ze,Ee=Object(i.i)("domain-ldap-domains"),xe=Object(i.k)(Ee,(function(e){return e.ldapDomain})),Be=je.getSelectors(xe).selectAll,Ie=n("/RsI"),Pe=n("3Pt+"),Ne=n("arFO"),Fe=n("V5BG"),Me=function(){return{width:"50%"}},Re=function(){return{width:"100%"}},$e=((ke=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.searchUsers=new T.n,this.save=new T.n,this.cancel=new T.n,this.initForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.users&&e.users&&(this.users=this.users.sort((function(e,t){return e.firstName.localeCompare(t.firstName)})))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,Pe.o.required],domains:[this.domains]})}},{key:"onCancel",value:function(){this.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}},{key:"reset",value:function(){this.selectedDomain="",this.form.reset()}},{key:"onSearchUsers",value:function(e){this.searchUsers.emit({filter:e.query,ldapName:this.selectedDomain})}},{key:"onDomainChange",value:function(e){this.selectedDomain=e.value?e.value.ldapName:""}}]),e}()).\u0275fac=function(e){return new(e||ke)(T.Nb(Pe.b))},ke.\u0275cmp=T.Hb({type:ke,selectors:[["app-user-form"]],inputs:{users:"users",domains:"domains"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[T.zb],decls:11,vars:25,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"ui-fluid","app-field-container"],["placeholder","LDAP Domain","formControlName","domains","optionLabel","displayName","showClear","true",3,"options","onChange"],["formControlName","selectedUsers","field","displayName",3,"multiple","suggestions","delay","size","minLength","placeholder","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"]],template:function(e,t){1&e&&(T.Tb(0,"form",0),T.bc("submit",(function(){return t.onSubmit()})),T.Tb(1,"div",1),T.Tb(2,"p-dropdown",2),T.bc("onChange",(function(e){return t.onDomainChange(e)})),T.Sb(),T.Ob(3,"br"),T.Tb(4,"p-autoComplete",3),T.bc("completeMethod",(function(e){return t.onSearchUsers(e)})),T.ec(5,"translate"),T.Sb(),T.Sb(),T.Tb(6,"div",4),T.Ob(7,"button",5),T.ec(8,"translate"),T.Tb(9,"button",6),T.bc("click",(function(){return t.onCancel()})),T.ec(10,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.lc("formGroup",t.form),T.Bb(2),T.Ec(T.oc(22,Me)),T.lc("options",t.domains),T.Bb(2),T.Ec(T.oc(23,Me)),T.mc("placeholder",T.fc(5,16,"bia.select")),T.lc("multiple",!0)("suggestions",t.users)("delay",700)("size",30)("minLength",3)("inputStyle",T.oc(24,Re)),T.Bb(3),T.mc("label",T.fc(8,18,"bia.save")),T.lc("disabled",!t.form.valid),T.Bb(2),T.mc("label",T.fc(10,20,"bia.cancel")))},directives:[Pe.p,Pe.k,K.d,Pe.f,K.c,Ne.a,Pe.j,Pe.e,Fe.a,K.e,te.b],pipes:[V.c],styles:[".app-field-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"],changeDetection:0}),ke),Ve=function(){return{minWidth:"50vw"}},Ge=function(){return{overflow:"auto"}},Xe=((De=function(){function e(t){_classCallCheck(this,e),this.store=t,this._display=!1,this.displayChange=new T.n}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(de.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.usersFromAD$=this.store.select(ye.a),this.ldapDomains$=this.store.select(Be),this.store.dispatch(ve());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onSubmitted",value:function(e){this.store.dispatch(j({usersFromAD:e})),this.close()}},{key:"onCancelled",value:function(){this.close()}},{key:"close",value:function(){this.display=!1}},{key:"onSearchUsers",value:function(e){this.store.dispatch(Object(me.b)({userFilter:e}))}},{key:"display",set:function(e){this._display=e,this.displayChange.emit(this._display)}}]),e}()).\u0275fac=function(e){return new(e||De)(T.Nb(i.b))},De.\u0275cmp=T.Hb({type:De,selectors:[["app-user-new-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:20,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(e,t){1&e&&(T.Tb(0,"p-dialog",0),T.bc("visibleChange",(function(e){return t._display=e})),T.Tb(1,"p-header"),T.Ic(2),T.ec(3,"translate"),T.Sb(),T.Tb(4,"app-user-form",1),T.bc("searchUsers",(function(e){return t.onSearchUsers(e)}))("cancel",(function(){return t.onCancelled()}))("save",(function(e){return t.onSubmitted(e)})),T.ec(5,"async"),T.ec(6,"async"),T.Sb(),T.Sb()),2&e&&(T.Ec(T.oc(18,Ve)),T.lc("focusOnShow",!1)("visible",t._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",T.oc(19,Ge)),T.Bb(2),T.Kc(" ",T.fc(3,12,"user.add")," "),T.Bb(2),T.lc("users",T.fc(5,14,t.usersFromAD$))("domains",T.fc(6,16,t.ldapDomains$)))},directives:[Ie.a,Q.c,$e],pipes:[V.c,Z.b],styles:[""]}),De),Je=((_e=function(){function e(t,n){_classCallCheck(this,e),this.store=t,this.authService=n,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.pageSize=H.b,this.displayEditUserDialog=!1,this.displayNewUserDialog=!1,this.canSync=!1,this.canDelete=!1,this.canAdd=!1,this.tableConfiguration={columns:[new J.b("lastName","user.lastName"),new J.b("firstName","user.firstName"),new J.b("login","user.login")]},this.columns=this.tableConfiguration.columns.map((function(e){return{key:e.field,value:e.header}})),this.displayedColumns=this.columns}return _createClass(e,[{key:"ngOnInit",value:function(){this.setPermissions(),this.users$=this.store.select(R),this.totalCount$=this.store.select(F)}},{key:"onCreate",value:function(){this.displayNewUserDialog=!0}},{key:"onDelete",value:function(){this.selectedUsers&&this.store.dispatch(O({ids:this.selectedUsers.map((function(e){return e.id}))}))}},{key:"onSelectedElementsChanged",value:function(e){this.selectedUsers=e}},{key:"onPageSizeChange",value:function(e){this.pageSize=e}},{key:"onLoadLazy",value:function(e){this.lastLazyLoadEvent=e,this.store.dispatch(d({event:e}))}},{key:"searchGlobalChanged",value:function(e){this.globalSearchValue=e}},{key:"displayedColumnsChanged",value:function(e){this.displayedColumns=e}},{key:"onToggleSearch",value:function(){this.showColSearch=!this.showColSearch}},{key:"onSynchronize",value:function(){this.store.dispatch(S())}},{key:"onViewChange",value:function(e){this.viewPreference=e}},{key:"setPermissions",value:function(){this.canSync=this.authService.hasPermission(W.a.User_Sync),this.canDelete=this.authService.hasPermission(W.a.User_Delete),this.canAdd=this.authService.hasPermission(W.a.User_Add)}}]),e}()).\u0275fac=function(e){return new(e||_e)(T.Nb(i.b),T.Nb(q.a))},_e.\u0275cmp=T.Hb({type:_e,selectors:[["app-users-index"]],viewQuery:function(e,t){var n;1&e&&T.Mc(X.a,!0),2&e&&T.xc(n=T.cc())&&(t.userListComponent=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&T.Fb("bia-flex",t.flex)},decls:10,vars:27,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canSync","canAdd","selectedElements","create","synchronize","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","viewPreference","loadLazy","selectedElementsChanged"],[3,"display","displayChange"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"div",1),T.Tb(2,"app-user-table-header",2),T.bc("create",(function(){return t.onCreate()}))("synchronize",(function(){return t.onSynchronize()}))("delete",(function(){return t.onDelete()})),T.ec(3,"translate"),T.Sb(),T.Tb(4,"bia-table-controller",3),T.bc("displayedColumnsChange",(function(e){return t.displayedColumnsChanged(e)}))("filter",(function(e){return t.searchGlobalChanged(e)}))("pageSizeChange",(function(e){return t.onPageSizeChange(e)}))("toggleSearch",(function(){return t.onToggleSearch()}))("viewChange",(function(e){return t.onViewChange(e)})),T.ec(5,"async"),T.Sb(),T.Tb(6,"bia-table",4),T.bc("loadLazy",(function(e){return t.onLoadLazy(e)}))("selectedElementsChanged",(function(e){return t.onSelectedElementsChanged(e)})),T.ec(7,"async"),T.ec(8,"async"),T.Sb(),T.Sb(),T.Sb(),T.Tb(9,"app-user-new-dialog",5),T.bc("displayChange",(function(e){return t.displayNewUserDialog=e})),T.Sb()),2&e&&(T.Bb(2),T.lc("headerTitle",T.fc(3,19,"user.listOf"))("canSync",t.canSync)("canAdd",t.canAdd)("selectedElements",t.selectedUsers),T.Bb(2),T.lc("defaultPageSize",t.pageSize)("length",T.fc(5,21,t.totalCount$))("columns",t.columns)("columnToDisplays",t.displayedColumns),T.Bb(2),T.lc("elements",T.fc(7,23,t.users$))("totalRecord",T.fc(8,25,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",!1)("canSelectElement",t.canDelete)("viewPreference",t.viewPreference),T.Bb(3),T.lc("display",t.displayNewUserDialog))},directives:[K.d,K.b,fe,he.a,X.a,Xe],pipes:[V.c,Z.b],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),_e),He=n("PCNd"),qe=n("+dww"),We=((Le=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"formatDisplayNameFromObs",value:function(e){var t=this;return e.pipe(Object(b.a)((function(e){return t.formatDisplayNames(e)})))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach((function(e){e=t.formatDisplayName(e)})),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.name," (").concat(e.ldapName,")"),e}}]),e}()).\u0275fac=function(e){return new(e||Le)},Le.\u0275prov=T.Jb({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le),Ke=((Ue=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var c;return _classCallCheck(this,n),(c=t.call(this,e,"ldapDomains")).ldapDomainService=r,c}return _createClass(n,[{key:"getAll",value:function(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}]),n}(D.a)).\u0275fac=function(e){return new(e||Ue)(T.Xb(T.r),T.Xb(We))},Ue.\u0275prov=T.Jb({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue),Qe=((Ae=function e(t,n,r){var c=this;_classCallCheck(this,e),this.actions$=t,this.ldapDomainDas=n,this.biaMessageService=r,this.loadAll$=Object(s.c)((function(){return c.actions$.pipe(Object(s.d)(ve),Object(l.a)((function(e){return c.ldapDomainDas.getAll().pipe(Object(b.a)((function(e){return ge({ldapDomains:e})})),Object(f.a)((function(e){return c.biaMessageService.showError(),Object(o.a)(Oe({error:e}))})))})))}))}).\u0275fac=function(e){return new(e||Ae)(T.Xb(s.a),T.Xb(Ke),T.Xb(_.a))},Ae.\u0275prov=T.Jb({token:Ae,factory:Ae.\u0275fac}),Ae),Ye=((Te=function e(){_classCallCheck(this,e)}).\u0275mod=T.Lb({type:Te}),Te.\u0275inj=T.Kb({factory:function(e){return new(e||Te)},imports:[[i.d.forFeature("domain-ldap-domains",we),s.b.forFeature([Qe])]]}),Te),Ze=n("vuVG"),et=[{path:"",data:{breadcrumb:null,permission:W.a.User_List_Access},component:Je,canActivate:[qe.a]},{path:"**",redirectTo:""}],tt=((ze=function e(){_classCallCheck(this,e)}).\u0275mod=T.Lb({type:ze}),ze.\u0275inj=T.Kb({factory:function(e){return new(e||ze)},imports:[[He.a,Ye,Ze.a,a.g.forChild(et),i.d.forFeature("users",B),s.b.forFeature([G])]]}),ze)}}]);