!function(){"use strict";function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[272],{11466:function(e,t,n){n.d(t,{P:function(){return o}});var r=n(16244),o=function(){function e(){i(this,e)}return s(e,null,[{key:"Clone",value:function(e){return e?Object.assign({},e):null}},{key:"Differential",value:function(e,t){var n=[];if(t&&Array.isArray(t)){var o=t.filter(function(t){return!e||!e.map(function(e){return e.id}).includes(t.id)}).map(function(e){return Object.assign(Object.assign({},e),{dtoState:r.e.Deleted})});o&&(n=n.concat(o))}if(e){var i=null==e?void 0:e.filter(function(e){return!t||!t.map(function(e){return e.id}).includes(e.id)}).map(function(e){return Object.assign(Object.assign({},e),{dtoState:r.e.Added})});i&&(n=n.concat(i))}return n}}]),e}()},98394:function(e,t,n){n.d(t,{y:function(){return r}});var r,o,i=n(86710);(o=r||(r={})).loadAll=(0,i.PH)("[Domain LDAP Domains] Load all"),o.loadAllSuccess=(0,i.PH)("[Domain LDAP Domains] Load all success",(0,i.Ky)()),o.failure=(0,i.PH)("[Domain LDAP Domains] Failure",(0,i.Ky)())},99887:function(e,t,n){n.d(t,{q2:function(){return d},ll:function(){return c}});var r=n(80273),o=n(86710),i=n(98394),a=(0,r.H)({selectId:function(e){return e.ldapName},sortComparer:!1}),s=a.getInitialState({}),u=(0,o.Lq)(s,(0,o.on)(i.y.loadAllSuccess,function(e,t){var n=t.ldapDomains;return a.setAll(n,e)}));function c(e,t){return(0,o.UY)({ldapDomain:u})(e,t)}var l=(0,o.ZF)("domain-ldap-domains"),f=(0,o.P1)(l,function(e){return e.ldapDomain}),d=a.getSelectors(f).selectAll},11936:function(t,r,o){o.d(r,{p:function(){return b}});var a,s=o(91601),u=o(86710),c=o(65448),l=o(25917),f=o(92996),d=o(43190),p=o(88002),m=o(5304),h=o(74147),y=o(37716),v=((a=function(t){e(o,t);var r=n(o);function o(e){return i(this,o),r.call(this,e,"Roles")}return o}(h.Z)).\u0275fac=function(e){return new(e||a)(y.LFG(y.zs3))},a.\u0275prov=y.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a),A=o(96875),g=o(42),D=function(){var e=function e(t,n,r){var o=this;i(this,e),this.actions$=t,this.roleDas=n,this.biaMessageService=r,this.loadAll$=(0,s.GW)(function(){return o.actions$.pipe((0,s.l4)(A.E.loadAll),(0,f.j)("teamTypeId"),(0,d.w)(function(e){return o.roleDas.getList({endpoint:"allOptions?teamTypeId="+e}).pipe((0,p.U)(function(e){return A.E.loadAllSuccess({roles:e})}),(0,m.K)(function(e){return o.biaMessageService.showError(),(0,l.of)(A.E.failure({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(y.LFG(s.eX),y.LFG(v),y.LFG(g.X))},e.\u0275prov=y.Yz7({token:e,factory:e.\u0275fac}),e}(),b=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=y.oAB({type:e}),e.\u0275inj=y.cJS({providers:[],imports:[[u.Aw.forFeature("domain-role-options",c.ll),s.sQ.forFeature([D])]]}),e}()},65448:function(e,t,n){n.d(t,{wA:function(){return d},ll:function(){return c}});var r=n(80273),o=n(86710),i=n(96875),a=(0,r.H)({selectId:function(e){return e.id},sortComparer:!1}),s=a.getInitialState({}),u=(0,o.Lq)(s,(0,o.on)(i.E.loadAllSuccess,function(e,t){var n=t.roles;return a.setAll(n,e)}));function c(e,t){return(0,o.UY)({roleOptions:u})(e,t)}var l=(0,o.ZF)("domain-role-options"),f=(0,o.P1)(l,function(e){return e.roleOptions}),d=a.getSelectors(f).selectAll},96875:function(e,t,n){n.d(t,{E:function(){return r}});var r,o,i=n(86710);(o=r||(r={})).loadAll=(0,i.PH)("[Domain Role Options] Load all",(0,i.Ky)()),o.loadAllSuccess=(0,i.PH)("[Domain Role Options] Load all success",(0,i.Ky)()),o.failure=(0,i.PH)("[Domain Role Options] Failure",(0,i.Ky)())},38579:function(e,t,n){n.d(t,{_:function(){return m}});var r,o=n(37716),a=n(3679),u=n(35618),c=n(50103),l=n(96516),f=n(4207),d=n(81780),p=function(){return{width:"100%"}},m=((r=function(){function e(t){i(this,e),this.formBuilder=t,this.searchUsers=new o.vpe,this.save=new o.vpe,this.cancel=new o.vpe,this.returnSizeOptions=[10,25,50,100],this.initForm()}return s(e,[{key:"ngOnChanges",value:function(e){this.users&&e.users&&(this.users=this.users.sort(function(e,t){return e.displayName.localeCompare(t.displayName)}))}},{key:"initForm",value:function(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,a.kI.required],domains:[this.domains],returnSize:this.returnSizeOptions[0]})}},{key:"onCancel",value:function(){this.reset(),this.cancel.next()}},{key:"onSubmit",value:function(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}},{key:"reset",value:function(){this.selectedDomain="",this.form.reset()}},{key:"onSearchUsers",value:function(e){this.searchUsers.emit({filter:e.query,ldapName:this.selectedDomain,returnSize:this.form.value.returnSize})}},{key:"onDomainChange",value:function(e){this.selectedDomain=e.value?e.value.ldapName:""}}]),e}()).\u0275fac=function(e){return new(e||r)(o.Y36(a.qu))},r.\u0275cmp=o.Xpm({type:r,selectors:[["bia-user-from-directory-form"]],inputs:{users:"users",domains:"domains",returnSizeOptions:"returnSizeOptions"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[o.TTD],decls:27,vars:32,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"p-fluid","app-field-container"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","50",1,"app-field-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","domains","optionLabel","displayName","showClear","true","appendTo","body",3,"options","onChange"],["fxFlex","10",1,"app-field-container"],["fxFlex","30",1,"app-field-container"],["placeholder","\xa0","formControlName","returnSize","appendTo","body",3,"options"],["fxFlex","90",1,"app-field-container"],["formControlName","selectedUsers","field","displayName","appendTo","body",3,"multiple","suggestions","delay","size","minLength","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(e,t){1&e&&(o.TgZ(0,"form",0),o.NdJ("submit",function(){return t.onSubmit()}),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"p-dropdown",5),o.NdJ("onChange",function(e){return t.onDomainChange(e)}),o.qZA(),o.TgZ(6,"label"),o._uU(7,"LDAP Domain"),o.qZA(),o.qZA(),o.qZA(),o._UZ(8,"div",6),o.TgZ(9,"div",7),o.TgZ(10,"div",4),o._UZ(11,"p-dropdown",8),o.TgZ(12,"label"),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",2),o.TgZ(16,"div",9),o.TgZ(17,"div",4),o.TgZ(18,"p-autoComplete",10),o.NdJ("completeMethod",function(e){return t.onSearchUsers(e)}),o.qZA(),o.TgZ(19,"label"),o._uU(20),o.ALo(21,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(22,"div",11),o._UZ(23,"button",12),o.ALo(24,"translate"),o.TgZ(25,"button",13),o.NdJ("click",function(){return t.onCancel()}),o.ALo(26,"translate"),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.Q6J("formGroup",t.form),o.xp6(5),o.Akn(o.DdM(28,p)),o.Q6J("options",t.domains),o.xp6(6),o.Akn(o.DdM(29,p)),o.Q6J("options",t.returnSizeOptions),o.xp6(2),o.Oqu(o.lcZ(14,20,"bia.itemsBySearch")),o.xp6(5),o.Akn(o.DdM(30,p)),o.Q6J("multiple",!0)("suggestions",t.users)("delay",700)("size",30)("minLength",3)("inputStyle",o.DdM(31,p)),o.xp6(2),o.Oqu(o.lcZ(21,22,"bia.select")),o.xp6(3),o.s9C("label",o.lcZ(24,24,"bia.save")),o.Q6J("disabled",!t.form.valid),o.xp6(2),o.s9C("label",o.lcZ(26,26,"bia.cancel")))},directives:[a._Y,a.JL,u.xw,a.sg,u.Wh,u.yH,c.Lt,a.JJ,a.u,l.Qc,u.SQ,f.Hq],pipes:[d.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),r)},58882:function(e,t,n){n.d(t,{o1:function(){return d},ll:function(){return c}});var r=n(80273),o=n(86710),i=n(44354),a=(0,r.H)({selectId:function(e){return e.domain+"\\"+e.login},sortComparer:!1}),s=a.getInitialState({}),u=(0,o.Lq)(s,(0,o.on)(i.$.loadAllSuccess,function(e,t){var n=t.users;return a.setAll(n,e)}));function c(e,t){return(0,o.UY)({usersFromDirectory:u})(e,t)}var l=(0,o.ZF)("users-from-directory"),f=(0,o.P1)(l,function(e){return e.usersFromDirectory}),d=a.getSelectors(f).selectAll},44354:function(e,t,n){n.d(t,{$:function(){return r}});var r,o,i=n(86710);(o=r||(r={})).loadAllByFilter=(0,i.PH)("[Feature Users From AD] Load all in AD by filter",(0,i.Ky)()),o.loadAllSuccess=(0,i.PH)("[Feature Users From AD] Load all success",(0,i.Ky)()),o.failure=(0,i.PH)("[Feature Users From AD] Failure",(0,i.Ky)()),o.addFromDirectory=(0,i.PH)("[Feature Users From AD] CreateUserFromDirectory",(0,i.Ky)())},95546:function(t,r,o){o.d(r,{q:function(){return q}});var a,u=o(91601),c=o(86710),l=o(99887),f=o(25917),d=o(43190),p=o(88002),m=o(5304),h=o(98394),y=o(74147),v=o(37716),A=((a=function(){function e(){i(this,e)}return s(e,[{key:"formatDisplayNameFromObs",value:function(e){var t=this;return e.pipe((0,p.U)(function(e){return t.formatDisplayNames(e)}))}},{key:"formatDisplayNames",value:function(e){var t=this;return e.forEach(function(e){e=t.formatDisplayName(e)}),e}},{key:"formatDisplayName",value:function(e){return e.displayName="".concat(e.name," (").concat(e.ldapName,")"),e}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a),g=function(){var t=function(t){e(o,t);var r=n(o);function o(e,t){var n;return i(this,o),(n=r.call(this,e,"ldapDomains")).ldapDomainService=t,n}return s(o,[{key:"getAll",value:function(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}]),o}(y.Z);return t.\u0275fac=function(e){return new(e||t)(v.LFG(v.zs3),v.LFG(A))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),D=o(42),b=function(){var e=function e(t,n,r){var o=this;i(this,e),this.actions$=t,this.ldapDomainDas=n,this.biaMessageService=r,this.loadAll$=(0,u.GW)(function(){return o.actions$.pipe((0,u.l4)(h.y.loadAll),(0,d.w)(function(e){return o.ldapDomainDas.getAll().pipe((0,p.U)(function(e){return h.y.loadAllSuccess({ldapDomains:e})}),(0,m.K)(function(e){return o.biaMessageService.showError(),(0,f.of)(h.y.failure({error:e}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(v.LFG(u.eX),v.LFG(g),v.LFG(D.X))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac}),e}(),F=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({imports:[[c.Aw.forFeature("domain-ldap-domains",l.ll),u.sQ.forFeature([b])]]}),e}(),S=o(39682),w=o(61028),Z=(o(38579),o(58882)),L=o(92996),k=o(44354),O=function(){var e=function(){function e(){i(this,e)}return s(e,[{key:"formatDisplayNameFromADObs",value:function(e){var t=this;return e.pipe((0,p.U)(function(e){return t.formatDisplayNamesFromAD(e)}))}},{key:"formatDisplayNamesFromAD",value:function(e){var t=this;return e.forEach(function(e){e=t.formatDisplayNameFromAD(e)}),e}},{key:"formatDisplayNameFromAD",value:function(e){return e.displayName="".concat(e.lastName," ").concat(e.firstName," (").concat(e.domain,"\\").concat(e.login,")"),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),U=function(){var t=function(t){e(o,t);var r=n(o);function o(e,t){var n;return i(this,o),(n=r.call(this,e,"users")).userService=t,n}return s(o,[{key:"getAllByFilter",value:function(e,t,n){return this.userService.formatDisplayNameFromADObs(this.http.get("".concat(this.route,"fromAD?filter=").concat(e,"&ldapName=").concat(t,"&returnSize=").concat(n)))}}]),o}(y.Z);return t.\u0275fac=function(e){return new(e||t)(v.LFG(v.zs3),v.LFG(O))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),x=o(76048),N=o(81780),C=function(){var e=function e(t,n,r,o){var a=this;i(this,e),this.actions$=t,this.userFromDirectoryDas=n,this.biaMessageService=r,this.translateService=o,this.loadAllByFilter$=(0,u.GW)(function(){return a.actions$.pipe((0,u.l4)(k.$.loadAllByFilter),(0,d.w)(function(e){return a.userFromDirectoryDas.getAllByFilter(e.userFilter.filter,e.userFilter.ldapName,e.userFilter.returnSize).pipe((0,p.U)(function(e){return k.$.loadAllSuccess({users:e})}),(0,m.K)(function(e){return a.biaMessageService.showError(),(0,f.of)(k.$.failure({error:e}))}))}))}),this.addFromDirectory$=(0,u.GW)(function(){return a.actions$.pipe((0,u.l4)(k.$.addFromDirectory),(0,L.j)("usersFromDirectory"),(0,d.w)(function(e){return a.userFromDirectoryDas.save({items:e,endpoint:"addFromDirectory"}).pipe((0,p.U)(function(e){return a.biaMessageService.showAddSuccess(),x.d.userAddedInListSuccess({usersAdded:e})}),(0,m.K)(function(e){if(303===e.status){var t="";e.error&&e.error.forEach(function(e){var n="".concat(a.translateService.instant("user.cannotAddMember")).replace("${login}",e);""!==t&&(t+="\n"),t+=n}),a.biaMessageService.showErrorDetail(t)}else a.biaMessageService.showError();return(0,f.of)(k.$.failure({error:{concern:"CREATE",error:e}}))}))}))})};return e.\u0275fac=function(t){return new(t||e)(v.LFG(u.eX),v.LFG(U),v.LFG(D.X),v.LFG(N.sK))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac}),e}();o(65224);var q=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({imports:[[w.m,c.Aw.forFeature("users-from-directory",Z.ll),u.sQ.forFeature([C]),S.U,F]]}),e}()},65224:function(e,t,n){n.d(t,{C:function(){return D}});var r,o=n(64762),a=n(37716),u=n(44354),c=n(58882),l=n(99887),f=n(98394),d=n(86710),p=n(45121),m=n(33013),h=n(38579),y=n(81780),v=n(38583),A=function(){return{minWidth:"50vw"}},g=function(){return{overflow:"auto"}},D=((r=function(){function e(t){i(this,e),this.store=t,this._display=!1,this.displayChange=new a.vpe}return s(e,[{key:"display",set:function(e){this._display=e,this.displayChange.emit(this._display)}},{key:"ngOnInit",value:function(){return(0,o.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.usersFromDirectory$=this.store.select(c.o1),this.ldapDomains$=this.store.select(l.q2),this.store.dispatch(f.y.loadAll());case 1:case"end":return e.stop()}},e,this)}))}},{key:"onSubmitted",value:function(e){this.store.dispatch(u.$.addFromDirectory({usersFromDirectory:e})),this.close()}},{key:"onCancelled",value:function(){this.close()}},{key:"close",value:function(){this.display=!1}},{key:"onSearchUsers",value:function(e){this.store.dispatch(u.$.loadAllByFilter({userFilter:e}))}}]),e}()).\u0275fac=function(e){return new(e||r)(a.Y36(d.yh))},r.\u0275cmp=a.Xpm({type:r,selectors:[["bia-user-add-from-directory-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:21,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","draggable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(e,t){1&e&&(a.TgZ(0,"p-dialog",0),a.NdJ("visibleChange",function(e){return t._display=e}),a.TgZ(1,"p-header"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"bia-user-from-directory-form",1),a.NdJ("searchUsers",function(e){return t.onSearchUsers(e)})("cancel",function(){return t.onCancelled()})("save",function(e){return t.onSubmitted(e)}),a.ALo(5,"async"),a.ALo(6,"async"),a.qZA(),a.qZA()),2&e&&(a.Akn(a.DdM(19,A)),a.Q6J("focusOnShow",!1)("visible",t._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("draggable",!1)("contentStyle",a.DdM(20,g)),a.xp6(2),a.hij(" ",a.lcZ(3,13,"user.add")," "),a.xp6(2),a.Q6J("users",a.lcZ(5,15,t.usersFromDirectory$))("domains",a.lcZ(6,17,t.ldapDomains$)))},directives:[p.V,m.h4,h._],pipes:[y.X$,v.Ov],styles:[""]}),r)},94529:function(e,t,n){n.d(t,{b:function(){return r}});var r=function e(t,n){i(this,e),this.key=t,this.value=n}},16244:function(e,t,n){n.d(t,{e:function(){return o}});var r,o=((r=o||(o={}))[r.Unchanged=0]="Unchanged",r[r.Added=1]="Added",r[r.Modified=2]="Modified",r[r.Deleted=3]="Deleted",o)}}])}();