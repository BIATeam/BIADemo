"use strict";(self.webpackChunkBIADemo=self.webpackChunkBIADemo||[]).push([[760],{8394:(O,u,o)=>{o.d(u,{y:()=>t});var t,l,e=o(5094);(l=t||(t={})).loadAll=(0,e.PH)("[Domain LDAP Domains] Load all"),l.loadAllSuccess=(0,e.PH)("[Domain LDAP Domains] Load all success",(0,e.Ky)()),l.failure=(0,e.PH)("[Domain LDAP Domains] Failure",(0,e.Ky)())},601:(O,u,o)=>{o.d(u,{q2:()=>s,ll:()=>A});var e=o(5685),t=o(5094),l=o(8394);const d=(0,e.H)({selectId:m=>m.ldapName,sortComparer:!1}),h=d.getInitialState({}),y=(0,t.Lq)(h,(0,t.on)(l.y.loadAllSuccess,(m,{ldapDomains:v})=>d.setAll(v,m)));function A(m,v){return(0,t.UY)({ldapDomain:y})(m,v)}const _=(0,t.ZF)("domain-ldap-domains"),E=(0,t.P1)(_,m=>m.ldapDomain),{selectAll:s}=d.getSelectors(E)},2566:(O,u,o)=>{o.d(u,{p:()=>p});var e=o(6517),t=o(5094),l=o(5424),d=o(1086),h=o(373),y=o(7545),A=o(4850),_=o(7221),E=o(4147),s=o(5e3);let m=(()=>{class n extends E.Z{constructor(i){super(i,"Roles")}}return n.\u0275fac=function(i){return new(i||n)(s.LFG(s.zs3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=o(6875),c=o(42);let F=(()=>{class n{constructor(i,U,C){this.actions$=i,this.roleDas=U,this.biaMessageService=C,this.loadAll$=(0,e.GW)(()=>this.actions$.pipe((0,e.l4)(v.E.loadAll),(0,h.j)("teamTypeId"),(0,y.w)(L=>this.roleDas.getList({endpoint:"allOptions?teamTypeId="+L}).pipe((0,A.U)(T=>v.E.loadAllSuccess({roles:null==T?void 0:T.sort((R,x)=>R.display.localeCompare(x.display))})),(0,_.K)(T=>(this.biaMessageService.showError(),(0,d.of)(v.E.failure({error:T}))))))))}}return n.\u0275fac=function(i){return new(i||n)(s.LFG(e.eX),s.LFG(m),s.LFG(c.X))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),p=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[],imports:[[t.Aw.forFeature("domain-role-options",l.ll),e.sQ.forFeature([F])]]}),n})()},5424:(O,u,o)=>{o.d(u,{wA:()=>m,ll:()=>_});var e=o(5685),t=o(5094),l=o(6875);const d=(0,e.H)({selectId:c=>c.id,sortComparer:!1}),h=d.getInitialState({}),y=(0,t.Lq)(h,(0,t.on)(l.E.loadAllSuccess,(c,{roles:F})=>d.setAll(F,c)));function _(c,F){return(0,t.UY)({roleOptions:y})(c,F)}const E=(0,t.ZF)("domain-role-options"),s=(0,t.P1)(E,c=>c.roleOptions),{selectAll:m}=d.getSelectors(s)},6875:(O,u,o)=>{o.d(u,{E:()=>t});var t,l,e=o(5094);(l=t||(t={})).loadAll=(0,e.PH)("[Domain Role Options] Load all",(0,e.Ky)()),l.loadAllSuccess=(0,e.PH)("[Domain Role Options] Load all success",(0,e.Ky)()),l.failure=(0,e.PH)("[Domain Role Options] Failure",(0,e.Ky)())},8579:(O,u,o)=>{o.d(u,{_:()=>v});var e=o(5e3),t=o(3075),l=o(4626),d=o(277),h=o(9808),y=o(4036),A=o(2145),_=o(845),E=o(7171);const s=function(){return{width:"100%"}};function m(c,F){if(1&c){const p=e.EpF();e.TgZ(0,"div",7)(1,"p-dropdown",14),e.NdJ("onChange",function(f){return e.CHM(p),e.oxw().onDomainChange(f)}),e.qZA(),e.TgZ(2,"label"),e._uU(3,"LDAP Domain"),e.qZA()()}if(2&c){const p=e.oxw();e.xp6(1),e.Akn(e.DdM(3,s)),e.Q6J("options",p.domains)}}let v=(()=>{class c{constructor(p,n){var f,i;this.formBuilder=p,this.searchUsers=new e.vpe,this.save=new e.vpe,this.cancel=new e.vpe,this.returnSizeOptions=[10,25,50,100],this.useKeycloak=!1,this.initForm(),this.useKeycloak=null===(i=null===(f=n.appSettings)||void 0===f?void 0:f.keycloak)||void 0===i?void 0:i.isActive}ngOnChanges(p){this.users&&p.users&&(this.users=this.users.sort((n,f)=>n.displayName.localeCompare(f.displayName)))}initForm(){this.form=this.formBuilder.group({selectedUsers:[this.selectedUsers,t.kI.required],domains:[this.domains],returnSize:this.returnSizeOptions[0]})}onCancel(){this.reset(),this.cancel.next()}onSubmit(){this.form.valid&&(this.save.emit(this.form.value.selectedUsers),this.reset())}reset(){this.selectedDomain="",this.form.reset()}onSearchUsers(p){this.searchUsers.emit({filter:p.query,ldapName:this.selectedDomain,returnSize:this.form.value.returnSize?this.form.value.returnSize:this.returnSizeOptions[0]})}onDomainChange(p){this.selectedDomain=p.value?p.value.ldapName:""}}return c.\u0275fac=function(p){return new(p||c)(e.Y36(t.qu),e.Y36(l.X))},c.\u0275cmp=e.Xpm({type:c,selectors:[["bia-user-from-directory-form"]],inputs:{users:"users",domains:"domains",returnSizeOptions:"returnSizeOptions"},outputs:{searchUsers:"searchUsers",save:"save",cancel:"cancel"},features:[e.TTD],decls:24,vars:29,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","column","fxLayoutAlign","flex-start",1,"p-fluid","app-field-container"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","50",1,"app-field-container"],["class","p-float-label",4,"ngIf"],["fxFlex","10",1,"app-field-container"],["fxFlex","30",1,"app-field-container"],[1,"p-float-label"],["placeholder","\xa0","formControlName","returnSize","appendTo","body",3,"options"],["fxFlex","90",1,"app-field-container"],["formControlName","selectedUsers","field","displayName","appendTo","body",3,"multiple","suggestions","delay","size","minLength","inputStyle","completeMethod"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"],["placeholder","\xa0","formControlName","domains","optionLabel","displayName","showClear","true","appendTo","body",3,"options","onChange"]],template:function(p,n){1&p&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return n.onSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,m,4,4,"div",4),e.qZA(),e._UZ(5,"div",5),e.TgZ(6,"div",6)(7,"div",7),e._UZ(8,"p-dropdown",8),e.TgZ(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"div",2)(13,"div",9)(14,"div",7)(15,"p-autoComplete",10),e.NdJ("completeMethod",function(i){return n.onSearchUsers(i)}),e.qZA(),e.TgZ(16,"label"),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()(),e.TgZ(19,"div",11),e._UZ(20,"button",12),e.ALo(21,"translate"),e.TgZ(22,"button",13),e.NdJ("click",function(){return n.onCancel()}),e.ALo(23,"translate"),e.qZA()()()),2&p&&(e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngIf",!0!==n.useKeycloak),e.xp6(4),e.Akn(e.DdM(26,s)),e.Q6J("options",n.returnSizeOptions),e.xp6(2),e.Oqu(e.lcZ(11,18,"bia.itemsBySearch")),e.xp6(5),e.Akn(e.DdM(27,s)),e.Q6J("multiple",!0)("suggestions",n.users)("delay",700)("size",30)("minLength",3)("inputStyle",e.DdM(28,s)),e.xp6(2),e.Oqu(e.lcZ(18,20,"bia.select")),e.xp6(3),e.s9C("label",e.lcZ(21,22,"bia.save")),e.Q6J("disabled",!n.form.valid),e.xp6(2),e.s9C("label",e.lcZ(23,24,"bia.cancel")))},directives:[t._Y,t.JL,d.xw,t.sg,d.Wh,d.yH,h.O5,y.Lt,t.JJ,t.u,A.Qc,d.SQ,_.Hq],pipes:[E.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),c})()},7928:(O,u,o)=>{o.d(u,{o1:()=>s,ll:()=>A});var e=o(5685),t=o(5094),l=o(4354);const d=(0,e.H)({selectId:m=>m.domain+"\\"+m.login,sortComparer:!1}),h=d.getInitialState({}),y=(0,t.Lq)(h,(0,t.on)(l.$.loadAllSuccess,(m,{users:v})=>d.setAll(v,m)));function A(m,v){return(0,t.UY)({usersFromDirectory:y})(m,v)}const _=(0,t.ZF)("users-from-directory"),E=(0,t.P1)(_,m=>m.usersFromDirectory),{selectAll:s}=d.getSelectors(E)},4354:(O,u,o)=>{o.d(u,{$:()=>t});var t,l,e=o(5094);(l=t||(t={})).loadAllByFilter=(0,e.PH)("[Feature Users From AD] Load all in AD by filter",(0,e.Ky)()),l.loadAllSuccess=(0,e.PH)("[Feature Users From AD] Load all success",(0,e.Ky)()),l.failure=(0,e.PH)("[Feature Users From AD] Failure",(0,e.Ky)()),l.addFromDirectory=(0,e.PH)("[Feature Users From AD] CreateUserFromDirectory",(0,e.Ky)())},3822:(O,u,o)=>{o.d(u,{q:()=>$});var e=o(6517),t=o(5094),l=o(601),d=o(1086),h=o(7545),y=o(4850),A=o(7221),_=o(8394),E=o(4147),s=o(5e3);let m=(()=>{class r{constructor(){}formatDisplayNameFromObs(a){return a.pipe((0,y.U)(D=>this.formatDisplayNames(D)))}formatDisplayNames(a){return a.forEach(D=>{D=this.formatDisplayName(D)}),a}formatDisplayName(a){return a.displayName=`${a.name} (${a.ldapName})`,a}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),v=(()=>{class r extends E.Z{constructor(a,D){super(a,"ldapDomains"),this.ldapDomainService=D}getAll(){return this.ldapDomainService.formatDisplayNameFromObs(this.http.get(this.route))}}return r.\u0275fac=function(a){return new(a||r)(s.LFG(s.zs3),s.LFG(m))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var c=o(42);let F=(()=>{class r{constructor(a,D,P){this.actions$=a,this.ldapDomainDas=D,this.biaMessageService=P,this.loadAll$=(0,e.GW)(()=>this.actions$.pipe((0,e.l4)(_.y.loadAll),(0,h.w)(K=>this.ldapDomainDas.getAll().pipe((0,y.U)(M=>_.y.loadAllSuccess({ldapDomains:M})),(0,A.K)(M=>(this.biaMessageService.showError(),(0,d.of)(_.y.failure({error:M}))))))))}}return r.\u0275fac=function(a){return new(a||r)(s.LFG(e.eX),s.LFG(v),s.LFG(c.X))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac}),r})(),p=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[t.Aw.forFeature("domain-ldap-domains",l.ll),e.sQ.forFeature([F])]]}),r})();var n=o(3931),f=o(6135),U=(o(8579),o(7928)),C=o(373),L=o(4354);let T=(()=>{class r{constructor(){}formatDisplayNameFromADObs(a){return a.pipe((0,y.U)(D=>this.formatDisplayNamesFromAD(D)))}formatDisplayNamesFromAD(a){return a.forEach(D=>{D=this.formatDisplayNameFromAD(D)}),a}formatDisplayNameFromAD(a){return a.displayName=`${a.lastName} ${a.firstName} (${a.domain}\\${a.login})`,a}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),R=(()=>{class r extends E.Z{constructor(a,D){super(a,"users"),this.userService=D}getAllByFilter(a,D,P){return this.userService.formatDisplayNameFromADObs(this.http.get(`${this.route}fromAD?filter=${a}&ldapName=${D}&returnSize=${P}`))}}return r.\u0275fac=function(a){return new(a||r)(s.LFG(s.zs3),s.LFG(T))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var x=o(6048),N=o(7171);let Z=(()=>{class r{constructor(a,D,P,K){this.actions$=a,this.userFromDirectoryDas=D,this.biaMessageService=P,this.translateService=K,this.loadAllByFilter$=(0,e.GW)(()=>this.actions$.pipe((0,e.l4)(L.$.loadAllByFilter),(0,h.w)(M=>this.userFromDirectoryDas.getAllByFilter(M.userFilter.filter,M.userFilter.ldapName,M.userFilter.returnSize).pipe((0,y.U)(S=>L.$.loadAllSuccess({users:S})),(0,A.K)(S=>(this.biaMessageService.showError(),(0,d.of)(L.$.failure({error:S})))))))),this.addFromDirectory$=(0,e.GW)(()=>this.actions$.pipe((0,e.l4)(L.$.addFromDirectory),(0,C.j)("usersFromDirectory"),(0,h.w)(M=>this.userFromDirectoryDas.save({items:M,endpoint:"addFromDirectory"}).pipe((0,y.U)(S=>(this.biaMessageService.showAddSuccess(),x.d.userAddedInListSuccess({usersAdded:S}))),(0,A.K)(S=>{if(303===S.status){let I="";S.error&&S.error.forEach(W=>{const z=`${this.translateService.instant("user.cannotAddMember")}`.replace("${login}",W);""!==I&&(I+="\n"),I+=z}),this.biaMessageService.showErrorDetail(I)}else this.biaMessageService.showError();return(0,d.of)(L.$.failure({error:{concern:"CREATE",error:S}}))})))))}}return r.\u0275fac=function(a){return new(a||r)(s.LFG(e.eX),s.LFG(R),s.LFG(c.X),s.LFG(N.sK))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac}),r})();o(5224);let $=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[f.m,t.Aw.forFeature("users-from-directory",U.ll),e.sQ.forFeature([Z]),n.U,p]]}),r})()},5224:(O,u,o)=>{o.d(u,{C:()=>p});var e=o(655),t=o(5e3),l=o(4354),d=o(7928),h=o(601),y=o(8394),A=o(5094),_=o(5315),E=o(9783),s=o(8579),m=o(7171),v=o(9808);const c=function(){return{minWidth:"50vw"}},F=function(){return{overflow:"auto"}};let p=(()=>{class n{constructor(i){this.store=i,this._display=!1,this.displayChange=new t.vpe}set display(i){this._display=i,this.displayChange.emit(this._display)}ngOnInit(){return(0,e.mG)(this,void 0,void 0,function*(){this.usersFromDirectory$=this.store.select(d.o1),this.ldapDomains$=this.store.select(h.q2),this.store.dispatch(y.y.loadAll())})}onSubmitted(i){this.store.dispatch(l.$.addFromDirectory({usersFromDirectory:i})),this.close()}onCancelled(){this.close()}close(){this.display=!1}onSearchUsers(i){this.store.dispatch(l.$.loadAllByFilter({userFilter:i}))}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(A.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["bia-user-add-from-directory-dialog"]],inputs:{display:"display"},outputs:{displayChange:"displayChange"},decls:7,vars:21,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","draggable","contentStyle","visibleChange"],[3,"users","domains","searchUsers","cancel","save"]],template:function(i,U){1&i&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(L){return U._display=L}),t.TgZ(1,"p-header"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"bia-user-from-directory-form",1),t.NdJ("searchUsers",function(L){return U.onSearchUsers(L)})("cancel",function(){return U.onCancelled()})("save",function(L){return U.onSubmitted(L)}),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA()()),2&i&&(t.Akn(t.DdM(19,c)),t.Q6J("focusOnShow",!1)("visible",U._display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("draggable",!1)("contentStyle",t.DdM(20,F)),t.xp6(2),t.hij(" ",t.lcZ(3,13,"user.add")," "),t.xp6(2),t.Q6J("users",t.lcZ(5,15,U.usersFromDirectory$))("domains",t.lcZ(6,17,U.ldapDomains$)))},directives:[_.V,E.h4,s._],pipes:[m.X$,v.Ov],styles:[""]}),n})()},4529:(O,u,o)=>{o.d(u,{b:()=>e});class e{constructor(l,d){this.key=l,this.value=d}}}}]);