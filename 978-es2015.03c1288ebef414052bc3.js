"use strict";(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[978],{33978:function(t,i,e){e.r(i),e.d(i,{NotificationModule:function(){return Be}});var n=e(2694),o=e(86710),a=e(91601),s=e(25917),c=e(92996),r=e(43190),l=e(88002),u=e(5304),p=e(94612),d=e(57057);const f=(0,o.PH)("[Notifications] Load all by post",(0,o.Ky)()),h=(0,o.PH)("[Notifications] Load",(0,o.Ky)()),g=(0,o.PH)("[Notifications] Create",(0,o.Ky)()),m=(0,o.PH)("[Notifications] Update",(0,o.Ky)()),y=(0,o.PH)("[Notifications] Remove",(0,o.Ky)()),b=(0,o.PH)("[Notifications] Multi Remove",(0,o.Ky)()),x=(0,o.PH)("[Notifications] Load all by post success",(0,o.Ky)()),v=(0,o.PH)("[Notifications] Load success",(0,o.Ky)()),Z=(0,o.PH)("[Notifications] Failure",(0,o.Ky)());var w=e(74147),S=e(37716);let C=(()=>{class t extends w.Z{constructor(t){super(t,"Notifications")}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=e(80273);const T=(0,A.H)({selectId:t=>t.id,sortComparer:!1}),L=T.getInitialState({totalCount:0,currentNotification:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),O=(0,o.Lq)(L,(0,o.on)(f,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!0})),(0,o.on)(h,t=>Object.assign(Object.assign({},t),{loadingGet:!0})),(0,o.on)(x,(t,{result:i,event:e})=>{const n=T.setAll(i.data,t);return n.totalCount=i.totalCount,n.lastLazyLoadEvent=e,n.loadingGetAll=!1,n}),(0,o.on)(v,(t,{notification:i})=>Object.assign(Object.assign({},t),{currentNotification:i,loadingGet:!1})),(0,o.on)(Z,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!1,loadingGet:!1})));function N(t,i){return(0,o.UY)({notifications:O})(t,i)}const q=(0,o.ZF)("notifications"),M=(0,o.P1)(q,t=>t.notifications),I=(0,o.P1)(M,t=>t.totalCount),J=(0,o.P1)(M,t=>t.currentNotification),D=(0,o.P1)(M,t=>t.lastLazyLoadEvent),Q=(0,o.P1)(M,t=>t.loadingGet),$=(0,o.P1)(M,t=>t.loadingGetAll),{selectAll:Y}=T.getSelectors(M);var F=e(82762),U=e(42);let P=(()=>{class t{constructor(i,e,n,o){this.actions$=i,this.notificationDas=e,this.biaMessageService=n,this.store=o,this.loadAllByPost$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(f),(0,c.j)("event"),(0,r.w)(t=>this.notificationDas.getListByPost(t).pipe((0,l.U)(i=>x({result:i,event:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Z({error:t})))))))),this.load$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(h),(0,c.j)("id"),(0,r.w)(t=>this.notificationDas.get(t).pipe((0,l.U)(t=>v({notification:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Z({error:t})))))))),this.create$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(g),(0,c.j)("notification"),(0,p.b)(t=>(0,s.of)(t).pipe((0,d.M)(this.store.select(D)))),(0,r.w)(([i,e])=>this.notificationDas.post(i).pipe((0,l.U)(()=>(this.biaMessageService.showAddSuccess(),t.useSignalR?(0,F.b)():f({event:e}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Z({error:t})))))))),this.update$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(m),(0,c.j)("notification"),(0,p.b)(t=>(0,s.of)(t).pipe((0,d.M)(this.store.select(D)))),(0,r.w)(([i,e])=>this.notificationDas.put(i,i.id).pipe((0,l.U)(()=>(this.biaMessageService.showUpdateSuccess(),t.useSignalR?(0,F.b)():f({event:e}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Z({error:t})))))))),this.destroy$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(y),(0,c.j)("id"),(0,p.b)(t=>(0,s.of)(t).pipe((0,d.M)(this.store.select(D)))),(0,r.w)(([i,e])=>this.notificationDas.delete(i).pipe((0,l.U)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,F.b)():f({event:e}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Z({error:t})))))))),this.multiDestroy$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(b),(0,c.j)("ids"),(0,p.b)(t=>(0,s.of)(t).pipe((0,d.M)(this.store.select(D)))),(0,r.w)(([i,e])=>this.notificationDas.deletes(i).pipe((0,l.U)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,F.b)():f({event:e}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Z({error:t}))))))))}}return t.useSignalR=!1,t.\u0275fac=function(i){return new(i||t)(S.LFG(a.eX),S.LFG(C),S.LFG(U.X),S.LFG(o.yh))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})();var k=e(75319),B=e(88385),_=e(79090),E=e(40136),H=e(8340),z=e(49457),R=e(38042),j=e(29206),G=e(28049),K=e(59142);let V=(()=>{class t{constructor(t,i,e){this.store=t,this.signalRService=i,this.authService=e}initialize(){console.log("%c [Notifications] Register SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-notifications",t=>{const i=JSON.parse(t);this.IsInMyDisplay(i)&&this.store.select(D).pipe((0,G.P)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(f({event:t}))})}),this.signalRService.addMethod("refresh-notifications-several",t=>{JSON.parse(t).some(t=>this.IsInMyDisplay(t))&&this.store.select(D).pipe((0,G.P)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(f({event:t}))})}),this.targetedFeature={parentKey:this.authService.getAdditionalInfos().userData.currentSiteId.toString(),featureName:"notifications"},this.signalRService.joinGroup(this.targetedFeature)}IsInMyDisplay(t){const i=this.authService.getAdditionalInfos(),e=t.siteId===i.userData.currentSiteId,n=null==t.notifiedUsers||0===t.notifiedUsers.length||t.notifiedUsers.some(t=>t.id===i.userInfo.id),o=null==t.notifiedPermissions||0===t.notifiedPermissions.length||t.notifiedPermissions.some(t=>this.authService.hasPermission(t.id.toString()));return e&&n&&o}destroy(){console.log("%c [Notifications] Unregister SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-notifications"),this.signalRService.leaveGroup(this.targetedFeature)}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(o.yh),S.LFG(K.Y),S.LFG(H.e))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var X=e(46468),W=e(9112);const tt=(0,o.PH)("[Domain Language Options] Load all"),it=(0,o.PH)("[Domain Language Options] Load all success",(0,o.Ky)()),et=(0,o.PH)("[Domain Language Options] Failure",(0,o.Ky)()),nt=(0,A.H)({selectId:t=>t.id,sortComparer:!1}),ot=nt.getInitialState({}),at=(0,o.Lq)(ot,(0,o.on)(it,(t,{languages:i})=>nt.setAll(i,t)));function st(t,i){return(0,o.UY)({languageOptions:at})(t,i)}const ct=(0,o.ZF)("domain-language-options"),rt=(0,o.P1)(ct,t=>t.languageOptions),{selectAll:lt}=nt.getSelectors(rt),ut=(0,o.PH)("[Domain Notification Type Options] Load all"),pt=(0,o.PH)("[Domain Notification Type Options] Load all success",(0,o.Ky)()),dt=(0,o.PH)("[Domain Notification Type Options] Failure",(0,o.Ky)()),ft=(0,A.H)({selectId:t=>t.id,sortComparer:!1}),ht=ft.getInitialState({}),gt=(0,o.Lq)(ht,(0,o.on)(pt,(t,{notificationTypes:i})=>ft.setAll(i,t)));function mt(t,i){return(0,o.UY)({notificationTypeOptions:gt})(t,i)}const yt=(0,o.ZF)("domain-notification-type-options"),bt=(0,o.P1)(yt,t=>t.notificationTypeOptions),{selectAll:xt}=ft.getSelectors(bt),vt=(0,o.PH)("[Domain Permission Options] Load all"),Zt=(0,o.PH)("[Domain Permission Options] Load all success",(0,o.Ky)()),wt=(0,o.PH)("[Domain Permission Options] Failure",(0,o.Ky)()),St=(0,A.H)({selectId:t=>t.id,sortComparer:!1}),Ct=St.getInitialState({}),At=(0,o.Lq)(Ct,(0,o.on)(Zt,(t,{permissions:i})=>St.setAll(i,t)));function Tt(t,i){return(0,o.UY)({permissionOptions:At})(t,i)}const Lt=(0,o.ZF)("domain-permission-options"),Ot=(0,o.P1)(Lt,t=>t.permissionOptions),{selectAll:Nt}=St.getSelectors(Ot);var qt=e(43590),Mt=e(71585),It=e(94529);let Jt=(()=>{class t{constructor(t){this.store=t,this.notificationTypeOptions$=this.store.select(xt),this.permissionOptions$=this.store.select(Nt),this.userOptions$=this.store.select(qt.yp),this.languageOptions$=this.store.select(lt),this.dictOptionDtos$=(0,W.aj)([this.notificationTypeOptions$,this.permissionOptions$,this.userOptions$]).pipe((0,l.U)(t=>[new It.b("type",t[0]),new It.b("notifiedPermissions",t[1]),new It.b("notifiedUsers",t[2]),new It.b("createdBy",t[2])]))}loadAllOptions(){this.store.dispatch(ut()),this.store.dispatch(vt()),this.store.dispatch((0,Mt.Ae)()),this.store.dispatch(tt())}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(o.yh))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Dt=e(81780),Qt=e(35618),$t=e(81606),Yt=e(76743),Ft=e(38583),Ut=e(3679),Pt=e(11466),kt=e(86320),Bt=e(70667),_t=e(33013),Et=e(13928),Ht=e(88030),zt=e(50103),Rt=e(36949),jt=e(12332),Gt=e(88598),Kt=e(45862),Vt=e(49067);function Xt(t,i){1&t&&(S.TgZ(0,"th",10),S._UZ(1,"p-tableHeaderCheckbox"),S.qZA())}function Wt(t,i){if(1&t&&(S.TgZ(0,"th",12),S._uU(1),S.ALo(2,"translate"),S._UZ(3,"p-sortIcon",13),S.qZA()),2&t){const t=S.oxw().$implicit;S.Q6J("pSortableColumn",t.field),S.xp6(1),S.hij(" ",S.lcZ(2,3,null==t?null:t.header)," "),S.xp6(2),S.Q6J("field",t.field)}}function ti(t,i){if(1&t&&(S.TgZ(0,"th"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&t){const t=S.oxw().$implicit;S.xp6(1),S.hij(" ",S.lcZ(2,1,null==t?null:t.header)," ")}}function ii(t,i){if(1&t&&(S.ynx(0),S.YNc(1,Wt,4,5,"th",11),S.YNc(2,ti,3,3,"th",9),S.BQk()),2&t){const t=i.$implicit;S.xp6(1),S.Q6J("ngIf",!0===(null==t?null:t.isSortable)),S.xp6(1),S.Q6J("ngIf",!0!==(null==t?null:t.isSortable))}}function ei(t,i){1&t&&S._UZ(0,"th")}const ni=function(t){return{"p-state-filled":t}};function oi(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"span",17),S.TgZ(1,"input",18),S.NdJ("input",function(i){S.CHM(t);const e=S.oxw().$implicit;return S.oxw(3),S.MAs(1).filter(i.target.value,e.field,e.filterMode)}),S.ALo(2,"translate"),S.qZA(),S.qZA()}if(2&t){const t=S.oxw().$implicit;S.oxw(3);const i=S.MAs(1);S.xp6(1),S.s9C("type","Number"===t.type?"number":"text"),S.s9C("placeholder",void 0!==t.searchPlaceholder?t.searchPlaceholder:!0===t.isDate?S.lcZ(2,4,"bia.dateIso8601"):""),S.Q6J("value",null==i.filters[t.field]?null:i.filters[t.field].value)("ngClass",S.VKq(6,ni,""!==(null==i.filters[t.field]?null:i.filters[t.field].value)))}}function ai(t,i){if(1&t&&(S.TgZ(0,"th",15),S.YNc(1,oi,3,8,"span",16),S.qZA()),2&t){const t=i.$implicit;S.Q6J("ngSwitch",t.field),S.xp6(1),S.Q6J("ngIf",!0===t.isSearchable)}}function si(t,i){if(1&t&&(S.TgZ(0,"tr"),S.YNc(1,ei,1,0,"th",9),S.YNc(2,ai,2,2,"th",14),S.qZA()),2&t){const t=S.oxw().$implicit,i=S.oxw(2);S.xp6(1),S.Q6J("ngIf",i.canSelectElement),S.xp6(1),S.Q6J("ngForOf",t)}}function ci(t,i){if(1&t&&(S.TgZ(0,"tr"),S.YNc(1,Xt,2,0,"th",7),S.YNc(2,ii,3,2,"ng-container",8),S.qZA(),S.YNc(3,si,3,2,"tr",9)),2&t){const t=i.$implicit,e=S.oxw(2);S.xp6(1),S.Q6J("ngIf",e.canSelectElement),S.xp6(1),S.Q6J("ngForOf",t),S.xp6(1),S.Q6J("ngIf",e.showColSearch)}}function ri(t,i){if(1&t&&S._UZ(0,"p-tableCheckbox",23),2&t){const t=S.oxw(2).$implicit;S.Q6J("value",t)}}function li(t,i){1&t&&S._UZ(0,"i",24)}function ui(t,i){if(1&t&&(S.TgZ(0,"td"),S.YNc(1,ri,1,1,"p-tableCheckbox",21),S.YNc(2,li,1,0,"i",22),S.qZA()),2&t){const t=S.oxw().$implicit,i=S.oxw(2);S.xp6(1),S.Q6J("ngIf",!0!==i.isFooter(t)&&t.id>0),S.xp6(1),S.Q6J("ngIf",!0===i.isFooter(t))}}function pi(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"input",29),S.NdJ("change",function(){return S.CHM(t),S.oxw(6).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(3).$implicit;S.xp6(1),S.Q6J("formControlName",t.field)}}function di(t,i){1&t&&(S.TgZ(0,"span",30),S._uU(1,"*"),S.qZA())}function fi(t,i){if(1&t&&(S.ynx(0,15),S.YNc(1,pi,2,1,"ng-container",27),S.BQk(),S.YNc(2,di,2,0,"span",28)),2&t){const t=S.oxw(2).$implicit,i=S.oxw(3);S.Q6J("ngSwitch",t.field),S.xp6(2),S.Q6J("ngIf",!0===i.isRequired(t.field))}}function hi(t,i){1&t&&S.YNc(0,fi,3,2,"ng-template",26)}function gi(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(3).$implicit,i=S.oxw().$implicit;S.xp6(1),S.hij(" ",i[t.field]," ")}}function mi(t,i){if(1&t&&(S.ynx(0,15),S.YNc(1,gi,2,1,"ng-container",27),S.BQk()),2&t){const t=S.oxw(2).$implicit;S.Q6J("ngSwitch",t.field)}}function yi(t,i){1&t&&S.YNc(0,mi,2,1,"ng-template",31)}const bi=function(){return{width:"100%"}};function xi(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-dropdown",35),S.NdJ("onChange",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit,i=S.oxw(3);S.xp6(1),S.Akn(S.DdM(4,bi)),S.Q6J("formControlName",t.field)("options",i.getOptionDto(t.field))}}function vi(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-multiSelect",36),S.NdJ("onChange",function(){return S.CHM(t),S.oxw(7).onChange()})("onPanelShow",function(){return S.CHM(t),S.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return S.CHM(t),S.oxw(7).onPanelHideMultiSelect()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit,i=S.oxw(3);S.xp6(1),S.Akn(S.DdM(4,bi)),S.Q6J("formControlName",t.field)("options",i.getOptionDto(t.field))}}function Zi(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-checkbox",37),S.NdJ("onChange",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("binary",!0)("formControlName",t.field)}}function wi(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"input",38),S.NdJ("change",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("formControlName",t.field)}}function Si(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",39),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,bi)),S.Q6J("formControlName",t.field)("showButtonBar",!0)("inputStyle",S.DdM(6,bi))}}function Ci(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",40),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,bi)),S.Q6J("formControlName",t.field)("inputStyle",S.DdM(6,bi))("timeOnly",!0)}}function Ai(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",41),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,bi)),S.Q6J("formControlName",t.field)("inputStyle",S.DdM(6,bi))("timeOnly",!0)}}function Ti(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",42),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,bi)),S.Q6J("formControlName",t.field)("inputStyle",S.DdM(6,bi))("timeOnly",!0)}}function Li(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",43),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,bi)),S.Q6J("formControlName",t.field)("showButtonBar",!0)("inputStyle",S.DdM(6,bi))}}function Oi(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"input",44),S.NdJ("change",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("maxlength",t.maxlength)("formControlName",t.field)}}function Ni(t,i){1&t&&(S.TgZ(0,"span",30),S._uU(1,"*"),S.qZA())}function qi(t,i){if(1&t&&(S.ynx(0,15),S.YNc(1,xi,2,5,"ng-container",34),S.YNc(2,vi,2,5,"ng-container",34),S.YNc(3,Zi,2,2,"ng-container",34),S.YNc(4,wi,2,1,"ng-container",34),S.YNc(5,Si,2,7,"ng-container",34),S.YNc(6,Ci,2,7,"ng-container",34),S.YNc(7,Ai,2,7,"ng-container",34),S.YNc(8,Ti,2,7,"ng-container",34),S.YNc(9,Li,2,7,"ng-container",34),S.YNc(10,Oi,2,2,"ng-container",27),S.BQk(),S.YNc(11,Ni,2,0,"span",28)),2&t){const t=S.oxw(3).$implicit,i=S.oxw(3);S.Q6J("ngSwitch",t.type),S.xp6(1),S.Q6J("ngSwitchCase","OneToMany"),S.xp6(1),S.Q6J("ngSwitchCase","ManyToMany"),S.xp6(1),S.Q6J("ngSwitchCase","Boolean"),S.xp6(1),S.Q6J("ngSwitchCase","Number"),S.xp6(1),S.Q6J("ngSwitchCase","Date"),S.xp6(1),S.Q6J("ngSwitchCase","Time"),S.xp6(1),S.Q6J("ngSwitchCase","TimeOnly"),S.xp6(1),S.Q6J("ngSwitchCase","TimeSecOnly"),S.xp6(1),S.Q6J("ngSwitchCase","DateTime"),S.xp6(2),S.Q6J("ngIf",!0===i.isRequired(t.field))}}function Mi(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(5).$implicit,i=S.oxw().$implicit;S.xp6(1),S.hij(" ",null==i[t.field]?null:i[t.field].display," ")}}function Ii(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(5).$implicit,i=S.oxw().$implicit,e=S.oxw(2);S.xp6(1),S.hij(" ",e.formatDisplayName(i[t.field])," ")}}function Ji(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.ALo(2,"formatValue"),S.BQk()),2&t){const t=S.oxw(5).$implicit,i=S.oxw().$implicit;S.xp6(1),S.hij(" ",S.xi3(2,1,i[t.field],t)," ")}}function Di(t,i){if(1&t&&(S.ynx(0),S.ynx(1,15),S.YNc(2,Mi,2,1,"ng-container",34),S.YNc(3,Ii,2,1,"ng-container",34),S.YNc(4,Ji,3,4,"ng-container",27),S.BQk(),S.BQk()),2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("ngSwitch",t.type),S.xp6(1),S.Q6J("ngSwitchCase","OneToMany"),S.xp6(1),S.Q6J("ngSwitchCase","ManyToMany")}}function Qi(t,i){if(1&t&&S.YNc(0,Di,5,3,"ng-container",9),2&t){const t=S.oxw(4).$implicit,i=S.oxw(2);S.Q6J("ngIf",!0!==i.isFooter(t))}}function $i(t,i){if(1&t&&(S.YNc(0,qi,12,11,"ng-template",32),S.YNc(1,Qi,1,1,"ng-template",null,33,S.W1O)),2&t){const t=S.MAs(2),i=S.oxw(2).$implicit;S.Q6J("ngIf",!0===i.isEditable)("ngIfElse",t)}}function Yi(t,i){1&t&&S.YNc(0,$i,3,2,"ng-template",26)}function Fi(t,i){1&t&&(S.TgZ(0,"label"),S._uU(1,"-"),S.qZA())}function Ui(t,i){if(1&t&&S.YNc(0,Fi,2,0,"label",9),2&t){const t=S.oxw(3).$implicit;S.Q6J("ngIf",!0===t.isEditable)}}function Pi(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(4).$implicit,i=S.oxw().$implicit;S.xp6(1),S.hij(" ",null==i[t.field]?null:i[t.field].display," ")}}function ki(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(4).$implicit,i=S.oxw().$implicit,e=S.oxw(2);S.xp6(1),S.hij(" ",e.formatDisplayName(i[t.field])," ")}}function Bi(t,i){1&t&&S._UZ(0,"i",47)}function _i(t,i){if(1&t&&(S.ynx(0),S.YNc(1,Bi,1,0,"i",46),S.BQk()),2&t){const t=S.oxw(4).$implicit,i=S.oxw().$implicit;S.xp6(1),S.Q6J("ngIf",!0===i[t.field])}}function Ei(t,i){if(1&t&&(S.ynx(0),S._uU(1),S.ALo(2,"formatValue"),S.BQk()),2&t){const t=S.oxw(4).$implicit,i=S.oxw().$implicit;S.xp6(1),S.hij(" ",S.xi3(2,1,i[t.field],t)," ")}}function Hi(t,i){if(1&t&&(S.ynx(0,15),S.YNc(1,Pi,2,1,"ng-container",34),S.YNc(2,ki,2,1,"ng-container",34),S.YNc(3,_i,2,1,"ng-container",34),S.YNc(4,Ei,3,4,"ng-container",27),S.BQk()),2&t){const t=S.oxw(3).$implicit;S.Q6J("ngSwitch",t.type),S.xp6(1),S.Q6J("ngSwitchCase","OneToMany"),S.xp6(1),S.Q6J("ngSwitchCase","ManyToMany"),S.xp6(1),S.Q6J("ngSwitchCase","Boolean")}}function zi(t,i){if(1&t&&(S.YNc(0,Ui,1,1,"ng-template",32),S.YNc(1,Hi,5,4,"ng-template",null,45,S.W1O)),2&t){const t=S.MAs(2),i=S.oxw(3).$implicit,e=S.oxw(2);S.Q6J("ngIf",!0===e.isFooter(i))("ngIfElse",t)}}function Ri(t,i){1&t&&S.YNc(0,zi,3,2,"ng-template",31)}function ji(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"td",25),S.NdJ("click",function(){S.CHM(t);const i=S.oxw().$implicit;return S.oxw(2).initEditableRow(i)}),S.TgZ(1,"p-cellEditor"),S.YNc(2,hi,1,0,void 0,9),S.YNc(3,yi,1,0,void 0,9),S.YNc(4,Yi,1,0,void 0,9),S.YNc(5,Ri,1,0,void 0,9),S.qZA(),S.qZA()}if(2&t){const t=i.$implicit,e=S.oxw(3);S.xp6(2),S.Q6J("ngIf",!0===e.isSpecificInput(t.field)),S.xp6(1),S.Q6J("ngIf",!0===e.isSpecificInput(t.field)),S.xp6(1),S.Q6J("ngIf",!0!==e.isSpecificInput(t.field)),S.xp6(1),S.Q6J("ngIf",!0!==e.isSpecificInput(t.field))}}function Gi(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"tr",19),S.NdJ("focusout",function(){return S.CHM(t),S.oxw(2).onFocusout()})("keyup.enter",function(){return S.CHM(t),S.oxw(2).initEditableRow(null)})("keyup.escape",function(){return S.CHM(t),S.oxw(2).cancel()}),S.YNc(1,ui,3,2,"td",9),S.YNc(2,ji,6,4,"td",20),S.qZA()}if(2&t){const t=i.$implicit,e=i.columns,n=S.oxw(2);S.Q6J("pSelectableRow",!0!==n.isFooter(t)?t:null)("pEditableRow",t),S.xp6(1),S.Q6J("ngIf",n.canSelectElement),S.xp6(1),S.Q6J("ngForOf",e)}}function Ki(t,i){if(1&t&&(S.TgZ(0,"tr"),S.TgZ(1,"td",48),S._uU(2),S.ALo(3,"translate"),S.qZA(),S.qZA()),2&t){const t=i.$implicit;S.xp6(1),S.uIk("colspan",t.length+1),S.xp6(1),S.hij(" ",S.lcZ(3,2,"bia.NoRecordsFound")," ")}}function Vi(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"p-table",2,3),S.NdJ("onFilter",function(){return S.CHM(t),S.oxw().onFilter()})("onLazyLoad",function(i){return S.CHM(t),S.oxw().onLoadLazy(i)})("onStateSave",function(i){return S.CHM(t),S.oxw().onStateSave(i)})("selectionChange",function(){return S.CHM(t),S.oxw().onSelectionChange()}),S.ALo(2,"async"),S.YNc(3,ci,4,3,"ng-template",4),S.YNc(4,Gi,3,4,"ng-template",5),S.YNc(5,Ki,4,4,"ng-template",6),S.qZA()}if(2&t){const t=S.oxw();S.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",t.displayedColumns)("value",t.elements)("paginator",t.paginator)("rows",t.pageSize)("totalRecords",t.totalRecord)("lazy",!0)("loading",t.loading&&null!==S.lcZ(2,14,t.showLoading$))("stateStorage","session")("stateKey",t.tableStateKey)("lazyLoadOnInit",t.getLazyLoadOnInit())("sortField",t.sortFieldValue)("sortOrder",t.sortOrderValue)}}let Xi=(()=>{class t extends kt.l{constructor(t,i,e,n){super(t,i,e,n),this.formBuilder=t,this.authService=i,this.biaMessageService=e,this.translateService=n,this.initForm()}initForm(){var t,i;this.form=this.formBuilder.group({id:[this.element.id],title:[this.element.title,Ut.kI.required],description:[this.element.description,Ut.kI.required],type:[null===(t=this.element.type)||void 0===t?void 0:t.id,Ut.kI.required],read:[this.element.read],createdDate:[this.element.createdDate,Ut.kI.required],createdBy:[null===(i=this.element.createdBy)||void 0===i?void 0:i.id],notifiedPermissions:[this.element.notifiedPermissions],notifiedUsers:[this.element.notifiedUsers],jData:[this.element.jData]})}onSubmit(){var t,i;if(this.form.valid){const e=this.form.value;e.id=e.id>0?e.id:0,e.read=!!e.read&&e.read,e.createdBy=Pt.P.Clone(e.createdBy),e.notifiedPermissions=Pt.P.Differential(e.notifiedPermissions,null===(t=this.element)||void 0===t?void 0:t.notifiedPermissions),e.notifiedUsers=Pt.P.Differential(e.notifiedUsers,null===(i=this.element)||void 0===i?void 0:i.notifiedUsers),e.type=Object.assign({},e.type),this.save.emit(e),this.form.reset()}}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(Ut.qu),S.Y36(H.e),S.Y36(U.X),S.Y36(Dt.sK))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-table"]],features:[S.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(t,i){1&t&&(S.TgZ(0,"form",0),S.YNc(1,Vi,6,16,"p-table",1),S.qZA()),2&t&&(S.Q6J("formGroup",i.form),S.xp6(1),S.Q6J("ngIf",i.configuration))},directives:[Ut._Y,Ut.JL,Ut.sg,Ft.O5,Bt.iA,_t.jx,Ft.sg,Bt.Mo,Bt.lQ,Bt.fz,Ft.RF,Et.o,Ft.mk,Ht.oO,Bt.Ei,Bt.D$,Bt.UA,Bt.YL,Ft.ED,Ut.Fj,Ut.JJ,Ut.u,Ft.n9,zt.Lt,Rt.NU,jt.XZ,Ut.wV,Gt.f,Kt.D,Ut.nD],pipes:[Ft.Ov,Dt.X$,Vt.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),t})();function Wi(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"bia-table",6),S.NdJ("edit",function(i){return S.CHM(t),S.oxw().onDetail(i)})("loadLazy",function(i){return S.CHM(t),S.oxw().onLoadLazy(i)})("selectedElementsChanged",function(i){return S.CHM(t),S.oxw().onSelectedElementsChanged(i)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.qZA()}if(2&t){const t=S.oxw();S.Q6J("elements",S.lcZ(1,12,t.notifications$))("totalRecord",S.lcZ(2,14,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canSelectElement",t.canDelete)("loading",S.lcZ(3,16,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}function te(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"app-notification-table",7),S.NdJ("loadLazy",function(i){return S.CHM(t),S.oxw().onLoadLazy(i)})("selectedElementsChanged",function(i){return S.CHM(t),S.oxw().onSelectedElementsChanged(i)})("save",function(i){return S.CHM(t),S.oxw().onSave(i)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.ALo(4,"async"),S.qZA()}if(2&t){const t=S.oxw();S.Q6J("elements",S.lcZ(1,14,t.notifications$))("dictOptionDtos",S.lcZ(2,16,t.notificationOptionsService.dictOptionDtos$))("totalRecord",S.lcZ(3,18,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canAdd",t.canAdd)("canSelectElement",t.canDelete)("loading",S.lcZ(4,20,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}let ie=(()=>{class t{constructor(t,i,e,n,o,a,s,c,r){this.store=t,this.router=i,this.activatedRoute=e,this.authService=n,this.notificationDas=o,this.translateService=a,this.biaTranslationService=s,this.notificationsSignalRService=c,this.notificationOptionsService=r,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!0,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new k.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=E.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"notificationsGrid":void 0}ngOnInit(){if(this.parentIds=[],this.sub=new k.w,this.initTableConfiguration(),this.setPermissions(),this.notifications$=this.store.select(Y),this.totalCount$=this.store.select(I),this.loading$=this.store.select($),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange){let t=!0;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(i=>{t?t=!1:this.onLoadLazy(this.notificationListComponent.getLazyLoadMetadata())}))}}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.OnHide()}OnDisplay(){this.useView&&this.store.dispatch((0,X.Tx)()),this.useSignalR&&(this.notificationsSignalRService.initialize(),P.useSignalR=!0)}OnHide(){this.useSignalR&&(P.useSignalR=!1,this.notificationsSignalRService.destroy())}onCreate(){this.useCalcMode||this.router.navigate(["./create"],{relativeTo:this.activatedRoute})}onEdit(t){this.useCalcMode||this.router.navigate(["./"+t+"/edit"],{relativeTo:this.activatedRoute})}onDetail(t){this.useCalcMode||this.router.navigate(["./"+t+"/detail"],{relativeTo:this.activatedRoute})}onSave(t){this.useCalcMode&&((null==t?void 0:t.id)>0?this.canEdit&&this.store.dispatch(m({notification:t})):this.canAdd&&this.store.dispatch(g({notification:t})))}onDelete(){this.selectedNotifications&&this.canDelete&&this.store.dispatch(b({ids:this.selectedNotifications.map(t=>t.id)}))}onSelectedElementsChanged(t){this.selectedNotifications=t}onPageSizeChange(t){this.pageSize=t}onLoadLazy(t){const i=Object.assign({parentIds:this.parentIds},t);this.store.dispatch(f({event:i}))}searchGlobalChanged(t){this.globalSearchValue=t}displayedColumnsChanged(t){this.displayedColumns=t}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(t){this.viewPreference=t}onExportCSV(){const t={};this.columns.map(i=>t[i.value.split(".")[1]]=this.translateService.instant(i.value));const i=Object.assign({parentIds:this.parentIds,columns:t},this.notificationListComponent.getLazyLoadMetadata());this.notificationDas.getFile(i).subscribe(t=>{z.saveAs(t,this.translateService.instant("app.notifications")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(j.y.Notification_Update),this.canDelete=this.authService.hasPermission(j.y.Notification_Delete),this.canAdd=this.authService.hasPermission(j.y.Notification_Create)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(t=>{this.tableConfiguration={columns:[new _.ML("titleTranslated","notification.title"),new _.ML("descriptionTranslated","notification.description"),Object.assign(new _.ML("type","notification.type.title"),{type:_.d5.OneToMany}),Object.assign(new _.ML("read","notification.read"),{isSearchable:!1,type:_.d5.Boolean}),Object.assign(new _.ML("createdDate","notification.createdDate"),{type:_.d5.Date,formatDate:t.dateFormat}),Object.assign(new _.ML("createdBy","notification.createdBy"),{type:_.d5.OneToMany}),Object.assign(new _.ML("notifiedPermissions","notification.notifiedPermissions"),{type:_.d5.ManyToMany}),Object.assign(new _.ML("notifiedUsers","notification.notifiedUsers"),{type:_.d5.ManyToMany}),new _.ML("jData","notification.jData")]},this.columns=this.tableConfiguration.columns.map(t=>({key:t.field,value:t.header})),this.displayedColumns=[...this.columns]})}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(H.e),S.Y36(C),S.Y36(Dt.sK),S.Y36(R.P6),S.Y36(V),S.Y36(Jt))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notifications-index"]],viewQuery:function(t,i){if(1&t&&S.Gf(B.$,5),2&t){let t;S.iGM(t=S.CRH())&&(i.notificationListComponent=t.first)}},hostVars:2,hostBindings:function(t,i){2&t&&S.ekj("bia-flex",i.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(t,i){1&t&&(S.TgZ(0,"div",0),S.TgZ(1,"div",1),S.TgZ(2,"bia-table-header",2),S.NdJ("create",function(){return i.onCreate()})("exportCSV",function(){return i.onExportCSV()})("delete",function(){return i.onDelete()}),S.ALo(3,"translate"),S.qZA(),S.TgZ(4,"bia-table-controller",3),S.NdJ("displayedColumnsChange",function(t){return i.displayedColumnsChanged(t)})("filter",function(t){return i.searchGlobalChanged(t)})("pageSizeChange",function(t){return i.onPageSizeChange(t)})("toggleSearch",function(){return i.onToggleSearch()})("viewChange",function(t){return i.onViewChange(t)}),S.ALo(5,"async"),S.qZA(),S.YNc(6,Wi,4,18,"bia-table",4),S.YNc(7,te,5,22,"app-notification-table",5),S.qZA(),S.qZA()),2&t&&(S.xp6(2),S.Q6J("headerTitle",S.lcZ(3,12,"notification.listOf"))("canAdd",i.canAdd&&!i.useCalcMode)("canDelete",i.canDelete)("canExportCSV",!0)("selectedElements",i.selectedNotifications),S.xp6(2),S.Q6J("defaultPageSize",i.defaultPageSize)("length",S.lcZ(5,14,i.totalCount$))("columns",i.columns)("columnToDisplays",i.displayedColumns)("tableStateKey",i.tableStateKey),S.xp6(2),S.Q6J("ngIf",!i.useCalcMode),S.xp6(1),S.Q6J("ngIf",i.useCalcMode))},directives:[Qt.xw,Qt.yH,$t.l,Yt.B,Ft.O5,B.$,Xi],pipes:[Dt.X$,Ft.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t})();var ee=e(84594),ne=e(16244),oe=e(80014),ae=e(44748),se=e(4207),ce=e(46543);function re(t,i){if(1&t){const t=S.EpF();S.ynx(0,27),S.TgZ(1,"p-tabPanel",4),S.TgZ(2,"div",28),S._UZ(3,"input",29),S.TgZ(4,"div",5),S.TgZ(5,"div",6),S.TgZ(6,"span",7),S.TgZ(7,"input",30),S.NdJ("change",function(){const i=S.CHM(t).index;return S.oxw().changeTranslation(i)}),S.qZA(),S.TgZ(8,"label"),S.TgZ(9,"span",9),S._uU(10,"*"),S.qZA(),S._uU(11),S.ALo(12,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(13,"div",5),S.TgZ(14,"div",6),S.TgZ(15,"span",7),S.TgZ(16,"input",31),S.NdJ("change",function(){const i=S.CHM(t).index;return S.oxw().changeTranslation(i)}),S.qZA(),S.TgZ(17,"label"),S.TgZ(18,"span",9),S._uU(19,"*"),S.qZA(),S._uU(20),S.ALo(21,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(22,"div",11),S.TgZ(23,"button",32),S.NdJ("click",function(){const i=S.CHM(t).index;return S.oxw().removeTranslation(i)}),S.ALo(24,"translate"),S.qZA(),S.qZA(),S.qZA(),S.BQk()}if(2&t){const t=i.$implicit,e=i.index,n=S.oxw();S.xp6(1),S.Q6J("header",n.labelTranslation(t.value.languageId)),S.xp6(1),S.Q6J("formGroupName",e),S.xp6(9),S.Oqu(S.lcZ(12,5,"notification.title")),S.xp6(9),S.Oqu(S.lcZ(21,7,"notification.description")),S.xp6(3),S.s9C("label",S.lcZ(24,9,"bia.translation.delete"))}}function le(t,i){1&t&&S._UZ(0,"i",37)}const ue=function(){return{width:"100%"}};function pe(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"p-tabPanel",33),S.YNc(1,le,1,0,"ng-template",34),S.TgZ(2,"div",5),S.TgZ(3,"div",6),S.TgZ(4,"span",7),S.TgZ(5,"p-dropdown",35),S.NdJ("onChange",function(){return S.CHM(t),S.oxw().onSelectionLanguage()}),S.qZA(),S.TgZ(6,"label"),S.TgZ(7,"span",9),S._uU(8,"*"),S.qZA(),S._uU(9),S.ALo(10,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(11,"div",11),S.TgZ(12,"button",36),S.NdJ("click",function(){return S.CHM(t),S.oxw().addTranslation()}),S.ALo(13,"translate"),S.qZA(),S.qZA(),S.qZA()}if(2&t){const t=S.oxw();S.xp6(5),S.Akn(S.DdM(10,ue)),S.Q6J("options",t.missingLanguageOptions),S.xp6(4),S.Oqu(S.lcZ(10,6,"bia.translation.language")),S.xp6(3),S.s9C("label",S.lcZ(13,8,"bia.translation.add")),S.Q6J("disabled",!t.selectionLanguage)}}const de=function(){return{width:"100%"}};let fe=(()=>{class t{constructor(t){this.formBuilder=t,this.notification={},this.save=new S.vpe,this.cancel=new S.vpe,this.missingTranslation=!1,this.selectionLanguage=!1,this.initForm()}static Differential(t,i){let e=[];if(i&&Array.isArray(i)){const n=i.filter(i=>!t||!t.map(t=>t.id).includes(i.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:ne.e.Deleted}));n&&(e=e.concat(n))}if(t&&Array.isArray(t)){const i=null==t?void 0:t.filter(t=>t.dtoState===ne.e.Added||t.dtoState===ne.e.Modified);i&&(e=e.concat(i))}return e}ngOnChanges(t){this.notification&&(this.form.reset(),this.notification&&(this.form.patchValue(Object.assign({},this.notification)),this.notificationTranslations.clear(),this.notification.notificationTranslations&&(this.notification.notificationTranslations.forEach(t=>{this.notificationTranslations.push(this.createTranslation(t))}),this.computeMissingTranslation())))}initForm(){const t={id:[this.notification.id],title:[this.notification.title,Ut.kI.required],description:[this.notification.description,Ut.kI.required],type:[this.notification.type,Ut.kI.required],read:[this.notification.read],createdDate:[this.notification.createdDate,Ut.kI.required],createdBy:[this.notification.createdBy],notifiedPermissions:[this.notification.notifiedPermissions],notifiedUsers:[this.notification.notifiedUsers],jData:[this.notification.jData],notificationTranslations:this.formBuilder.array([]),languageToAdd:[]};this.form=this.formBuilder.group(t),this.notificationTranslations=this.form.get("notificationTranslations")}onSelectionLanguage(){this.selectionLanguage=!0}createTranslation(t){return this.formBuilder.group({id:t.id,dtoState:t.dtoState,languageId:t.languageId,description:[t.description,Ut.kI.required],title:[t.title,Ut.kI.required]})}addTranslation(){this.notificationTranslations.push(this.createTranslation({id:0,languageId:this.form.value.languageToAdd.id,title:"",description:"",dtoState:ne.e.Added})),this.computeMissingTranslation()}addAllTranslation(){this.missingLanguageOptions.forEach(t=>this.notificationTranslations.push(this.createTranslation({id:0,languageId:t.id,title:"",description:"",dtoState:ne.e.Added}))),this.computeMissingTranslation()}removeTranslation(t){this.notificationTranslations.removeAt(t),this.computeMissingTranslation()}changeTranslation(t){this.notificationTranslations.at(t).value.dtoState===ne.e.Unchanged&&(this.notificationTranslations.at(t).value.dtoState=ne.e.Modified),this.computeMissingTranslation()}computeMissingTranslation(){this.missingLanguageOptions=this.languageOptions.filter(t=>!this.notificationTranslations.value.find(i=>i.languageId===t.id)&&!E.Nf.find(i=>i===t.id)),this.missingTranslation=this.missingLanguageOptions.length>0}labelTranslation(t){var i;return null===(i=this.languageOptions.find(i=>i.id===t))||void 0===i?void 0:i.display}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){var i,e,n;if(this.form.valid){const o=this.form.value;o.id=o.id>0?o.id:0,o.read=!!o.read&&o.read,o.createdBy=Pt.P.Clone(o.createdBy),o.notifiedPermissions=Pt.P.Differential(o.notifiedPermissions,null===(i=this.notification)||void 0===i?void 0:i.notifiedPermissions),o.notifiedUsers=Pt.P.Differential(o.notifiedUsers,null===(e=this.notification)||void 0===e?void 0:e.notifiedUsers),o.type=Object.assign({},o.type),o.notificationTranslations=t.Differential(o.notificationTranslations,null===(n=this.notification)||void 0===n?void 0:n.notificationTranslations),this.save.emit(o),this.form.reset()}}lang(t){console.log(t)}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(Ut.qu))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-form"]],inputs:{notification:"notification",userOptions:"userOptions",permissionOptions:"permissionOptions",notificationTypeOptions:"notificationTypeOptions",languageOptions:"languageOptions"},outputs:{save:"save",cancel:"cancel"},features:[S.TTD],decls:86,vars:73,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center","fxFlex","100"],["fxLayout","column","fxLayoutAlign","top","fxFlex","50"],[3,"legend"],[3,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button",3,"label","disabled","click"],["formArrayName","notificationTranslations",4,"ngFor","ngForOf"],["header","+",4,"ngIf"],["placeholder","\xa0","formControlName","type","optionLabel","display","datakey","id",3,"options"],["binary","true","formControlName","read",3,"label"],["biaLocale","","formControlName","createdDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["placeholder","\xa0","formControlName","createdBy","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","notifiedPermissions","optionLabel","display","datakey","id",3,"options","virtualScroll"],["defaultLabel","\xa0","formControlName","notifiedUsers","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxFlex","90"],[2,"left","5px","top","-20px","font-size","12px","color","#00839b"],[1,"p-float-label"],["formControlName","jData","rows","5","autoResize","autoResize","pInputTextarea","",2,"width","100%",3,"cols"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],["formArrayName","notificationTranslations"],[3,"formGroupName"],["formControlName","languageId","type","hidden"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%",3,"change"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%",3,"change"],["pButton","","type","button",3,"label","click"],["header","+"],["pTemplate","header"],["placeholder","\xa0","formControlName","languageToAdd","optionLabel","display","datakey","id",3,"options","onChange"],["pButton","","type","button",1,"ui-button-secondary",3,"label","disabled","click"],[1,"pi","pi-plus"]],template:function(t,i){1&t&&(S.TgZ(0,"form",0),S.NdJ("submit",function(){return i.onSubmit()}),S.TgZ(1,"div",1),S.TgZ(2,"div",2),S.TgZ(3,"p-fieldset",3),S.ALo(4,"translate"),S.TgZ(5,"p-tabView"),S.TgZ(6,"p-tabPanel",4),S.ALo(7,"translate"),S.TgZ(8,"div",5),S.TgZ(9,"div",6),S.TgZ(10,"span",7),S._UZ(11,"input",8),S.TgZ(12,"label"),S.TgZ(13,"span",9),S._uU(14,"*"),S.qZA(),S._uU(15),S.ALo(16,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(17,"div",5),S.TgZ(18,"div",6),S.TgZ(19,"span",7),S._UZ(20,"input",10),S.TgZ(21,"label"),S.TgZ(22,"span",9),S._uU(23,"*"),S.qZA(),S._uU(24),S.ALo(25,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(26,"div",11),S.TgZ(27,"button",12),S.NdJ("click",function(){return i.addAllTranslation()}),S.ALo(28,"translate"),S.qZA(),S.qZA(),S.qZA(),S.YNc(29,re,25,11,"ng-container",13),S.YNc(30,pe,14,11,"p-tabPanel",14),S.qZA(),S.qZA(),S.TgZ(31,"div",5),S.TgZ(32,"div",6),S.TgZ(33,"span",7),S._UZ(34,"p-dropdown",15),S.TgZ(35,"label"),S.TgZ(36,"span",9),S._uU(37,"*"),S.qZA(),S._uU(38),S.ALo(39,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(40,"div",5),S.TgZ(41,"div",6),S._UZ(42,"p-checkbox",16),S.ALo(43,"translate"),S.qZA(),S.qZA(),S.TgZ(44,"div",5),S.TgZ(45,"div",6),S.TgZ(46,"span",7),S._UZ(47,"p-calendar",17),S.TgZ(48,"label"),S.TgZ(49,"span",9),S._uU(50,"*"),S.qZA(),S._uU(51),S.ALo(52,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(53,"div",5),S.TgZ(54,"div",6),S.TgZ(55,"span",7),S._UZ(56,"p-dropdown",18),S.TgZ(57,"label"),S._uU(58),S.ALo(59,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(60,"div",5),S.TgZ(61,"div",6),S.TgZ(62,"span",7),S._UZ(63,"p-multiSelect",19),S.TgZ(64,"label"),S._uU(65),S.ALo(66,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(67,"div",5),S.TgZ(68,"div",6),S.TgZ(69,"span",7),S._UZ(70,"p-multiSelect",20),S.TgZ(71,"label"),S._uU(72),S.ALo(73,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(74,"div",5),S.TgZ(75,"div",21),S.TgZ(76,"span",22),S._uU(77),S.ALo(78,"translate"),S.qZA(),S.TgZ(79,"span",23),S._UZ(80,"textarea",24),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(81,"div",11),S._UZ(82,"button",25),S.ALo(83,"translate"),S.TgZ(84,"button",26),S.NdJ("click",function(){return i.onCancel()}),S.ALo(85,"translate"),S.qZA(),S.qZA(),S.qZA()),2&t&&(S.Q6J("formGroup",i.form),S.xp6(3),S.s9C("legend",S.lcZ(4,39,"bia.translation.translatedFields")),S.xp6(3),S.s9C("header",S.lcZ(7,41,"translation.defaultLanguage")),S.xp6(9),S.Oqu(S.lcZ(16,43,"notification.title")),S.xp6(9),S.Oqu(S.lcZ(25,45,"notification.description")),S.xp6(3),S.s9C("label",S.lcZ(28,47,"bia.translation.addAll")),S.Q6J("disabled",!i.missingTranslation),S.xp6(2),S.Q6J("ngForOf",i.notificationTranslations.controls),S.xp6(1),S.Q6J("ngIf",(null==i.missingLanguageOptions?null:i.missingLanguageOptions.length)>0),S.xp6(4),S.Akn(S.DdM(67,ue)),S.Q6J("options",i.notificationTypeOptions),S.xp6(4),S.Oqu(S.lcZ(39,49,"notification.type.title")),S.xp6(4),S.s9C("label",S.lcZ(43,51,"notification.read")),S.xp6(5),S.Akn(S.DdM(68,de)),S.Q6J("showButtonBar",!0)("inputStyle",S.DdM(69,de)),S.xp6(4),S.Oqu(S.lcZ(52,53,"notification.createdDate")),S.xp6(5),S.Akn(S.DdM(70,ue)),S.Q6J("options",i.userOptions)("showClear",!0),S.xp6(2),S.Oqu(S.lcZ(59,55,"notification.createdBy")),S.xp6(5),S.Akn(S.DdM(71,ue)),S.Q6J("options",i.permissionOptions)("virtualScroll",!0),S.xp6(2),S.Oqu(S.lcZ(66,57,"notification.notifiedPermissions")),S.xp6(5),S.Akn(S.DdM(72,ue)),S.Q6J("options",i.userOptions)("virtualScroll",!0),S.xp6(2),S.Oqu(S.lcZ(73,59,"notification.notifiedUsers")),S.xp6(5),S.Oqu(S.lcZ(78,61,"notification.jData")),S.xp6(3),S.Q6J("cols",60),S.xp6(2),S.s9C("label",S.lcZ(83,63,"bia.save")),S.Q6J("disabled",!i.form.valid),S.xp6(2),S.s9C("label",S.lcZ(85,65,"bia.cancel")))},directives:[Ut._Y,Ut.JL,Qt.xw,Ut.sg,Qt.Wh,Qt.yH,oe.p,ae.xf,ae.x4,Ut.Fj,Ut.JJ,Ut.u,Et.o,Ut.nD,Qt.SQ,se.Hq,Ft.sg,Ft.O5,zt.Lt,jt.XZ,Gt.f,Kt.D,Rt.NU,ce.g,Ut.CE,Ut.x0,_t.jx],pipes:[Dt.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t})(),he=(()=>{class t{constructor(t,i,e,n,o){this.store=t,this.router=i,this.activatedRoute=e,this.notificationOptionsService=n,this.biaTranslationService=o,this.sub=new k.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(g({notification:t})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(Jt),S.Y36(R.P6))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-new"]],decls:5,vars:12,consts:[[3,"notificationTypeOptions","permissionOptions","userOptions","languageOptions","cancel","save"]],template:function(t,i){1&t&&(S.TgZ(0,"app-notification-form",0),S.NdJ("cancel",function(){return i.onCancelled()})("save",function(t){return i.onSubmitted(t)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.ALo(4,"async"),S.qZA()),2&t&&S.Q6J("notificationTypeOptions",S.lcZ(1,4,i.notificationOptionsService.notificationTypeOptions$))("permissionOptions",S.lcZ(2,6,i.notificationOptionsService.permissionOptions$))("userOptions",S.lcZ(3,8,i.notificationOptionsService.userOptions$))("languageOptions",S.lcZ(4,10,i.notificationOptionsService.languageOptions$))},directives:[fe],pipes:[Ft.Ov],styles:[""]}),t})(),ge=(()=>{class t{constructor(t){this.store=t,this.sub=new k.w,this.InitSub(),this.loading$=this.store.select(Q),this.notification$=this.store.select(J)}get currentNotification(){var t;return(null===(t=this._currentNotification)||void 0===t?void 0:t.id)===this._currentNotificationId?this._currentNotification:null}get currentNotificationId(){return this._currentNotificationId}set currentNotificationId(t){this._currentNotificationId=Number(t),this.store.dispatch(h({id:t}))}get currentNotificationData(){return this._currentNotification.jData}InitSub(){this.sub=new k.w,this.sub.add(this.store.select(J).subscribe(t=>{t&&(this._currentNotification=t)}))}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(o.yh))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var me=e(79373);function ye(t,i){1&t&&S._UZ(0,"bia-spinner",2),2&t&&S.Q6J("overlay",!0)}let be=(()=>{class t{constructor(t,i,e,n,o,a){this.store=t,this.router=i,this.activatedRoute=e,this.notificationOptionsService=n,this.notificationService=o,this.biaTranslationService=a,this.displayChange=new S.vpe,this.sub=new k.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(m({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(Jt),S.Y36(ge),S.Y36(R.P6))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-edit"]],outputs:{displayChange:"displayChange"},decls:8,vars:18,consts:[[3,"notification","notificationTypeOptions","permissionOptions","userOptions","languageOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,i){1&t&&(S.TgZ(0,"app-notification-form",0),S.NdJ("cancel",function(){return i.onCancelled()})("save",function(t){return i.onSubmitted(t)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.ALo(4,"async"),S.ALo(5,"async"),S.qZA(),S.YNc(6,ye,1,1,"bia-spinner",1),S.ALo(7,"async")),2&t&&(S.Q6J("notification",S.lcZ(1,6,i.notificationService.notification$))("notificationTypeOptions",S.lcZ(2,8,i.notificationOptionsService.notificationTypeOptions$))("permissionOptions",S.lcZ(3,10,i.notificationOptionsService.permissionOptions$))("userOptions",S.lcZ(4,12,i.notificationOptionsService.userOptions$))("languageOptions",S.lcZ(5,14,i.notificationOptionsService.languageOptions$)),S.xp6(6),S.Q6J("ngIf",S.lcZ(7,16,i.notificationService.loading$)))},directives:[fe,Ft.O5,me.O],pipes:[Ft.Ov],styles:[""]}),t})();var xe=e(16249),ve=e(30466);function Ze(t,i){1&t&&S._UZ(0,"bia-spinner",1),2&t&&S.Q6J("overlay",!0)}let we=(()=>{class t{constructor(t,i,e,n,o){this.store=t,this.route=i,this.notificationService=e,this.layoutService=n,this.biaTranslationService=o,this.sub=new k.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationService.currentNotificationId=this.route.snapshot.params.notificationId})),this.sub.add(this.store.select(J).subscribe(t=>{(null==t?void 0:t.title)&&(this.route.data.pipe((0,G.P)()).subscribe(i=>{i.breadcrumb=t.title}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(o.yh),S.Y36(n.gz),S.Y36(ge),S.Y36(ve.N),S.Y36(R.P6))},t.\u0275cmp=S.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,i){1&t&&(S._UZ(0,"router-outlet"),S.YNc(1,Ze,1,1,"bia-spinner",0),S.ALo(2,"async")),2&t&&(S.xp6(1),S.Q6J("ngIf",S.lcZ(2,1,i.notificationService.loading$)))},directives:[n.lC,Ft.O5,me.O],pipes:[Ft.Ov],styles:[""]}),t})();var Se=e(98832),Ce=e(53460);let Ae=(()=>{class t extends w.Z{constructor(t){super(t,"Permissions")}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Te=(()=>{class t{constructor(t,i,e){this.actions$=t,this.permissionDas=i,this.biaMessageService=e,this.loadAll$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(vt),(0,r.w)(()=>this.permissionDas.getList("allOptions").pipe((0,l.U)(t=>Zt({permissions:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(wt({error:t}))))))))}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(a.eX),S.LFG(Ae),S.LFG(U.X))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})(),Le=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({providers:[],imports:[[o.Aw.forFeature("domain-permission-options",Tt),a.sQ.forFeature([Te])]]}),t})();var Oe=e(62439);let Ne=(()=>{class t extends w.Z{constructor(t){super(t,"NotificationTypes")}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qe=(()=>{class t{constructor(t,i,e){this.actions$=t,this.notificationTypeDas=i,this.biaMessageService=e,this.loadAll$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(ut),(0,r.w)(()=>this.notificationTypeDas.getList("allOptions").pipe((0,l.U)(t=>pt({notificationTypes:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(dt({error:t}))))))))}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(a.eX),S.LFG(Ne),S.LFG(U.X))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})(),Me=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[o.Aw.forFeature("domain-notification-type-options",mt),a.sQ.forFeature([qe])]]}),t})();function Ie(t,i){if(1&t&&(S.TgZ(0,"div",7),S.TgZ(1,"div"),S.TgZ(2,"b"),S._uU(3),S.ALo(4,"translate"),S.qZA(),S._UZ(5,"br"),S._uU(6),S.ALo(7,"translate"),S.qZA(),S.TgZ(8,"div"),S.TgZ(9,"b"),S._uU(10),S.ALo(11,"translate"),S.qZA(),S._UZ(12,"br"),S._uU(13),S.ALo(14,"translate"),S.qZA(),S.TgZ(15,"div"),S.TgZ(16,"b"),S._uU(17),S.ALo(18,"translate"),S.qZA(),S._UZ(19,"br"),S._uU(20),S.ALo(21,"date"),S.qZA(),S.TgZ(22,"div"),S.TgZ(23,"b"),S._uU(24),S.ALo(25,"translate"),S.qZA(),S._UZ(26,"br"),S._uU(27),S.qZA(),S.qZA()),2&t){const t=S.oxw().ngIf;S.xp6(3),S.Oqu(S.lcZ(4,8,"notification.title")),S.xp6(3),S.Oqu(S.lcZ(7,10,t.titleTranslated)),S.xp6(4),S.Oqu(S.lcZ(11,12,"notification.description")),S.xp6(3),S.hij("",S.lcZ(14,14,t.descriptionTranslated)," "),S.xp6(4),S.Oqu(S.lcZ(18,16,"notification.createdDate")),S.xp6(3),S.Oqu(S.xi3(21,18,t.createdDate,"short")),S.xp6(4),S.Oqu(S.lcZ(25,21,"notification.type.title")),S.xp6(3),S.Oqu(t.type.display)}}function Je(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"button",8),S.NdJ("click",function(){S.CHM(t);const i=S.oxw().ngIf;return S.oxw().onAction(i)}),S.ALo(1,"translate"),S.qZA()}2&t&&S.s9C("label",S.lcZ(1,1,"notification.action"))}function De(t,i){if(1&t){const t=S.EpF();S.TgZ(0,"button",6),S.NdJ("click",function(){return S.CHM(t),S.oxw(2).onEdit()}),S.ALo(1,"translate"),S.qZA()}2&t&&S.s9C("label",S.lcZ(1,1,"bia.edit"))}function Qe(t,i){if(1&t){const t=S.EpF();S.ynx(0),S.YNc(1,Ie,28,23,"div",2),S.TgZ(2,"div",3),S.YNc(3,Je,2,3,"button",4),S.YNc(4,De,2,3,"button",5),S.TgZ(5,"button",6),S.NdJ("click",function(){return S.CHM(t),S.oxw().onCancelled()}),S.ALo(6,"translate"),S.qZA(),S.qZA(),S.BQk()}if(2&t){const t=i.ngIf,e=S.oxw();S.xp6(1),S.Q6J("ngIf",t&&t.id),S.xp6(2),S.Q6J("ngIf",e.canAction(t)),S.xp6(1),S.Q6J("ngIf",e.canEdit),S.xp6(1),S.s9C("label",S.lcZ(6,4,"bia.cancel"))}}function $e(t,i){1&t&&S._UZ(0,"bia-spinner",9),2&t&&S.Q6J("overlay",!0)}let Ye=(()=>{class t{constructor(t,i,e,n,o){this.store=t,this.router=i,this.activatedRoute=e,this.authService=n,this.notificationService=o,this.displayChange=new S.vpe,this.sub=new k.w}ngOnInit(){this.notification$=this.notificationService.notification$,this.canEdit=this.authService.hasPermission(j.y.Notification_Update)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(m({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onEdit(){this.router.navigate(["../edit"],{relativeTo:this.activatedRoute})}canAction(t){if(t.jData){const i=JSON.parse(t.jData);if(null==i?void 0:i.route)return!0}return!1}onAction(t){if(t.jData){const i=JSON.parse(t.jData);(null==i?void 0:i.route)&&this.router.navigate(i.route)}}}return t.\u0275fac=function(i){return new(i||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(H.e),S.Y36(ge))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-detail"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[4,"ngIf"],[3,"overlay",4,"ngIf"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly",4,"ngIf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button","class","p-button-primary",3,"label","click",4,"ngIf"],["pButton","","type","button","class","p-button-secondary",3,"label","click",4,"ngIf"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly"],["pButton","","type","button",1,"p-button-primary",3,"label","click"],[3,"overlay"]],template:function(t,i){1&t&&(S.YNc(0,Qe,7,6,"ng-container",0),S.ALo(1,"async"),S.YNc(2,$e,1,1,"bia-spinner",1),S.ALo(3,"async")),2&t&&(S.Q6J("ngIf",S.lcZ(1,2,i.notification$)),S.xp6(2),S.Q6J("ngIf",S.lcZ(3,4,i.loading$)))},directives:[Ft.O5,Qt.xw,Qt.SQ,Qt.Wh,se.Hq,me.O],pipes:[Ft.Ov,Dt.X$,Ft.uU],styles:[""]}),t})(),Fe=(()=>{class t extends w.Z{constructor(t){super(t,"Languages")}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ue=(()=>{class t{constructor(t,i,e){this.actions$=t,this.languageDas=i,this.biaMessageService=e,this.loadAll$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(tt),(0,r.w)(()=>this.languageDas.getList("allOptions").pipe((0,l.U)(t=>it({languages:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(et({error:t}))))))))}}return t.\u0275fac=function(i){return new(i||t)(S.LFG(a.eX),S.LFG(Fe),S.LFG(U.X))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})(),Pe=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[o.Aw.forFeature("domain-language-options",st),a.sQ.forFeature([Ue])]]}),t})();const ke=[{path:"",data:{breadcrumb:null,permission:j.y.Notification_List_Access,InjectComponent:ie},component:Ce.e,canActivate:[xe.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:j.y.Notification_Create,title:"notification.add",InjectComponent:he},component:Se._,canActivate:[xe.n]},{path:":notificationId",data:{breadcrumb:"",canNavigate:!0},component:we,canActivate:[xe.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:j.y.Notification_Update,title:"notification.edit",InjectComponent:be},component:Ce.e,canActivate:[xe.n]},{path:"detail",data:{breadcrumb:"bia.detail",canNavigate:!0,permission:j.y.Notification_Read,title:"notification.detail",InjectComponent:Ye},component:Se._,canActivate:[xe.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}];let Be=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[ee.m,Ut.UX,n.Bz.forChild(ke),o.Aw.forFeature("notifications",N),a.sQ.forFeature([P]),Le,Me,Oe.U,Pe]]}),t})()}}]);