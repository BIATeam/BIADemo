(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[167],{49457:function(t,e){var i,n;void 0!==(n="function"==typeof(i=function(){"use strict";function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){s(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(i){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,s){var c=o.URL||o.webkitURL,l=document.createElement("a");l.download=a=a||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?n(l):i(l.href)?e(t,a,s):n(l,l.target="_blank")):(l.href=c.createObjectURL(t),setTimeout(function(){c.revokeObjectURL(l.href)},4e4),setTimeout(function(){n(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,a){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),o);else if(i(t))e(t,o,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){n(s)})}}:function(t,i,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var c="application/octet-stream"===t.type,l=/constructor/i.test(o.HTMLElement)||o.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||c&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var d=o.URL||o.webkitURL,p=d.createObjectURL(t);s?s.location=p:location.href=p,s=null,setTimeout(function(){d.revokeObjectURL(p)},4e4)}});o.saveAs=s.saveAs=s,t.exports=s})?i.apply(e,[]):i)&&(t.exports=n)},16249:function(t,e,i){"use strict";i.d(e,{n:function(){return c}});var n=i(39083),o=i(92340),a=i(68307),s=i(37716);let c=(()=>{class t{constructor(t){this.authService=t}canActivate(t,e){return this.authService.hasPermissionObs(t.data.permission).pipe((0,a.b)(t=>{!0!==t&&(window.location.href=o.N.urlErrorPage+"?num=403")}))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(n.e))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},11466:function(t,e,i){"use strict";i.d(e,{P:function(){return o}});var n=i(16244);class o{static Clone(t){return t?Object.assign({},t):null}static Differential(t,e){let i=[];if(e&&Array.isArray(e)){const o=e.filter(e=>!t||!t.map(t=>t.id).includes(e.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:n.e.Deleted}));o&&(i=i.concat(o))}if(t){const o=null==t?void 0:t.filter(t=>!e||!e.map(t=>t.id).includes(t.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:n.e.Added}));o&&(i=i.concat(o))}return i}}},82762:function(t,e,i){"use strict";i.d(e,{b:function(){return n}});const n=(0,i(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},11936:function(t,e,i){"use strict";i.d(e,{p:function(){return y}});var n=i(91601),o=i(86710),a=i(65448),s=i(25917),c=i(92996),l=i(43190),r=i(88002),u=i(5304),d=i(74147),p=i(37716);let f=(()=>{class t extends d.Z{constructor(t){super(t,"Roles")}}return t.\u0275fac=function(e){return new(e||t)(p.LFG(p.zs3))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i(96875),g=i(42);let m=(()=>{class t{constructor(t,e,i){this.actions$=t,this.roleDas=e,this.biaMessageService=i,this.loadAll$=(0,n.GW)(()=>this.actions$.pipe((0,n.l4)(h.E.loadAll),(0,c.j)("teamTypeId"),(0,l.w)(t=>this.roleDas.getList({endpoint:"allOptions?teamTypeId="+t}).pipe((0,r.U)(t=>h.E.loadAllSuccess({roles:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(h.E.failure({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(p.LFG(n.eX),p.LFG(f),p.LFG(g.X))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[],imports:[[o.Aw.forFeature("domain-role-options",a.ll),n.sQ.forFeature([m])]]}),t})()},65448:function(t,e,i){"use strict";i.d(e,{wA:function(){return p},ll:function(){return r}});var n=i(80273),o=i(86710),a=i(96875);const s=(0,n.H)({selectId:t=>t.id,sortComparer:!1}),c=s.getInitialState({}),l=(0,o.Lq)(c,(0,o.on)(a.E.loadAllSuccess,(t,{roles:e})=>s.setAll(e,t)));function r(t,e){return(0,o.UY)({roleOptions:l})(t,e)}const u=(0,o.ZF)("domain-role-options"),d=(0,o.P1)(u,t=>t.roleOptions),{selectAll:p}=s.getSelectors(d)},96875:function(t,e,i){"use strict";i.d(e,{E:function(){return n}});var n,o,a=i(86710);(o=n||(n={})).loadAll=(0,a.PH)("[Domain Role Options] Load all",(0,a.Ky)()),o.loadAllSuccess=(0,a.PH)("[Domain Role Options] Load all success",(0,a.Ky)()),o.failure=(0,a.PH)("[Domain Role Options] Failure",(0,a.Ky)())},67167:function(t,e,i){"use strict";i.r(e),i.d(e,{NotificationModule:function(){return Ai}});var n,o,a=i(94666),s=i(86710),c=i(91601),l=i(25917),r=i(92996),u=i(43190),d=i(88002),p=i(5304),f=i(94612),h=i(57057);(o=n||(n={})).loadAllByPost=(0,s.PH)("[Notifications] Load all by post",(0,s.Ky)()),o.load=(0,s.PH)("[Notifications] Load",(0,s.Ky)()),o.create=(0,s.PH)("[Notifications] Create",(0,s.Ky)()),o.update=(0,s.PH)("[Notifications] Update",(0,s.Ky)()),o.remove=(0,s.PH)("[Notifications] Remove",(0,s.Ky)()),o.multiRemove=(0,s.PH)("[Notifications] Multi Remove",(0,s.Ky)()),o.loadAllByPostSuccess=(0,s.PH)("[Notifications] Load all by post success",(0,s.Ky)()),o.loadSuccess=(0,s.PH)("[Notifications] Load success",(0,s.Ky)()),o.failure=(0,s.PH)("[Notifications] Failure",(0,s.Ky)());var g=i(74147),m=i(37716);let y=(()=>{class t extends g.Z{constructor(t){super(t,"Notifications")}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(m.zs3))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=i(80273);const v=(0,b.H)({selectId:t=>t.id,sortComparer:!1}),w=v.getInitialState({totalCount:0,currentNotification:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),x=(0,s.Lq)(w,(0,s.on)(n.loadAllByPost,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!0})),(0,s.on)(n.load,t=>Object.assign(Object.assign({},t),{loadingGet:!0})),(0,s.on)(n.loadAllByPostSuccess,(t,{result:e,event:i})=>{const n=v.setAll(e.data,t);return n.totalCount=e.totalCount,n.lastLazyLoadEvent=i,n.loadingGetAll=!1,n}),(0,s.on)(n.loadSuccess,(t,{notification:e})=>(e.data=JSON.parse(e.jData),Object.assign(Object.assign({},t),{currentNotification:e,loadingGet:!1}))),(0,s.on)(n.failure,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!1,loadingGet:!1})));function S(t,e){return(0,s.UY)({notifications:x})(t,e)}const Z=(0,s.ZF)("notifications"),A=(0,s.P1)(Z,t=>t.notifications),C=(0,s.P1)(A,t=>t.totalCount),T=(0,s.P1)(A,t=>t.currentNotification),L=(0,s.P1)(A,t=>t.lastLazyLoadEvent),O=(0,s.P1)(A,t=>t.loadingGet),N=(0,s.P1)(A,t=>t.loadingGetAll),{selectAll:M}=v.getSelectors(A);var q=i(82762),I=i(42);let J=(()=>{class t{constructor(e,i,o,a){this.actions$=e,this.notificationDas=i,this.biaMessageService=o,this.store=a,this.loadAllByPost$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(n.loadAllByPost),(0,r.j)("event"),(0,u.w)(t=>this.notificationDas.getListByPost({event:t}).pipe((0,d.U)(e=>n.loadAllByPostSuccess({result:e,event:t})),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(n.failure({error:t})))))))),this.load$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(n.load),(0,r.j)("id"),(0,u.w)(t=>this.notificationDas.get({id:t}).pipe((0,d.U)(t=>n.loadSuccess({notification:t})),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(n.failure({error:t})))))))),this.create$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(n.create),(0,r.j)("notification"),(0,f.b)(t=>(0,l.of)(t).pipe((0,h.M)(this.store.select(L)))),(0,u.w)(([e,i])=>this.notificationDas.post({item:e}).pipe((0,d.U)(()=>(this.biaMessageService.showAddSuccess(),t.useSignalR?(0,q.b)():n.loadAllByPost({event:i}))),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(n.failure({error:t})))))))),this.update$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(n.update),(0,r.j)("notification"),(0,f.b)(t=>(0,l.of)(t).pipe((0,h.M)(this.store.select(L)))),(0,u.w)(([e,i])=>this.notificationDas.put({item:e,id:e.id}).pipe((0,d.U)(()=>(this.biaMessageService.showUpdateSuccess(),t.useSignalR?(0,q.b)():n.loadAllByPost({event:i}))),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(n.failure({error:t})))))))),this.destroy$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(n.remove),(0,r.j)("id"),(0,f.b)(t=>(0,l.of)(t).pipe((0,h.M)(this.store.select(L)))),(0,u.w)(([e,i])=>this.notificationDas.delete({id:e}).pipe((0,d.U)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,q.b)():n.loadAllByPost({event:i}))),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(n.failure({error:t})))))))),this.multiDestroy$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(n.multiRemove),(0,r.j)("ids"),(0,f.b)(t=>(0,l.of)(t).pipe((0,h.M)(this.store.select(L)))),(0,u.w)(([e,i])=>this.notificationDas.deletes({ids:e}).pipe((0,d.U)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,q.b)():n.loadAllByPost({event:i}))),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(n.failure({error:t}))))))))}}return t.useSignalR=!1,t.\u0275fac=function(e){return new(e||t)(m.LFG(c.eX),m.LFG(y),m.LFG(I.X),m.LFG(s.yh))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();var D=i(75319),Q=i(88385),$=i(79090),k=i(40136),U=i(39083),Y=i(49457),F=i(38042),B=i(29206),E=i(28049),P=i(59142),R=i(28731);let _=(()=>{class t{constructor(t,e,i){this.store=t,this.signalRService=e,this.authService=i}initialize(){this.store.select(R.qX).subscribe(t=>{this.myTeams=t}),console.log("%c [Notifications] Register SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-notifications",t=>{const e=JSON.parse(t);this.IsInMyDisplay(e)&&this.store.select(L).pipe((0,E.P)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(n.loadAllByPost({event:t}))})}),this.signalRService.addMethod("refresh-notifications-several",t=>{JSON.parse(t).some(t=>this.IsInMyDisplay(t))&&this.store.select(L).pipe((0,E.P)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(n.loadAllByPost({event:t}))})}),this.targetedFeature={featureName:"notifications"},this.signalRService.joinGroup(this.targetedFeature)}IsInMyDisplay(t){const e=this.authService.getAdditionalInfos(),i=!t.notifiedUsers||0===t.notifiedUsers.length||t.notifiedUsers.some(t=>t.id===e.userInfo.id),n=!t.notifiedTeams||0===t.notifiedTeams.length||t.notifiedTeams.some(t=>this.myTeams.some(e=>e.id===t.id&&(!(t.roles&&t.roles.length>0)||t.roles.some(t=>e.roles.some(e=>e.id===t.id)))));return i&&n}destroy(){console.log("%c [Notifications] Unregister SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-notifications"),this.signalRService.leaveGroup(this.targetedFeature)}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(s.yh),m.LFG(P.Y),m.LFG(U.e))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var H,j=i(46468),z=i(9112);!function(t){t.loadAll=(0,s.PH)("[Domain Language Options] Load all"),t.loadAllSuccess=(0,s.PH)("[Domain Language Options] Load all success",(0,s.Ky)()),t.failure=(0,s.PH)("[Domain Language Options] Failure",(0,s.Ky)())}(H||(H={}));const G=(0,b.H)({selectId:t=>t.id,sortComparer:!1}),K=G.getInitialState({}),V=(0,s.Lq)(K,(0,s.on)(H.loadAllSuccess,(t,{languages:e})=>G.setAll(e,t)));function X(t,e){return(0,s.UY)({languageOptions:V})(t,e)}const W=(0,s.ZF)("domain-language-options"),tt=(0,s.P1)(W,t=>t.languageOptions),{selectAll:et}=G.getSelectors(tt);var it;!function(t){t.loadAll=(0,s.PH)("[Domain Notification Type Options] Load all"),t.loadAllSuccess=(0,s.PH)("[Domain Notification Type Options] Load all success",(0,s.Ky)()),t.failure=(0,s.PH)("[Domain Notification Type Options] Failure",(0,s.Ky)())}(it||(it={}));const nt=(0,b.H)({selectId:t=>t.id,sortComparer:!1}),ot=nt.getInitialState({}),at=(0,s.Lq)(ot,(0,s.on)(it.loadAllSuccess,(t,{notificationTypes:e})=>nt.setAll(e,t)));function st(t,e){return(0,s.UY)({notificationTypeOptions:at})(t,e)}const ct=(0,s.ZF)("domain-notification-type-options"),lt=(0,s.P1)(ct,t=>t.notificationTypeOptions),{selectAll:rt}=nt.getSelectors(lt);var ut=i(65448),dt=i(96875),pt=i(23913),ft=i(76048),ht=i(94529);let gt=(()=>{class t{constructor(t){this.store=t,this.notificationTypeOptions$=this.store.select(rt),this.roleOptions$=this.store.select(ut.wA),this.userOptions$=this.store.select(pt.yp),this.languageOptions$=this.store.select(et),this.dictOptionDtos$=(0,z.aj)([this.notificationTypeOptions$,this.roleOptions$,this.userOptions$]).pipe((0,d.U)(t=>[new ht.b("type",t[0]),new ht.b("notifiedRoles",t[1]),new ht.b("notifiedUsers",t[2]),new ht.b("createdBy",t[2])]))}loadAllOptions(){this.store.dispatch(it.loadAll()),this.store.dispatch(dt.E.loadAll({teamTypeId:k.k0.Site})),this.store.dispatch(ft.d.loadAll()),this.store.dispatch(H.loadAll())}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(s.yh))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mt=i(13653),yt=i(81780),bt=i(35618),vt=i(81606),wt=i(76743),xt=i(38583),St=i(3679),Zt=i(11466),At=i(86320),Ct=i(70667),Tt=i(33013),Lt=i(13928),Ot=i(88030),Nt=i(50103),Mt=i(36949),qt=i(12332),It=i(88598),Jt=i(45862),Dt=i(49067);function Qt(t,e){1&t&&(m.TgZ(0,"th",10),m._UZ(1,"p-tableHeaderCheckbox"),m.qZA())}function $t(t,e){if(1&t&&(m.TgZ(0,"th",12),m._uU(1),m.ALo(2,"translate"),m._UZ(3,"p-sortIcon",13),m.qZA()),2&t){const t=m.oxw().$implicit;m.Q6J("pSortableColumn",t.field),m.xp6(1),m.hij(" ",m.lcZ(2,3,null==t?null:t.header)," "),m.xp6(2),m.Q6J("field",t.field)}}function kt(t,e){if(1&t&&(m.TgZ(0,"th"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.lcZ(2,1,null==t?null:t.header)," ")}}function Ut(t,e){if(1&t&&(m.ynx(0),m.YNc(1,$t,4,5,"th",11),m.YNc(2,kt,3,3,"th",9),m.BQk()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngIf",!0===(null==t?null:t.isSortable)),m.xp6(1),m.Q6J("ngIf",!0!==(null==t?null:t.isSortable))}}function Yt(t,e){1&t&&m._UZ(0,"th")}const Ft=function(t){return{"p-state-filled":t}};function Bt(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"span",17),m.TgZ(1,"input",18),m.NdJ("input",function(e){m.CHM(t);const i=m.oxw().$implicit;return m.oxw(3),m.MAs(1).filter(e.target.value,i.field,i.filterMode)}),m.ALo(2,"translate"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().$implicit;m.oxw(3);const e=m.MAs(1);m.xp6(1),m.s9C("type","Number"===t.type?"number":"text"),m.s9C("placeholder",void 0!==t.searchPlaceholder?t.searchPlaceholder:!0===t.isDate?m.lcZ(2,4,"bia.dateIso8601"):""),m.Q6J("value",null==e.filters[t.field]?null:e.filters[t.field].value)("ngClass",m.VKq(6,Ft,""!==(null==e.filters[t.field]?null:e.filters[t.field].value)))}}function Et(t,e){if(1&t&&(m.TgZ(0,"th",15),m.YNc(1,Bt,3,8,"span",16),m.qZA()),2&t){const t=e.$implicit;m.Q6J("ngSwitch",t.field),m.xp6(1),m.Q6J("ngIf",!0===t.isSearchable)}}function Pt(t,e){if(1&t&&(m.TgZ(0,"tr"),m.YNc(1,Yt,1,0,"th",9),m.YNc(2,Et,2,2,"th",14),m.qZA()),2&t){const t=m.oxw().$implicit,e=m.oxw(2);m.xp6(1),m.Q6J("ngIf",e.canSelectElement),m.xp6(1),m.Q6J("ngForOf",t)}}function Rt(t,e){if(1&t&&(m.TgZ(0,"tr"),m.YNc(1,Qt,2,0,"th",7),m.YNc(2,Ut,3,2,"ng-container",8),m.qZA(),m.YNc(3,Pt,3,2,"tr",9)),2&t){const t=e.$implicit,i=m.oxw(2);m.xp6(1),m.Q6J("ngIf",i.canSelectElement),m.xp6(1),m.Q6J("ngForOf",t),m.xp6(1),m.Q6J("ngIf",i.showColSearch)}}function _t(t,e){if(1&t&&m._UZ(0,"p-tableCheckbox",23),2&t){const t=m.oxw(2).$implicit;m.Q6J("value",t)}}function Ht(t,e){1&t&&m._UZ(0,"i",24)}function jt(t,e){if(1&t&&(m.TgZ(0,"td"),m.YNc(1,_t,1,1,"p-tableCheckbox",21),m.YNc(2,Ht,1,0,"i",22),m.qZA()),2&t){const t=m.oxw().$implicit,e=m.oxw(2);m.xp6(1),m.Q6J("ngIf",!0!==e.isFooter(t)&&t.id>0),m.xp6(1),m.Q6J("ngIf",!0===e.isFooter(t))}}function zt(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"input",29),m.NdJ("change",function(){return m.CHM(t),m.oxw(6).onChange()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(3).$implicit;m.xp6(1),m.Q6J("formControlName",t.field)}}function Gt(t,e){1&t&&(m.TgZ(0,"span",30),m._uU(1,"*"),m.qZA())}function Kt(t,e){if(1&t&&(m.ynx(0,15),m.YNc(1,zt,2,1,"ng-container",27),m.BQk(),m.YNc(2,Gt,2,0,"span",28)),2&t){const t=m.oxw(2).$implicit,e=m.oxw(3);m.Q6J("ngSwitch",t.field),m.xp6(2),m.Q6J("ngIf",!0===e.isRequired(t.field))}}function Vt(t,e){1&t&&m.YNc(0,Kt,3,2,"ng-template",26)}function Xt(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.BQk()),2&t){const t=m.oxw(3).$implicit,e=m.oxw().$implicit;m.xp6(1),m.hij(" ",e[t.field]," ")}}function Wt(t,e){if(1&t&&(m.ynx(0,15),m.YNc(1,Xt,2,1,"ng-container",27),m.BQk()),2&t){const t=m.oxw(2).$implicit;m.Q6J("ngSwitch",t.field)}}function te(t,e){1&t&&m.YNc(0,Wt,2,1,"ng-template",31)}const ee=function(){return{width:"100%"}};function ie(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-dropdown",35),m.NdJ("onChange",function(){return m.CHM(t),m.oxw(7).onChange()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit,e=m.oxw(3);m.xp6(1),m.Akn(m.DdM(4,ee)),m.Q6J("formControlName",t.field)("options",e.getOptionDto(t.field))}}function ne(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-multiSelect",36),m.NdJ("onChange",function(){return m.CHM(t),m.oxw(7).onChange()})("onPanelShow",function(){return m.CHM(t),m.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return m.CHM(t),m.oxw(7).onPanelHideMultiSelect()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit,e=m.oxw(3);m.xp6(1),m.Akn(m.DdM(4,ee)),m.Q6J("formControlName",t.field)("options",e.getOptionDto(t.field))}}function oe(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-checkbox",37),m.NdJ("onChange",function(){return m.CHM(t),m.oxw(7).onChange()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Q6J("binary",!0)("formControlName",t.field)}}function ae(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"input",38),m.NdJ("change",function(){return m.CHM(t),m.oxw(7).onChange()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Q6J("formControlName",t.field)}}function se(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-calendar",39),m.NdJ("onShow",function(){return m.CHM(t),m.oxw(7).onShowCalendar()})("onSelect",function(){return m.CHM(t),m.oxw(7).onChange()})("onBlur",function(){return m.CHM(t),m.oxw(7).onBlurCalendar()})("onClose",function(){return m.CHM(t),m.oxw(7).onCloseCalendar()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Akn(m.DdM(5,ee)),m.Q6J("formControlName",t.field)("showButtonBar",!0)("inputStyle",m.DdM(6,ee))}}function ce(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-calendar",40),m.NdJ("onShow",function(){return m.CHM(t),m.oxw(7).onShowCalendar()})("onSelect",function(){return m.CHM(t),m.oxw(7).onChange()})("onBlur",function(){return m.CHM(t),m.oxw(7).onBlurCalendar()})("onClose",function(){return m.CHM(t),m.oxw(7).onCloseCalendar()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Akn(m.DdM(5,ee)),m.Q6J("formControlName",t.field)("inputStyle",m.DdM(6,ee))("timeOnly",!0)}}function le(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-calendar",41),m.NdJ("onShow",function(){return m.CHM(t),m.oxw(7).onShowCalendar()})("onSelect",function(){return m.CHM(t),m.oxw(7).onChange()})("onBlur",function(){return m.CHM(t),m.oxw(7).onBlurCalendar()})("onClose",function(){return m.CHM(t),m.oxw(7).onCloseCalendar()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Akn(m.DdM(5,ee)),m.Q6J("formControlName",t.field)("inputStyle",m.DdM(6,ee))("timeOnly",!0)}}function re(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-calendar",42),m.NdJ("onShow",function(){return m.CHM(t),m.oxw(7).onShowCalendar()})("onSelect",function(){return m.CHM(t),m.oxw(7).onChange()})("onBlur",function(){return m.CHM(t),m.oxw(7).onBlurCalendar()})("onClose",function(){return m.CHM(t),m.oxw(7).onCloseCalendar()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Akn(m.DdM(5,ee)),m.Q6J("formControlName",t.field)("inputStyle",m.DdM(6,ee))("timeOnly",!0)}}function ue(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"p-calendar",43),m.NdJ("onShow",function(){return m.CHM(t),m.oxw(7).onShowCalendar()})("onSelect",function(){return m.CHM(t),m.oxw(7).onChange()})("onBlur",function(){return m.CHM(t),m.oxw(7).onBlurCalendar()})("onClose",function(){return m.CHM(t),m.oxw(7).onCloseCalendar()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Akn(m.DdM(5,ee)),m.Q6J("formControlName",t.field)("showButtonBar",!0)("inputStyle",m.DdM(6,ee))}}function de(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"input",44),m.NdJ("change",function(){return m.CHM(t),m.oxw(7).onChange()}),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Q6J("maxlength",t.maxlength)("formControlName",t.field)}}function pe(t,e){1&t&&(m.TgZ(0,"span",30),m._uU(1,"*"),m.qZA())}function fe(t,e){if(1&t&&(m.ynx(0,15),m.YNc(1,ie,2,5,"ng-container",34),m.YNc(2,ne,2,5,"ng-container",34),m.YNc(3,oe,2,2,"ng-container",34),m.YNc(4,ae,2,1,"ng-container",34),m.YNc(5,se,2,7,"ng-container",34),m.YNc(6,ce,2,7,"ng-container",34),m.YNc(7,le,2,7,"ng-container",34),m.YNc(8,re,2,7,"ng-container",34),m.YNc(9,ue,2,7,"ng-container",34),m.YNc(10,de,2,2,"ng-container",27),m.BQk(),m.YNc(11,pe,2,0,"span",28)),2&t){const t=m.oxw(3).$implicit,e=m.oxw(3);m.Q6J("ngSwitch",t.type),m.xp6(1),m.Q6J("ngSwitchCase","OneToMany"),m.xp6(1),m.Q6J("ngSwitchCase","ManyToMany"),m.xp6(1),m.Q6J("ngSwitchCase","Boolean"),m.xp6(1),m.Q6J("ngSwitchCase","Number"),m.xp6(1),m.Q6J("ngSwitchCase","Date"),m.xp6(1),m.Q6J("ngSwitchCase","Time"),m.xp6(1),m.Q6J("ngSwitchCase","TimeOnly"),m.xp6(1),m.Q6J("ngSwitchCase","TimeSecOnly"),m.xp6(1),m.Q6J("ngSwitchCase","DateTime"),m.xp6(2),m.Q6J("ngIf",!0===e.isRequired(t.field))}}function he(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.BQk()),2&t){const t=m.oxw(5).$implicit,e=m.oxw().$implicit;m.xp6(1),m.hij(" ",null==e[t.field]?null:e[t.field].display," ")}}function ge(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.BQk()),2&t){const t=m.oxw(5).$implicit,e=m.oxw().$implicit,i=m.oxw(2);m.xp6(1),m.hij(" ",i.formatDisplayName(e[t.field])," ")}}function me(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.ALo(2,"formatValue"),m.BQk()),2&t){const t=m.oxw(5).$implicit,e=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,e[t.field],t)," ")}}function ye(t,e){if(1&t&&(m.ynx(0),m.ynx(1,15),m.YNc(2,he,2,1,"ng-container",34),m.YNc(3,ge,2,1,"ng-container",34),m.YNc(4,me,3,4,"ng-container",27),m.BQk(),m.BQk()),2&t){const t=m.oxw(4).$implicit;m.xp6(1),m.Q6J("ngSwitch",t.type),m.xp6(1),m.Q6J("ngSwitchCase","OneToMany"),m.xp6(1),m.Q6J("ngSwitchCase","ManyToMany")}}function be(t,e){if(1&t&&m.YNc(0,ye,5,3,"ng-container",9),2&t){const t=m.oxw(4).$implicit,e=m.oxw(2);m.Q6J("ngIf",!0!==e.isFooter(t))}}function ve(t,e){if(1&t&&(m.YNc(0,fe,12,11,"ng-template",32),m.YNc(1,be,1,1,"ng-template",null,33,m.W1O)),2&t){const t=m.MAs(2),e=m.oxw(2).$implicit;m.Q6J("ngIf",!0===e.isEditable)("ngIfElse",t)}}function we(t,e){1&t&&m.YNc(0,ve,3,2,"ng-template",26)}function xe(t,e){1&t&&(m.TgZ(0,"label"),m._uU(1,"-"),m.qZA())}function Se(t,e){if(1&t&&m.YNc(0,xe,2,0,"label",9),2&t){const t=m.oxw(3).$implicit;m.Q6J("ngIf",!0===t.isEditable)}}function Ze(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.BQk()),2&t){const t=m.oxw(4).$implicit,e=m.oxw().$implicit;m.xp6(1),m.hij(" ",null==e[t.field]?null:e[t.field].display," ")}}function Ae(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.BQk()),2&t){const t=m.oxw(4).$implicit,e=m.oxw().$implicit,i=m.oxw(2);m.xp6(1),m.hij(" ",i.formatDisplayName(e[t.field])," ")}}function Ce(t,e){1&t&&m._UZ(0,"i",47)}function Te(t,e){if(1&t&&(m.ynx(0),m.YNc(1,Ce,1,0,"i",46),m.BQk()),2&t){const t=m.oxw(4).$implicit,e=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",!0===e[t.field])}}function Le(t,e){if(1&t&&(m.ynx(0),m._uU(1),m.ALo(2,"formatValue"),m.BQk()),2&t){const t=m.oxw(4).$implicit,e=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,e[t.field],t)," ")}}function Oe(t,e){if(1&t&&(m.ynx(0,15),m.YNc(1,Ze,2,1,"ng-container",34),m.YNc(2,Ae,2,1,"ng-container",34),m.YNc(3,Te,2,1,"ng-container",34),m.YNc(4,Le,3,4,"ng-container",27),m.BQk()),2&t){const t=m.oxw(3).$implicit;m.Q6J("ngSwitch",t.type),m.xp6(1),m.Q6J("ngSwitchCase","OneToMany"),m.xp6(1),m.Q6J("ngSwitchCase","ManyToMany"),m.xp6(1),m.Q6J("ngSwitchCase","Boolean")}}function Ne(t,e){if(1&t&&(m.YNc(0,Se,1,1,"ng-template",32),m.YNc(1,Oe,5,4,"ng-template",null,45,m.W1O)),2&t){const t=m.MAs(2),e=m.oxw(3).$implicit,i=m.oxw(2);m.Q6J("ngIf",!0===i.isFooter(e))("ngIfElse",t)}}function Me(t,e){1&t&&m.YNc(0,Ne,3,2,"ng-template",31)}function qe(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"td",25),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).initEditableRow(e)}),m.TgZ(1,"p-cellEditor"),m.YNc(2,Vt,1,0,void 0,9),m.YNc(3,te,1,0,void 0,9),m.YNc(4,we,1,0,void 0,9),m.YNc(5,Me,1,0,void 0,9),m.qZA(),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw(3);m.xp6(2),m.Q6J("ngIf",!0===i.isSpecificInput(t.field)),m.xp6(1),m.Q6J("ngIf",!0===i.isSpecificInput(t.field)),m.xp6(1),m.Q6J("ngIf",!0!==i.isSpecificInput(t.field)),m.xp6(1),m.Q6J("ngIf",!0!==i.isSpecificInput(t.field))}}function Ie(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tr",19),m.NdJ("focusout",function(){return m.CHM(t),m.oxw(2).onFocusout()})("keyup.enter",function(){return m.CHM(t),m.oxw(2).initEditableRow(null)})("keyup.escape",function(){return m.CHM(t),m.oxw(2).cancel()}),m.YNc(1,jt,3,2,"td",9),m.YNc(2,qe,6,4,"td",20),m.qZA()}if(2&t){const t=e.$implicit,i=e.columns,n=m.oxw(2);m.Q6J("pSelectableRow",!0!==n.isFooter(t)?t:null)("pEditableRow",t),m.xp6(1),m.Q6J("ngIf",n.canSelectElement),m.xp6(1),m.Q6J("ngForOf",i)}}function Je(t,e){if(1&t&&(m.TgZ(0,"tr"),m.TgZ(1,"td",48),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.uIk("colspan",t.length+1),m.xp6(1),m.hij(" ",m.lcZ(3,2,"bia.NoRecordsFound")," ")}}function De(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"p-table",2,3),m.NdJ("onFilter",function(){return m.CHM(t),m.oxw().onFilter()})("onLazyLoad",function(e){return m.CHM(t),m.oxw().onLoadLazy(e)})("onStateSave",function(e){return m.CHM(t),m.oxw().onStateSave(e)})("selectionChange",function(){return m.CHM(t),m.oxw().onSelectionChange()}),m.ALo(2,"async"),m.YNc(3,Rt,4,3,"ng-template",4),m.YNc(4,Ie,3,4,"ng-template",5),m.YNc(5,Je,4,4,"ng-template",6),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",t.displayedColumns)("value",t.elements)("paginator",t.paginator)("rows",t.pageSize)("totalRecords",t.totalRecord)("lazy",!0)("loading",t.loading&&null!==m.lcZ(2,14,t.showLoading$))("stateStorage","session")("stateKey",t.tableStateKey)("lazyLoadOnInit",t.getLazyLoadOnInit())("sortField",t.sortFieldValue)("sortOrder",t.sortOrderValue)}}let Qe=(()=>{class t extends At.l{constructor(t,e,i,n){super(t,e,i,n),this.formBuilder=t,this.authService=e,this.biaMessageService=i,this.translateService=n,this.initForm()}initForm(){var t,e;this.form=this.formBuilder.group({id:[this.element.id],title:[this.element.title,St.kI.required],description:[this.element.description,St.kI.required],type:[null===(t=this.element.type)||void 0===t?void 0:t.id,St.kI.required],read:[this.element.read],createdDate:[this.element.createdDate,St.kI.required],createdBy:[null===(e=this.element.createdBy)||void 0===e?void 0:e.id],notifiedUsers:[this.element.notifiedUsers],jData:[this.element.jData]})}onSubmit(){var t;if(this.form.valid){const e=this.form.value;e.id=e.id>0?e.id:0,e.read=!!e.read&&e.read,e.createdBy=Zt.P.Clone(e.createdBy),e.notifiedUsers=Zt.P.Differential(e.notifiedUsers,null===(t=this.element)||void 0===t?void 0:t.notifiedUsers),e.type=Object.assign({},e.type),this.save.emit(e),this.form.reset()}}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(St.qu),m.Y36(U.e),m.Y36(I.X),m.Y36(yt.sK))},t.\u0275cmp=m.Xpm({type:t,selectors:[["bia-notification-table"]],features:[m.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur","onClose"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur","onClose"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(t,e){1&t&&(m.TgZ(0,"form",0),m.YNc(1,De,6,16,"p-table",1),m.qZA()),2&t&&(m.Q6J("formGroup",e.form),m.xp6(1),m.Q6J("ngIf",e.configuration))},directives:[St._Y,St.JL,St.sg,xt.O5,Ct.iA,Tt.jx,xt.sg,Ct.Mo,Ct.lQ,Ct.fz,xt.RF,Lt.o,xt.mk,Ot.oO,Ct.Ei,Ct.D$,Ct.UA,Ct.YL,xt.ED,St.Fj,St.JJ,St.u,xt.n9,Nt.Lt,Mt.NU,qt.XZ,St.wV,It.f,Jt.D,St.nD],pipes:[xt.Ov,yt.X$,Dt.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center!important}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),t})();function $e(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"bia-table",6),m.NdJ("clickRow",function(e){return m.CHM(t),m.oxw().onDetail(e)})("loadLazy",function(e){return m.CHM(t),m.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return m.CHM(t),m.oxw().onSelectedElementsChanged(e)}),m.ALo(1,"async"),m.ALo(2,"async"),m.ALo(3,"async"),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("elements",m.lcZ(1,12,t.notifications$))("totalRecord",m.lcZ(2,14,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canClickRow",t.canEdit)("canSelectElement",t.canDelete)("loading",m.lcZ(3,16,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}function ke(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"bia-notification-table",7),m.NdJ("loadLazy",function(e){return m.CHM(t),m.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return m.CHM(t),m.oxw().onSelectedElementsChanged(e)})("save",function(e){return m.CHM(t),m.oxw().onSave(e)}),m.ALo(1,"async"),m.ALo(2,"async"),m.ALo(3,"async"),m.ALo(4,"async"),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("elements",m.lcZ(1,14,t.notifications$))("dictOptionDtos",m.lcZ(2,16,t.notificationOptionsService.dictOptionDtos$))("totalRecord",m.lcZ(3,18,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canAdd",t.canAdd)("canSelectElement",t.canDelete)("loading",m.lcZ(4,20,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}let Ue=(()=>{class t{constructor(t,e,i,n,o,a,s,c,l){this.store=t,this.router=e,this.activatedRoute=i,this.authService=n,this.notificationDas=o,this.translateService=a,this.biaTranslationService=s,this.notificationsSignalRService=c,this.notificationOptionsService=l,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!0,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new D.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=k.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"notificationsGrid":void 0}ngOnInit(){this.parentIds=[],this.sub=new D.w,this.initTableConfiguration(),this.setPermissions(),this.notifications$=this.store.select(M),this.totalCount$=this.store.select(C),this.loading$=this.store.select(N),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange&&this.sub.add(this.biaTranslationService.currentCulture$.pipe((0,mt.T)(1)).subscribe(t=>{this.onLoadLazy(this.notificationListComponent.getLazyLoadMetadata())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.OnHide()}OnDisplay(){this.useView&&this.store.dispatch((0,j.Tx)()),this.useSignalR&&(this.notificationsSignalRService.initialize(),J.useSignalR=!0)}OnHide(){this.useSignalR&&(J.useSignalR=!1,this.notificationsSignalRService.destroy())}onCreate(){this.useCalcMode||this.router.navigate(["./create"],{relativeTo:this.activatedRoute})}onEdit(t){this.useCalcMode||this.router.navigate(["./"+t+"/edit"],{relativeTo:this.activatedRoute})}onDetail(t){this.useCalcMode||this.router.navigate(["./"+t+"/detail"],{relativeTo:this.activatedRoute})}onSave(t){this.useCalcMode&&((null==t?void 0:t.id)>0?this.canEdit&&this.store.dispatch(n.update({notification:t})):this.canAdd&&this.store.dispatch(n.create({notification:t})))}onDelete(){this.selectedNotifications&&this.canDelete&&this.store.dispatch(n.multiRemove({ids:this.selectedNotifications.map(t=>t.id)}))}onSelectedElementsChanged(t){this.selectedNotifications=t}onPageSizeChange(t){this.pageSize=t}onLoadLazy(t){const e=Object.assign({parentIds:this.parentIds},t);this.store.dispatch(n.loadAllByPost({event:e}))}searchGlobalChanged(t){this.globalSearchValue=t}displayedColumnsChanged(t){this.displayedColumns=t}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(t){this.viewPreference=t}onExportCSV(){const t={};this.columns.map(e=>t[e.value.split(".")[1]]=this.translateService.instant(e.value));const e=Object.assign({parentIds:this.parentIds,columns:t},this.notificationListComponent.getLazyLoadMetadata());this.notificationDas.getFile(e).subscribe(t=>{Y.saveAs(t,this.translateService.instant("app.notifications")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(B.y.Notification_Update),this.canDelete=this.authService.hasPermission(B.y.Notification_Delete),this.canAdd=this.authService.hasPermission(B.y.Notification_Create)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(t=>{this.tableConfiguration={columns:[new $.ML("titleTranslated","notification.title"),new $.ML("descriptionTranslated","notification.description"),Object.assign(new $.ML("type","notification.type.title"),{type:$.d5.OneToMany}),Object.assign(new $.ML("read","notification.read"),{isSearchable:!1,type:$.d5.Boolean}),Object.assign(new $.ML("createdDate","notification.createdDate"),{type:$.d5.Date,formatDate:t.dateFormat}),Object.assign(new $.ML("createdBy","notification.createdBy"),{type:$.d5.OneToMany}),Object.assign(new $.ML("notifiedUsers","notification.notifiedUsers"),{type:$.d5.ManyToMany}),new $.ML("jData","notification.jData")]},this.columns=this.tableConfiguration.columns.map(t=>({key:t.field,value:t.header})),this.displayedColumns=[...this.columns]})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.yh),m.Y36(a.F0),m.Y36(a.gz),m.Y36(U.e),m.Y36(y),m.Y36(yt.sK),m.Y36(F.P6),m.Y36(_),m.Y36(gt))},t.\u0275cmp=m.Xpm({type:t,selectors:[["bia-notifications-index"]],viewQuery:function(t,e){if(1&t&&m.Gf(Q.$,5),2&t){let t;m.iGM(t=m.CRH())&&(e.notificationListComponent=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&m.ekj("bia-flex",e.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","tableStateKey","clickRow","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"bia-table-header",2),m.NdJ("create",function(){return e.onCreate()})("exportCSV",function(){return e.onExportCSV()})("delete",function(){return e.onDelete()}),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"bia-table-controller",3),m.NdJ("displayedColumnsChange",function(t){return e.displayedColumnsChanged(t)})("filter",function(t){return e.searchGlobalChanged(t)})("pageSizeChange",function(t){return e.onPageSizeChange(t)})("toggleSearch",function(){return e.onToggleSearch()})("viewChange",function(t){return e.onViewChange(t)}),m.ALo(5,"async"),m.qZA(),m.YNc(6,$e,4,18,"bia-table",4),m.YNc(7,ke,5,22,"bia-notification-table",5),m.qZA(),m.qZA()),2&t&&(m.xp6(2),m.Q6J("headerTitle",m.lcZ(3,12,"notification.listOf"))("canAdd",e.canAdd&&!e.useCalcMode)("canDelete",e.canDelete)("canExportCSV",!0)("selectedElements",e.selectedNotifications),m.xp6(2),m.Q6J("defaultPageSize",e.defaultPageSize)("length",m.lcZ(5,14,e.totalCount$))("columns",e.columns)("columnToDisplays",e.displayedColumns)("tableStateKey",e.tableStateKey),m.xp6(2),m.Q6J("ngIf",!e.useCalcMode),m.xp6(1),m.Q6J("ngIf",e.useCalcMode))},directives:[bt.xw,bt.yH,vt.l,wt.B,xt.O5,Q.$,Qe],pipes:[yt.X$,xt.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t})();var Ye=i(61028),Fe=i(16244),Be=i(80014),Ee=i(44748),Pe=i(4207),Re=i(46543);function _e(t,e){if(1&t){const t=m.EpF();m.ynx(0,26),m.TgZ(1,"p-tabPanel",4),m.TgZ(2,"div",27),m._UZ(3,"input",28),m.TgZ(4,"div",5),m.TgZ(5,"div",6),m.TgZ(6,"span",7),m.TgZ(7,"input",29),m.NdJ("change",function(){const e=m.CHM(t).index;return m.oxw().changeTranslation(e)}),m.qZA(),m.TgZ(8,"label"),m.TgZ(9,"span",9),m._uU(10,"*"),m.qZA(),m._uU(11),m.ALo(12,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"div",5),m.TgZ(14,"div",6),m.TgZ(15,"span",7),m.TgZ(16,"input",30),m.NdJ("change",function(){const e=m.CHM(t).index;return m.oxw().changeTranslation(e)}),m.qZA(),m.TgZ(17,"label"),m.TgZ(18,"span",9),m._uU(19,"*"),m.qZA(),m._uU(20),m.ALo(21,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(22,"div",11),m.TgZ(23,"button",31),m.NdJ("click",function(){const e=m.CHM(t).index;return m.oxw().removeTranslation(e)}),m.ALo(24,"translate"),m.qZA(),m.qZA(),m.qZA(),m.BQk()}if(2&t){const t=e.$implicit,i=e.index,n=m.oxw();m.xp6(1),m.Q6J("header",n.labelTranslation(t.value.languageId)),m.xp6(1),m.Q6J("formGroupName",i),m.xp6(9),m.Oqu(m.lcZ(12,5,"notification.title")),m.xp6(9),m.Oqu(m.lcZ(21,7,"notification.description")),m.xp6(3),m.s9C("label",m.lcZ(24,9,"bia.translation.delete"))}}function He(t,e){1&t&&m._UZ(0,"i",36)}const je=function(){return{width:"100%"}};function ze(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"p-tabPanel",32),m.YNc(1,He,1,0,"ng-template",33),m.TgZ(2,"div",5),m.TgZ(3,"div",6),m.TgZ(4,"span",7),m.TgZ(5,"p-dropdown",34),m.NdJ("onChange",function(){return m.CHM(t),m.oxw().onSelectionLanguage()}),m.qZA(),m.TgZ(6,"label"),m.TgZ(7,"span",9),m._uU(8,"*"),m.qZA(),m._uU(9),m.ALo(10,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"div",11),m.TgZ(12,"button",35),m.NdJ("click",function(){return m.CHM(t),m.oxw().addTranslation()}),m.ALo(13,"translate"),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(5),m.Akn(m.DdM(10,je)),m.Q6J("options",t.missingLanguageOptions),m.xp6(4),m.Oqu(m.lcZ(10,6,"bia.translation.language")),m.xp6(3),m.s9C("label",m.lcZ(13,8,"bia.translation.add")),m.Q6J("disabled",!t.selectionLanguage)}}const Ge=function(){return{width:"100%"}};let Ke=(()=>{class t{constructor(t){this.formBuilder=t,this.notification={},this.save=new m.vpe,this.cancel=new m.vpe,this.missingTranslation=!1,this.selectionLanguage=!1,this.initForm()}static Differential(t,e){let i=[];if(e&&Array.isArray(e)){const n=e.filter(e=>!t||!t.map(t=>t.id).includes(e.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:Fe.e.Deleted}));n&&(i=i.concat(n))}if(t&&Array.isArray(t)){const e=null==t?void 0:t.filter(t=>t.dtoState===Fe.e.Added||t.dtoState===Fe.e.Modified);e&&(i=i.concat(e))}return i}ngOnChanges(t){this.notification&&(this.form.reset(),this.notification&&(this.form.patchValue(Object.assign({},this.notification)),this.notificationTranslations.clear(),this.notification.notificationTranslations&&(this.notification.notificationTranslations.forEach(t=>{this.notificationTranslations.push(this.createTranslation(t))}),this.computeMissingTranslation())))}initForm(){const t={id:[this.notification.id],title:[this.notification.title,St.kI.required],description:[this.notification.description,St.kI.required],type:[this.notification.type,St.kI.required],read:[this.notification.read],createdDate:[this.notification.createdDate,St.kI.required],createdBy:[this.notification.createdBy],notifiedUsers:[this.notification.notifiedUsers],jData:[this.notification.jData],notificationTranslations:this.formBuilder.array([]),languageToAdd:[]};this.form=this.formBuilder.group(t),this.notificationTranslations=this.form.get("notificationTranslations")}onSelectionLanguage(){this.selectionLanguage=!0}createTranslation(t){return this.formBuilder.group({id:t.id,dtoState:t.dtoState,languageId:t.languageId,description:[t.description,St.kI.required],title:[t.title,St.kI.required]})}addTranslation(){this.notificationTranslations.push(this.createTranslation({id:0,languageId:this.form.value.languageToAdd.id,title:"",description:"",dtoState:Fe.e.Added})),this.computeMissingTranslation()}addAllTranslation(){this.missingLanguageOptions.forEach(t=>this.notificationTranslations.push(this.createTranslation({id:0,languageId:t.id,title:"",description:"",dtoState:Fe.e.Added}))),this.computeMissingTranslation()}removeTranslation(t){this.notificationTranslations.removeAt(t),this.computeMissingTranslation()}changeTranslation(t){this.notificationTranslations.at(t).value.dtoState===Fe.e.Unchanged&&(this.notificationTranslations.at(t).value.dtoState=Fe.e.Modified),this.computeMissingTranslation()}computeMissingTranslation(){this.missingLanguageOptions=this.languageOptions.filter(t=>!this.notificationTranslations.value.find(e=>e.languageId===t.id)&&!k.Nf.find(e=>e===t.id)),this.missingTranslation=this.missingLanguageOptions.length>0}labelTranslation(t){var e;return null===(e=this.languageOptions.find(e=>e.id===t))||void 0===e?void 0:e.display}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){var e,i;if(this.form.valid){const n=this.form.value;n.id=n.id>0?n.id:0,n.read=!!n.read&&n.read,n.createdBy=Zt.P.Clone(n.createdBy),n.notifiedUsers=Zt.P.Differential(n.notifiedUsers,null===(e=this.notification)||void 0===e?void 0:e.notifiedUsers),n.type=Object.assign({},n.type),n.notificationTranslations=t.Differential(n.notificationTranslations,null===(i=this.notification)||void 0===i?void 0:i.notificationTranslations),this.save.emit(n),this.form.reset()}}lang(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(St.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["bia-notification-form"]],inputs:{notification:"notification",userOptions:"userOptions",roleOptions:"roleOptions",notificationTypeOptions:"notificationTypeOptions",languageOptions:"languageOptions"},outputs:{save:"save",cancel:"cancel"},features:[m.TTD],decls:79,vars:65,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center","fxFlex","100"],["fxLayout","column","fxLayoutAlign","top","fxFlex","50"],[3,"legend"],[3,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button",3,"label","disabled","click"],["formArrayName","notificationTranslations",4,"ngFor","ngForOf"],["header","+",4,"ngIf"],["placeholder","\xa0","formControlName","type","optionLabel","display","datakey","id",3,"options"],["binary","true","formControlName","read",3,"label"],["biaLocale","","formControlName","createdDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["placeholder","\xa0","formControlName","createdBy","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","notifiedUsers","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxFlex","90"],[2,"left","5px","top","-20px","font-size","12px","color","#00839b"],[1,"p-float-label"],["formControlName","jData","rows","5","autoResize","autoResize","pInputTextarea","",2,"width","100%",3,"cols"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],["formArrayName","notificationTranslations"],[3,"formGroupName"],["formControlName","languageId","type","hidden"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%",3,"change"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%",3,"change"],["pButton","","type","button",3,"label","click"],["header","+"],["pTemplate","header"],["placeholder","\xa0","formControlName","languageToAdd","optionLabel","display","datakey","id",3,"options","onChange"],["pButton","","type","button",1,"ui-button-secondary",3,"label","disabled","click"],[1,"pi","pi-plus"]],template:function(t,e){1&t&&(m.TgZ(0,"form",0),m.NdJ("submit",function(){return e.onSubmit()}),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"p-fieldset",3),m.ALo(4,"translate"),m.TgZ(5,"p-tabView"),m.TgZ(6,"p-tabPanel",4),m.ALo(7,"translate"),m.TgZ(8,"div",5),m.TgZ(9,"div",6),m.TgZ(10,"span",7),m._UZ(11,"input",8),m.TgZ(12,"label"),m.TgZ(13,"span",9),m._uU(14,"*"),m.qZA(),m._uU(15),m.ALo(16,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",5),m.TgZ(18,"div",6),m.TgZ(19,"span",7),m._UZ(20,"input",10),m.TgZ(21,"label"),m.TgZ(22,"span",9),m._uU(23,"*"),m.qZA(),m._uU(24),m.ALo(25,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"div",11),m.TgZ(27,"button",12),m.NdJ("click",function(){return e.addAllTranslation()}),m.ALo(28,"translate"),m.qZA(),m.qZA(),m.qZA(),m.YNc(29,_e,25,11,"ng-container",13),m.YNc(30,ze,14,11,"p-tabPanel",14),m.qZA(),m.qZA(),m.TgZ(31,"div",5),m.TgZ(32,"div",6),m.TgZ(33,"span",7),m._UZ(34,"p-dropdown",15),m.TgZ(35,"label"),m.TgZ(36,"span",9),m._uU(37,"*"),m.qZA(),m._uU(38),m.ALo(39,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(40,"div",5),m.TgZ(41,"div",6),m._UZ(42,"p-checkbox",16),m.ALo(43,"translate"),m.qZA(),m.qZA(),m.TgZ(44,"div",5),m.TgZ(45,"div",6),m.TgZ(46,"span",7),m._UZ(47,"p-calendar",17),m.TgZ(48,"label"),m.TgZ(49,"span",9),m._uU(50,"*"),m.qZA(),m._uU(51),m.ALo(52,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(53,"div",5),m.TgZ(54,"div",6),m.TgZ(55,"span",7),m._UZ(56,"p-dropdown",18),m.TgZ(57,"label"),m._uU(58),m.ALo(59,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(60,"div",5),m.TgZ(61,"div",6),m.TgZ(62,"span",7),m._UZ(63,"p-multiSelect",19),m.TgZ(64,"label"),m._uU(65),m.ALo(66,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(67,"div",5),m.TgZ(68,"div",20),m.TgZ(69,"span",21),m._uU(70),m.ALo(71,"translate"),m.qZA(),m.TgZ(72,"span",22),m._UZ(73,"textarea",23),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(74,"div",11),m._UZ(75,"button",24),m.ALo(76,"translate"),m.TgZ(77,"button",25),m.NdJ("click",function(){return e.onCancel()}),m.ALo(78,"translate"),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.Q6J("formGroup",e.form),m.xp6(3),m.s9C("legend",m.lcZ(4,34,"bia.translation.translatedFields")),m.xp6(3),m.s9C("header",m.lcZ(7,36,"translation.defaultLanguage")),m.xp6(9),m.Oqu(m.lcZ(16,38,"notification.title")),m.xp6(9),m.Oqu(m.lcZ(25,40,"notification.description")),m.xp6(3),m.s9C("label",m.lcZ(28,42,"bia.translation.addAll")),m.Q6J("disabled",!e.missingTranslation),m.xp6(2),m.Q6J("ngForOf",e.notificationTranslations.controls),m.xp6(1),m.Q6J("ngIf",(null==e.missingLanguageOptions?null:e.missingLanguageOptions.length)>0),m.xp6(4),m.Akn(m.DdM(60,je)),m.Q6J("options",e.notificationTypeOptions),m.xp6(4),m.Oqu(m.lcZ(39,44,"notification.type.title")),m.xp6(4),m.s9C("label",m.lcZ(43,46,"notification.read")),m.xp6(5),m.Akn(m.DdM(61,Ge)),m.Q6J("showButtonBar",!0)("inputStyle",m.DdM(62,Ge)),m.xp6(4),m.Oqu(m.lcZ(52,48,"notification.createdDate")),m.xp6(5),m.Akn(m.DdM(63,je)),m.Q6J("options",e.userOptions)("showClear",!0),m.xp6(2),m.Oqu(m.lcZ(59,50,"notification.createdBy")),m.xp6(5),m.Akn(m.DdM(64,je)),m.Q6J("options",e.userOptions)("virtualScroll",!0),m.xp6(2),m.Oqu(m.lcZ(66,52,"notification.notifiedUsers")),m.xp6(5),m.Oqu(m.lcZ(71,54,"notification.jData")),m.xp6(3),m.Q6J("cols",60),m.xp6(2),m.s9C("label",m.lcZ(76,56,"bia.save")),m.Q6J("disabled",!e.form.valid),m.xp6(2),m.s9C("label",m.lcZ(78,58,"bia.cancel")))},directives:[St._Y,St.JL,bt.xw,St.sg,bt.Wh,bt.yH,Be.p,Ee.xf,Ee.x4,St.Fj,St.JJ,St.u,Lt.o,St.nD,bt.SQ,Pe.Hq,xt.sg,xt.O5,Nt.Lt,qt.XZ,It.f,Jt.D,Mt.NU,Re.g,St.CE,St.x0,Tt.jx],pipes:[yt.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t})(),Ve=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.router=e,this.activatedRoute=i,this.notificationOptionsService=n,this.biaTranslationService=o,this.sub=new D.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(n.create({notification:t})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.yh),m.Y36(a.F0),m.Y36(a.gz),m.Y36(gt),m.Y36(F.P6))},t.\u0275cmp=m.Xpm({type:t,selectors:[["bia-notification-new"]],decls:5,vars:12,consts:[[3,"notificationTypeOptions","roleOptions","userOptions","languageOptions","cancel","save"]],template:function(t,e){1&t&&(m.TgZ(0,"bia-notification-form",0),m.NdJ("cancel",function(){return e.onCancelled()})("save",function(t){return e.onSubmitted(t)}),m.ALo(1,"async"),m.ALo(2,"async"),m.ALo(3,"async"),m.ALo(4,"async"),m.qZA()),2&t&&m.Q6J("notificationTypeOptions",m.lcZ(1,4,e.notificationOptionsService.notificationTypeOptions$))("roleOptions",m.lcZ(2,6,e.notificationOptionsService.roleOptions$))("userOptions",m.lcZ(3,8,e.notificationOptionsService.userOptions$))("languageOptions",m.lcZ(4,10,e.notificationOptionsService.languageOptions$))},directives:[Ke],pipes:[xt.Ov],styles:[""]}),t})(),Xe=(()=>{class t{constructor(t){this.store=t,this.sub=new D.w,this.InitSub(),this.loading$=this.store.select(O),this.notification$=this.store.select(T)}get currentNotification(){var t;return(null===(t=this._currentNotification)||void 0===t?void 0:t.id)===this._currentNotificationId?this._currentNotification:null}get currentNotificationId(){return this._currentNotificationId}set currentNotificationId(t){this._currentNotificationId=Number(t),this.store.dispatch(n.load({id:t}))}get currentNotificationData(){return this._currentNotification.jData}InitSub(){this.sub=new D.w,this.sub.add(this.store.select(T).subscribe(t=>{t&&(this._currentNotification=t)}))}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(s.yh))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var We=i(79373);function ti(t,e){1&t&&m._UZ(0,"bia-spinner",2),2&t&&m.Q6J("overlay",!0)}let ei=(()=>{class t{constructor(t,e,i,n,o,a){this.store=t,this.router=e,this.activatedRoute=i,this.notificationOptionsService=n,this.notificationService=o,this.biaTranslationService=a,this.displayChange=new m.vpe,this.sub=new D.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(n.update({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.yh),m.Y36(a.F0),m.Y36(a.gz),m.Y36(gt),m.Y36(Xe),m.Y36(F.P6))},t.\u0275cmp=m.Xpm({type:t,selectors:[["bia-notification-edit"]],outputs:{displayChange:"displayChange"},decls:8,vars:18,consts:[[3,"notification","notificationTypeOptions","roleOptions","userOptions","languageOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,e){1&t&&(m.TgZ(0,"bia-notification-form",0),m.NdJ("cancel",function(){return e.onCancelled()})("save",function(t){return e.onSubmitted(t)}),m.ALo(1,"async"),m.ALo(2,"async"),m.ALo(3,"async"),m.ALo(4,"async"),m.ALo(5,"async"),m.qZA(),m.YNc(6,ti,1,1,"bia-spinner",1),m.ALo(7,"async")),2&t&&(m.Q6J("notification",m.lcZ(1,6,e.notificationService.notification$))("notificationTypeOptions",m.lcZ(2,8,e.notificationOptionsService.notificationTypeOptions$))("roleOptions",m.lcZ(3,10,e.notificationOptionsService.roleOptions$))("userOptions",m.lcZ(4,12,e.notificationOptionsService.userOptions$))("languageOptions",m.lcZ(5,14,e.notificationOptionsService.languageOptions$)),m.xp6(6),m.Q6J("ngIf",m.lcZ(7,16,e.notificationService.loading$)))},directives:[Ke,xt.O5,We.O],pipes:[xt.Ov],styles:[""]}),t})();var ii=i(16249),ni=i(30466);function oi(t,e){1&t&&m._UZ(0,"bia-spinner",1),2&t&&m.Q6J("overlay",!0)}let ai=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.route=e,this.notificationService=i,this.layoutService=n,this.biaTranslationService=o,this.sub=new D.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationService.currentNotificationId=this.route.snapshot.params.notificationId})),this.sub.add(this.store.select(T).subscribe(t=>{(null==t?void 0:t.title)&&(this.route.data.pipe((0,E.P)()).subscribe(e=>{e.breadcrumb=t.title}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.yh),m.Y36(a.gz),m.Y36(Xe),m.Y36(ni.N),m.Y36(F.P6))},t.\u0275cmp=m.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,e){1&t&&(m._UZ(0,"router-outlet"),m.YNc(1,oi,1,1,"bia-spinner",0),m.ALo(2,"async")),2&t&&(m.xp6(1),m.Q6J("ngIf",m.lcZ(2,1,e.notificationService.loading$)))},directives:[a.lC,xt.O5,We.O],pipes:[xt.Ov],styles:[""]}),t})();var si=i(98832),ci=i(53460),li=i(39682);let ri=(()=>{class t extends g.Z{constructor(t){super(t,"NotificationTypes")}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(m.zs3))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ui=(()=>{class t{constructor(t,e,i){this.actions$=t,this.notificationTypeDas=e,this.biaMessageService=i,this.loadAll$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(it.loadAll),(0,u.w)(()=>this.notificationTypeDas.getList({endpoint:"allOptions"}).pipe((0,d.U)(t=>it.loadAllSuccess({notificationTypes:t})),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(it.failure({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(c.eX),m.LFG(ri),m.LFG(I.X))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})(),di=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.Aw.forFeature("domain-notification-type-options",st),c.sQ.forFeature([ui])]]}),t})();var pi=i(83836);function fi(t,e){if(1&t&&(m.TgZ(0,"div",8),m.TgZ(1,"div"),m.TgZ(2,"b"),m._uU(3),m.ALo(4,"translate"),m.qZA(),m._UZ(5,"br"),m._uU(6),m.ALo(7,"translate"),m.qZA(),m.TgZ(8,"div"),m.TgZ(9,"b"),m._uU(10),m.ALo(11,"translate"),m.qZA(),m._UZ(12,"br"),m._uU(13),m.ALo(14,"translate"),m.qZA(),m.TgZ(15,"div"),m.TgZ(16,"b"),m._uU(17),m.ALo(18,"translate"),m.qZA(),m._UZ(19,"br"),m._uU(20),m.ALo(21,"date"),m.qZA(),m.TgZ(22,"div"),m.TgZ(23,"b"),m._uU(24),m.ALo(25,"translate"),m.qZA(),m._UZ(26,"br"),m._uU(27),m.qZA(),m.qZA()),2&t){const t=m.oxw().ngIf;m.xp6(3),m.Oqu(m.lcZ(4,8,"notification.title")),m.xp6(3),m.Oqu(m.lcZ(7,10,t.titleTranslated)),m.xp6(4),m.Oqu(m.lcZ(11,12,"notification.description")),m.xp6(3),m.hij("",m.lcZ(14,14,t.descriptionTranslated)," "),m.xp6(4),m.Oqu(m.lcZ(18,16,"notification.createdDate")),m.xp6(3),m.Oqu(m.xi3(21,18,t.createdDate,"short")),m.xp6(4),m.Oqu(m.lcZ(25,21,"notification.type.title")),m.xp6(3),m.Oqu(t.type.display)}}function hi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().ngIf;return m.oxw().onAction(e)}),m.ALo(1,"translate"),m.qZA()}if(2&t){const t=m.oxw().ngIf;let e;m.Q6J("label",m.lcZ(1,1,null!==(e=null==t.data?null:t.data.display)&&void 0!==e?e:"notification.action"))}}function gi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",7),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).onEdit()}),m.ALo(1,"translate"),m.qZA()}2&t&&m.s9C("label",m.lcZ(1,1,"bia.edit"))}function mi(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.YNc(1,fi,28,23,"div",2),m.TgZ(2,"div",3),m._UZ(3,"bia-notification-team-warning",4),m.YNc(4,hi,2,3,"button",5),m.YNc(5,gi,2,3,"button",6),m.TgZ(6,"button",7),m.NdJ("click",function(){return m.CHM(t),m.oxw().onCancelled()}),m.ALo(7,"translate"),m.qZA(),m.qZA(),m.BQk()}if(2&t){const t=e.ngIf,i=m.oxw();m.xp6(1),m.Q6J("ngIf",t&&t.id),m.xp6(2),m.Q6J("notification",t),m.xp6(1),m.Q6J("ngIf",i.canAction(t)),m.xp6(1),m.Q6J("ngIf",i.canEdit),m.xp6(1),m.s9C("label",m.lcZ(7,5,"bia.cancel"))}}function yi(t,e){1&t&&m._UZ(0,"bia-spinner",10),2&t&&m.Q6J("overlay",!0)}let bi=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.router=e,this.activatedRoute=i,this.authService=n,this.notificationService=o,this.displayChange=new m.vpe,this.sub=new D.w}ngOnInit(){this.notification$=this.notificationService.notification$,this.canEdit=this.authService.hasPermission(B.y.Notification_Update)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(n.update({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onEdit(){this.router.navigate(["../edit"],{relativeTo:this.activatedRoute})}canAction(t){return!(!t.data||!t.data.route)}onAction(t){if(t.data){let e=t.data;e.route&&((null==e?void 0:e.teams)&&e.teams.forEach(t=>{this.authService.changeCurrentTeamId(t.typeId,t.id),t.roles&&this.authService.changeCurrentRoleIds(t.typeId,t.id,t.roles.map(t=>t.id))}),this.router.navigate(t.data.route))}}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.yh),m.Y36(a.F0),m.Y36(a.gz),m.Y36(U.e),m.Y36(Xe))},t.\u0275cmp=m.Xpm({type:t,selectors:[["bia-notification-detail"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[4,"ngIf"],[3,"overlay",4,"ngIf"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly",4,"ngIf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],[3,"notification"],["pButton","","type","button","class","p-button-primary",3,"label","click",4,"ngIf"],["pButton","","type","button","class","p-button-secondary",3,"label","click",4,"ngIf"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly"],["pButton","","type","button",1,"p-button-primary",3,"label","click"],[3,"overlay"]],template:function(t,e){1&t&&(m.YNc(0,mi,8,7,"ng-container",0),m.ALo(1,"async"),m.YNc(2,yi,1,1,"bia-spinner",1),m.ALo(3,"async")),2&t&&(m.Q6J("ngIf",m.lcZ(1,2,e.notification$)),m.xp6(2),m.Q6J("ngIf",m.lcZ(3,4,e.loading$)))},directives:[xt.O5,bt.xw,bt.SQ,bt.Wh,pi.t,Pe.Hq,We.O],pipes:[xt.Ov,yt.X$,xt.uU],styles:[""]}),t})(),vi=(()=>{class t extends g.Z{constructor(t){super(t,"Languages")}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(m.zs3))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wi=(()=>{class t{constructor(t,e,i){this.actions$=t,this.languageDas=e,this.biaMessageService=i,this.loadAll$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(H.loadAll),(0,u.w)(()=>this.languageDas.getList({endpoint:"allOptions"}).pipe((0,d.U)(t=>H.loadAllSuccess({languages:t})),(0,p.K)(t=>(this.biaMessageService.showError(),(0,l.of)(H.failure({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(c.eX),m.LFG(vi),m.LFG(I.X))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})(),xi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.Aw.forFeature("domain-language-options",X),c.sQ.forFeature([wi])]]}),t})();var Si=i(11936);const Zi=[{path:"",data:{breadcrumb:null,permission:B.y.Notification_List_Access,InjectComponent:Ue},component:ci.e,canActivate:[ii.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:B.y.Notification_Create,title:"notification.add",InjectComponent:Ve},component:si._,canActivate:[ii.n]},{path:":notificationId",data:{breadcrumb:"",canNavigate:!0},component:ai,canActivate:[ii.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:B.y.Notification_Update,title:"notification.edit",InjectComponent:ei},component:ci.e,canActivate:[ii.n]},{path:"detail",data:{breadcrumb:"bia.detail",canNavigate:!0,permission:B.y.Notification_Read,title:"notification.detail",InjectComponent:bi},component:si._,canActivate:[ii.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}];let Ai=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[Ye.m,St.UX,a.Bz.forChild(Zi),s.Aw.forFeature("notifications",S),c.sQ.forFeature([J]),di,li.U,xi,Si.p]]}),t})()},94529:function(t,e,i){"use strict";i.d(e,{b:function(){return n}});class n{constructor(t,e){this.key=t,this.value=e}}},16244:function(t,e,i){"use strict";i.d(e,{e:function(){return n}});var n=(()=>{return(t=n||(n={}))[t.Unchanged=0]="Unchanged",t[t.Added=1]="Added",t[t.Modified=2]="Modified",t[t.Deleted=3]="Deleted",n;var t})()}}]);