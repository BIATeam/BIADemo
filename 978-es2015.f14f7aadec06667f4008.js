(self.webpackChunkbiademo=self.webpackChunkbiademo||[]).push([[978],{49457:function(t,e){var i,n;void 0!==(n="function"==typeof(i=function(){"use strict";function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){s(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(i){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,s){var r=o.URL||o.webkitURL,c=document.createElement("a");c.download=a=a||t.name||"download",c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?n(c):i(c.href)?e(t,a,s):n(c,c.target="_blank")):(c.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(c.href)},4e4),setTimeout(function(){n(c)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,a){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),o);else if(i(t))e(t,o,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){n(s)})}}:function(t,i,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var r="application/octet-stream"===t.type,c=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&c||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var d=o.URL||o.webkitURL,p=d.createObjectURL(t);s?s.location=p:location.href=p,s=null,setTimeout(function(){d.revokeObjectURL(p)},4e4)}});o.saveAs=s.saveAs=s,t.exports=s})?i.apply(e,[]):i)&&(t.exports=n)},16249:function(t,e,i){"use strict";i.d(e,{n:function(){return r}});var n=i(8340),o=i(92340),a=i(68307),s=i(37716);let r=(()=>{class t{constructor(t){this.authService=t}canActivate(t,e){return this.authService.hasPermissionObs(t.data.permission).pipe((0,a.b)(t=>{!0!==t&&(window.location.href=o.N.urlErrorPage+"?num=403")}))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(n.e))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},11466:function(t,e,i){"use strict";i.d(e,{P:function(){return o}});var n=i(16244);class o{static Clone(t){return t?Object.assign({},t):null}static Differential(t,e){let i=[];if(e&&Array.isArray(e)){const o=e.filter(e=>!t||!t.map(t=>t.id).includes(e.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:n.e.Deleted}));o&&(i=i.concat(o))}if(t){const o=null==t?void 0:t.filter(t=>!e||!e.map(t=>t.id).includes(t.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:n.e.Added}));o&&(i=i.concat(o))}return i}}},82762:function(t,e,i){"use strict";i.d(e,{b:function(){return n}});const n=(0,i(86710).PH)("[Bia] Success the refresh of the list will be done by signalR.")},33978:function(t,e,i){"use strict";i.r(e),i.d(e,{NotificationModule:function(){return Ei}});var n=i(2694),o=i(86710),a=i(91601),s=i(25917),r=i(92996),c=i(43190),l=i(88002),u=i(5304),d=i(94612),p=i(57057);const f=(0,o.PH)("[Notifications] Load all by post",(0,o.Ky)()),h=(0,o.PH)("[Notifications] Load",(0,o.Ky)()),g=(0,o.PH)("[Notifications] Create",(0,o.Ky)()),m=(0,o.PH)("[Notifications] Update",(0,o.Ky)()),y=(0,o.PH)("[Notifications] Remove",(0,o.Ky)()),b=(0,o.PH)("[Notifications] Multi Remove",(0,o.Ky)()),v=(0,o.PH)("[Notifications] Load all by post success",(0,o.Ky)()),x=(0,o.PH)("[Notifications] Load success",(0,o.Ky)()),w=(0,o.PH)("[Notifications] Failure",(0,o.Ky)());var Z=i(74147),S=i(37716);let A=(()=>{class t extends Z.Z{constructor(t){super(t,"Notifications")}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=i(80273);const T=(0,C.H)({selectId:t=>t.id,sortComparer:!1}),L=T.getInitialState({totalCount:0,currentNotification:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1}),O=(0,o.Lq)(L,(0,o.on)(f,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!0})),(0,o.on)(h,t=>Object.assign(Object.assign({},t),{loadingGet:!0})),(0,o.on)(v,(t,{result:e,event:i})=>{const n=T.setAll(e.data,t);return n.totalCount=e.totalCount,n.lastLazyLoadEvent=i,n.loadingGetAll=!1,n}),(0,o.on)(x,(t,{notification:e})=>Object.assign(Object.assign({},t),{currentNotification:e,loadingGet:!1})),(0,o.on)(w,(t,{})=>Object.assign(Object.assign({},t),{loadingGetAll:!1,loadingGet:!1})));function N(t,e){return(0,o.UY)({notifications:O})(t,e)}const M=(0,o.ZF)("notifications"),q=(0,o.P1)(M,t=>t.notifications),I=(0,o.P1)(q,t=>t.totalCount),J=(0,o.P1)(q,t=>t.currentNotification),D=(0,o.P1)(q,t=>t.lastLazyLoadEvent),Q=(0,o.P1)(q,t=>t.loadingGet),$=(0,o.P1)(q,t=>t.loadingGetAll),{selectAll:U}=T.getSelectors(q);var Y=i(82762),F=i(42);let k=(()=>{class t{constructor(e,i,n,o){this.actions$=e,this.notificationDas=i,this.biaMessageService=n,this.store=o,this.loadAllByPost$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(f),(0,r.j)("event"),(0,c.w)(t=>this.notificationDas.getListByPost(t).pipe((0,l.U)(e=>v({result:e,event:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(w({error:t})))))))),this.load$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(h),(0,r.j)("id"),(0,c.w)(t=>this.notificationDas.get(t).pipe((0,l.U)(t=>x({notification:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(w({error:t})))))))),this.create$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(g),(0,r.j)("notification"),(0,d.b)(t=>(0,s.of)(t).pipe((0,p.M)(this.store.select(D)))),(0,c.w)(([e,i])=>this.notificationDas.post(e).pipe((0,l.U)(()=>(this.biaMessageService.showAddSuccess(),t.useSignalR?(0,Y.b)():f({event:i}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(w({error:t})))))))),this.update$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(m),(0,r.j)("notification"),(0,d.b)(t=>(0,s.of)(t).pipe((0,p.M)(this.store.select(D)))),(0,c.w)(([e,i])=>this.notificationDas.put(e,e.id).pipe((0,l.U)(()=>(this.biaMessageService.showUpdateSuccess(),t.useSignalR?(0,Y.b)():f({event:i}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(w({error:t})))))))),this.destroy$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(y),(0,r.j)("id"),(0,d.b)(t=>(0,s.of)(t).pipe((0,p.M)(this.store.select(D)))),(0,c.w)(([e,i])=>this.notificationDas.delete(e).pipe((0,l.U)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,Y.b)():f({event:i}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(w({error:t})))))))),this.multiDestroy$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(b),(0,r.j)("ids"),(0,d.b)(t=>(0,s.of)(t).pipe((0,p.M)(this.store.select(D)))),(0,c.w)(([e,i])=>this.notificationDas.deletes(e).pipe((0,l.U)(()=>(this.biaMessageService.showDeleteSuccess(),t.useSignalR?(0,Y.b)():f({event:i}))),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(w({error:t}))))))))}}return t.useSignalR=!1,t.\u0275fac=function(e){return new(e||t)(S.LFG(a.eX),S.LFG(A),S.LFG(F.X),S.LFG(o.yh))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})();var P=i(75319),E=i(88385),B=i(79090),_=i(40136),H=i(8340),j=i(49457),R=i(38042),z=i(29206),G=i(28049),K=i(59142);let V=(()=>{class t{constructor(t,e,i){this.store=t,this.signalRService=e,this.authService=i}initialize(){console.log("%c [Notifications] Register SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.addMethod("refresh-notifications",t=>{const e=JSON.parse(t);this.IsInMyDisplay(e)&&this.store.select(D).pipe((0,G.P)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(f({event:t}))})}),this.signalRService.addMethod("refresh-notifications-several",t=>{JSON.parse(t).some(t=>this.IsInMyDisplay(t))&&this.store.select(D).pipe((0,G.P)()).subscribe(t=>{console.log("%c [Notifications] RefreshSuccess","color: green; font-weight: bold"),this.store.dispatch(f({event:t}))})}),this.targetedFeature={parentKey:this.authService.getAdditionalInfos().userData.currentSiteId.toString(),featureName:"notifications"},this.signalRService.joinGroup(this.targetedFeature)}IsInMyDisplay(t){const e=this.authService.getAdditionalInfos(),i=t.siteId===e.userData.currentSiteId,n=null==t.notifiedUsers||0===t.notifiedUsers.length||t.notifiedUsers.some(t=>t.id===e.userInfo.id),o=null==t.notifiedPermissions||0===t.notifiedPermissions.length||t.notifiedPermissions.some(t=>this.authService.hasPermission(t.id.toString()));return i&&n&&o}destroy(){console.log("%c [Notifications] Unregister SignalR : refresh-notifications","color: purple; font-weight: bold"),this.signalRService.removeMethod("refresh-notifications"),this.signalRService.leaveGroup(this.targetedFeature)}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(o.yh),S.LFG(K.Y),S.LFG(H.e))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var X=i(46468),W=i(9112);const tt=(0,o.PH)("[Domain Language Options] Load all"),et=(0,o.PH)("[Domain Language Options] Load all success",(0,o.Ky)()),it=(0,o.PH)("[Domain Language Options] Failure",(0,o.Ky)()),nt=(0,C.H)({selectId:t=>t.id,sortComparer:!1}),ot=nt.getInitialState({}),at=(0,o.Lq)(ot,(0,o.on)(et,(t,{languages:e})=>nt.setAll(e,t)));function st(t,e){return(0,o.UY)({languageOptions:at})(t,e)}const rt=(0,o.ZF)("domain-language-options"),ct=(0,o.P1)(rt,t=>t.languageOptions),{selectAll:lt}=nt.getSelectors(ct),ut=(0,o.PH)("[Domain Notification Type Options] Load all"),dt=(0,o.PH)("[Domain Notification Type Options] Load all success",(0,o.Ky)()),pt=(0,o.PH)("[Domain Notification Type Options] Failure",(0,o.Ky)()),ft=(0,C.H)({selectId:t=>t.id,sortComparer:!1}),ht=ft.getInitialState({}),gt=(0,o.Lq)(ht,(0,o.on)(dt,(t,{notificationTypes:e})=>ft.setAll(e,t)));function mt(t,e){return(0,o.UY)({notificationTypeOptions:gt})(t,e)}const yt=(0,o.ZF)("domain-notification-type-options"),bt=(0,o.P1)(yt,t=>t.notificationTypeOptions),{selectAll:vt}=ft.getSelectors(bt),xt=(0,o.PH)("[Domain Permission Options] Load all"),wt=(0,o.PH)("[Domain Permission Options] Load all success",(0,o.Ky)()),Zt=(0,o.PH)("[Domain Permission Options] Failure",(0,o.Ky)()),St=(0,C.H)({selectId:t=>t.id,sortComparer:!1}),At=St.getInitialState({}),Ct=(0,o.Lq)(At,(0,o.on)(wt,(t,{permissions:e})=>St.setAll(e,t)));function Tt(t,e){return(0,o.UY)({permissionOptions:Ct})(t,e)}const Lt=(0,o.ZF)("domain-permission-options"),Ot=(0,o.P1)(Lt,t=>t.permissionOptions),{selectAll:Nt}=St.getSelectors(Ot);var Mt=i(43590),qt=i(71585),It=i(94529);let Jt=(()=>{class t{constructor(t){this.store=t,this.notificationTypeOptions$=this.store.select(vt),this.permissionOptions$=this.store.select(Nt),this.userOptions$=this.store.select(Mt.yp),this.languageOptions$=this.store.select(lt),this.dictOptionDtos$=(0,W.aj)([this.notificationTypeOptions$,this.permissionOptions$,this.userOptions$]).pipe((0,l.U)(t=>[new It.b("type",t[0]),new It.b("notifiedPermissions",t[1]),new It.b("notifiedUsers",t[2]),new It.b("createdBy",t[2])]))}loadAllOptions(){this.store.dispatch(ut()),this.store.dispatch(xt()),this.store.dispatch((0,qt.Ae)()),this.store.dispatch(tt())}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(o.yh))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Dt=i(81780),Qt=i(35618),$t=i(81606),Ut=i(76743),Yt=i(38583),Ft=i(3679),kt=i(11466),Pt=i(86320),Et=i(70667),Bt=i(33013),_t=i(13928),Ht=i(88030),jt=i(50103),Rt=i(36949),zt=i(12332),Gt=i(88598),Kt=i(45862),Vt=i(49067);function Xt(t,e){1&t&&(S.TgZ(0,"th",10),S._UZ(1,"p-tableHeaderCheckbox"),S.qZA())}function Wt(t,e){if(1&t&&(S.TgZ(0,"th",12),S._uU(1),S.ALo(2,"translate"),S._UZ(3,"p-sortIcon",13),S.qZA()),2&t){const t=S.oxw().$implicit;S.Q6J("pSortableColumn",t.field),S.xp6(1),S.hij(" ",S.lcZ(2,3,null==t?null:t.header)," "),S.xp6(2),S.Q6J("field",t.field)}}function te(t,e){if(1&t&&(S.TgZ(0,"th"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&t){const t=S.oxw().$implicit;S.xp6(1),S.hij(" ",S.lcZ(2,1,null==t?null:t.header)," ")}}function ee(t,e){if(1&t&&(S.ynx(0),S.YNc(1,Wt,4,5,"th",11),S.YNc(2,te,3,3,"th",9),S.BQk()),2&t){const t=e.$implicit;S.xp6(1),S.Q6J("ngIf",!0===(null==t?null:t.isSortable)),S.xp6(1),S.Q6J("ngIf",!0!==(null==t?null:t.isSortable))}}function ie(t,e){1&t&&S._UZ(0,"th")}const ne=function(t){return{"p-state-filled":t}};function oe(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"span",17),S.TgZ(1,"input",18),S.NdJ("input",function(e){S.CHM(t);const i=S.oxw().$implicit;return S.oxw(3),S.MAs(1).filter(e.target.value,i.field,i.filterMode)}),S.ALo(2,"translate"),S.qZA(),S.qZA()}if(2&t){const t=S.oxw().$implicit;S.oxw(3);const e=S.MAs(1);S.xp6(1),S.s9C("type","Number"===t.type?"number":"text"),S.s9C("placeholder",void 0!==t.searchPlaceholder?t.searchPlaceholder:!0===t.isDate?S.lcZ(2,4,"bia.dateIso8601"):""),S.Q6J("value",null==e.filters[t.field]?null:e.filters[t.field].value)("ngClass",S.VKq(6,ne,""!==(null==e.filters[t.field]?null:e.filters[t.field].value)))}}function ae(t,e){if(1&t&&(S.TgZ(0,"th",15),S.YNc(1,oe,3,8,"span",16),S.qZA()),2&t){const t=e.$implicit;S.Q6J("ngSwitch",t.field),S.xp6(1),S.Q6J("ngIf",!0===t.isSearchable)}}function se(t,e){if(1&t&&(S.TgZ(0,"tr"),S.YNc(1,ie,1,0,"th",9),S.YNc(2,ae,2,2,"th",14),S.qZA()),2&t){const t=S.oxw().$implicit,e=S.oxw(2);S.xp6(1),S.Q6J("ngIf",e.canSelectElement),S.xp6(1),S.Q6J("ngForOf",t)}}function re(t,e){if(1&t&&(S.TgZ(0,"tr"),S.YNc(1,Xt,2,0,"th",7),S.YNc(2,ee,3,2,"ng-container",8),S.qZA(),S.YNc(3,se,3,2,"tr",9)),2&t){const t=e.$implicit,i=S.oxw(2);S.xp6(1),S.Q6J("ngIf",i.canSelectElement),S.xp6(1),S.Q6J("ngForOf",t),S.xp6(1),S.Q6J("ngIf",i.showColSearch)}}function ce(t,e){if(1&t&&S._UZ(0,"p-tableCheckbox",23),2&t){const t=S.oxw(2).$implicit;S.Q6J("value",t)}}function le(t,e){1&t&&S._UZ(0,"i",24)}function ue(t,e){if(1&t&&(S.TgZ(0,"td"),S.YNc(1,ce,1,1,"p-tableCheckbox",21),S.YNc(2,le,1,0,"i",22),S.qZA()),2&t){const t=S.oxw().$implicit,e=S.oxw(2);S.xp6(1),S.Q6J("ngIf",!0!==e.isFooter(t)&&t.id>0),S.xp6(1),S.Q6J("ngIf",!0===e.isFooter(t))}}function de(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"input",29),S.NdJ("change",function(){return S.CHM(t),S.oxw(6).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(3).$implicit;S.xp6(1),S.Q6J("formControlName",t.field)}}function pe(t,e){1&t&&(S.TgZ(0,"span",30),S._uU(1,"*"),S.qZA())}function fe(t,e){if(1&t&&(S.ynx(0,15),S.YNc(1,de,2,1,"ng-container",27),S.BQk(),S.YNc(2,pe,2,0,"span",28)),2&t){const t=S.oxw(2).$implicit,e=S.oxw(3);S.Q6J("ngSwitch",t.field),S.xp6(2),S.Q6J("ngIf",!0===e.isRequired(t.field))}}function he(t,e){1&t&&S.YNc(0,fe,3,2,"ng-template",26)}function ge(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(3).$implicit,e=S.oxw().$implicit;S.xp6(1),S.hij(" ",e[t.field]," ")}}function me(t,e){if(1&t&&(S.ynx(0,15),S.YNc(1,ge,2,1,"ng-container",27),S.BQk()),2&t){const t=S.oxw(2).$implicit;S.Q6J("ngSwitch",t.field)}}function ye(t,e){1&t&&S.YNc(0,me,2,1,"ng-template",31)}const be=function(){return{width:"100%"}};function ve(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-dropdown",35),S.NdJ("onChange",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit,e=S.oxw(3);S.xp6(1),S.Akn(S.DdM(4,be)),S.Q6J("formControlName",t.field)("options",e.getOptionDto(t.field))}}function xe(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-multiSelect",36),S.NdJ("onChange",function(){return S.CHM(t),S.oxw(7).onChange()})("onPanelShow",function(){return S.CHM(t),S.oxw(7).onPanelShowMultiSelect()})("onPanelHide",function(){return S.CHM(t),S.oxw(7).onPanelHideMultiSelect()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit,e=S.oxw(3);S.xp6(1),S.Akn(S.DdM(4,be)),S.Q6J("formControlName",t.field)("options",e.getOptionDto(t.field))}}function we(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-checkbox",37),S.NdJ("onChange",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("binary",!0)("formControlName",t.field)}}function Ze(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"input",38),S.NdJ("change",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("formControlName",t.field)}}function Se(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",39),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,be)),S.Q6J("formControlName",t.field)("showButtonBar",!0)("inputStyle",S.DdM(6,be))}}function Ae(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",40),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,be)),S.Q6J("formControlName",t.field)("inputStyle",S.DdM(6,be))("timeOnly",!0)}}function Ce(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",41),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,be)),S.Q6J("formControlName",t.field)("inputStyle",S.DdM(6,be))("timeOnly",!0)}}function Te(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",42),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,be)),S.Q6J("formControlName",t.field)("inputStyle",S.DdM(6,be))("timeOnly",!0)}}function Le(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"p-calendar",43),S.NdJ("onShow",function(){return S.CHM(t),S.oxw(7).onShowCalendar()})("onSelect",function(){return S.CHM(t),S.oxw(7).onChange()})("onBlur",function(){return S.CHM(t),S.oxw(7).onBlurCalendar()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Akn(S.DdM(5,be)),S.Q6J("formControlName",t.field)("showButtonBar",!0)("inputStyle",S.DdM(6,be))}}function Oe(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.TgZ(1,"input",44),S.NdJ("change",function(){return S.CHM(t),S.oxw(7).onChange()}),S.qZA(),S.BQk()}if(2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("maxlength",t.maxlength)("formControlName",t.field)}}function Ne(t,e){1&t&&(S.TgZ(0,"span",30),S._uU(1,"*"),S.qZA())}function Me(t,e){if(1&t&&(S.ynx(0,15),S.YNc(1,ve,2,5,"ng-container",34),S.YNc(2,xe,2,5,"ng-container",34),S.YNc(3,we,2,2,"ng-container",34),S.YNc(4,Ze,2,1,"ng-container",34),S.YNc(5,Se,2,7,"ng-container",34),S.YNc(6,Ae,2,7,"ng-container",34),S.YNc(7,Ce,2,7,"ng-container",34),S.YNc(8,Te,2,7,"ng-container",34),S.YNc(9,Le,2,7,"ng-container",34),S.YNc(10,Oe,2,2,"ng-container",27),S.BQk(),S.YNc(11,Ne,2,0,"span",28)),2&t){const t=S.oxw(3).$implicit,e=S.oxw(3);S.Q6J("ngSwitch",t.type),S.xp6(1),S.Q6J("ngSwitchCase","OneToMany"),S.xp6(1),S.Q6J("ngSwitchCase","ManyToMany"),S.xp6(1),S.Q6J("ngSwitchCase","Boolean"),S.xp6(1),S.Q6J("ngSwitchCase","Number"),S.xp6(1),S.Q6J("ngSwitchCase","Date"),S.xp6(1),S.Q6J("ngSwitchCase","Time"),S.xp6(1),S.Q6J("ngSwitchCase","TimeOnly"),S.xp6(1),S.Q6J("ngSwitchCase","TimeSecOnly"),S.xp6(1),S.Q6J("ngSwitchCase","DateTime"),S.xp6(2),S.Q6J("ngIf",!0===e.isRequired(t.field))}}function qe(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(5).$implicit,e=S.oxw().$implicit;S.xp6(1),S.hij(" ",null==e[t.field]?null:e[t.field].display," ")}}function Ie(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(5).$implicit,e=S.oxw().$implicit,i=S.oxw(2);S.xp6(1),S.hij(" ",i.formatDisplayName(e[t.field])," ")}}function Je(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.ALo(2,"formatValue"),S.BQk()),2&t){const t=S.oxw(5).$implicit,e=S.oxw().$implicit;S.xp6(1),S.hij(" ",S.xi3(2,1,e[t.field],t)," ")}}function De(t,e){if(1&t&&(S.ynx(0),S.ynx(1,15),S.YNc(2,qe,2,1,"ng-container",34),S.YNc(3,Ie,2,1,"ng-container",34),S.YNc(4,Je,3,4,"ng-container",27),S.BQk(),S.BQk()),2&t){const t=S.oxw(4).$implicit;S.xp6(1),S.Q6J("ngSwitch",t.type),S.xp6(1),S.Q6J("ngSwitchCase","OneToMany"),S.xp6(1),S.Q6J("ngSwitchCase","ManyToMany")}}function Qe(t,e){if(1&t&&S.YNc(0,De,5,3,"ng-container",9),2&t){const t=S.oxw(4).$implicit,e=S.oxw(2);S.Q6J("ngIf",!0!==e.isFooter(t))}}function $e(t,e){if(1&t&&(S.YNc(0,Me,12,11,"ng-template",32),S.YNc(1,Qe,1,1,"ng-template",null,33,S.W1O)),2&t){const t=S.MAs(2),e=S.oxw(2).$implicit;S.Q6J("ngIf",!0===e.isEditable)("ngIfElse",t)}}function Ue(t,e){1&t&&S.YNc(0,$e,3,2,"ng-template",26)}function Ye(t,e){1&t&&(S.TgZ(0,"label"),S._uU(1,"-"),S.qZA())}function Fe(t,e){if(1&t&&S.YNc(0,Ye,2,0,"label",9),2&t){const t=S.oxw(3).$implicit;S.Q6J("ngIf",!0===t.isEditable)}}function ke(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(4).$implicit,e=S.oxw().$implicit;S.xp6(1),S.hij(" ",null==e[t.field]?null:e[t.field].display," ")}}function Pe(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.BQk()),2&t){const t=S.oxw(4).$implicit,e=S.oxw().$implicit,i=S.oxw(2);S.xp6(1),S.hij(" ",i.formatDisplayName(e[t.field])," ")}}function Ee(t,e){1&t&&S._UZ(0,"i",47)}function Be(t,e){if(1&t&&(S.ynx(0),S.YNc(1,Ee,1,0,"i",46),S.BQk()),2&t){const t=S.oxw(4).$implicit,e=S.oxw().$implicit;S.xp6(1),S.Q6J("ngIf",!0===e[t.field])}}function _e(t,e){if(1&t&&(S.ynx(0),S._uU(1),S.ALo(2,"formatValue"),S.BQk()),2&t){const t=S.oxw(4).$implicit,e=S.oxw().$implicit;S.xp6(1),S.hij(" ",S.xi3(2,1,e[t.field],t)," ")}}function He(t,e){if(1&t&&(S.ynx(0,15),S.YNc(1,ke,2,1,"ng-container",34),S.YNc(2,Pe,2,1,"ng-container",34),S.YNc(3,Be,2,1,"ng-container",34),S.YNc(4,_e,3,4,"ng-container",27),S.BQk()),2&t){const t=S.oxw(3).$implicit;S.Q6J("ngSwitch",t.type),S.xp6(1),S.Q6J("ngSwitchCase","OneToMany"),S.xp6(1),S.Q6J("ngSwitchCase","ManyToMany"),S.xp6(1),S.Q6J("ngSwitchCase","Boolean")}}function je(t,e){if(1&t&&(S.YNc(0,Fe,1,1,"ng-template",32),S.YNc(1,He,5,4,"ng-template",null,45,S.W1O)),2&t){const t=S.MAs(2),e=S.oxw(3).$implicit,i=S.oxw(2);S.Q6J("ngIf",!0===i.isFooter(e))("ngIfElse",t)}}function Re(t,e){1&t&&S.YNc(0,je,3,2,"ng-template",31)}function ze(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"td",25),S.NdJ("click",function(){S.CHM(t);const e=S.oxw().$implicit;return S.oxw(2).initEditableRow(e)}),S.TgZ(1,"p-cellEditor"),S.YNc(2,he,1,0,void 0,9),S.YNc(3,ye,1,0,void 0,9),S.YNc(4,Ue,1,0,void 0,9),S.YNc(5,Re,1,0,void 0,9),S.qZA(),S.qZA()}if(2&t){const t=e.$implicit,i=S.oxw(3);S.xp6(2),S.Q6J("ngIf",!0===i.isSpecificInput(t.field)),S.xp6(1),S.Q6J("ngIf",!0===i.isSpecificInput(t.field)),S.xp6(1),S.Q6J("ngIf",!0!==i.isSpecificInput(t.field)),S.xp6(1),S.Q6J("ngIf",!0!==i.isSpecificInput(t.field))}}function Ge(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"tr",19),S.NdJ("focusout",function(){return S.CHM(t),S.oxw(2).onFocusout()})("keyup.enter",function(){return S.CHM(t),S.oxw(2).initEditableRow(null)})("keyup.escape",function(){return S.CHM(t),S.oxw(2).cancel()}),S.YNc(1,ue,3,2,"td",9),S.YNc(2,ze,6,4,"td",20),S.qZA()}if(2&t){const t=e.$implicit,i=e.columns,n=S.oxw(2);S.Q6J("pSelectableRow",!0!==n.isFooter(t)?t:null)("pEditableRow",t),S.xp6(1),S.Q6J("ngIf",n.canSelectElement),S.xp6(1),S.Q6J("ngForOf",i)}}function Ke(t,e){if(1&t&&(S.TgZ(0,"tr"),S.TgZ(1,"td",48),S._uU(2),S.ALo(3,"translate"),S.qZA(),S.qZA()),2&t){const t=e.$implicit;S.xp6(1),S.uIk("colspan",t.length+1),S.xp6(1),S.hij(" ",S.lcZ(3,2,"bia.NoRecordsFound")," ")}}function Ve(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"p-table",2,3),S.NdJ("onFilter",function(){return S.CHM(t),S.oxw().onFilter()})("onLazyLoad",function(e){return S.CHM(t),S.oxw().onLoadLazy(e)})("onStateSave",function(e){return S.CHM(t),S.oxw().onStateSave(e)})("selectionChange",function(){return S.CHM(t),S.oxw().onSelectionChange()}),S.ALo(2,"async"),S.YNc(3,re,4,3,"ng-template",4),S.YNc(4,Ge,3,4,"ng-template",5),S.YNc(5,Ke,4,4,"ng-template",6),S.qZA()}if(2&t){const t=S.oxw();S.Q6J("autoLayout",!0)("reorderableColumns",!0)("columns",t.displayedColumns)("value",t.elements)("paginator",t.paginator)("rows",t.pageSize)("totalRecords",t.totalRecord)("lazy",!0)("loading",t.loading&&null!==S.lcZ(2,14,t.showLoading$))("stateStorage","session")("stateKey",t.tableStateKey)("lazyLoadOnInit",t.getLazyLoadOnInit())("sortField",t.sortFieldValue)("sortOrder",t.sortOrderValue)}}let Xe=(()=>{class t extends Pt.l{constructor(t,e,i,n){super(t,e,i,n),this.formBuilder=t,this.authService=e,this.biaMessageService=i,this.translateService=n,this.initForm()}initForm(){var t,e;this.form=this.formBuilder.group({id:[this.element.id],title:[this.element.title,Ft.kI.required],description:[this.element.description,Ft.kI.required],type:[null===(t=this.element.type)||void 0===t?void 0:t.id,Ft.kI.required],read:[this.element.read],createdDate:[this.element.createdDate,Ft.kI.required],createdBy:[null===(e=this.element.createdBy)||void 0===e?void 0:e.id],notifiedPermissions:[this.element.notifiedPermissions],notifiedUsers:[this.element.notifiedUsers],jData:[this.element.jData]})}onSubmit(){var t,e;if(this.form.valid){const i=this.form.value;i.id=i.id>0?i.id:0,i.read=!!i.read&&i.read,i.createdBy=kt.P.Clone(i.createdBy),i.notifiedPermissions=kt.P.Differential(i.notifiedPermissions,null===(t=this.element)||void 0===t?void 0:t.notifiedPermissions),i.notifiedUsers=kt.P.Differential(i.notifiedUsers,null===(e=this.element)||void 0===e?void 0:e.notifiedUsers),i.type=Object.assign({},i.type),this.save.emit(i),this.form.reset()}}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(Ft.qu),S.Y36(H.e),S.Y36(F.X),S.Y36(Dt.sK))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-table"]],features:[S.qOj],decls:2,vars:2,consts:[[1,"bia-calc-form",3,"formGroup"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange",4,"ngIf"],["editMode","row","dataKey","id","styleClass","p-datatable-striped",3,"autoLayout","reorderableColumns","columns","value","paginator","rows","totalRecords","lazy","loading","stateStorage","stateKey","lazyLoadOnInit","sortField","sortOrder","onFilter","onLazyLoad","onStateSave","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","bia-table-select-col",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bia-table-select-col"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","p-float-label",4,"ngIf"],[1,"p-float-label"],["pInputText","",1,"input-search",3,"type","placeholder","value","ngClass","input"],[3,"pSelectableRow","pEditableRow","focusout","keyup.enter","keyup.escape"],[3,"click",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","pi pi-plus",4,"ngIf"],[3,"value"],[1,"pi","pi-plus"],[3,"click"],["pTemplate","input"],[4,"ngSwitchDefault"],["class","bia-star-mandatory",4,"ngIf"],["pInputText","","type","text",3,"formControlName","change"],[1,"bia-star-mandatory"],["pTemplate","output"],[3,"ngIf","ngIfElse"],["isNotEditable",""],[4,"ngSwitchCase"],["placeholder","\xa0","optionLabel","display","dataKey","id","showClear","true","appendTo","body",3,"formControlName","options","onChange"],["defaultLabel","\xa0","optionLabel","display","datakey","id","appendTo","body",3,"formControlName","options","onChange","onPanelShow","onPanelHide"],[3,"binary","formControlName","onChange"],["pInputText","","type","number",3,"formControlName","change"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","showSeconds","true","dataType","string",3,"formControlName","inputStyle","timeOnly","onShow","onSelect","onBlur"],["biaLocale","","placeholder","\xa0","appendTo","body","readonlyInput","true","showTime","true","dateFormat","yy-mm-dd",3,"formControlName","showButtonBar","inputStyle","onShow","onSelect","onBlur"],["pInputText","","type","text",3,"maxlength","formControlName","change"],["editRow",""],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"app-empty-message"]],template:function(t,e){1&t&&(S.TgZ(0,"form",0),S.YNc(1,Ve,6,16,"p-table",1),S.qZA()),2&t&&(S.Q6J("formGroup",e.form),S.xp6(1),S.Q6J("ngIf",e.configuration))},directives:[Ft._Y,Ft.JL,Ft.sg,Yt.O5,Et.iA,Bt.jx,Yt.sg,Et.Mo,Et.lQ,Et.fz,Yt.RF,_t.o,Yt.mk,Ht.oO,Et.Ei,Et.D$,Et.UA,Et.YL,Yt.ED,Ft.Fj,Ft.JJ,Ft.u,Yt.n9,jt.Lt,Rt.NU,zt.XZ,Ft.wV,Gt.f,Kt.D,Ft.nD],pipes:[Yt.Ov,Dt.X$,Vt.c],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]     p-table .searchTR .p-float-label .p-inputtext{padding-top:2px!important}.input-search[_ngcontent-%COMP%]{width:99%}.app-empty-message[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{width:100%}.bia-table-select-col[_ngcontent-%COMP%]{width:60px}"]}),t})();function We(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"bia-table",6),S.NdJ("edit",function(e){return S.CHM(t),S.oxw().onDetail(e)})("loadLazy",function(e){return S.CHM(t),S.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return S.CHM(t),S.oxw().onSelectedElementsChanged(e)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.qZA()}if(2&t){const t=S.oxw();S.Q6J("elements",S.lcZ(1,12,t.notifications$))("totalRecord",S.lcZ(2,14,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canSelectElement",t.canDelete)("loading",S.lcZ(3,16,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}function ti(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"app-notification-table",7),S.NdJ("loadLazy",function(e){return S.CHM(t),S.oxw().onLoadLazy(e)})("selectedElementsChanged",function(e){return S.CHM(t),S.oxw().onSelectedElementsChanged(e)})("save",function(e){return S.CHM(t),S.oxw().onSave(e)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.ALo(4,"async"),S.qZA()}if(2&t){const t=S.oxw();S.Q6J("elements",S.lcZ(1,14,t.notifications$))("dictOptionDtos",S.lcZ(2,16,t.notificationOptionsService.dictOptionDtos$))("totalRecord",S.lcZ(3,18,t.totalCount$))("columnToDisplays",t.displayedColumns)("pageSize",t.pageSize)("configuration",t.tableConfiguration)("showColSearch",t.showColSearch)("globalSearchValue",t.globalSearchValue)("canEdit",t.canEdit)("canAdd",t.canAdd)("canSelectElement",t.canDelete)("loading",S.lcZ(4,20,t.loading$))("viewPreference",t.viewPreference)("tableStateKey",t.tableStateKey)}}let ei=(()=>{class t{constructor(t,e,i,n,o,a,s,r,c){this.store=t,this.router=e,this.activatedRoute=i,this.authService=n,this.notificationDas=o,this.translateService=a,this.biaTranslationService=s,this.notificationsSignalRService=r,this.notificationOptionsService=c,this.useCalcMode=!1,this.useSignalR=!0,this.useView=!0,this.useRefreshAtLanguageChange=!0,this.flex=!0,this.sub=new P.w,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=_.L8,this.pageSize=this.defaultPageSize,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.tableStateKey=this.useView?"notificationsGrid":void 0}ngOnInit(){if(this.parentIds=[],this.sub=new P.w,this.initTableConfiguration(),this.setPermissions(),this.notifications$=this.store.select(U),this.totalCount$=this.store.select(I),this.loading$=this.store.select($),this.OnDisplay(),this.useCalcMode&&this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()})),this.useRefreshAtLanguageChange){let t=!0;this.sub.add(this.biaTranslationService.currentCulture$.subscribe(e=>{t?t=!1:this.onLoadLazy(this.notificationListComponent.getLazyLoadMetadata())}))}}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.OnHide()}OnDisplay(){this.useView&&this.store.dispatch((0,X.Tx)()),this.useSignalR&&(this.notificationsSignalRService.initialize(),k.useSignalR=!0)}OnHide(){this.useSignalR&&(k.useSignalR=!1,this.notificationsSignalRService.destroy())}onCreate(){this.useCalcMode||this.router.navigate(["./create"],{relativeTo:this.activatedRoute})}onEdit(t){this.useCalcMode||this.router.navigate(["./"+t+"/edit"],{relativeTo:this.activatedRoute})}onDetail(t){this.useCalcMode||this.router.navigate(["./"+t+"/detail"],{relativeTo:this.activatedRoute})}onSave(t){this.useCalcMode&&((null==t?void 0:t.id)>0?this.canEdit&&this.store.dispatch(m({notification:t})):this.canAdd&&this.store.dispatch(g({notification:t})))}onDelete(){this.selectedNotifications&&this.canDelete&&this.store.dispatch(b({ids:this.selectedNotifications.map(t=>t.id)}))}onSelectedElementsChanged(t){this.selectedNotifications=t}onPageSizeChange(t){this.pageSize=t}onLoadLazy(t){const e=Object.assign({parentIds:this.parentIds},t);this.store.dispatch(f({event:e}))}searchGlobalChanged(t){this.globalSearchValue=t}displayedColumnsChanged(t){this.displayedColumns=t}onToggleSearch(){this.showColSearch=!this.showColSearch}onViewChange(t){this.viewPreference=t}onExportCSV(){const t={};this.columns.map(e=>t[e.value.split(".")[1]]=this.translateService.instant(e.value));const e=Object.assign({parentIds:this.parentIds,columns:t},this.notificationListComponent.getLazyLoadMetadata());this.notificationDas.getFile(e).subscribe(t=>{j.saveAs(t,this.translateService.instant("app.notifications")+".csv")})}setPermissions(){this.canEdit=this.authService.hasPermission(z.y.Notification_Update),this.canDelete=this.authService.hasPermission(z.y.Notification_Delete),this.canAdd=this.authService.hasPermission(z.y.Notification_Create)}initTableConfiguration(){this.biaTranslationService.currentCultureDateFormat$.subscribe(t=>{this.tableConfiguration={columns:[new B.ML("titleTranslated","notification.title"),new B.ML("descriptionTranslated","notification.description"),Object.assign(new B.ML("type","notification.type.title"),{type:B.d5.OneToMany}),Object.assign(new B.ML("read","notification.read"),{isSearchable:!1,type:B.d5.Boolean}),Object.assign(new B.ML("createdDate","notification.createdDate"),{type:B.d5.Date,formatDate:t.dateFormat}),Object.assign(new B.ML("createdBy","notification.createdBy"),{type:B.d5.OneToMany}),Object.assign(new B.ML("notifiedPermissions","notification.notifiedPermissions"),{type:B.d5.ManyToMany}),Object.assign(new B.ML("notifiedUsers","notification.notifiedUsers"),{type:B.d5.ManyToMany}),new B.ML("jData","notification.jData")]},this.columns=this.tableConfiguration.columns.map(t=>({key:t.field,value:t.header})),this.displayedColumns=[...this.columns]})}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(H.e),S.Y36(A),S.Y36(Dt.sK),S.Y36(R.P6),S.Y36(V),S.Y36(Jt))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notifications-index"]],viewQuery:function(t,e){if(1&t&&S.Gf(E.$,5),2&t){let t;S.iGM(t=S.CRH())&&(e.notificationListComponent=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&S.ekj("bia-flex",e.flex)},decls:8,vars:16,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","selectedElements","create","exportCSV","delete"],[3,"defaultPageSize","length","columns","columnToDisplays","tableStateKey","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged",4,"ngIf"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save",4,"ngIf"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canSelectElement","loading","viewPreference","tableStateKey","edit","loadLazy","selectedElementsChanged"],[3,"elements","dictOptionDtos","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canEdit","canAdd","canSelectElement","loading","viewPreference","tableStateKey","loadLazy","selectedElementsChanged","save"]],template:function(t,e){1&t&&(S.TgZ(0,"div",0),S.TgZ(1,"div",1),S.TgZ(2,"bia-table-header",2),S.NdJ("create",function(){return e.onCreate()})("exportCSV",function(){return e.onExportCSV()})("delete",function(){return e.onDelete()}),S.ALo(3,"translate"),S.qZA(),S.TgZ(4,"bia-table-controller",3),S.NdJ("displayedColumnsChange",function(t){return e.displayedColumnsChanged(t)})("filter",function(t){return e.searchGlobalChanged(t)})("pageSizeChange",function(t){return e.onPageSizeChange(t)})("toggleSearch",function(){return e.onToggleSearch()})("viewChange",function(t){return e.onViewChange(t)}),S.ALo(5,"async"),S.qZA(),S.YNc(6,We,4,18,"bia-table",4),S.YNc(7,ti,5,22,"app-notification-table",5),S.qZA(),S.qZA()),2&t&&(S.xp6(2),S.Q6J("headerTitle",S.lcZ(3,12,"notification.listOf"))("canAdd",e.canAdd&&!e.useCalcMode)("canDelete",e.canDelete)("canExportCSV",!0)("selectedElements",e.selectedNotifications),S.xp6(2),S.Q6J("defaultPageSize",e.defaultPageSize)("length",S.lcZ(5,14,e.totalCount$))("columns",e.columns)("columnToDisplays",e.displayedColumns)("tableStateKey",e.tableStateKey),S.xp6(2),S.Q6J("ngIf",!e.useCalcMode),S.xp6(1),S.Q6J("ngIf",e.useCalcMode))},directives:[Qt.xw,Qt.yH,$t.l,Ut.B,Yt.O5,E.$,Xe],pipes:[Dt.X$,Yt.Ov],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),t})();var ii=i(84594),ni=i(16244),oi=i(80014),ai=i(44748),si=i(4207),ri=i(46543);function ci(t,e){if(1&t){const t=S.EpF();S.ynx(0,27),S.TgZ(1,"p-tabPanel",4),S.TgZ(2,"div",28),S._UZ(3,"input",29),S.TgZ(4,"div",5),S.TgZ(5,"div",6),S.TgZ(6,"span",7),S.TgZ(7,"input",30),S.NdJ("change",function(){const e=S.CHM(t).index;return S.oxw().changeTranslation(e)}),S.qZA(),S.TgZ(8,"label"),S.TgZ(9,"span",9),S._uU(10,"*"),S.qZA(),S._uU(11),S.ALo(12,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(13,"div",5),S.TgZ(14,"div",6),S.TgZ(15,"span",7),S.TgZ(16,"input",31),S.NdJ("change",function(){const e=S.CHM(t).index;return S.oxw().changeTranslation(e)}),S.qZA(),S.TgZ(17,"label"),S.TgZ(18,"span",9),S._uU(19,"*"),S.qZA(),S._uU(20),S.ALo(21,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(22,"div",11),S.TgZ(23,"button",32),S.NdJ("click",function(){const e=S.CHM(t).index;return S.oxw().removeTranslation(e)}),S.ALo(24,"translate"),S.qZA(),S.qZA(),S.qZA(),S.BQk()}if(2&t){const t=e.$implicit,i=e.index,n=S.oxw();S.xp6(1),S.Q6J("header",n.labelTranslation(t.value.languageId)),S.xp6(1),S.Q6J("formGroupName",i),S.xp6(9),S.Oqu(S.lcZ(12,5,"notification.title")),S.xp6(9),S.Oqu(S.lcZ(21,7,"notification.description")),S.xp6(3),S.s9C("label",S.lcZ(24,9,"bia.translation.delete"))}}function li(t,e){1&t&&S._UZ(0,"i",37)}const ui=function(){return{width:"100%"}};function di(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"p-tabPanel",33),S.YNc(1,li,1,0,"ng-template",34),S.TgZ(2,"div",5),S.TgZ(3,"div",6),S.TgZ(4,"span",7),S.TgZ(5,"p-dropdown",35),S.NdJ("onChange",function(){return S.CHM(t),S.oxw().onSelectionLanguage()}),S.qZA(),S.TgZ(6,"label"),S.TgZ(7,"span",9),S._uU(8,"*"),S.qZA(),S._uU(9),S.ALo(10,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(11,"div",11),S.TgZ(12,"button",36),S.NdJ("click",function(){return S.CHM(t),S.oxw().addTranslation()}),S.ALo(13,"translate"),S.qZA(),S.qZA(),S.qZA()}if(2&t){const t=S.oxw();S.xp6(5),S.Akn(S.DdM(10,ui)),S.Q6J("options",t.missingLanguageOptions),S.xp6(4),S.Oqu(S.lcZ(10,6,"bia.translation.language")),S.xp6(3),S.s9C("label",S.lcZ(13,8,"bia.translation.add")),S.Q6J("disabled",!t.selectionLanguage)}}const pi=function(){return{width:"100%"}};let fi=(()=>{class t{constructor(t){this.formBuilder=t,this.notification={},this.save=new S.vpe,this.cancel=new S.vpe,this.missingTranslation=!1,this.selectionLanguage=!1,this.initForm()}static Differential(t,e){let i=[];if(e&&Array.isArray(e)){const n=e.filter(e=>!t||!t.map(t=>t.id).includes(e.id)).map(t=>Object.assign(Object.assign({},t),{dtoState:ni.e.Deleted}));n&&(i=i.concat(n))}if(t&&Array.isArray(t)){const e=null==t?void 0:t.filter(t=>t.dtoState===ni.e.Added||t.dtoState===ni.e.Modified);e&&(i=i.concat(e))}return i}ngOnChanges(t){this.notification&&(this.form.reset(),this.notification&&(this.form.patchValue(Object.assign({},this.notification)),this.notificationTranslations.clear(),this.notification.notificationTranslations&&(this.notification.notificationTranslations.forEach(t=>{this.notificationTranslations.push(this.createTranslation(t))}),this.computeMissingTranslation())))}initForm(){const t={id:[this.notification.id],title:[this.notification.title,Ft.kI.required],description:[this.notification.description,Ft.kI.required],type:[this.notification.type,Ft.kI.required],read:[this.notification.read],createdDate:[this.notification.createdDate,Ft.kI.required],createdBy:[this.notification.createdBy],notifiedPermissions:[this.notification.notifiedPermissions],notifiedUsers:[this.notification.notifiedUsers],jData:[this.notification.jData],notificationTranslations:this.formBuilder.array([]),languageToAdd:[]};this.form=this.formBuilder.group(t),this.notificationTranslations=this.form.get("notificationTranslations")}onSelectionLanguage(){this.selectionLanguage=!0}createTranslation(t){return this.formBuilder.group({id:t.id,dtoState:t.dtoState,languageId:t.languageId,description:[t.description,Ft.kI.required],title:[t.title,Ft.kI.required]})}addTranslation(){this.notificationTranslations.push(this.createTranslation({id:0,languageId:this.form.value.languageToAdd.id,title:"",description:"",dtoState:ni.e.Added})),this.computeMissingTranslation()}addAllTranslation(){this.missingLanguageOptions.forEach(t=>this.notificationTranslations.push(this.createTranslation({id:0,languageId:t.id,title:"",description:"",dtoState:ni.e.Added}))),this.computeMissingTranslation()}removeTranslation(t){this.notificationTranslations.removeAt(t),this.computeMissingTranslation()}changeTranslation(t){this.notificationTranslations.at(t).value.dtoState===ni.e.Unchanged&&(this.notificationTranslations.at(t).value.dtoState=ni.e.Modified),this.computeMissingTranslation()}computeMissingTranslation(){this.missingLanguageOptions=this.languageOptions.filter(t=>!this.notificationTranslations.value.find(e=>e.languageId===t.id)&&!_.Nf.find(e=>e===t.id)),this.missingTranslation=this.missingLanguageOptions.length>0}labelTranslation(t){var e;return null===(e=this.languageOptions.find(e=>e.id===t))||void 0===e?void 0:e.display}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){var e,i,n;if(this.form.valid){const o=this.form.value;o.id=o.id>0?o.id:0,o.read=!!o.read&&o.read,o.createdBy=kt.P.Clone(o.createdBy),o.notifiedPermissions=kt.P.Differential(o.notifiedPermissions,null===(e=this.notification)||void 0===e?void 0:e.notifiedPermissions),o.notifiedUsers=kt.P.Differential(o.notifiedUsers,null===(i=this.notification)||void 0===i?void 0:i.notifiedUsers),o.type=Object.assign({},o.type),o.notificationTranslations=t.Differential(o.notificationTranslations,null===(n=this.notification)||void 0===n?void 0:n.notificationTranslations),this.save.emit(o),this.form.reset()}}lang(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(Ft.qu))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-form"]],inputs:{notification:"notification",userOptions:"userOptions",permissionOptions:"permissionOptions",notificationTypeOptions:"notificationTypeOptions",languageOptions:"languageOptions"},outputs:{save:"save",cancel:"cancel"},features:[S.TTD],decls:86,vars:73,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center","fxFlex","100"],["fxLayout","column","fxLayoutAlign","top","fxFlex","50"],[3,"legend"],[3,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"md-inputfield"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%"],[1,"bia-star-mandatory"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button",3,"label","disabled","click"],["formArrayName","notificationTranslations",4,"ngFor","ngForOf"],["header","+",4,"ngIf"],["placeholder","\xa0","formControlName","type","optionLabel","display","datakey","id",3,"options"],["binary","true","formControlName","read",3,"label"],["biaLocale","","formControlName","createdDate","placeholder","\xa0","dateFormat","yy-mm-dd",3,"showButtonBar","inputStyle"],["placeholder","\xa0","formControlName","createdBy","optionLabel","display","datakey","id",3,"options","showClear"],["defaultLabel","\xa0","formControlName","notifiedPermissions","optionLabel","display","datakey","id",3,"options","virtualScroll"],["defaultLabel","\xa0","formControlName","notifiedUsers","optionLabel","display","datakey","id",3,"options","virtualScroll"],["fxFlex","90"],[2,"left","5px","top","-20px","font-size","12px","color","#00839b"],[1,"p-float-label"],["formControlName","jData","rows","5","autoResize","autoResize","pInputTextarea","",2,"width","100%",3,"cols"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"ui-button-secondary",3,"label","click"],["formArrayName","notificationTranslations"],[3,"formGroupName"],["formControlName","languageId","type","hidden"],["formControlName","title","type","text","pInputText","","maxlength","64",2,"width","100%",3,"change"],["formControlName","description","type","text","pInputText","","maxlength","256",2,"width","100%",3,"change"],["pButton","","type","button",3,"label","click"],["header","+"],["pTemplate","header"],["placeholder","\xa0","formControlName","languageToAdd","optionLabel","display","datakey","id",3,"options","onChange"],["pButton","","type","button",1,"ui-button-secondary",3,"label","disabled","click"],[1,"pi","pi-plus"]],template:function(t,e){1&t&&(S.TgZ(0,"form",0),S.NdJ("submit",function(){return e.onSubmit()}),S.TgZ(1,"div",1),S.TgZ(2,"div",2),S.TgZ(3,"p-fieldset",3),S.ALo(4,"translate"),S.TgZ(5,"p-tabView"),S.TgZ(6,"p-tabPanel",4),S.ALo(7,"translate"),S.TgZ(8,"div",5),S.TgZ(9,"div",6),S.TgZ(10,"span",7),S._UZ(11,"input",8),S.TgZ(12,"label"),S.TgZ(13,"span",9),S._uU(14,"*"),S.qZA(),S._uU(15),S.ALo(16,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(17,"div",5),S.TgZ(18,"div",6),S.TgZ(19,"span",7),S._UZ(20,"input",10),S.TgZ(21,"label"),S.TgZ(22,"span",9),S._uU(23,"*"),S.qZA(),S._uU(24),S.ALo(25,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(26,"div",11),S.TgZ(27,"button",12),S.NdJ("click",function(){return e.addAllTranslation()}),S.ALo(28,"translate"),S.qZA(),S.qZA(),S.qZA(),S.YNc(29,ci,25,11,"ng-container",13),S.YNc(30,di,14,11,"p-tabPanel",14),S.qZA(),S.qZA(),S.TgZ(31,"div",5),S.TgZ(32,"div",6),S.TgZ(33,"span",7),S._UZ(34,"p-dropdown",15),S.TgZ(35,"label"),S.TgZ(36,"span",9),S._uU(37,"*"),S.qZA(),S._uU(38),S.ALo(39,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(40,"div",5),S.TgZ(41,"div",6),S._UZ(42,"p-checkbox",16),S.ALo(43,"translate"),S.qZA(),S.qZA(),S.TgZ(44,"div",5),S.TgZ(45,"div",6),S.TgZ(46,"span",7),S._UZ(47,"p-calendar",17),S.TgZ(48,"label"),S.TgZ(49,"span",9),S._uU(50,"*"),S.qZA(),S._uU(51),S.ALo(52,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(53,"div",5),S.TgZ(54,"div",6),S.TgZ(55,"span",7),S._UZ(56,"p-dropdown",18),S.TgZ(57,"label"),S._uU(58),S.ALo(59,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(60,"div",5),S.TgZ(61,"div",6),S.TgZ(62,"span",7),S._UZ(63,"p-multiSelect",19),S.TgZ(64,"label"),S._uU(65),S.ALo(66,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(67,"div",5),S.TgZ(68,"div",6),S.TgZ(69,"span",7),S._UZ(70,"p-multiSelect",20),S.TgZ(71,"label"),S._uU(72),S.ALo(73,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(74,"div",5),S.TgZ(75,"div",21),S.TgZ(76,"span",22),S._uU(77),S.ALo(78,"translate"),S.qZA(),S.TgZ(79,"span",23),S._UZ(80,"textarea",24),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(81,"div",11),S._UZ(82,"button",25),S.ALo(83,"translate"),S.TgZ(84,"button",26),S.NdJ("click",function(){return e.onCancel()}),S.ALo(85,"translate"),S.qZA(),S.qZA(),S.qZA()),2&t&&(S.Q6J("formGroup",e.form),S.xp6(3),S.s9C("legend",S.lcZ(4,39,"bia.translation.translatedFields")),S.xp6(3),S.s9C("header",S.lcZ(7,41,"translation.defaultLanguage")),S.xp6(9),S.Oqu(S.lcZ(16,43,"notification.title")),S.xp6(9),S.Oqu(S.lcZ(25,45,"notification.description")),S.xp6(3),S.s9C("label",S.lcZ(28,47,"bia.translation.addAll")),S.Q6J("disabled",!e.missingTranslation),S.xp6(2),S.Q6J("ngForOf",e.notificationTranslations.controls),S.xp6(1),S.Q6J("ngIf",(null==e.missingLanguageOptions?null:e.missingLanguageOptions.length)>0),S.xp6(4),S.Akn(S.DdM(67,ui)),S.Q6J("options",e.notificationTypeOptions),S.xp6(4),S.Oqu(S.lcZ(39,49,"notification.type.title")),S.xp6(4),S.s9C("label",S.lcZ(43,51,"notification.read")),S.xp6(5),S.Akn(S.DdM(68,pi)),S.Q6J("showButtonBar",!0)("inputStyle",S.DdM(69,pi)),S.xp6(4),S.Oqu(S.lcZ(52,53,"notification.createdDate")),S.xp6(5),S.Akn(S.DdM(70,ui)),S.Q6J("options",e.userOptions)("showClear",!0),S.xp6(2),S.Oqu(S.lcZ(59,55,"notification.createdBy")),S.xp6(5),S.Akn(S.DdM(71,ui)),S.Q6J("options",e.permissionOptions)("virtualScroll",!0),S.xp6(2),S.Oqu(S.lcZ(66,57,"notification.notifiedPermissions")),S.xp6(5),S.Akn(S.DdM(72,ui)),S.Q6J("options",e.userOptions)("virtualScroll",!0),S.xp6(2),S.Oqu(S.lcZ(73,59,"notification.notifiedUsers")),S.xp6(5),S.Oqu(S.lcZ(78,61,"notification.jData")),S.xp6(3),S.Q6J("cols",60),S.xp6(2),S.s9C("label",S.lcZ(83,63,"bia.save")),S.Q6J("disabled",!e.form.valid),S.xp6(2),S.s9C("label",S.lcZ(85,65,"bia.cancel")))},directives:[Ft._Y,Ft.JL,Qt.xw,Ft.sg,Qt.Wh,Qt.yH,oi.p,ai.xf,ai.x4,Ft.Fj,Ft.JJ,Ft.u,_t.o,Ft.nD,Qt.SQ,si.Hq,Yt.sg,Yt.O5,jt.Lt,zt.XZ,Gt.f,Kt.D,Rt.NU,ri.g,Ft.CE,Ft.x0,Bt.jx],pipes:[Dt.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t})(),hi=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.router=e,this.activatedRoute=i,this.notificationOptionsService=n,this.biaTranslationService=o,this.sub=new P.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(g({notification:t})),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(Jt),S.Y36(R.P6))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-new"]],decls:5,vars:12,consts:[[3,"notificationTypeOptions","permissionOptions","userOptions","languageOptions","cancel","save"]],template:function(t,e){1&t&&(S.TgZ(0,"app-notification-form",0),S.NdJ("cancel",function(){return e.onCancelled()})("save",function(t){return e.onSubmitted(t)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.ALo(4,"async"),S.qZA()),2&t&&S.Q6J("notificationTypeOptions",S.lcZ(1,4,e.notificationOptionsService.notificationTypeOptions$))("permissionOptions",S.lcZ(2,6,e.notificationOptionsService.permissionOptions$))("userOptions",S.lcZ(3,8,e.notificationOptionsService.userOptions$))("languageOptions",S.lcZ(4,10,e.notificationOptionsService.languageOptions$))},directives:[fi],pipes:[Yt.Ov],styles:[""]}),t})(),gi=(()=>{class t{constructor(t){this.store=t,this.sub=new P.w,this.InitSub(),this.loading$=this.store.select(Q),this.notification$=this.store.select(J)}get currentNotification(){var t;return(null===(t=this._currentNotification)||void 0===t?void 0:t.id)===this._currentNotificationId?this._currentNotification:null}get currentNotificationId(){return this._currentNotificationId}set currentNotificationId(t){this._currentNotificationId=Number(t),this.store.dispatch(h({id:t}))}get currentNotificationData(){return this._currentNotification.jData}InitSub(){this.sub=new P.w,this.sub.add(this.store.select(J).subscribe(t=>{t&&(this._currentNotification=t)}))}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(o.yh))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mi=i(79373);function yi(t,e){1&t&&S._UZ(0,"bia-spinner",2),2&t&&S.Q6J("overlay",!0)}let bi=(()=>{class t{constructor(t,e,i,n,o,a){this.store=t,this.router=e,this.activatedRoute=i,this.notificationOptionsService=n,this.notificationService=o,this.biaTranslationService=a,this.displayChange=new S.vpe,this.sub=new P.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationOptionsService.loadAllOptions()}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(m({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(Jt),S.Y36(gi),S.Y36(R.P6))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-edit"]],outputs:{displayChange:"displayChange"},decls:8,vars:18,consts:[[3,"notification","notificationTypeOptions","permissionOptions","userOptions","languageOptions","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,e){1&t&&(S.TgZ(0,"app-notification-form",0),S.NdJ("cancel",function(){return e.onCancelled()})("save",function(t){return e.onSubmitted(t)}),S.ALo(1,"async"),S.ALo(2,"async"),S.ALo(3,"async"),S.ALo(4,"async"),S.ALo(5,"async"),S.qZA(),S.YNc(6,yi,1,1,"bia-spinner",1),S.ALo(7,"async")),2&t&&(S.Q6J("notification",S.lcZ(1,6,e.notificationService.notification$))("notificationTypeOptions",S.lcZ(2,8,e.notificationOptionsService.notificationTypeOptions$))("permissionOptions",S.lcZ(3,10,e.notificationOptionsService.permissionOptions$))("userOptions",S.lcZ(4,12,e.notificationOptionsService.userOptions$))("languageOptions",S.lcZ(5,14,e.notificationOptionsService.languageOptions$)),S.xp6(6),S.Q6J("ngIf",S.lcZ(7,16,e.notificationService.loading$)))},directives:[fi,Yt.O5,mi.O],pipes:[Yt.Ov],styles:[""]}),t})();var vi=i(16249),xi=i(30466);function wi(t,e){1&t&&S._UZ(0,"bia-spinner",1),2&t&&S.Q6J("overlay",!0)}let Zi=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.route=e,this.notificationService=i,this.layoutService=n,this.biaTranslationService=o,this.sub=new P.w}ngOnInit(){this.sub.add(this.biaTranslationService.currentCulture$.subscribe(t=>{this.notificationService.currentNotificationId=this.route.snapshot.params.notificationId})),this.sub.add(this.store.select(J).subscribe(t=>{(null==t?void 0:t.title)&&(this.route.data.pipe((0,G.P)()).subscribe(e=>{e.breadcrumb=t.title}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(o.yh),S.Y36(n.gz),S.Y36(gi),S.Y36(xi.N),S.Y36(R.P6))},t.\u0275cmp=S.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,e){1&t&&(S._UZ(0,"router-outlet"),S.YNc(1,wi,1,1,"bia-spinner",0),S.ALo(2,"async")),2&t&&(S.xp6(1),S.Q6J("ngIf",S.lcZ(2,1,e.notificationService.loading$)))},directives:[n.lC,Yt.O5,mi.O],pipes:[Yt.Ov],styles:[""]}),t})();var Si=i(98832),Ai=i(53460);let Ci=(()=>{class t extends Z.Z{constructor(t){super(t,"Permissions")}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ti=(()=>{class t{constructor(t,e,i){this.actions$=t,this.permissionDas=e,this.biaMessageService=i,this.loadAll$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(xt),(0,c.w)(()=>this.permissionDas.getList("allOptions").pipe((0,l.U)(t=>wt({permissions:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(Zt({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(a.eX),S.LFG(Ci),S.LFG(F.X))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})(),Li=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({providers:[],imports:[[o.Aw.forFeature("domain-permission-options",Tt),a.sQ.forFeature([Ti])]]}),t})();var Oi=i(62439);let Ni=(()=>{class t extends Z.Z{constructor(t){super(t,"NotificationTypes")}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mi=(()=>{class t{constructor(t,e,i){this.actions$=t,this.notificationTypeDas=e,this.biaMessageService=i,this.loadAll$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(ut),(0,c.w)(()=>this.notificationTypeDas.getList("allOptions").pipe((0,l.U)(t=>dt({notificationTypes:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(pt({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(a.eX),S.LFG(Ni),S.LFG(F.X))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})(),qi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[o.Aw.forFeature("domain-notification-type-options",mt),a.sQ.forFeature([Mi])]]}),t})();function Ii(t,e){if(1&t&&(S.TgZ(0,"div",7),S.TgZ(1,"div"),S.TgZ(2,"b"),S._uU(3),S.ALo(4,"translate"),S.qZA(),S._UZ(5,"br"),S._uU(6),S.ALo(7,"translate"),S.qZA(),S.TgZ(8,"div"),S.TgZ(9,"b"),S._uU(10),S.ALo(11,"translate"),S.qZA(),S._UZ(12,"br"),S._uU(13),S.ALo(14,"translate"),S.qZA(),S.TgZ(15,"div"),S.TgZ(16,"b"),S._uU(17),S.ALo(18,"translate"),S.qZA(),S._UZ(19,"br"),S._uU(20),S.ALo(21,"date"),S.qZA(),S.TgZ(22,"div"),S.TgZ(23,"b"),S._uU(24),S.ALo(25,"translate"),S.qZA(),S._UZ(26,"br"),S._uU(27),S.qZA(),S.qZA()),2&t){const t=S.oxw().ngIf;S.xp6(3),S.Oqu(S.lcZ(4,8,"notification.title")),S.xp6(3),S.Oqu(S.lcZ(7,10,t.titleTranslated)),S.xp6(4),S.Oqu(S.lcZ(11,12,"notification.description")),S.xp6(3),S.hij("",S.lcZ(14,14,t.descriptionTranslated)," "),S.xp6(4),S.Oqu(S.lcZ(18,16,"notification.createdDate")),S.xp6(3),S.Oqu(S.xi3(21,18,t.createdDate,"short")),S.xp6(4),S.Oqu(S.lcZ(25,21,"notification.type.title")),S.xp6(3),S.Oqu(t.type.display)}}function Ji(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"button",8),S.NdJ("click",function(){S.CHM(t);const e=S.oxw().ngIf;return S.oxw().onAction(e)}),S.ALo(1,"translate"),S.qZA()}2&t&&S.s9C("label",S.lcZ(1,1,"notification.action"))}function Di(t,e){if(1&t){const t=S.EpF();S.TgZ(0,"button",6),S.NdJ("click",function(){return S.CHM(t),S.oxw(2).onEdit()}),S.ALo(1,"translate"),S.qZA()}2&t&&S.s9C("label",S.lcZ(1,1,"bia.edit"))}function Qi(t,e){if(1&t){const t=S.EpF();S.ynx(0),S.YNc(1,Ii,28,23,"div",2),S.TgZ(2,"div",3),S.YNc(3,Ji,2,3,"button",4),S.YNc(4,Di,2,3,"button",5),S.TgZ(5,"button",6),S.NdJ("click",function(){return S.CHM(t),S.oxw().onCancelled()}),S.ALo(6,"translate"),S.qZA(),S.qZA(),S.BQk()}if(2&t){const t=e.ngIf,i=S.oxw();S.xp6(1),S.Q6J("ngIf",t&&t.id),S.xp6(2),S.Q6J("ngIf",i.canAction(t)),S.xp6(1),S.Q6J("ngIf",i.canEdit),S.xp6(1),S.s9C("label",S.lcZ(6,4,"bia.cancel"))}}function $i(t,e){1&t&&S._UZ(0,"bia-spinner",9),2&t&&S.Q6J("overlay",!0)}let Ui=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.router=e,this.activatedRoute=i,this.authService=n,this.notificationService=o,this.displayChange=new S.vpe,this.sub=new P.w}ngOnInit(){this.notification$=this.notificationService.notification$,this.canEdit=this.authService.hasPermission(z.y.Notification_Update)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch(m({notification:t})),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onCancelled(){this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}onEdit(){this.router.navigate(["../edit"],{relativeTo:this.activatedRoute})}canAction(t){if(t.jData){const e=JSON.parse(t.jData);if(null==e?void 0:e.route)return!0}return!1}onAction(t){if(t.jData){const e=JSON.parse(t.jData);(null==e?void 0:e.route)&&this.router.navigate(e.route)}}}return t.\u0275fac=function(e){return new(e||t)(S.Y36(o.yh),S.Y36(n.F0),S.Y36(n.gz),S.Y36(H.e),S.Y36(gi))},t.\u0275cmp=S.Xpm({type:t,selectors:[["app-notification-detail"]],outputs:{displayChange:"displayChange"},decls:4,vars:6,consts:[[4,"ngIf"],[3,"overlay",4,"ngIf"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly",4,"ngIf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","button","class","p-button-primary",3,"label","click",4,"ngIf"],["pButton","","type","button","class","p-button-secondary",3,"label","click",4,"ngIf"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"],["fxLayout","column","fxLayoutWrap","","fxLayoutAlign","space-evenly"],["pButton","","type","button",1,"p-button-primary",3,"label","click"],[3,"overlay"]],template:function(t,e){1&t&&(S.YNc(0,Qi,7,6,"ng-container",0),S.ALo(1,"async"),S.YNc(2,$i,1,1,"bia-spinner",1),S.ALo(3,"async")),2&t&&(S.Q6J("ngIf",S.lcZ(1,2,e.notification$)),S.xp6(2),S.Q6J("ngIf",S.lcZ(3,4,e.loading$)))},directives:[Yt.O5,Qt.xw,Qt.SQ,Qt.Wh,si.Hq,mi.O],pipes:[Yt.Ov,Dt.X$,Yt.uU],styles:[""]}),t})(),Yi=(()=>{class t extends Z.Z{constructor(t){super(t,"Languages")}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(S.zs3))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fi=(()=>{class t{constructor(t,e,i){this.actions$=t,this.languageDas=e,this.biaMessageService=i,this.loadAll$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(tt),(0,c.w)(()=>this.languageDas.getList("allOptions").pipe((0,l.U)(t=>et({languages:t})),(0,u.K)(t=>(this.biaMessageService.showError(),(0,s.of)(it({error:t}))))))))}}return t.\u0275fac=function(e){return new(e||t)(S.LFG(a.eX),S.LFG(Yi),S.LFG(F.X))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t})(),ki=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[o.Aw.forFeature("domain-language-options",st),a.sQ.forFeature([Fi])]]}),t})();const Pi=[{path:"",data:{breadcrumb:null,permission:z.y.Notification_List_Access,InjectComponent:ei},component:Ai.e,canActivate:[vi.n],children:[{path:"create",data:{breadcrumb:"bia.add",canNavigate:!1,permission:z.y.Notification_Create,title:"notification.add",InjectComponent:hi},component:Si._,canActivate:[vi.n]},{path:":notificationId",data:{breadcrumb:"",canNavigate:!0},component:Zi,canActivate:[vi.n],children:[{path:"edit",data:{breadcrumb:"bia.edit",canNavigate:!0,permission:z.y.Notification_Update,title:"notification.edit",InjectComponent:bi},component:Ai.e,canActivate:[vi.n]},{path:"detail",data:{breadcrumb:"bia.detail",canNavigate:!0,permission:z.y.Notification_Read,title:"notification.detail",InjectComponent:Ui},component:Si._,canActivate:[vi.n]},{path:"",redirectTo:"edit"}]}]},{path:"**",redirectTo:""}];let Ei=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[ii.m,Ft.UX,n.Bz.forChild(Pi),o.Aw.forFeature("notifications",N),a.sQ.forFeature([k]),Li,qi,Oi.U,ki]]}),t})()},94529:function(t,e,i){"use strict";i.d(e,{b:function(){return n}});class n{constructor(t,e){this.key=t,this.value=e}}},16244:function(t,e,i){"use strict";i.d(e,{e:function(){return n}});var n=(()=>{return(t=n||(n={}))[t.Unchanged=0]="Unchanged",t[t.Added=1]="Added",t[t.Modified=2]="Modified",t[t.Deleted=3]="Deleted",n;var t})()}}]);